[{"uri":"http://localhost:1313/posts/esp32-rc%EC%B9%B4/","title":"ESP32, RC카","content":"<h3 id=\"샤시-조립\">샤시 조립<a class=\"anchor\" href=\"#%ec%83%a4%ec%8b%9c-%ec%a1%b0%eb%a6%bd\">#</a></h3>\r\n<h4 id=\"샤시-부품\">샤시 부품<a class=\"anchor\" href=\"#%ec%83%a4%ec%8b%9c-%eb%b6%80%ed%92%88\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th style=\"text-align: center\">번호</th>\n          <th style=\"text-align: center\">부품</th>\n          <th style=\"text-align: center\">사진</th>\n          <th style=\"text-align: center\">수량</th>\n          <th style=\"text-align: center\">용도 및 참고사항</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\">전륜 회전축</td>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-14.png\">\n</figure>\n</td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\">베어링(대)</td>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-18.png\">\n</figure>\n</td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">3</td>\n          <td style=\"text-align: center\">스티어링 컵</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-08.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">4</td>\n          <td style=\"text-align: center\">커플러 고정핀</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-16.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">5</td>\n          <td style=\"text-align: center\">베어링(중)</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-19.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">6</td>\n          <td style=\"text-align: center\">(전륜) 육각 커플러</td>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-15.png\" width=\"80%\">\n</figure>\n</td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">7</td>\n          <td style=\"text-align: center\">휠</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-01.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">4</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">8</td>\n          <td style=\"text-align: center\">나이록 너트(M4)</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-22.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">9</td>\n          <td style=\"text-align: center\">십자형 육각 복스</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-17.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">10</td>\n          <td style=\"text-align: center\">볼 조인트 커넥팅 로드</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-09.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\">홀 간격 80.5mm 유지</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">11</td>\n          <td style=\"text-align: center\">볼 조인트 커넥팅 로드</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-35.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\">홀 간격 51mm 유지</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">12</td>\n          <td style=\"text-align: center\">서보모터<br>MG996R</td>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-54.png\">\n</figure>\n</td>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">13</td>\n          <td style=\"text-align: center\">ㄴ자 서보모터 브라켓</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-11.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">14</td>\n          <td style=\"text-align: center\">휠 베이스 고정판</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-12.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">15</td>\n          <td style=\"text-align: center\">서보 혼</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-25.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\">(볼트 포함)</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">16</td>\n          <td style=\"text-align: center\">나이록 너트<br>(M2.5)</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-23.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">17</td>\n          <td style=\"text-align: center\">샤시 하판</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-03.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">18</td>\n          <td style=\"text-align: center\">DC엔코더 모터 &amp; 커넥터</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-04.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">19</td>\n          <td style=\"text-align: center\">모터 브라켓</td>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-07.png\" width=\"67%\">\n</figure>\n</td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">20</td>\n          <td style=\"text-align: center\">샤프트</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-10.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">21</td>\n          <td style=\"text-align: center\">써클립</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-24.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">22</td>\n          <td style=\"text-align: center\">샤프트 베어링</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-21.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">4</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">23</td>\n          <td style=\"text-align: center\">기어<br>(무두볼트(Set Screw) 포함)</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-05.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">24</td>\n          <td style=\"text-align: center\">육각 샤프트 커플링 커넥터</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-06.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">25</td>\n          <td style=\"text-align: center\">범퍼</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-02.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">26</td>\n          <td style=\"text-align: center\">샤시 상판</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-34.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">27</td>\n          <td style=\"text-align: center\">락스위치</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-20.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">28</td>\n          <td style=\"text-align: center\">황동 육각 스터드<br>(M3×22mm)</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-26.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">6</td>\n          <td style=\"text-align: center\">휠 베이스 고정용 4개, 상판 고정용 2개</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">29</td>\n          <td style=\"text-align: center\">황동 육각 스터드<br/>(M3×16mm)</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-27.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\">범퍼 고정용 2개</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">30</td>\n          <td style=\"text-align: center\">볼트<br/>(Pan head, M4×6mm)</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-32.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">6</td>\n          <td style=\"text-align: center\">모터 브라켓과 샤시 하판 고정용 6개</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">31</td>\n          <td style=\"text-align: center\">볼트<br>(Bind-Washer head, M3×6mm)</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-28.png\" alt=\"\" />  <img src=\"/image/r/ESP32-RC-Car-28.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">10</td>\n          <td style=\"text-align: center\">서보모터와 서보모터 브라켓 고정용 4개, 서보모터 브라켓과 샤시하판 고정용 4개, 범퍼 고정용 2개</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">32</td>\n          <td style=\"text-align: center\">볼트<br>(Bind head, M3×8mm)</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-30.png\" alt=\"`\" /><img src=\"/image/r/ESP32-RC-Car-30.png\" alt=\"\" /><img src=\"/image/r/ESP32-RC-Car-30.png\" alt=\"\" /><img src=\"/image/r/ESP32-RC-Car-30.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">14</td>\n          <td style=\"text-align: center\">육각 스터드 고정용 12개, 범퍼 고정용 2개</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">33</td>\n          <td style=\"text-align: center\">볼트<br/>(Pan head, M2.5×10mm)</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-29.png\" alt=\"\" />  <img src=\"/image/r/ESP32-RC-Car-29.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">7</td>\n          <td style=\"text-align: center\">커넥팅 로드 연결용 3개, 휠 베이스 연결용 4개</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">34</td>\n          <td style=\"text-align: center\">볼트<br>(Flat head, M2.5×5mm)</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-31.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">4</td>\n          <td style=\"text-align: center\">모터와 모터브라켓 고정</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">35</td>\n          <td style=\"text-align: center\">육각렌치</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-33.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">1</td>\n          <td style=\"text-align: center\">기어 무두볼트용</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">36</td>\n          <td style=\"text-align: center\">저항<br>1K or 5.1K</td>\n          <td style=\"text-align: center\"><img src=\"/image/r/ESP32-RC-Car-13.png\" alt=\"\" /></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\">(선택사항) 인코더 풀업저항</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">37</td>\n          <td style=\"text-align: center\">홀센서 칩<br>SH41F(SOT-23타입)</td>\n          <td style=\"text-align: center\"></td>\n          <td style=\"text-align: center\">2</td>\n          <td style=\"text-align: center\">(선택사항) 홀 센서를 이중채널로 사용할 필요가 있는 경우에, 각 모터마다 1개씩 추가함</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">총</td>\n          <td style=\"text-align: center\">36종</td>\n          <td style=\"text-align: center\"></td>\n          <td style=\"text-align: center\"></td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"전륜-조향-휠-조립\">전륜 조향 휠 조립<a class=\"anchor\" href=\"#%ec%a0%84%eb%a5%9c-%ec%a1%b0%ed%96%a5-%ed%9c%a0-%ec%a1%b0%eb%a6%bd\">#</a></h4>\r\n<p>사진 오른쪽부터 차례대로 8개의 부품을 끼워 휠을 조립한다. (왼쪽휠/오른쪽휠 각각 1개씩, 총 2개 조립)</p>\n<p><img src=\"/image/r/ESP32-RC-Car-36.png\" alt=\"\" /></p>\n<ol>\n<li>먼저 검은색의 스티어링 컵에 큰 베어링을 삽입한다. (상당히 뻑뻑하므로 힘을 강하게 주면서 스티어링컵 안쪽 끝까지 밀어넣어야 한다.)</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-37.png\" alt=\"\" /></p>\n<ol start=\"2\">\n<li>베어링이 장착된 스티어링 컵에 회전축을 끼운다. 이때, 회전축 중앙에 있는 작은 구멍이 (고정쇠를 끼울 수 있도록) 보여야 하며, 만약 구멍이 보이지 않으면, 이전 과정에서 베어링을 더 밀어넣어 스티어링 컵에 완전히 밀착시켜야 한다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-38.png\" alt=\"\" />   <img src=\"/image/r/ESP32-RC-Car-39.png\" alt=\"\" /></p>\n<ol start=\"3\">\n<li>회전축이 나온 스티어링컵 밑바닥에 중간 크기의 베어링을 끼운다. 역시 뻑뻑하므로 강한 힘을 주어 밀어넣어야 한다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-40.png\" alt=\"\" /></p>\n<ol start=\"4\">\n<li>회전축 중앙의 작은 구멍에 커플러 고정핀를 끼워 넣는다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-41.png\" alt=\"\" /></p>\n<ol start=\"5\">\n<li>커플러 고정핀 끼워 넣는 홈이 파인 육각 커플러를 준비한 뒤, 커플러 고정핀이 꼽혀있는 방향을 고려하여 스티어링컵에 끼운다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-42.png\" alt=\"\" />   <img src=\"/image/r/ESP32-RC-Car-43.png\" alt=\"\" /></p>\n<ol start=\"6\">\n<li>스티어링컵에 끼운 육각 커플러를, 휠의 안쪽에 끼워 넣으면(이때, 육각 커플러가 휠의 육각 홈 안쪽까지 완전히 밀착되도록 강한 힘을 가하면서 끼운다.) 휠 바깥쪽면에 회전축의 나사산이 나온다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-44.png\" alt=\"\" />  <img src=\"/image/r/ESP32-RC-Car-45.png\" alt=\"\" /></p>\n<ol start=\"7\">\n<li>바퀴 바깥쪽으로 빠져나온 회전축 나사를 나이록 너트(M4)를 끼워 고정한다. (십자형 육각 복스로 나이록 너트를 돌릴때 &lsquo;딱딱&rsquo;하는 소리가 몇번 날때까지 돌리면 고정이 된다.)</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-46.png\" alt=\"\" /></p>\n<ol start=\"8\">\n<li>동일한 방법으로 하나를 더 만들어 2개의 휠을 완성한다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-47.png\" alt=\"\" /></p>\n<ol start=\"9\">\n<li>짧은 커넥팅 로드 1개와 긴 커넥팅 로드 1개, M2.5*10mm 나사(Pan head) 3개를 준비한 뒤,</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-48.png\" alt=\"\" /></p>\n<ol start=\"10\">\n<li><strong>오른쪽 휠 컵</strong> 암(Arm)에 있는 구멍 2개 중, 끝부분의 구멍(빨간색으로 표시된 부분)에</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-51.png\" alt=\"\" /></p>\n<ol start=\"11\">\n<li>준비한 볼트(M2.5*10mm (Pan head)) 1개를 이용하여 긴 커넥팅 로드를 고정한다. 이때, 볼트의 끝 부분을 <strong>구멍 아래쪽에서 윗쪽으로</strong> 넣듯이 하여 고정한다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-49.png\" alt=\"\" /></p>\n<p>\u200b\t\t또한, <strong>볼트의 끝부분이 반대편 구멍 바깥쪽으로 튀어나오지 않도록</strong> 조임의 정도를 조절한다.</p>\n<p><img src=\"/image/r/ESP32-RC-Car-50.png\" alt=\"\" />   <img src=\"/image/r/ESP32-RC-Car-66.png\" alt=\"\" /></p>\n<ol start=\"12\">\n<li>\n<p>같은 방법으로 <strong>왼쪽 휠 컵</strong>의 구멍에 긴 커넥팅 로드의 반대편을 고정한다. (이때, 볼트의 끝부분이 반대편 구멍 바깥쪽으로 튀어나오지 않도록 조임의 정도를 조절한다. )</p>\n</li>\n<li>\n<p><strong>오른쪽 휠 컵</strong>의 구멍 2개 중, 파란색으로 표시된 부분에는 동일한 볼트를 사용하여 짧은 커넥팅 로드를 연결한다. (이때, 볼트의 끝부분이 반대편 구멍 바깥쪽으로 튀어나오지 않도록 조임의 정도를 조절한다. )</p>\n</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-52.png\" alt=\"\" /></p>\n<ol start=\"14\">\n<li>전륜 휠 베이스 완성된 모습</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-53.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"조향-서보모터-조립\">조향 서보모터 조립<a class=\"anchor\" href=\"#%ec%a1%b0%ed%96%a5-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-%ec%a1%b0%eb%a6%bd\">#</a></h4>\r\n<ol>\n<li>MG996R 서보모터를 준비한 후,</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-54.png\" alt=\"\" /></p>\n<ol start=\"2\">\n<li>\n<p>아래 회로도와 스케치를 참고하여, 서보모터의 초기 위치를 90도 위치로 회전시켜 둔다.</p>\n<ul>\n<li>\n<p>schematic</p>\n<p><img src=\"/image/SG90.png\" alt=\"\" /></p>\n<table>\n  <thead>\n      <tr>\n          <th>MG996R</th>\n          <th>갈색</th>\n          <th>빨간색</th>\n          <th>주황색</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>ESP32</td>\n          <td>GND</td>\n          <td>5V</td>\n          <td>GPIO 15</td>\n      </tr>\n  </tbody>\n</table>\n</li>\n<li>\n<p>sketch</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c++\" data-lang=\"c++\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">15</span>;  <span style=\"color:#75715e\">// corresponds to GPIO 15\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// setting PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledChannel <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> freq <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">50</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> resolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">16</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// PWM Setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcSetup(ledChannel, freq, resolution);  <span style=\"color:#75715e\">// PWM CH0, Frequncy 50 Hz, 16bit resolution\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcAttachPin(ledPin, ledChannel);        <span style=\"color:#75715e\">// PWM CH0을 GPIO 15번으로 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  ledcWrite(ledChannel, <span style=\"color:#ae81ff\">4910</span>);              <span style=\"color:#75715e\">// 1638 ~ 8192 (90degree = 4910)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">500</span>);  \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div></li>\n</ul>\n</li>\n<li>\n<p>ㄴ자 서보모터 브라켓, 브라켓 고정용 볼트(Pan-Washer head, M3×6mm) 8개, 서보 혼(고정용 볼트 1개 포함)를 준비한다.</p>\n</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-55.png\" alt=\"\" />   <img src=\"/image/r/ESP32-RC-Car-56.png\" alt=\"\" /></p>\n<ol start=\"4\">\n<li>와셔볼트 4개를 사용하여 ㄴ자 브라켓을 고정하고, 서버 혼도 고정용 볼트를 사용하여 장착한다. (<strong>아래 사진을 잘 보면서 MG996R 스티커의 글씨 방향, ㄴ자 브라켓이 고정된 방향, 서보 혼 방향(현재 사진에 보이는 서보 날개의 위치가 90도가 됨)에 유의하여 장착한다.</strong>)</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-57.png\" alt=\"\" /></p>\n<ol start=\"5\">\n<li>샤시 하판에 와셔볼트 4개를 사용하여 서보모터를 고정한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-58.png\" width=\"80%\">\n</figure>\n\n<p><img src=\"/image/r/ESP32-RC-Car-59.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"샤시-하판에-휠-베이스-고정하기\">샤시 하판에 휠 베이스 고정하기<a class=\"anchor\" href=\"#%ec%83%a4%ec%8b%9c-%ed%95%98%ed%8c%90%ec%97%90-%ed%9c%a0-%eb%b2%a0%ec%9d%b4%ec%8a%a4-%ea%b3%a0%ec%a0%95%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>준비물: 서보모터가 고정된 샤시 하판, 황동 육각 스터드 M3×22mm 4개, 볼트 M3*8mm 8개, M2.5×10mm 4개, 부채꼴 모양의 휠 베이스 고정판 2개</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-60.png\" alt=\"\" /></p>\n<ol start=\"2\">\n<li>(위 1번 사진의) 빨간색으로 표시된 부분에 육각 스터드 4개를 고정한다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-61.png\" alt=\"\" /></p>\n<ol start=\"3\">\n<li>(위 1번 사진의) 파란색으로 표시된 부분의 구멍에는, 다음 그림과 같이 긴 커넥팅 로드가 붙어있는 쪽의 휠 컵 구멍(아래 사진에서 파란색으로 표시된 부분)을 맞추어 볼트(M2.5×10mm)로 고정시킨다. (이때, 양쪽 휠 컵의 암(Arm) 부분이 차량 전면을 향하도록 한 상태에서 연결해야 한다.)</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-62.png\" alt=\"\" /></p>\n<ol start=\"4\">\n<li>고정이 완료된 상태에서 밑면을 보면 다음과 같으며,</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-63.png\" alt=\"\" /></p>\n<p>\u200b\t\t위에서 바라본 모습은 다음과 같다.</p>\n<p><img src=\"/image/r/ESP32-RC-Car-64.png\" alt=\"\" /></p>\n<ol start=\"5\">\n<li>\n<p>(파란색 원으로 표시된 부분) 부채꼴 모양의 휠 베이스 고정판을 양쪽 휠에 있는 육각 스터드와 스티어링 컵의 구멍에 고정한다. (볼트 M3×8mm 8개, M2.5×10mm 4개 사용)</p>\n<p>(빨간색 원으로 표시된 부분) M2.5*10mm 나사와 나이록 너트(M2.5)를 사용하여, 짧은 커넥팅 로드를 서보 혼에 고정한다. 이때, 십자형 육각 복스로 나이록 너트를 돌릴때 &lsquo;딱딱&rsquo;하는 소리가 몇번 날때까지 돌리면 고정이 된다.)</p>\n</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-65.png\" alt=\"\" /></p>\n<p>\u200b\t\t아래 사진은 완성된 전륜 조향 휠 부분을 정면에서 바라본 모습이다.</p>\n<p><img src=\"/image/r/ESP32-RC-Car-67.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"후륜-모터-파트-조립\">후륜 모터 파트 조립<a class=\"anchor\" href=\"#%ed%9b%84%eb%a5%9c-%eb%aa%a8%ed%84%b0-%ed%8c%8c%ed%8a%b8-%ec%a1%b0%eb%a6%bd\">#</a></h4>\r\n<ol>\n<li>\n<p>25GA370 엔코더 모터에 모터 커넥터를 끼우고, 볼트 (Flat head, M2.5×5mm) 2개를 사용하여 모터 브라켓를 고정한다.</p>\n<p><img src=\"/image/r/ESP32-RC-Car-68.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>베어링 2개, 샤프트, 써클립, 기어, 육각 샤프트 커플링 커넥터, 써클립(Circlip)을 준비한다.</p>\n</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-69.png\">\n</figure>\n\n<ol start=\"3\">\n<li>샤프트 끝부분에 있는 홈에 써클립을 끼운다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-70.png\" alt=\"\" />   <img src=\"/image/r/ESP32-RC-Car-71.png\" alt=\"\" /></p>\n<ol start=\"4\">\n<li>모터 브라켓 양쪽 끝에 있는 구멍에 베어링을 끼우고, 써클립을 끼운 샤프트를 밀어넣는다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-72.png\">\n</figure>\n\n<p>\u200b\t\t샤프트를 끼운 후, 모터를 앞쪽과 뒷쪽에서 보았을때의 모습</p>\n<p><img src=\"/image/r/ESP32-RC-Car-74.png\" alt=\"\" />  <img src=\"/image/r/ESP32-RC-Car-73.png\" alt=\"\" /></p>\n<ol start=\"5\">\n<li>모터에 부착되어 있는 작은 황동 기어에 흰색 플라스틱으로 된 기어가 맞물려지도록 샤프트에 끼우고, 기어 측면에 있는 작은 무두볼트(Set Screw) 2개를 육각렌치를 사용하여 적절하게 분배하여 조여준다. 이때 <strong>한쪽 무두볼트만 조여서 고정하면 기어에서 무두볼트가 빠지거나 고정이 되지 않을 수 있다.</strong> 이를 고려하여 양쪽의 나사를 적절히 분배하여 조이도록 한다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-75.png\" alt=\"\" />   <img src=\"/image/r/ESP32-RC-Car-76.png\" alt=\"\" /></p>\n<ol start=\"6\">\n<li>육각 샤프트 커플링 커넥터를 준비하여 샤프트에 끼운 후, 커넥터 측면의 볼트를 돌려 고정한다. 이때, 고정하는 볼트의 끝부분이 샤프트의 편평한 면에 닿도록 조여준다.</li>\n</ol>\n<p><figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-77.png\" width=\"80%\">\n</figure>\n   <figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-78.png\" width=\"80%\">\n   </figure>\n</p>\n<ol start=\"7\">\n<li>\n<p>같은 방법으로 후면 왼쪽 모터도 조립한다.</p>\n</li>\n<li>\n<p>샤시 하판 뒷편 양쪽에 있는 삼각형 형태로 위치한 구멍에, 모터 브라켓을 올려놓고 볼트(Pan head, M4×6mm)를 사용하여 고정한다.</p>\n</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-79.png\" alt=\"\" /></p>\n<p>\u200b\t\t오른쪽 모터를 샤시 후면에 고정한 모습이다. 같은 방법으로 왼쪽 후면 모터도 고정한다.</p>\n<p><img src=\"/image/r/ESP32-RC-Car-80.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"범퍼-조립\">범퍼 조립<a class=\"anchor\" href=\"#%eb%b2%94%ed%8d%bc-%ec%a1%b0%eb%a6%bd\">#</a></h4>\r\n<ol>\n<li>육각 스터드(M3×16mm) 2개와 볼트 (Bind-Washer head, M3×6mm) 4개 준비</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-81.png\" alt=\"\" /></p>\n<ol start=\"2\">\n<li>준비된 육각 스터드를 샤시 하판의 맨 앞쪽에 고정한다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-82.png\" alt=\"\" /></p>\n<ol start=\"3\">\n<li>범퍼를 육각기둥에 끼운 후, 와셔볼트를 사용하여 고정한다.</li>\n</ol>\n<p><figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-83.png\" width=\"80%\">\n </figure>\n   <figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-84.png\" width=\"80%\">\n   </figure>\n</p>\n<br>\n<h4 id=\"샤시-상판-고정\">샤시 상판 고정<a class=\"anchor\" href=\"#%ec%83%a4%ec%8b%9c-%ec%83%81%ed%8c%90-%ea%b3%a0%ec%a0%95\">#</a></h4>\r\n<ol>\n<li>육각 스터드(M3×22mm) 2개를 서보모터와 DC엔코더모터 사이에 있는 구멍에 볼트(M3.0×8mm)로 고정한다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-85.png\" alt=\"\" /></p>\n<p>\u200b\t\t육각 스터드를 고정한 모습이다.</p>\n<p><img src=\"/image/r/ESP32-RC-Car-86.png\" alt=\"\" /></p>\n<ol start=\"2\">\n<li>샤시 상판의 보호필름을 떼어내고, 육각 스터드 홀에 맟춰 올린 뒤,</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-87.png\" alt=\"\" /></p>\n<ol start=\"3\">\n<li>볼트(Bind head, M3.0×8mm) 2개를 사용하여 상판을 고정한다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-88.png\" alt=\"\" /></p>\n<p>\u200b\t\t상판의 오른쪽 하단에 락스위치를 꼽아 고정한 뒤에, 배터리의 (+)라인에 직렬로 배선할 수 있도록 준비한다.</p>\n<br>\n<h4 id=\"후륜-휠-장착\">후륜 휠 장착<a class=\"anchor\" href=\"#%ed%9b%84%eb%a5%9c-%ed%9c%a0-%ec%9e%a5%ec%b0%a9\">#</a></h4>\r\n<ol>\n<li>육각 휠 너트 앞쪽에 있던 나사를 풀러낸 뒤,</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-89.png\" alt=\"\" /></p>\n<ol start=\"2\">\n<li>바퀴를 끼우고, 풀러냈던 나사로 다시 고정한다.</li>\n</ol>\n<p><img src=\"/image/r/ESP32-RC-Car-90.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"샤시-완성\">샤시 완성<a class=\"anchor\" href=\"#%ec%83%a4%ec%8b%9c-%ec%99%84%ec%84%b1\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-91.png\">\n</figure>\n\n<figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-92.png\" width=\"50%\">\n</figure>\n\n<figure class=\"center\"><img src=\"/image/r/ESP32-RC-Car-93.png\" width=\"50%\">\n</figure>\n\n<br>\n<br>\n<h3 id=\"esp32-parts\">ESP32 Parts<a class=\"anchor\" href=\"#esp32-parts\">#</a></h3>\r\n<p>완성된 샤시의 상판과 하판을 이용하여 ESP32, 브레드보드, 모터드라이버, 배터리, 전원모듈 등을 장작한다.</p>\n<br>\n<h4 id=\"for-rc-car-esp32--nrf24l01--tb6612fng--25ga370--mg996r\">for RC Car (ESP32 + nRF24L01 + TB6612FNG + 25GA370 + MG996R)<a class=\"anchor\" href=\"#for-rc-car-esp32--nrf24l01--tb6612fng--25ga370--mg996r\">#</a></h4>\r\n<h5 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h5>\r\n<p>RC Car에 장착하는 ESP32에 업로드</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">struct</span> <span style=\"color:#a6e22e\">Value</span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_x;   <span style=\"color:#75715e\">// servo motor pwm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">uint16_t</span> value_y;   <span style=\"color:#75715e\">// DC motor pwm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Value data;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;     <span style=\"color:#75715e\">// servo initial position (0~180)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> velo_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;       <span style=\"color:#75715e\">// DC motor inital velocity\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> direction_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;  <span style=\"color:#75715e\">// DC motor direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;            <span style=\"color:#75715e\">// joystick center position calculation counter\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> center_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;     <span style=\"color:#75715e\">// joystick initial center_x \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> center_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;     <span style=\"color:#75715e\">// joystick initial center_y\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> ref_xl, ref_xr, ref_ya, ref_yb;    <span style=\"color:#75715e\">// Servo &amp; DC rotation reference value from center position value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//servo setting\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_SERVO <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">15</span>;             <span style=\"color:#75715e\">// servo pwm pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> CH_SERVO <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;               <span style=\"color:#75715e\">// servo pwm channel\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> servoFrequency <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">50</span>;        <span style=\"color:#75715e\">// servo pwm frequency (Hz)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> servoResolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">16</span>;       <span style=\"color:#75715e\">// servo pwm resolution (bit) (12bit: 0~4095)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// RecvTime\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> lastRecvTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">centerData</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>(i <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">100</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(radio.available()){\n</span></span><span style=\"display:flex;\"><span>      radio.read(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>      center_x <span style=\"color:#f92672\">=</span> center_x <span style=\"color:#f92672\">+</span> data.value_x;\n</span></span><span style=\"display:flex;\"><span>      center_y <span style=\"color:#f92672\">=</span> center_y <span style=\"color:#f92672\">+</span> data.value_y;\n</span></span><span style=\"display:flex;\"><span>      i<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  center_x <span style=\"color:#f92672\">=</span> center_x <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">100</span>;         <span style=\"color:#75715e\">// x축 조이스틱 센터값 (평균)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  center_y <span style=\"color:#f92672\">=</span> center_y <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">100</span>;         <span style=\"color:#75715e\">// y축 조이스틱 센터값 (평균)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  ref_xl <span style=\"color:#f92672\">=</span> center_x <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;             <span style=\"color:#75715e\">// 좌회전 동작 기준값\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ref_xr <span style=\"color:#f92672\">=</span> (<span style=\"color:#ae81ff\">4095</span> <span style=\"color:#f92672\">+</span> center_x) <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;    <span style=\"color:#75715e\">// 우회전 동작 기준값\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ref_ya <span style=\"color:#f92672\">=</span> (<span style=\"color:#ae81ff\">4095</span> <span style=\"color:#f92672\">+</span> center_y) <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;    <span style=\"color:#75715e\">// accelator 동작 기준값\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ref_yb <span style=\"color:#f92672\">=</span> center_y <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;             <span style=\"color:#75715e\">// brake 동작 기준값\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">recvData</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>(radio.available()){\n</span></span><span style=\"display:flex;\"><span>    radio.read(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>    lastRecvTime <span style=\"color:#f92672\">=</span> millis();  \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// TB6612FNG right side &amp; ESP32-WROOM-32D DEVKIT_C V4 left side pin order\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_PWMA = 32;  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_INA1 = 33;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_INA2 = 25;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_STBY = 26;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_INB1 = 27;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_INB2 = 14;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_PWMB = 12;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// TB6612FNG right side &amp; ESP32-WROOM-32 left side pin order\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_PWMA <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">33</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_AIN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_AIN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">26</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_STBY <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">27</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_BIN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">14</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_BIN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">12</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_PWMB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">13</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// channel setting (GPIO pin, channel)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// if STBY(CH0) = LOW, Standby states.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// if STBY(CH0) = HIGH, and INA1&amp;INA2 have different value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// and PWMA has some value, CW or CCW rotation is made.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Channel      CW   CCW  Stanby Stop Brake1 Brake2 Brake3\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// PIN_STBY (0) HIGH HIGH LOW    HIGH  HIGH  HIGH   HIGH\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// PIN_INA1 (1) HIGH LOW  *      LOW   HIGH  LOW    HIGH\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// PIN_INA2 (2) LOW  HIGH *      LOW   HIGH  HIGH   LOW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// CH_PWMA  (3) PWM  PWM  *      HIGH  *     LOW    LOW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// PWM Channel setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> CH_PWMA <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> CH_PWMB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// PWM frequency and bit resolution setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> pwmFrequency <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10000</span>;  <span style=\"color:#75715e\">// Hz\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> bitResolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;     <span style=\"color:#75715e\">// pwm value: 0~255\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// led setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_LED <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> ledstate;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// put your setup code here, to run once:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  radio.begin();\n</span></span><span style=\"display:flex;\"><span>  radio.openReadingPipe(<span style=\"color:#ae81ff\">1</span>, address);\n</span></span><span style=\"display:flex;\"><span>  radio.setPALevel(RF24_PA_LOW);\n</span></span><span style=\"display:flex;\"><span>  radio.startListening();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Servo PWM Setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcSetup(CH_SERVO, servoFrequency, servoResolution);  <span style=\"color:#75715e\">// PWM CH2, Frequncy 50 Hz, 12bit resolution\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcAttachPin(PIN_SERVO, CH_SERVO);                    <span style=\"color:#75715e\">// PWM CH2을 GPIO 15번으로 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// center value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  centerData();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_LED, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// tb6612fng setting\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  pinMode(PIN_STBY, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_AIN1, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_AIN2, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_PWMA, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_BIN1, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_BIN2, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_PWMB, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// motor output(PWM) setting (channel, frequency, bit)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcSetup(CH_PWMA, pwmFrequency, bitResolution);\n</span></span><span style=\"display:flex;\"><span>  ledcSetup(CH_PWMB, pwmFrequency, bitResolution);\n</span></span><span style=\"display:flex;\"><span>  ledcAttachPin(PIN_PWMA, CH_PWMA);\n</span></span><span style=\"display:flex;\"><span>  ledcAttachPin(PIN_PWMB, CH_PWMB);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  ledstate <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> now <span style=\"color:#f92672\">=</span> millis();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>( now <span style=\"color:#f92672\">-</span> lastRecvTime <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">5</span>){    <span style=\"color:#75715e\">// 5ms 마다 서보출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    recvData();\n</span></span><span style=\"display:flex;\"><span>    rotate_xy();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    move(<span style=\"color:#ae81ff\">1</span>, velo_y, direction_y);               <span style=\"color:#75715e\">// motor A(right wheels), velo_y speed, moving direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    move(<span style=\"color:#ae81ff\">2</span>, velo_y, direction_y);               <span style=\"color:#75715e\">// motor B(left wheels), velo_y speed, moving direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(ledstate <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>      digitalWrite(PIN_LED, HIGH);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      digitalWrite(PIN_LED, LOW);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#66d9ef\">int</span> motor, <span style=\"color:#66d9ef\">int</span> speed, <span style=\"color:#66d9ef\">int</span> direction) {   <span style=\"color:#75715e\">//Move specific motor at speed and direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//motor: A(Right) -&gt; 1, B(Left) -&gt; 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//speed: 0 is off, and 255 is full speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//direction: 0 clockwise, 1 counter-clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(PIN_STBY, HIGH);         <span style=\"color:#75715e\">// move\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  boolean inPin1 <span style=\"color:#f92672\">=</span> HIGH;                <span style=\"color:#75715e\">// Defalut(direction=0) - Clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  boolean inPin2 <span style=\"color:#f92672\">=</span> LOW;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(direction <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>) {                  <span style=\"color:#75715e\">// Count-clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    inPin1 <span style=\"color:#f92672\">=</span> LOW;\n</span></span><span style=\"display:flex;\"><span>    inPin2 <span style=\"color:#f92672\">=</span> HIGH;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(motor <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>){                       <span style=\"color:#75715e\">// if motor == 1, right wheel\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    digitalWrite(PIN_AIN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(PIN_AIN2, inPin2);\n</span></span><span style=\"display:flex;\"><span>    ledcWrite(CH_PWMA, speed);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> {                                <span style=\"color:#75715e\">// if motor is not 1, left wheel\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    digitalWrite(PIN_BIN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(PIN_BIN2, inPin2);\n</span></span><span style=\"display:flex;\"><span>    ledcWrite(CH_PWMB, speed);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">stop</span>() {\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(PIN_STBY, LOW);         <span style=\"color:#75715e\">// stand-by = stop\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">rotate_xy</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.print(<span style=\"color:#e6db74\">&#34;x: &#34;</span>); Serial.print(data.value_x);\n</span></span><span style=\"display:flex;\"><span>  Serial.print(<span style=\"color:#e6db74\">&#34;, y: &#34;</span>); Serial.println(data.value_y);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//x축 서보 구동 조건 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span>(data.value_x <span style=\"color:#f92672\">&lt;</span> ref_xl) {     \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(angle_x <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">55</span>) {                 <span style=\"color:#75715e\">// servo 55~125 degree\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      angle_x<span style=\"color:#f92672\">--</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">55</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    ledstate<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(data.value_x <span style=\"color:#f92672\">&gt;</span> ref_xr) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(angle_x <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">125</span>) {\n</span></span><span style=\"display:flex;\"><span>      angle_x<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">125</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    ledstate<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(angle_x <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">90</span>) {\n</span></span><span style=\"display:flex;\"><span>      angle_x<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(angle_x <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">90</span>) {\n</span></span><span style=\"display:flex;\"><span>      angle_x<span style=\"color:#f92672\">--</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//servo_x.write(angle_x);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  servoWrite(CH_SERVO, angle_x);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">5</span>);                    <span style=\"color:#75715e\">// delay를 더 줄이면 서보 모터 기어에 무리가 감\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//y축 DC 구동 조건 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span>(data.value_y <span style=\"color:#f92672\">&gt;</span> ref_ya) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(direction_y <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span>(velo_y <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">255</span>) {\n</span></span><span style=\"display:flex;\"><span>        velo_y<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>        velo_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(direction_y <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span>(velo_y <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>        velo_y<span style=\"color:#f92672\">--</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>        direction_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>        velo_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    ledstate<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(data.value_y <span style=\"color:#f92672\">&lt;</span> ref_yb) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(direction_y <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span>(velo_y <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">255</span>) {\n</span></span><span style=\"display:flex;\"><span>        velo_y<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>        velo_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(direction_y <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span>(velo_y <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>        velo_y<span style=\"color:#f92672\">--</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>        direction_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>;\n</span></span><span style=\"display:flex;\"><span>        velo_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    ledstate<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(velo_y <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>      velo_y<span style=\"color:#f92672\">--</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      velo_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// deg는 0~180도 까지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">servoWrite</span>(<span style=\"color:#66d9ef\">int</span> ch, <span style=\"color:#66d9ef\">int</span> deg)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">int</span> servoPWM <span style=\"color:#f92672\">=</span> map(deg, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>, <span style=\"color:#ae81ff\">2720</span>, <span style=\"color:#ae81ff\">8191</span>);  <span style=\"color:#75715e\">// 16bit (PWM 4.15% ~ 12.5%)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    ledcWrite(ch, servoPWM);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h5>\r\n<p><img src=\"/image/r/ESP32-RC-Car-94.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"16p--4p-jumper-block-사용\">16P &amp; 4P jumper block 사용<a class=\"anchor\" href=\"#16p--4p-jumper-block-%ec%82%ac%ec%9a%a9\">#</a></h5>\r\n<p>RC카를 제작해보면 프레임 조립 후 여러가지 구동을 위한 부품을 넣어야 하는데, 큰 브레드보드를 장착하기에는 공간이 좁아 조립이 어려울 수 있다. 그러므로 브레드보드를 제거하고 16P &amp; 4P의 점퍼 블록을 사용해 RC카에 장착해본다.</p>\n<br>\n<p>16P 점퍼블록과 4P 점퍼블록, 그리고 2개의 와이어핀을 준비한다.</p>\n<p><img src=\"/image/so1.png\" alt=\"\" /></p>\n<br>\n<p>2개의 와이어핀을 4P 점퍼블록의 중앙에 꼽아넣음으로써, 4개의 핀소켓이 모두 연결되어 있는 상태가 되도록 만든다. (1개의 와이어만 넣어도 연결은 되지만, 헐거워 고정이 안되기 때문에 2개를 사용하는 것임)</p>\n<p><img src=\"/image/so2.png\" alt=\"\" /></p>\n<br>\n<p>16P 점퍼블록을 사용하여 ESP32 DevkitC V4 보드와 TB6612FNG 모터드라이브를 다음과 같이 연결한다.</p>\n<table>\n  <thead>\n      <tr>\n          <th><img src=\"/image/so3.png\" alt=\"\" /></th>\n          <th>32 - PWMA<br>33 - AIN2<br>25 - AIN1<br>26 - NC<br>27 - BIN1<br>14 - BIN2<br>12 - PWMB<br> GND - GND                                                              <br></th>\n      </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n<br>\n<p>ESP32의 5V핀에는 4P 점퍼블록을 꼽아, 5V핀을 3개 사용할 수 있도록 만들어준다. 제작 후 위에서 바라본 모습은 다음과 같다.</p>\n<p><img src=\"/image/so4.png\" alt=\"\" /></p>\n<br>\n<br>\n<h4 id=\"for-remote-controller-esp32--nrf24l01--dual-joystick\">for Remote Controller (ESP32 + nRF24L01 + Dual Joystick)<a class=\"anchor\" href=\"#for-remote-controller-esp32--nrf24l01--dual-joystick\">#</a></h4>\r\n<h5 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h5>\r\n<ul>\n<li>리모트 컨트롤러로 사용할 TTGO T-energy(ESP32)에 업로드한다.</li>\n<li>TTGO T-energy를 컴퓨터와 연결하여 사용할 경우에는 반드시 18650 배터리를 제거하거나 스위치를 OFF상태로 두어야 한다.</li>\n<li>그러므로 <strong>스케치 업로드 시에는 안전한 사용을 위해 18650 배터리를 제거</strong>한 뒤 아래의 스케치를 업로드하도록 한다.</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for no interference, two joysticks must be used with each other ADC!  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// one joystick use ADC1: GPIO 36,39,32,33,34,35\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// the other must use ADC2: GPIO 4,0,2,15,13,12,14,27,25,26\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_x_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;           <span style=\"color:#75715e\">// Left_Right GPIO25\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_y_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">32</span>;           <span style=\"color:#75715e\">// Forward_Back GPIO32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">struct</span> <span style=\"color:#a6e22e\">Value</span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_x;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_y;\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Value data;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  radio.begin();\n</span></span><span style=\"display:flex;\"><span>  radio.openWritingPipe(address);\n</span></span><span style=\"display:flex;\"><span>  radio.setPALevel(RF24_PA_MIN);\n</span></span><span style=\"display:flex;\"><span>  radio.stopListening();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  data.value_x <span style=\"color:#f92672\">=</span> Jstick(Jstick_x_pin);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>  data.value_y <span style=\"color:#f92672\">=</span> Jstick(Jstick_y_pin);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>  radio.write(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Serial.print(&#34;x: &#34;); Serial.print(data.value_x);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//Serial.print(&#34;, y: &#34;); Serial.println(data.value_y);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">uint16_t</span> <span style=\"color:#a6e22e\">Jstick</span>(<span style=\"color:#66d9ef\">int</span> Jstick_Pin){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">return</span> analogRead(Jstick_Pin);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h5>\r\n<p><img src=\"/image/r/ESP32-RC-Car-95.png\" alt=\"\" /></p>\n<br>\n<ul>\n<li>TTGO T-energy 에는 5V 단자가 1개 있음.</li>\n<li>2개의 조이스틱에 5V가 각각 입력되어야 하므로, TTGO T-energy의 5V 단자를 2개로 분기할 수 있는 Y자형 케이블을 제작하여 사용하도록 한다.</li>\n</ul>\n<p><img src=\"/image/r/ESP32-RC-Car-96.png\" alt=\"\" /></p>\n<p>\u200b      위 형태는 (오른쪽) 1개의 (F)단자를 (왼쪽) 3개의 (F)단자로 분기하는 형태의 케이블이다.</p>\n<p>\u200b      이를 참고하여 1개의 단자를 2개의 단자로 나눠주는 케이블을 제작하면 된다.</p>\n"}{"uri":"http://localhost:1313/posts/stem-%EC%95%8C%EC%BD%94%EC%98%AC-%EB%9E%A8%ED%94%84-%EB%B0%9B%EC%B9%A8%EB%8C%80/","title":"알코올 램프 안전 손잡이 받침대 3D프린팅","content":"<p>학교에서 알코올 램프를 사용할 때 겪는 불편한 문제 중 하나. 삼발이가 뜨거워져서 알코올 램프를 끌 때, 손 등 부분이 삼발이에 닿아서 데이기 쉽다는 것이다. 이 때문에 한국에서는 알코올 램프를 끼워 안전하게 쓸 수 있는 받침대를 구입하여 사용하곤 했다.</p>\n<p>그런데 온갖 잡동사니를 다 팔고 있는 중국 타오바오를 아무리 뒤져보아도 막상 이런 형태의 알코올 램프 받침대를 찾을 수가 없었다. 그동안 사용했던 받침대들이 깨지고, 열에 의해 변형되어 새로 구입을 하기는 해야하는데, 어떻게 할까 생각하다가&hellip;</p>\n<br>\n<h4 id=\"stl파일-제작\">STL파일 제작<a class=\"anchor\" href=\"#stl%ed%8c%8c%ec%9d%bc-%ec%a0%9c%ec%9e%91\">#</a></h4>\r\n<p>STEAM 활동을 하고 있는 학생을 통해 3d 프린팅을 하기로 했다. 아래 그림이 황정○ 학생이 설계한 <a href=\"/attach/lamp-cover-with-steam.stl\">STL파일</a>이다.</p>\n<table>\n  <thead>\n      <tr>\n          <th style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/3d/alcohollamp-02.png\" width=\"67%\">\n</figure>\n</th>\n          <th style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/3d/alcohollamp-01.png\" width=\"67%\">\n</figure>\n</th>\n      </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n<br>\n<h4 id=\"구조\">구조<a class=\"anchor\" href=\"#%ea%b5%ac%ec%a1%b0\">#</a></h4>\r\n<ul>\n<li>\n<p>알코올 램프를 끼워 넣은 후, 손잡이를 통해 쉽게 옮길 수 있도록 되어 있다.</p>\n</li>\n<li>\n<p>알코올 램프가 잘 빠지지 않는 경우, 밑면에 뚫려 있는 구멍을 통해 위쪽으로 램프를 밀어내어 뺄 수 있도록 하였고,</p>\n</li>\n<li>\n<p>한쪽 옆면에는 렘프에 남아있는 알코올의 잔량을 쉽게 확인할 수 있도록 구멍을 만들어 놓았다.</p>\n</li>\n</ul>\n<br>\n<h4 id=\"3d-프린팅한-제품\">3D 프린팅한 제품<a class=\"anchor\" href=\"#3d-%ed%94%84%eb%a6%b0%ed%8c%85%ed%95%9c-%ec%a0%9c%ed%92%88\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/3d/alcohollamp-03.png\" width=\"67%\">\n</figure>\n</th>\n          <th style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/3d/alcohollamp-04.png\" width=\"67%\">\n</figure>\n</th>\n      </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n<br>\n<p>영롱하다.</p>\n"}{"uri":"http://localhost:1313/posts/stem-%EC%A0%84%EC%9E%90%EA%B8%B0%ED%8C%8C-%EA%B2%80%EC%B6%9C%EA%B8%B0/","title":"전자기파 검출기 만들기","content":"<h3 id=\"전자기파-검출\">전자기파 검출<a class=\"anchor\" href=\"#%ec%a0%84%ec%9e%90%ea%b8%b0%ed%8c%8c-%ea%b2%80%ec%b6%9c\">#</a></h3>\r\n<p>콘센트, 멀티탭, 전자제품 등에서 나오는 60Hz 정도의 전자파를 검출하여 증폭시킨 뒤, 이를 스위칭 신호로 만들어 LED를 켜는 회로를 구성해본다.</p>\n<p>※ 참고: 눈이 즐거운 물리 (<a href=\"https://www.phys.pe.kr\">www.phys.pe.kr</a>)</p>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/w/wave-27.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"작동원리\">작동원리<a class=\"anchor\" href=\"#%ec%9e%91%eb%8f%99%ec%9b%90%eb%a6%ac\">#</a></h4>\r\n<ul>\n<li>안테나에 전자기파가 잡히면</li>\n<li>C1815 트랜지스터로 신호를 증폭</li>\n<li>1N4148 다이오드는 반대 방향으로 흐르는 노이즈 신호를 제거하여, 안테나에 잡힌 전자기파만을 유효 신호로 처리하도록 함</li>\n<li>증폭된 신호를 A1015 트랜지스터를 스위치 삼아 LED를 켬</li>\n</ul>\n<br>\n<h3 id=\"준비물\">준비물<a class=\"anchor\" href=\"#%ec%a4%80%eb%b9%84%eb%ac%bc\">#</a></h3>\r\n<h4 id=\"개별-준비물\">개별 준비물<a class=\"anchor\" href=\"#%ea%b0%9c%eb%b3%84-%ec%a4%80%eb%b9%84%eb%ac%bc\">#</a></h4>\r\n<ul>\n<li>LED 1개</li>\n<li>0.01uF (103) 세라믹 캐패시터 1개</li>\n<li>A1015 트랜지스터 1개</li>\n<li>C1815 트랜지스터 1개</li>\n<li>10uH 인덕터 코일 (갈-검-검-금) 1개</li>\n<li>1N4148 스위칭 다이오드 1개</li>\n<li>CR2032 3V 리튬전지 1개</li>\n<li>듀퐁 케이블 10P (9P 사용 가능) 1개</li>\n</ul>\n<br>\n<h4 id=\"기타-준비물\">기타 준비물<a class=\"anchor\" href=\"#%ea%b8%b0%ed%83%80-%ec%a4%80%eb%b9%84%eb%ac%bc\">#</a></h4>\r\n<p>스트리퍼, 가위, 스카치테이프</p>\n<br>\n<h4 id=\"듀퐁-케이블-준비\">듀퐁 케이블 준비<a class=\"anchor\" href=\"#%eb%93%80%ed%90%81-%ec%bc%80%ec%9d%b4%eb%b8%94-%ec%a4%80%eb%b9%84\">#</a></h4>\r\n<ol>\n<li>듀퐁 케이블은 40P 형태로 판매되는 것이 많으므로, 40P 10cm 듀퐁 케이블 구입한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/w/wave-02.png\" width=\"75%\">\n</figure>\n\n<br>\n<br>\n<ol start=\"2\">\n<li>갈색과 검은색 사이를 갈라내어 10P 4세트로 만든다. 이제, (갈-빨-주-노-초-파-보-회-흰-검) 10P가 1세트가 된다.</li>\n</ol>\n<p><img src=\"/image/w/wave-03.png\" alt=\"\" /></p>\n<br>\n<ol start=\"3\">\n<li>준비한 10P 케이블을 가위를 사용하여 반으로 잘라, 10P 8세트로 만든다. 1명당 1세트만 사용하면 되므로, 40P 듀퐁케이블 1개를 구입하면 학생 8명이 사용할 수 있다.</li>\n</ol>\n<p><img src=\"/image/w/wave-04.png\" alt=\"\" /></p>\n<br>\n<ol start=\"4\">\n<li>준비 완료</li>\n</ol>\n<p><img src=\"/image/w/wave-01.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"제작-방법\">제작 방법<a class=\"anchor\" href=\"#%ec%a0%9c%ec%9e%91-%eb%b0%a9%eb%b2%95\">#</a></h3>\r\n<h4 id=\"듀퐁-케이블을-사용하여-회로-구성하기\">듀퐁 케이블을 사용하여 회로 구성하기<a class=\"anchor\" href=\"#%eb%93%80%ed%90%81-%ec%bc%80%ec%9d%b4%eb%b8%94%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-%ed%9a%8c%eb%a1%9c-%ea%b5%ac%ec%84%b1%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>10가닥의 케이블을 (갈-빨-주-노-초-파-보-회-흰-검) 번호 순서대로 나열한 뒤, 스카치 테이프로 단단히 고정한다.\n<table>\n  <thead>\n      <tr>\n          <th>번호</th>\n          <th>1</th>\n          <th>2</th>\n          <th>3</th>\n          <th>4</th>\n          <th>5</th>\n          <th>6</th>\n          <th>7</th>\n          <th>8</th>\n          <th>9</th>\n          <th>0</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>색깔</td>\n          <td>갈</td>\n          <td>빨</td>\n          <td>주</td>\n          <td>노</td>\n          <td>초</td>\n          <td>파</td>\n          <td>보</td>\n          <td>회</td>\n          <td>흰</td>\n          <td>검</td>\n      </tr>\n  </tbody>\n</table>\n</li>\n</ol>\n<p><img src=\"/image/w/wave-05.png\" alt=\"\" /></p>\n<br>\n<ol start=\"2\">\n<li>케이블의 중간 위치 정도까지 스카치 테이프를 붙여 단단히 고정한다.</li>\n</ol>\n<p><img src=\"/image/w/wave-06.png\" alt=\"\" /></p>\n<br>\n<ol start=\"3\">\n<li>케이블 아래쪽을 모두 갈라 10가닥으로 만든다.</li>\n</ol>\n<p><img src=\"/image/w/wave-07.png\" alt=\"\" /></p>\n<br>\n<ol start=\"4\">\n<li>빨간색(2번), 초록색(5번), 보라색(7번), 검은색(0번) 케이블을 짧게 자른다.</li>\n</ol>\n<p><img src=\"/image/w/wave-08.png\" alt=\"\" /></p>\n<br>\n<ol start=\"5\">\n<li>남아있는 케이블(갈(1번), 주(3번), 노(4번), 파(6번), 회(8번), 흰(9번))의 끝부분 7~8mm 정도를 스트리퍼의 22AWG 부분으로 집은 뒤에 힘을 주어 벗겨낸다. (흰색(9번)은 벗겨내지 않아도 됨)</li>\n</ol>\n<p><img src=\"/image/w/wave-09.png\" alt=\"\" /></p>\n<p><img src=\"/image/w/wave-10.png\" alt=\"\" /></p>\n<br>\n<ol start=\"6\">\n<li>\n<p>주황색(3번)선과 파란색(6번)선의 끝부분을 모은 뒤, 함께 꼬아 하나로 만든다.</p>\n<p>같은 방법으로, 노란색(4번)선과 회색(8번)선의 끝부분을 모아 하나로 만든 뒤, 다른 곳에 닿지 않도록 스카치테이프로 절연처리한다.</p>\n</li>\n</ol>\n<p><img src=\"/image/w/wave-11.png\" alt=\"\" /></p>\n<br>\n<ol start=\"7\">\n<li>\n<p>스카치테이프를 사용하여 CR2032 배터리를 붙인다.</p>\n<ul>\n<li>CR2032 (+)극 (CR2032 레터링 된 면) : 갈색(1번) 선을 스카치테이프로 단단히 붙임</li>\n</ul>\n<p><img src=\"/image/w/wave-13.png\" alt=\"\" /></p>\n<ul>\n<li>CR2032 (-)극 (검은색 테두리가 보이는 면) : 주황색(3번)/파란색(6번) 선을 하나로 묶어낸 선을 붙임</li>\n</ul>\n</li>\n</ol>\n<p><img src=\"/image/w/wave-12.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"부품-꼽기\">부품 꼽기<a class=\"anchor\" href=\"#%eb%b6%80%ed%92%88-%ea%bc%bd%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>\n<p>LED (LED는 극성이 있으므로 주의한다.)</p>\n<ul>\n<li>(+)극 (다리가 긴 쪽) : 갈색(1번)에 삽입</li>\n<li>(-)극 (다리가 짧은 쪽) : 빨간색(2번)에 삽입</li>\n</ul>\n<p><img src=\"/image/w/wave-14.png\" alt=\"\" /></p>\n</li>\n</ol>\n<p><img src=\"/image/w/wave-15.png\" alt=\"\" /></p>\n<br>\n<ol start=\"2\">\n<li>\n<p>A1015 트랜지스터 (글씨가 써 있는, 평평한 부분을 바라보았을 때를 기준으로)</p>\n<ul>\n<li>왼쪽 핀 (Emitter) : 빨간색(2번)에 삽입</li>\n<li>가운데 핀(Collector) : 주황색(3번)에 삽입</li>\n<li>오른쪽 핀(Base) : 노란색(4번)에 삽입</li>\n</ul>\n<p><img src=\"/image/w/wave-16.png\" alt=\"\" /></p>\n<p><img src=\"/image/w/wave-17.png\" alt=\"\" /></p>\n</li>\n</ol>\n<br>\n<ol start=\"3\">\n<li>\n<p>0.01uF (103) 세라믹 캐패시터 (극성 없음) : 노란색(4번)과 파란색(6번)에 삽입</p>\n<p><img src=\"/image/w/wave-18.png\" alt=\"\" /></p>\n<p><img src=\"/image/w/wave-19.png\" alt=\"\" /></p>\n</li>\n</ol>\n<br>\n<ol start=\"4\">\n<li>10uH 인덕터 코일 (극성 없음) : 파란색(6번)과 보라색(7번)에 삽입</li>\n</ol>\n<p><img src=\"/image/w/wave-20.png\" alt=\"\" /></p>\n<p><img src=\"/image/w/wave-21.png\" alt=\"\" /></p>\n<br>\n<ol start=\"5\">\n<li>\n<p>C1815 트랜지스터  (글씨가 써 있는, 평평한 부분을 바라보았을 때를 기준으로)</p>\n<ul>\n<li>왼쪽 핀 (Emitter) : 보라색(7번)에 삽입</li>\n<li>가운데 핀(Collector) : 회색(8번)에 삽입</li>\n<li>오른쪽 핀(Base) : 흰색(9번)에 삽입</li>\n</ul>\n<p><img src=\"/image/w/wave-22.png\" alt=\"\" /></p>\n<p><img src=\"/image/w/wave-23.png\" alt=\"\" /></p>\n</li>\n</ol>\n<br>\n<ol start=\"6\">\n<li>\n<p>1N4148 스위칭 다이오드 (<strong>방향에 주의!</strong>)</p>\n<p><img src=\"/image/w/wave-24.png\" alt=\"\" /></p>\n</li>\n</ol>\n<p><img src=\"/image/w/wave-25.png\" alt=\"\" /></p>\n<br>\n<ol start=\"7\">\n<li>흰색(9번)선은 안테나의 역할을 한다.</li>\n</ol>\n<br>\n<ol start=\"8\">\n<li>완성!!</li>\n</ol>\n<br>\n<br>\n<h3 id=\"테스트\">테스트<a class=\"anchor\" href=\"#%ed%85%8c%ec%8a%a4%ed%8a%b8\">#</a></h3>\r\n<ul>\n<li>전자파가 나올 만한 곳에 가져가 본다.</li>\n<li>핸드폰 충전기가 꼽혀있는 콘센트 근처에 가져가 보았더니, 다음과 같이 LED에 불이 들어왔다.</li>\n</ul>\n<p><img src=\"/image/w/wave-26.png\" alt=\"\" /></p>\n"}{"uri":"http://localhost:1313/posts/esp32-dc%EB%AA%A8%ED%84%B0/","title":"ESP32, DC모터, TB6612FNG","content":"<h3 id=\"dc모터-사용하기\">DC모터 사용하기<a class=\"anchor\" href=\"#dc%eb%aa%a8%ed%84%b0-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>아두이노의 경우와 마찬가지로 ESP32에서도 TB6612FNG 모터드라이버와 함께, 모터 및 아두이노 단독사용을 위하여 3.7V 18650 2개를 직렬로 연결한 외부전원을 사용한다.</p>\n<br>\n<h4 id=\"tb6612fng\">TB6612FNG<a class=\"anchor\" href=\"#tb6612fng\">#</a></h4>\r\n<h5 id=\"기본-핀-배열\">기본 핀 배열<a class=\"anchor\" href=\"#%ea%b8%b0%eb%b3%b8-%ed%95%80-%eb%b0%b0%ec%97%b4\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th style=\"text-align: center\">VM<br/>VCC<br/>GND(*)<br/>AOUT1<br/>AOUT2<br/>BOUT2<br/>BOUT1<br/>GND</th>\n          <th style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/t/tb6612fng-01.png\" width=\"50%\">\n</figure>\n</th>\n          <th style=\"text-align: center\">PWMA<br/>AIN2<br/>AIN1<br/>STBY<br/>BIN1<br/>BIN2<br/>PWMB<br/>GND</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td style=\"text-align: center\"></td>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/t/tb6612fng-02.png\">\n</figure>\n</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h5 id=\"핀-배열이-다른-경우\">핀 배열이 다른 경우<a class=\"anchor\" href=\"#%ed%95%80-%eb%b0%b0%ec%97%b4%ec%9d%b4-%eb%8b%a4%eb%a5%b8-%ea%b2%bd%ec%9a%b0\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th style=\"text-align: center\">GND<br/>VCC<br/>AOUT1<br/>AOUT2<br/>BOUT2<br/>BOUT1<br/>VM<br/>GND</th>\n          <th style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/t/tb6612fng-03.png\" width=\"75%\">\n</figure>\n</th>\n          <th style=\"text-align: center\">PWMA<br/>AIN2<br/>AIN1<br/>NC (=STBY)<br/>BIN1<br/>BIN2<br/>PWMB<br/>GND</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td style=\"text-align: center\"></td>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/t/tb6612fng-04.png\">\n</figure>\n</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n  </tbody>\n</table>\n<ul>\n<li>VM (모터 전압) = 15V max</li>\n<li>VCC (로직 전압) = 2.7 ~ 5.5V</li>\n<li><strong>GND</strong>\n<ul>\n<li>TB6612FNG 모듈을 여러개 테스트한 결과, 기본 핀 배열을 가진 모듈의 <strong>3번핀 GND</strong>에 연결할 경우 <strong>작동이 안되는</strong> 몇몇 제품이 있었음</li>\n<li>그러므로 <strong>8번핀, 9번핀의 GND 사용을 권장</strong>함</li>\n</ul>\n</li>\n<li>출력전류: 정전류 1.2A (3.2A peak)까지 (모터 2개 사용시 합산 전류임)</li>\n<li>모터 제어모드: CW, CCW, short-brake, STOP, stand-by</li>\n<li>두개의 모터 출력을 개별 제어하며, <strong>100kHz</strong>의 PWM으로 속도 제어</li>\n<li>써멀 셧다운 및 저전압 감지회로 내장</li>\n</ul>\n<br>\n<h5 id=\"pin의-사용\">Pin의 사용<a class=\"anchor\" href=\"#pin%ec%9d%98-%ec%82%ac%ec%9a%a9\">#</a></h5>\r\n<p>ESP32와 TB6612FNG모듈을 브레드보드를 통해 연결하기 쉽도록 핀을 구성한 Pinmap이므로, 필요에 따라 수정하여 사용할 수 있다. (아래표는 참고만 할 것!)</p>\n<table>\n  <thead>\n      <tr>\n          <th>핀번호</th>\n          <th>TB6612FNG 모터드라이브 (기본 핀 배열)</th>\n          <th>ESP32 DEVKIT_C V4 사용시</th>\n          <th>ESP32 DEVKIT V1 사용시</th>\n          <th>외부전원</th>\n          <th>모터 / 역할</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>1</td>\n          <td>VM</td>\n          <td></td>\n          <td></td>\n          <td>(+) (DC모터에 사용하는 전압 사용)</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>2</td>\n          <td>VCC</td>\n          <td>+3.3V</td>\n          <td>+3.3V</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>3</td>\n          <td><strong>GND (사용 비추천)</strong></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>4</td>\n          <td>A_OUT1</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td>모터A</td>\n      </tr>\n      <tr>\n          <td>5</td>\n          <td>A_OUT2</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td>모터A</td>\n      </tr>\n      <tr>\n          <td>6</td>\n          <td>B_OUT2</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td>모터B</td>\n      </tr>\n      <tr>\n          <td>7</td>\n          <td>B_OUT1</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td>모터B</td>\n      </tr>\n      <tr>\n          <td>8</td>\n          <td>GND</td>\n          <td></td>\n          <td></td>\n          <td>(-)</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>9</td>\n          <td>GND</td>\n          <td>GND</td>\n          <td>GND</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>10</td>\n          <td>B_PWM</td>\n          <td>12</td>\n          <td>13</td>\n          <td></td>\n          <td>모터B 속도제어</td>\n      </tr>\n      <tr>\n          <td>11</td>\n          <td>B_IN2</td>\n          <td>14</td>\n          <td>12</td>\n          <td></td>\n          <td>모터B 방향제어</td>\n      </tr>\n      <tr>\n          <td>12</td>\n          <td>B_IN1</td>\n          <td>27</td>\n          <td>14</td>\n          <td></td>\n          <td>모터B 방향제어</td>\n      </tr>\n      <tr>\n          <td>13</td>\n          <td>STBY</td>\n          <td>26</td>\n          <td>27</td>\n          <td></td>\n          <td>모터 상태신호</td>\n      </tr>\n      <tr>\n          <td>14</td>\n          <td>A_IN1</td>\n          <td>25</td>\n          <td>26</td>\n          <td></td>\n          <td>모터A 방향제어</td>\n      </tr>\n      <tr>\n          <td>15</td>\n          <td>A_IN2</td>\n          <td>33</td>\n          <td>25</td>\n          <td></td>\n          <td>모터A 방향제어</td>\n      </tr>\n      <tr>\n          <td>16</td>\n          <td>A_PWM</td>\n          <td>32</td>\n          <td>33</td>\n          <td></td>\n          <td>모터A 속도제어</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<table>\n  <thead>\n      <tr>\n          <th>ESP32 DEVKIT V4 사용시</th>\n          <th><img src=\"/image/t/ESP32-RC-04.png\" alt=\"\" /></th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>ESP32 DEVKIT V1 사용시</td>\n          <td><img src=\"/image/t/ESP32-RC-05.png\" alt=\"\" /></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<br>\n<h3 id=\"모터-1개-컨트롤하기\">모터 1개 컨트롤하기<a class=\"anchor\" href=\"#%eb%aa%a8%ed%84%b0-1%ea%b0%9c-%ec%bb%a8%ed%8a%b8%eb%a1%a4%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<table>\n  <thead>\n      <tr>\n          <th>(기어박스를 포함한) 일반 DC모터</th>\n          <th>(엔코더 모듈을 포함한) 엔코더 DC모터</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>아두이노를 사용한 스마트카 실습용으로 많이 사용됨</td>\n          <td>Hall sensor를 통해 회전수를 정밀하게 측정가능</td>\n      </tr>\n      <tr>\n          <td>(+)와 (-), 2P 단자가 있음</td>\n          <td>5P or 6P 단자가 있음 (여기서는 (+)와 (-) 2P만 사용)</td>\n      </tr>\n      <tr>\n          <td><figure class=\"center\"><img src=\"/image/4wd-01.jpg\" width=\"80%\">\n</figure>\n</td>\n          <td><figure class=\"center\"><img src=\"/image/t/ESP32-RC-07.png\">\n</figure>\n</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<h5 id=\"esp32와-컴퓨터를-usb선으로-연결하여-사용할-경우-단-모터-외부전원은-사용\">ESP32와 컴퓨터를 USB선으로 연결하여 사용할 경우 (단, 모터 외부전원은 사용)<a class=\"anchor\" href=\"#esp32%ec%99%80-%ec%bb%b4%ed%93%a8%ed%84%b0%eb%a5%bc-usb%ec%84%a0%ec%9c%bc%eb%a1%9c-%ec%97%b0%ea%b2%b0%ed%95%98%ec%97%ac-%ec%82%ac%ec%9a%a9%ed%95%a0-%ea%b2%bd%ec%9a%b0-%eb%8b%a8-%eb%aa%a8%ed%84%b0-%ec%99%b8%eb%b6%80%ec%a0%84%ec%9b%90%ec%9d%80-%ec%82%ac%ec%9a%a9\">#</a></h5>\r\n<p><img src=\"/image/t/ESP32-RC-01.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"esp32와-컴퓨터의-연결없이-외부전원을-사용하여-단독으로-사용할-경우\">ESP32와 컴퓨터의 연결없이, 외부전원을 사용하여 단독으로 사용할 경우<a class=\"anchor\" href=\"#esp32%ec%99%80-%ec%bb%b4%ed%93%a8%ed%84%b0%ec%9d%98-%ec%97%b0%ea%b2%b0%ec%97%86%ec%9d%b4-%ec%99%b8%eb%b6%80%ec%a0%84%ec%9b%90%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-%eb%8b%a8%eb%8f%85%ec%9c%bc%eb%a1%9c-%ec%82%ac%ec%9a%a9%ed%95%a0-%ea%b2%bd%ec%9a%b0\">#</a></h5>\r\n<ul>\n<li>\n<p>18650 2S 외부전원(7.4V)을 DC컨버터 모듈에 연결</p>\n<ul>\n<li>입력: 8~36V</li>\n<li>출력: 1.25~32V 및 USB 5V 출력</li>\n<li>75W내 사용 권장, 전류량 최대 5A (4.5A 이내 사용 권장)</li>\n</ul>\n<p><img src=\"/image/t/ESP32-RC-03.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>여기서는 서보모터 추가 연결을 위해서, 왼쪽 가변 저항을 사용하여 출력 전압을 5V로 세팅하여 사용</p>\n</li>\n<li>\n<p>USB 출력단자는 ESP32의 microUSB 단자에 연결</p>\n</li>\n</ul>\n<p><img src=\"/image/t/ESP32-RC-02.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// TB6612FNG right side &amp; ESP32-WROOM-32D DEVKIT_C V4 left side pin order\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_PWMA <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">32</span>;  \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_AIN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">33</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_AIN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_STBY <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">26</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_BIN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">27</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_BIN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">14</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_PWMB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">12</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// TB6612FNG right side &amp; ESP32-WROOM-32 left side pin order\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_PWMA = 33;  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_AIN1 = 25;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_AIN2 = 26;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_STBY = 27;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_BIN1 = 14;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_BIN2 = 12;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_PWMB = 13;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// PWM Channel setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> CH_PWMA <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> CH_PWMB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// PWM frequency and bit resolution setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> pwmFrequency <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10000</span>;  <span style=\"color:#75715e\">// Hz\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> bitResolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;     <span style=\"color:#75715e\">// pwm value: 0~255\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_LED <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// put your setup code here, to run once:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_LED, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// tb6612fng setting\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  pinMode(PIN_STBY,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_AIN1,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_AIN2,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_PWMA,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_BIN1,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_BIN2,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_PWMB,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>   <span style=\"color:#75715e\">// motor output(PWM) setting (channel, frequency, bit)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcSetup(CH_PWMA, pwmFrequency, bitResolution);\n</span></span><span style=\"display:flex;\"><span>  ledcSetup(CH_PWMB, pwmFrequency, bitResolution);\n</span></span><span style=\"display:flex;\"><span>  ledcAttachPin(PIN_PWMA, CH_PWMA);\n</span></span><span style=\"display:flex;\"><span>  ledcAttachPin(PIN_PWMB, CH_PWMB);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// channel setting (GPIO pin, channel)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// if STBY(CH0) = LOW, Standby states.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// if STBY(CH0) = HIGH, and INA1&amp;INA2 have different value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// and PWMA has some value, CW or CCW rotation is made.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Channel      CW   CCW  Stanby Stop Brake1 Brake2 Brake3\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// PIN_STBY (0) HIGH HIGH LOW    HIGH  HIGH  HIGH   HIGH\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// PIN_INA1 (1) HIGH LOW  *      LOW   HIGH  LOW    HIGH\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// PIN_INA2 (2) LOW  HIGH *      LOW   HIGH  HIGH   LOW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// CH_PWMA  (3) PWM  PWM  *      HIGH  *     LOW    LOW  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Motor A : CW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_STBY, HIGH); \t<span style=\"color:#75715e\">// STBY\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_AIN1, HIGH); \t<span style=\"color:#75715e\">// AIN1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_AIN2, LOW);   \t<span style=\"color:#75715e\">// AIN2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcWrite(CH_PWMA, <span style=\"color:#ae81ff\">255</span>); \t\t\t<span style=\"color:#75715e\">// PWMA\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// Motor B : CW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_BIN1, HIGH); \t<span style=\"color:#75715e\">// BIN1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_BIN2, LOW);   \t<span style=\"color:#75715e\">// BIN2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcWrite(CH_PWMB, <span style=\"color:#ae81ff\">255</span>); \t\t\t<span style=\"color:#75715e\">// PWMB\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">3000</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Motor : Stand-by\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_STBY, LOW); \t\t<span style=\"color:#75715e\">// STBY\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//delay(1000);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//LED Blink\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(ledPin, LOW);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">3500</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(ledPin, HIGH);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(ledPin, LOW);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Motor A : CCW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_STBY, HIGH); \t<span style=\"color:#75715e\">// STBY\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_AIN1, LOW); \t\t<span style=\"color:#75715e\">// AIN1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_AIN2, HIGH);   \t<span style=\"color:#75715e\">// AIN2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcWrite(CH_PWMA, <span style=\"color:#ae81ff\">255</span>); \t\t\t<span style=\"color:#75715e\">// PWMA\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// Motor B : CCW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_BIN1, LOW); \t\t<span style=\"color:#75715e\">// BIN1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_BIN2, HIGH);   \t<span style=\"color:#75715e\">// BIN2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcWrite(CH_PWMB, <span style=\"color:#ae81ff\">255</span>); \t\t\t<span style=\"color:#75715e\">// PWMB\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">3000</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Motor : Stand-by\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_STBY, LOW); \t\t<span style=\"color:#75715e\">// STBY\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//delay(1000);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//LED Blink\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(PIN_LED, LOW);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">3500</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(PIN_LED, HIGH);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(PIN_LED, LOW);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"troubleshooting\">Troubleshooting<a class=\"anchor\" href=\"#troubleshooting\">#</a></h4>\r\n<h5 id=\"스케치-중간에-있는-stand-by가-있거나-없거나-동일한-운동을-보일-것-같지만-실제로는-완전히-다르다\">스케치 중간에 있는 stand-by가 있거나 없거나 동일한 운동을 보일 것 같지만, 실제로는 완전히 다르다.<a class=\"anchor\" href=\"#%ec%8a%a4%ec%bc%80%ec%b9%98-%ec%a4%91%ea%b0%84%ec%97%90-%ec%9e%88%eb%8a%94-stand-by%ea%b0%80-%ec%9e%88%ea%b1%b0%eb%82%98-%ec%97%86%ea%b1%b0%eb%82%98-%eb%8f%99%ec%9d%bc%ed%95%9c-%ec%9a%b4%eb%8f%99%ec%9d%84-%eb%b3%b4%ec%9d%bc-%ea%b2%83-%ea%b0%99%ec%a7%80%eb%a7%8c-%ec%8b%a4%ec%a0%9c%eb%a1%9c%eb%8a%94-%ec%99%84%ec%a0%84%ed%9e%88-%eb%8b%a4%eb%a5%b4%eb%8b%a4\">#</a></h5>\r\n<ul>\n<li>\n<p>stand-by가 있는 경우</p>\n<ul>\n<li>3초간 CW회전 후 정지 → 3.5초 대기 → 0.5초 LED켜졌다가 꺼짐 → 3초간 CCW회전 후 정지→ 3.5초 대기 → 0.5초 LED켜졌다가 꺼짐</li>\n</ul>\n</li>\n<li>\n<p>stand-by가 없는 경우:</p>\n<ul>\n<li>모터\n<ul>\n<li>모터의 delay 시간(회전시간)이 3초로 되어 있어도 stand-by 상태로 들어가지 않으므로, <strong>실제로는 7초간 회전</strong> 후 방향을 바꿈</li>\n<li>7초간 CW회전 후 → (정지하지 않고) 곧바로 7초간 CCW회전 (반복)</li>\n</ul>\n</li>\n<li>LED\n<ul>\n<li>꺼짐: 6.5초간 꺼져있다가 (모터의 delay 시간 3초 + led low delay 시간 3.5초)</li>\n<li>켜짐:  0.5초간 켜짐 (반복)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>그러므로, 각 상황에 따라 stand-by를 걸어야 할지, 말아야할지를 결정해야 함.</p>\n<ul>\n<li>stand-by를 걸지 않은 상태에서 멈추려면 PWMA or PWMB를 0으로 주면 됨.</li>\n</ul>\n</li>\n</ul>\n<br>\n<h5 id=\"회전-방향이-생각했던-방향과-반대로-회전하는-경우\">회전 방향이 (생각했던 방향과) 반대로 회전하는 경우<a class=\"anchor\" href=\"#%ed%9a%8c%ec%a0%84-%eb%b0%a9%ed%96%a5%ec%9d%b4-%ec%83%9d%ea%b0%81%ed%96%88%eb%8d%98-%eb%b0%a9%ed%96%a5%ea%b3%bc-%eb%b0%98%eb%8c%80%eb%a1%9c-%ed%9a%8c%ec%a0%84%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h5>\r\n<p>AIN1핀과 AIN2 핀의 번호를 바꿔준다. 즉, 위 스케치에서</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> AIN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> AIN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">26</span>;</span></span></code></pre></div><p>부분을</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> AIN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">26</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> AIN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;</span></span></code></pre></div><p>로 바꿔준다.</p>\n<br>\n<br>\n<h3 id=\"모터-2개-컨트롤하기\">모터 2개 컨트롤하기<a class=\"anchor\" href=\"#%eb%aa%a8%ed%84%b0-2%ea%b0%9c-%ec%bb%a8%ed%8a%b8%eb%a1%a4%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p><img src=\"/image/t/ESP32-RC-06.png\" alt=\"\" /><br></p>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<p>위의 &lsquo;&lsquo;모터 1개 컨트롤하기&rsquo;&rsquo; 스케치와 동일함.</p>\n<br>\n<br>\n<h3 id=\"스케치-최적화\">스케치 최적화<a class=\"anchor\" href=\"#%ec%8a%a4%ec%bc%80%ec%b9%98-%ec%b5%9c%ec%a0%81%ed%99%94\">#</a></h3>\r\n<p>move(), stop()을 만들어서 스케치 최적화</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c++\" data-lang=\"c++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// TB6612FNG right side &amp; ESP32-WROOM-32D DEVKIT_C V4 left side pin order\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_PWMA <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">32</span>;  \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_AIN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">33</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_AIN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_STBY <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">26</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_BIN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">27</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_BIN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">14</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_PWMB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">12</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// TB6612FNG right side &amp; ESP32-WROOM-32 left side pin order\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_PWMA = 33;  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_AIN1 = 25;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_AIN2 = 26;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_STBY = 27;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_BIN1 = 14;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_BIN2 = 12;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">const int PIN_PWMB = 13;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// PWM Channel setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> CH_PWMA <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> CH_PWMB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// PWM frequency and bit resolution setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> pwmFrequency <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10000</span>;  <span style=\"color:#75715e\">// Hz\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> bitResolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;     <span style=\"color:#75715e\">// pwm value: 0~255\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> PIN_LED <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// put your setup code here, to run once:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_LED, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// tb6612fng setting\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  pinMode(PIN_STBY,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_AIN1,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_AIN2,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_PWMA,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_BIN1,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_BIN2,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(PIN_PWMB,OUTPUT);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>   <span style=\"color:#75715e\">// motor output(PWM) setting (channel, frequency, bit)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcSetup(CH_PWMA, pwmFrequency, bitResolution);\n</span></span><span style=\"display:flex;\"><span>  ledcSetup(CH_PWMB, pwmFrequency, bitResolution);\n</span></span><span style=\"display:flex;\"><span>  ledcAttachPin(PIN_PWMA, CH_PWMA);\n</span></span><span style=\"display:flex;\"><span>  ledcAttachPin(PIN_PWMB, CH_PWMB);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// channel setting (GPIO pin, channel)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// if STBY(CH0) = LOW, Standby states.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// if STBY(CH0) = HIGH, and INA1&amp;INA2 have different value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// and PWMA has some value, CW or CCW rotation is made.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Channel      CW   CCW  Stanby Stop Brake1 Brake2 Brake3\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// PIN_STBY (0) HIGH HIGH LOW    HIGH  HIGH  HIGH   HIGH\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// PIN_INA1 (1) HIGH LOW  *      LOW   HIGH  LOW    HIGH\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// PIN_INA2 (2) LOW  HIGH *      LOW   HIGH  HIGH   LOW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// CH_PWMA  (3) PWM  PWM  *      HIGH  *     LOW    LOW  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">128</span>, <span style=\"color:#ae81ff\">0</span>);               <span style=\"color:#75715e\">// motor A(right wheels), half speed, moving forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">255</span>, <span style=\"color:#ae81ff\">0</span>);               <span style=\"color:#75715e\">// motor B(left wheels), full speed, moving forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">3000</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  stop();\t\t\t\t\t\t <span style=\"color:#75715e\">// Motor : Stand-by\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//delay(1000);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//LED Blink\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(ledPin, LOW);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">3500</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(ledPin, HIGH);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(ledPin, LOW);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">255</span>, <span style=\"color:#ae81ff\">1</span>);               <span style=\"color:#75715e\">// motor A(right wheels), full speed, moving backward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">128</span>, <span style=\"color:#ae81ff\">1</span>);               <span style=\"color:#75715e\">// motor B(left wheels), half speed, moving backward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">3000</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  stop();\t\t\t\t\t\t <span style=\"color:#75715e\">// Motor : Stand-by\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//delay(1000);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//LED Blink\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  digitalWrite(ledPin, LOW);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">3500</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(ledPin, HIGH);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(ledPin, LOW);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#66d9ef\">int</span> motor, <span style=\"color:#66d9ef\">int</span> speed, <span style=\"color:#66d9ef\">int</span> direction) {   <span style=\"color:#75715e\">//Move specific motor at speed and direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//motor: A(Right) -&gt; 1, B(Left) -&gt; 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//speed: 0 is off, and 255 is full speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//direction: 0 clockwise, 1 counter-clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(PIN_STBY, HIGH);         <span style=\"color:#75715e\">// move\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  boolean inPin1 <span style=\"color:#f92672\">=</span> HIGH;            \t<span style=\"color:#75715e\">// Defalut(direction=0) - Clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  boolean inPin2 <span style=\"color:#f92672\">=</span> LOW;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(direction <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>) {             \t\t<span style=\"color:#75715e\">// Count-clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    inPin1 <span style=\"color:#f92672\">=</span> LOW;\n</span></span><span style=\"display:flex;\"><span>    inPin2 <span style=\"color:#f92672\">=</span> HIGH;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(motor <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>){                 \t\t<span style=\"color:#75715e\">// if motor == 1, right wheel\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    digitalWrite(PIN_AIN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(PIN_AIN2, inPin2);\n</span></span><span style=\"display:flex;\"><span>    ledcWrite(CH_PWMA, speed);\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">else</span> {                         \t\t<span style=\"color:#75715e\">// if motor is not 1, left wheel\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    digitalWrite(PIN_BIN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(PIN_BIN2, inPin2);\n</span></span><span style=\"display:flex;\"><span>    ledcWrite(CH_PWMB, speed);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">stop</span>() {\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(PIN_STBY, LOW);          <span style=\"color:#75715e\">// stand-by = stop\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/arduino-nrf24l01_draft/","title":"Arduino, nRF24L01 무선통신","content":"<h3 id=\"nrf24l01\">nRF24L01<a class=\"anchor\" href=\"#nrf24l01\">#</a></h3>\r\n<h4 id=\"library\">library<a class=\"anchor\" href=\"#library\">#</a></h4>\r\n<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt; <strong>nRF24L01</strong> 검색한 후, <strong>RF24 by TMRh20, Avamander</strong> 설치</p>\n<p><img src=\"../image/n/ESP32-nRF24L01-02.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"schematic-nrf24l01-receiver-with-esp32\">schematic: nRF24L01 receiver with ESP32<a class=\"anchor\" href=\"#schematic-nrf24l01-receiver-with-esp32\">#</a></h4>\r\n<p><img src=\"../image/n/ESP32-nRF24L01-01.png\" alt=\"\" /></p>\n<p>※ nRF24L01 모듈에 따라 10uF 캐페시터가 없으면 통신이 안되는 경우가 있음. 이런 경우에만 사용할 것.</p>\n<br>\n<h5 id=\"pinmap-안테나를-위로-향하게-두고-모듈을-위에서-내려다-볼때의-핀배열\">pinmap: (안테나를 위로 향하게 두고, 모듈을 위에서 내려다 볼때의 핀배열)<a class=\"anchor\" href=\"#pinmap-%ec%95%88%ed%85%8c%eb%82%98%eb%a5%bc-%ec%9c%84%eb%a1%9c-%ed%96%a5%ed%95%98%ea%b2%8c-%eb%91%90%ea%b3%a0-%eb%aa%a8%eb%93%88%ec%9d%84-%ec%9c%84%ec%97%90%ec%84%9c-%eb%82%b4%eb%a0%a4%eb%8b%a4-%eb%b3%bc%eb%95%8c%ec%9d%98-%ed%95%80%eb%b0%b0%ec%97%b4\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th>ESP32</th>\n          <th>3V3</th>\n          <th>IO5</th>\n          <th>IO23</th>\n          <th>None</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td></td>\n          <td>↑</td>\n          <td>↑</td>\n          <td>↑</td>\n          <td>↑</td>\n      </tr>\n      <tr>\n          <td>nRF24L01</td>\n          <td>VCC + 10uF</td>\n          <td>CSN</td>\n          <td>MOSI</td>\n          <td>IRQ</td>\n      </tr>\n      <tr>\n          <td>(위에서 보이는 핀배열)</td>\n          <td>GND + 10uF</td>\n          <td>CE</td>\n          <td>SCK</td>\n          <td>MISO</td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>↓</td>\n          <td>↓</td>\n          <td>↓</td>\n          <td>↓</td>\n      </tr>\n      <tr>\n          <td><strong>ESP32</strong></td>\n          <td><strong>GND</strong></td>\n          <td><strong>IO4</strong></td>\n          <td><strong>IO18</strong></td>\n          <td><strong>IO19</strong></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"schematic-nrf24l01-receiver-with-arduino-uno\">schematic: nRF24L01 receiver with Arduino Uno<a class=\"anchor\" href=\"#schematic-nrf24l01-receiver-with-arduino-uno\">#</a></h4>\r\n<p><img src=\"../image/n/UNO-nRF24L01-01.png\" alt=\"\" /></p>\n<p>※ nRF24L01 모듈에 따라 10uF 캐페시터가 없으면 통신이 안되는 경우가 있음. 이런 경우에만 사용할 것.</p>\n<br>\n<h4 id=\"sketch-nrf24l01-receiver\">sketch: nRF24L01 receiver<a class=\"anchor\" href=\"#sketch-nrf24l01-receiver\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Libraries for NRF24L01+ module.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//RF24 object with two pins defined with arguments. CE: 4, CSN: 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Address of the pipe. 40 bit long, you can choose this freely.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Remember to use different address in different projects.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// float temphumi[2];\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> <span style=\"color:#66d9ef\">uint16_t</span> temphumi[<span style=\"color:#ae81ff\">2</span>];\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for temperature, humidity sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&#34;DHT.h&#34;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DHTPIN    13         </span><span style=\"color:#75715e\">// data pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define DHTTYPE   DHT11      </span><span style=\"color:#75715e\">// change to DHT11 if you&#39;re using the DHT11\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>                             <span style=\"color:#75715e\">// AM2301(DHT21) -&gt; DHT21, AM2302(DHT22) -&gt; DHT22\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>DHT <span style=\"color:#a6e22e\">dht</span>(DHTPIN, DHTTYPE);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Start the radio\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Open reading pipe with given address and start listening for incoming data\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  radio.<span style=\"color:#a6e22e\">openReadingPipe</span>(<span style=\"color:#ae81ff\">1</span>, address);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">startListening</span>();\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>  dht.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//If data is available in radio&#39;s buffer\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span>(radio.<span style=\"color:#a6e22e\">available</span>()) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//While the data is available...\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">while</span> (radio.<span style=\"color:#a6e22e\">available</span>()) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">//Update temperature -variable with data from the radio module\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      radio.<span style=\"color:#a6e22e\">read</span>(<span style=\"color:#f92672\">&amp;</span>temphumi, <span style=\"color:#66d9ef\">sizeof</span>(temphumi));\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;temperature: &#34;</span>); Serial.<span style=\"color:#a6e22e\">print</span>(temphumi[<span style=\"color:#ae81ff\">0</span>]);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;,  humidity: &#34;</span>); Serial.<span style=\"color:#a6e22e\">println</span>(temphumi[<span style=\"color:#ae81ff\">1</span>]);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">2000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"long-long-address--0x1234abcdefll\">long long address = 0x1234ABCDEFLL;<a class=\"anchor\" href=\"#long-long-address--0x1234abcdefll\">#</a></h5>\r\n<ul>\n<li>receiver와 transmitter의 페어링을 위한 파이프(주소)를 지정함. (receiver와 transmitter의 파이프(주소)는 동일해야 함)</li>\n<li>주변 여러 사람이 동시에 nRF24L01 모듈을 사용할 경우, <strong>서로 다른 고유의 파이프(주소)를 지정</strong>하여야 한다.</li>\n</ul>\n<br>\n<h5 id=\"uint16_t-temphumi2\">uint16_t temphumi[2];<a class=\"anchor\" href=\"#uint16_t-temphumi2\">#</a></h5>\r\n<ul>\n<li>8-bit 기반 Arduino와 32-bit 기반 ESP32를 receiver와 transmitter로 혼용하여 사용할 경우, 아래와 같이 변수(혹은 배열)를 선언하면 문제가 발생함.</li>\n</ul>\n<pre tabindex=\"0\"><code>int temphumi[2];</code></pre><ul>\n<li>\n<p>8비트 아키텍처에서 int는 16비트이지만, 32비트 아키텍처에서는 32비트로 정의되기 때문이며,</p>\n</li>\n<li>\n<p>이로 인해 radio.write 또는 radio.read를 할때 일부 데이터가 송신(혹은 수신)되지 않을 수 있다.</p>\n</li>\n<li>\n<p>그러므로, arduino와 ESP32를 함께 사용할때에는, 변수(혹은 배열) 선언시 특정 비트의 변수로 제한하여 선언할 필요가 있다.</p>\n</li>\n<li>\n<p>단, 송수신기로 Arduino만 사용하거나, 혹은 ESP32만 사용하는 경우에는 int를 사용해도 됨</p>\n</li>\n</ul>\n<br>\n<h5 id=\"radioopenreadingpipe1-address\">radio.openReadingPipe(1, address);<a class=\"anchor\" href=\"#radioopenreadingpipe1-address\">#</a></h5>\r\n<p>페어링 파이프(주소)를 오픈</p>\n<br>\n<br>\n<h4 id=\"sketch-nrf24l01-transmitter-with-esp32\">sketch: nRF24L01 transmitter with ESP32<a class=\"anchor\" href=\"#sketch-nrf24l01-transmitter-with-esp32\">#</a></h4>\r\n<h5 id=\"library-for-dht11-or-dht22-sensor\">library for DHT11 or DHT22 sensor<a class=\"anchor\" href=\"#library-for-dht11-or-dht22-sensor\">#</a></h5>\r\n<p>먼저 온습도 센서 데이터를 보내기 위해 온습도 센서 라이브러리를 설치</p>\n<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt; <strong>DHT</strong> 검색</p>\n<ul>\n<li>\n<p>먼저 **DHT sensor library (by Adafruit)**를 검색하여 <strong>설치</strong>를 누르면,</p>\n<p><img src=\"../image/dht22-03.png\" alt=\"\" /></p>\n</li>\n</ul>\n<ul>\n<li>\n<p><strong>Dependencies for library DHT sensor library</strong> 창이 나오면 <strong>Install all</strong>을 클릭하여 2개의 라이브러리를 동시에 설치</p>\n<p><img src=\"../image/dht22-04.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Libraries for NRF24L01+ module.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//RF24 object with two pins defined with arguments. CE: 4, CSN: 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Address of the pipe. 40 bit long, you can choose this freely.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Remember to use different address in different projects.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for temperature, humidity sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&#34;DHT.h&#34;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DHTPIN    13         </span><span style=\"color:#75715e\">// data pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define DHTTYPE   DHT22      </span><span style=\"color:#75715e\">// change to DHT11 if you&#39;re using the DHT11\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//float temphumi[2];         // AM2301(DHT21) -&gt; DHT21, AM2302(DHT22) -&gt; DHT22\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">uint16_t</span> temphumi[<span style=\"color:#ae81ff\">2</span>];\n</span></span><span style=\"display:flex;\"><span>DHT <span style=\"color:#a6e22e\">dht</span>(DHTPIN, DHTTYPE);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Start the radio\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">openWritingPipe</span>(address);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//RF24_PA_MIN, RF24_PA_LOW, RF24_PA_HIGH and RF24_PA_MAX\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//NRF24L01: -18dBm, -12dBm,-6dBM, and 0dBm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  radio.<span style=\"color:#a6e22e\">setPALevel</span>(RF24_PA_LOW);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">stopListening</span>();\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>  dht.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Get temperature from the sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">uint16_t</span> t <span style=\"color:#f92672\">=</span> dht.<span style=\"color:#a6e22e\">readTemperature</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> h <span style=\"color:#f92672\">=</span> dht.<span style=\"color:#a6e22e\">readHumidity</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  temphumi[<span style=\"color:#ae81ff\">0</span>] <span style=\"color:#f92672\">=</span> t;\n</span></span><span style=\"display:flex;\"><span>  temphumi[<span style=\"color:#ae81ff\">1</span>] <span style=\"color:#f92672\">=</span> h;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Send the temperature wirelessly, print error if failed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#f92672\">!</span>radio.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#f92672\">&amp;</span>temphumi, <span style=\"color:#66d9ef\">sizeof</span>(temphumi))) {\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#a6e22e\">F</span>(<span style=\"color:#e6db74\">&#34;Sending temperature failed&#34;</span>));\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Check if any reads failed and exit early (to try again).\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">isnan</span>(h) <span style=\"color:#f92672\">||</span> <span style=\"color:#a6e22e\">isnan</span>(t)) {\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#a6e22e\">F</span>(<span style=\"color:#e6db74\">&#34;Failed to read from DHT sensor!&#34;</span>));\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">return</span>;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">2000</span>);\n</span></span><span style=\"display:flex;\"><span>  } \n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"long-long-address--0x1234abcdefll-1\">long long address = 0x1234ABCDEFLL;<a class=\"anchor\" href=\"#long-long-address--0x1234abcdefll-1\">#</a></h5>\r\n<ul>\n<li>receiver와 transmitter의 페어링을 위한 파이프(주소)를 지정함. (receiver와 transmitter의 파이프(주소)는 동일해야 함)</li>\n<li>주변 여러 사람이 동시에 nRF24L01 모듈을 사용할 경우, <strong>서로 다른 고유의 파이프(주소)를 지정</strong>하여야 한다.</li>\n</ul>\n<br>\n<h5 id=\"radiosetpalevelrf24_pa_low\">radio.setPALevel(RF24_PA_LOW);<a class=\"anchor\" href=\"#radiosetpalevelrf24_pa_low\">#</a></h5>\r\n<p>송신 전파 강도를 설정한다.</p>\n<ul>\n<li>RF24_PA_MIN</li>\n<li>RF24_PA_LOW</li>\n<li>RF24_PA_HIGH</li>\n<li>RF24_PA_MAX: 가장 강함 (전류소모도 큼)</li>\n</ul>\n<br>\n<h4 id=\"schematic-nrf24l01-transmitter-with-esp32\">schematic: nRF24L01 transmitter with ESP32<a class=\"anchor\" href=\"#schematic-nrf24l01-transmitter-with-esp32\">#</a></h4>\r\n<p>스케치를 업로드하고, 컴퓨터와 연결한 USB선을 분리한 뒤, 독립하여 동작하도록 외부 전원을 연결한다.</p>\n<p>※ nRF24L01 모듈에 따라 10uF 캐페시터가 없으면 통신이 안되는 경우가 있음. 이런 경우에만 사용할 것.</p>\n<p><img src=\"../image/n/ESP32-nRF24L01-03.png\" alt=\"\" /></p>\n<br>\n<ul>\n<li>ESP32를 외부전원을 통해 동작시키려면, ESP32의 5V/GND 단자를 사용하여 5<del>12V의 전압(최적 전압은 6</del>7V)을 공급하여야 한다.</li>\n<li>여기서는 DC-DC 5V 승압회로를 사용하여 ESP32에 5V를 공급한다. (배터리는 18650 1개 (3.7V) 사용)</li>\n</ul>\n<br>\n<h5 id=\"18650을-사용하여-5v-외부-전원-만들기\">18650을 사용하여 5V 외부 전원 만들기<a class=\"anchor\" href=\"#18650%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-5v-%ec%99%b8%eb%b6%80-%ec%a0%84%ec%9b%90-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h5>\r\n<ul>\n<li>18650 소켓에 F단자를 납땜하여 연결한다. (<strong>M단자는 서로 맞닿을 경우 과열 위험이 있으므로 사용금지!</strong>)</li>\n</ul>\n<p><img src=\"../image/n/ESP32-nRF24L01-04.png\" alt=\"\" /></p>\n<br>\n<ul>\n<li>DC-DC 5V 승압 모듈에 아래 그림과 같이 납땜하여 연결한다. (USB단자는 사용하지 않음)</li>\n</ul>\n<p><img src=\"../image/n/ESP32-nRF24L01-06.png\" alt=\"\" /></p>\n<br>\n<p>※ USB단자가 있는 5V 승압 모듈을 사용하였지만, USB단자가 없는 승압모듈을 사용하면 더 깔끔하게 제작 가능하다.</p>\n<p><img src=\"../image/n/ESP32-nRF24L01-05.png\" alt=\"\" /></p>\n<br>\n<ul>\n<li>위 사진과 같이 납땜한 승압 모듈을 18650배터리와 ESP32에 연결한다.</li>\n</ul>\n<table>\n  <thead>\n      <tr>\n          <th>승압 모듈</th>\n          <th>ESP32</th>\n          <th>18650배터리</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>파란색 원 (GND)</td>\n          <td>GND</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>빨간색 원 (5V)</td>\n          <td>5V</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>노란색 원(IN+)</td>\n          <td></td>\n          <td>(+)극</td>\n      </tr>\n      <tr>\n          <td>초록색 원(IN-)</td>\n          <td></td>\n          <td>(-)극</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"result\">result<a class=\"anchor\" href=\"#result\">#</a></h4>\r\n<p><img src=\"../image/n/ESP32-nRF24L01-07.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"nrf24l01--dual-joystick\">nRF24L01 + dual joystick<a class=\"anchor\" href=\"#nrf24l01--dual-joystick\">#</a></h3>\r\n<p>2개의 조이스틱을 사용하여 x축, y축 좌표값을 받아보자.</p>\n<br>\n<h4 id=\"schematic-nrf24l01-dual-joystick-transmitter-with-esp32\">schematic: nRF24L01 dual joystick transmitter with ESP32<a class=\"anchor\" href=\"#schematic-nrf24l01-dual-joystick-transmitter-with-esp32\">#</a></h4>\r\n<p>하나의 조이스틱으로도 일반적인 조정이 가능하지만 시판되는 조정기의 경우 dual joystick(혹은 dual channel)을 사용하는 형태가 많으므로, 여기서도 이와 같은 형태의 transmitter를 만들어 보자.</p>\n<p><img src=\"../image/n/ESP32-nRF24L01-08.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"pinmap\">pinmap<a class=\"anchor\" href=\"#pinmap\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th>ESP32</th>\n          <th>Joystick1 (x축)</th>\n          <th>Joystick2 (y축)</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>GND</td>\n          <td>GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>5V</td>\n          <td>5V</td>\n          <td>5V</td>\n      </tr>\n      <tr>\n          <td>25</td>\n          <td>VRX</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>32</td>\n          <td></td>\n          <td>VRY</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c\" data-lang=\"c\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for no interference, two joysticks must be used with each other ADC!  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// one joystick use ADC1: GPIO 36,39,32,33,34,35\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// the other must use ADC2: GPIO 4,0,2,15,13,12,14,27,25,26\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_x_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;           <span style=\"color:#75715e\">// Left_Right GPIO25\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_y_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">32</span>;           <span style=\"color:#75715e\">// Forward_Back GPIO32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">struct</span> Value{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_x;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_y;\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Value data;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">void ResetData(){\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  data.value_x = 2800;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  data.value_y = 2800;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">}\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">openWritingPipe</span>(address);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">setPALevel</span>(RF24_PA_MIN);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">stopListening</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//ResetData();   \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  data.value_x <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">Jstick</span>(Jstick_x_pin);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>  data.value_y <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">Jstick</span>(Jstick_y_pin);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Serial.print(&#34;x: &#34;); Serial.print(data.value_x);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//Serial.print(&#34;, y: &#34;); Serial.println(data.value_y);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">uint16_t</span> <span style=\"color:#a6e22e\">Jstick</span>(<span style=\"color:#66d9ef\">int</span> Jstick_Pin){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">analogRead</span>(Jstick_Pin);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"joystick-gpio의-선정\">Joystick GPIO의 선정<a class=\"anchor\" href=\"#joystick-gpio%ec%9d%98-%ec%84%a0%ec%a0%95\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for no interference, two joysticks must be used with each other ADC! \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// one joystick use ADC1: GPIO 36,39,32,33,34,35\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// the other must use ADC2: GPIO 4,0,2,15,13,12,14,27,25,26\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_x_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;           <span style=\"color:#75715e\">// Left_Right GPIO25\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_y_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">32</span>;           <span style=\"color:#75715e\">// Forward_Back GPIO32\n</span></span></span></code></pre></div><ul>\n<li>2개의 joystick을 동시에 사용할때 동일한 ADC의 GPIO를 사용하면, 한쪽 joystick을 움직여 값을 변화시킬 경우 다른 한쪽 joystick을 움직이지 않았음에도 동시에 값이 일부 (소폭) 변화하는 현상이 나타났다.</li>\n<li>이 문제를 해결하기 위해 각각의 joystick을 서로 다른 ADC에 연결한다.\n<ul>\n<li>ADC1: GPIO 36,39,32,33,34,35 중 1개 사용 (예제에서는 GPIO 32를 y축 joystick으로 사용)</li>\n<li>ADC2:  GPIO 4,(0),(2),15,13,(12),14,27,25,26 중 1개 사용 (()안의 핀은 사용시 주의 필요)(예제에서는 GPIO 25를 x축 joystick으로 사용)</li>\n</ul>\n</li>\n<li>단, ESP32의 wifi 기능을 이용하면 ADC1핀 중에서 wifi 기능에 공유되는 핀의 사용에 제한을 받게 되므로 주의가 필요하다.</li>\n<li>그밖에도 사용하는 ADC의 noise를 제거하기 위해 다음과 같은 방법을 쓰는 것이 좋다.\n<ul>\n<li>GPIO와 GND에 100nF 케패시터를 연결하여 사용</li>\n<li>10여회 정도의 값을 받아 평균값으로 사용</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"schematic-nrf24l01-receiver-with-esp32-1\">schematic: nRF24L01 receiver with ESP32<a class=\"anchor\" href=\"#schematic-nrf24l01-receiver-with-esp32-1\">#</a></h4>\r\n<p><img src=\"../image/n/ESP32-nRF24L01-01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"schematic-nrf24l01-receiver-with-arduino-uno-1\">schematic: nRF24L01 receiver with Arduino UNO<a class=\"anchor\" href=\"#schematic-nrf24l01-receiver-with-arduino-uno-1\">#</a></h4>\r\n<p>위에서 사용한 Arduino UNO receiver와 동일함</p>\n<p><img src=\"../image/n/UNO-nRF24L01-01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">9</span> ,<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">struct</span> Value{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_x;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_y;\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Value data;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">void ResetData(){\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  data.value_x = 2800;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  data.value_y = 2800;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">}\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">openReadingPipe</span>(<span style=\"color:#ae81ff\">1</span>, address);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">setPALevel</span>(RF24_PA_LOW);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">startListening</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> lastRecvTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">recvData</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>( radio.<span style=\"color:#a6e22e\">available</span>()){\n</span></span><span style=\"display:flex;\"><span>    radio.<span style=\"color:#a6e22e\">read</span>(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>    lastRecvTime <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();  \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">recvData</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> now <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>( now <span style=\"color:#f92672\">-</span> lastRecvTime <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">1000</span>){\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//ResetData();\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;x: &#34;</span>); Serial.<span style=\"color:#a6e22e\">print</span>(data.value_x);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;, y: &#34;</span>); Serial.<span style=\"color:#a6e22e\">println</span>(data.value_y); \n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"result-1\">result<a class=\"anchor\" href=\"#result-1\">#</a></h4>\r\n<p><img src=\"../image/n/ESP32-nRF24L01-09.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"nrf24l01--dual-joystick--dual-servomotors\">nRF24L01 + dual joystick + dual Servomotors<a class=\"anchor\" href=\"#nrf24l01--dual-joystick--dual-servomotors\">#</a></h3>\r\n<h4 id=\"schematic-nrf24l01-dual-joystick-receiver-with-esp32\">schematic: nRF24L01 dual joystick receiver with ESP32<a class=\"anchor\" href=\"#schematic-nrf24l01-dual-joystick-receiver-with-esp32\">#</a></h4>\r\n<p><img src=\"../image/n/ESP32-nRF24L01-10.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"pinmap-1\">pinmap<a class=\"anchor\" href=\"#pinmap-1\">#</a></h5>\r\n<br>\n<h4 id=\"schematic-nrf24l01-dual-joystick-receiver-with-arduino\">schematic: nRF24L01 dual joystick receiver with Arduino<a class=\"anchor\" href=\"#schematic-nrf24l01-dual-joystick-receiver-with-arduino\">#</a></h4>\r\n<p><img src=\"../image/n/UNO-nRF24L01-02.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"pinmap-2\">pinmap<a class=\"anchor\" href=\"#pinmap-2\">#</a></h5>\r\n<br>\n<h4 id=\"schematic-nrf24l01-dual-joystick-receiver-with-esp32-standalone\">schematic: nRF24L01 dual joystick receiver with ESP32 (standalone)<a class=\"anchor\" href=\"#schematic-nrf24l01-dual-joystick-receiver-with-esp32-standalone\">#</a></h4>\r\n<p><img src=\"../image/n/esp32-nRF24L01-servo-02.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"pinmap-3\">pinmap<a class=\"anchor\" href=\"#pinmap-3\">#</a></h5>\r\n<br>\n<h4 id=\"schematic-nrf24l01-dual-joystick-receiver-with-arduino-standalone\">schematic: nRF24L01 dual joystick receiver with Arduino (standalone)<a class=\"anchor\" href=\"#schematic-nrf24l01-dual-joystick-receiver-with-arduino-standalone\">#</a></h4>\r\n<p><img src=\"../image/n/UNO-nRF24L01-03.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"pinmap-4\">pinmap<a class=\"anchor\" href=\"#pinmap-4\">#</a></h5>\r\n<br>\n<h4 id=\"sketch-nrf24l01-dual-joystick-receiver-with-arduino-standalone\">sketch: nRF24L01 dual joystick receiver with Arduino (standalone)<a class=\"anchor\" href=\"#sketch-nrf24l01-dual-joystick-receiver-with-arduino-standalone\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">9</span> ,<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">struct</span> Value{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_x;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_y;\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Value data;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">ResetData</span>(){\n</span></span><span style=\"display:flex;\"><span>  data.value_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2800</span>;\n</span></span><span style=\"display:flex;\"><span>  data.value_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2800</span>;\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Servo.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>Servo servo_x;\n</span></span><span style=\"display:flex;\"><span>Servo servo_y;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> servo_pin_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> servo_pin_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">6</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> angle_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">openReadingPipe</span>(<span style=\"color:#ae81ff\">1</span>, address);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">setPALevel</span>(RF24_PA_LOW);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">startListening</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  servo_x.<span style=\"color:#a6e22e\">attach</span>(servo_pin_x, <span style=\"color:#ae81ff\">500</span>, <span style=\"color:#ae81ff\">2400</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_y.<span style=\"color:#a6e22e\">attach</span>(servo_pin_y, <span style=\"color:#ae81ff\">500</span>, <span style=\"color:#ae81ff\">2400</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_y.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> lastRecvTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">recvData</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>( radio.<span style=\"color:#a6e22e\">available</span>()){\n</span></span><span style=\"display:flex;\"><span>    radio.<span style=\"color:#a6e22e\">read</span>(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>    lastRecvTime <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();  \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">recvData</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> now <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>( now <span style=\"color:#f92672\">-</span> lastRecvTime <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">1000</span>){\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">ResetData</span>();\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">rotate_xy</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">rotate_xy</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;x: &#34;</span>); Serial.<span style=\"color:#a6e22e\">print</span>(data.value_x);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;, y: &#34;</span>); Serial.<span style=\"color:#a6e22e\">println</span>(data.value_y);\n</span></span><span style=\"display:flex;\"><span>  angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(data.value_x, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">4095</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>);\n</span></span><span style=\"display:flex;\"><span>  angle_y <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(data.value_y, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">4095</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.<span style=\"color:#a6e22e\">write</span>(angle_x);\n</span></span><span style=\"display:flex;\"><span>  servo_y.<span style=\"color:#a6e22e\">write</span>(angle_y);  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>); \n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"sketch-for-esp32\">sketch: for ESP32<a class=\"anchor\" href=\"#sketch-for-esp32\">#</a></h4>\r\n<h5 id=\"library-for-esp32\">library for ESP32<a class=\"anchor\" href=\"#library-for-esp32\">#</a></h5>\r\n<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong> 에서 &ldquo;<strong>esp32servo</strong>&rdquo; 검색</p>\n<p><img src=\"../image/n/esp32-nRF24L01-servo-01.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"sketch-2\">sketch<a class=\"anchor\" href=\"#sketch-2\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span> ,<span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">struct</span> Value{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_x;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_y;\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Value data;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">void ResetData(){\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  data.value_x = 2800;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  data.value_y = 2800;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">}\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Servo motor library for ESP32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;ESP32Servo.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>Servo servo_x;  <span style=\"color:#75715e\">// create servo object to control a servo\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>Servo servo_y;  <span style=\"color:#75715e\">// 16 servo objects can be created on the ESP32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> angle_x, angle_y;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Recommended PWM GPIO pins on the ESP32 include 2,4,12-19,21-23,25-27,32-33 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> servo_xPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> servo_yPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">32</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// RecvTime\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> lastRecvTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">recvData</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>( radio.<span style=\"color:#a6e22e\">available</span>()){\n</span></span><span style=\"display:flex;\"><span>    radio.<span style=\"color:#a6e22e\">read</span>(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>    lastRecvTime <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();  \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">openReadingPipe</span>(<span style=\"color:#ae81ff\">1</span>, address);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">setPALevel</span>(RF24_PA_LOW);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">startListening</span>();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Allow allocation of all timers\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ESP32PWM<span style=\"color:#f92672\">::</span><span style=\"color:#a6e22e\">allocateTimer</span>(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span><span style=\"color:#a6e22e\">allocateTimer</span>(<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span><span style=\"color:#a6e22e\">allocateTimer</span>(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span><span style=\"color:#a6e22e\">allocateTimer</span>(<span style=\"color:#ae81ff\">3</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.<span style=\"color:#a6e22e\">setPeriodHertz</span>(<span style=\"color:#ae81ff\">50</span>);    <span style=\"color:#75715e\">// standard 50 hz servo\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  servo_y.<span style=\"color:#a6e22e\">setPeriodHertz</span>(<span style=\"color:#ae81ff\">50</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.<span style=\"color:#a6e22e\">attach</span>(servo_xPin, <span style=\"color:#ae81ff\">500</span>, <span style=\"color:#ae81ff\">2500</span>); <span style=\"color:#75715e\">// attaches the servo on pin 25 &amp; 32 to the servo object\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  servo_y.<span style=\"color:#a6e22e\">attach</span>(servo_yPin, <span style=\"color:#ae81ff\">500</span>, <span style=\"color:#ae81ff\">2500</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// using default min/max of 1000us and 2000us\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// different servos may require different min/max settings\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// for an accurate 0 to 180 sweep\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">recvData</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> now <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>( now <span style=\"color:#f92672\">-</span> lastRecvTime <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">1000</span>){\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//ResetData();\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">rotate_xy</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">rotate_xy</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;x: &#34;</span>); Serial.<span style=\"color:#a6e22e\">print</span>(data.value_x);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;, y: &#34;</span>); Serial.<span style=\"color:#a6e22e\">println</span>(data.value_y);\n</span></span><span style=\"display:flex;\"><span>  angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(data.value_x, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">4095</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>);\n</span></span><span style=\"display:flex;\"><span>  angle_y <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(data.value_y, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">4095</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.<span style=\"color:#a6e22e\">write</span>(angle_x);\n</span></span><span style=\"display:flex;\"><span>  servo_y.<span style=\"color:#a6e22e\">write</span>(angle_y);  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>); \n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/esp32-nrf24l01/","title":"ESP32, nRF24L01 무선통신","content":"<h3 id=\"nrf24l01\">nRF24L01<a class=\"anchor\" href=\"#nrf24l01\">#</a></h3>\r\n<h4 id=\"library\">library<a class=\"anchor\" href=\"#library\">#</a></h4>\r\n<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt; <strong>nRF24L01</strong> 검색한 후, <strong>RF24 by TMRh20, Avamander</strong> 설치</p>\n<p><img src=\"/image/n/ESP32-nRF24L01-02.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"schematic-nrf24l01-receiver-with-esp32\">schematic: nRF24L01 receiver with ESP32<a class=\"anchor\" href=\"#schematic-nrf24l01-receiver-with-esp32\">#</a></h4>\r\n<p><img src=\"/image/n/ESP32-nRF24L01-01.png\" alt=\"\" /></p>\n<p>※ nRF24L01 모듈에 따라 10uF 캐페시터가 없으면 통신이 안되는 경우가 있음. 이런 경우에만 사용할 것.</p>\n<br>\n<h5 id=\"pinmap-안테나를-위로-향하게-두고-모듈을-위에서-내려다-볼때의-핀배열\">pinmap: (안테나를 위로 향하게 두고, 모듈을 위에서 내려다 볼때의 핀배열)<a class=\"anchor\" href=\"#pinmap-%ec%95%88%ed%85%8c%eb%82%98%eb%a5%bc-%ec%9c%84%eb%a1%9c-%ed%96%a5%ed%95%98%ea%b2%8c-%eb%91%90%ea%b3%a0-%eb%aa%a8%eb%93%88%ec%9d%84-%ec%9c%84%ec%97%90%ec%84%9c-%eb%82%b4%eb%a0%a4%eb%8b%a4-%eb%b3%bc%eb%95%8c%ec%9d%98-%ed%95%80%eb%b0%b0%ec%97%b4\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th>ESP32</th>\n          <th>3V3</th>\n          <th>IO5</th>\n          <th>IO23</th>\n          <th>None</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td></td>\n          <td>↑</td>\n          <td>↑</td>\n          <td>↑</td>\n          <td>↑</td>\n      </tr>\n      <tr>\n          <td>nRF24L01</td>\n          <td>VCC + 10uF</td>\n          <td>CSN</td>\n          <td>MOSI</td>\n          <td>IRQ</td>\n      </tr>\n      <tr>\n          <td>(위에서 보이는 핀배열)</td>\n          <td>GND + 10uF</td>\n          <td>CE</td>\n          <td>SCK</td>\n          <td>MISO</td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>↓</td>\n          <td>↓</td>\n          <td>↓</td>\n          <td>↓</td>\n      </tr>\n      <tr>\n          <td><strong>ESP32</strong></td>\n          <td><strong>GND</strong></td>\n          <td><strong>IO4</strong></td>\n          <td><strong>IO18</strong></td>\n          <td><strong>IO19</strong></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"sketch-11-chat-room\">sketch: 1:1 Chat Room<a class=\"anchor\" href=\"#sketch-11-chat-room\">#</a></h4>\r\n<ul>\n<li>양방향 송수신을 위하여 위 회로도를 보고 2개의 모듈을 만든 뒤, 다음 스케치를 업로드한다.</li>\n<li>시리얼 모니터를 띄운 뒤, 메세지를 전송해본다.</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Libraries for NRF24L01+ module.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;nRF24L01.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//RF24 object with two pins defined with arguments. CE: 4, CSN: 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Address of the pipe. 40 bit long, you can choose this freely.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Remember to use different address in different projects.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> count <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">char</span> stext[<span style=\"color:#ae81ff\">32</span>] <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;&#34;</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> spos <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">char</span> rtext[<span style=\"color:#ae81ff\">32</span>] <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;&#34;</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> rpos <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">sendText</span>(<span style=\"color:#66d9ef\">char</span> <span style=\"color:#f92672\">*</span> text, <span style=\"color:#66d9ef\">int</span> tlen)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  radio.stopListening();\n</span></span><span style=\"display:flex;\"><span>  radio.openWritingPipe(address);\n</span></span><span style=\"display:flex;\"><span>  radio.write(stext, tlen);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  Serial.print(<span style=\"color:#e6db74\">&#34;SEND: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.println(text);    \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  memset(stext, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">32</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  radio.openReadingPipe(<span style=\"color:#ae81ff\">0</span>, address);\n</span></span><span style=\"display:flex;\"><span>  radio.startListening();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Start the radio\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  radio.begin();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Open reading pipe with given address and start listening for incoming data\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  radio.openReadingPipe(<span style=\"color:#ae81ff\">0</span>, address);\n</span></span><span style=\"display:flex;\"><span>  radio.setPALevel(RF24_PA_MIN); \n</span></span><span style=\"display:flex;\"><span>  radio.startListening();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>(<span style=\"color:#ae81ff\">0</span> <span style=\"color:#f92672\">&lt;</span> Serial.available()) {\n</span></span><span style=\"display:flex;\"><span>    stext[spos] <span style=\"color:#f92672\">=</span> Serial.read();\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(stext[spos] <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">0x0a</span>) {\n</span></span><span style=\"display:flex;\"><span>      sendText(stext, spos);\n</span></span><span style=\"display:flex;\"><span>      spos <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      spos <span style=\"color:#f92672\">+=</span> <span style=\"color:#ae81ff\">1</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (radio.available()) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">while</span> (radio.available()) {\n</span></span><span style=\"display:flex;\"><span>      radio.read(rtext, <span style=\"color:#ae81ff\">32</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    Serial.print(<span style=\"color:#e6db74\">&#34;RECV: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.println(rtext);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"sketch-11-chat-room-1\">sketch: 1:1 Chat Room<a class=\"anchor\" href=\"#sketch-11-chat-room-1\">#</a></h4>\r\n<p>다음은 처음 실행 후 시리얼모니터에 입력한 ID를 이용하여 Chat Room을 만드는 코드이다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Libraries for NRF24L01+ module.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;nRF24L01.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//RF24 object with two pins defined with arguments. CE: 4, CSN: 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Address of the pipe. 40 bit long, you can choose this freely.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Remember to use different address in different projects.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>String username <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>String dataInput;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">char</span> dataToSend[<span style=\"color:#ae81ff\">32</span>];\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">char</span> dataReceived[<span style=\"color:#ae81ff\">32</span>];\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Start the radio\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">2000</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;Enter username: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  radio.begin();\n</span></span><span style=\"display:flex;\"><span>  radio.setRetries(<span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Open reading pipe with given address and start listening for incoming data\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  radio.openWritingPipe(address);\n</span></span><span style=\"display:flex;\"><span>  radio.openReadingPipe(<span style=\"color:#ae81ff\">0</span>, address);\n</span></span><span style=\"display:flex;\"><span>  radio.setPALevel(RF24_PA_MIN); \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//set username\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">while</span>(username <span style=\"color:#f92672\">==</span> <span style=\"color:#e6db74\">&#34;&#34;</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(Serial.available()) {\n</span></span><span style=\"display:flex;\"><span>      username <span style=\"color:#f92672\">=</span> Serial.readStringUntil(<span style=\"color:#e6db74\">&#39;\\n&#39;</span>);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Welcome &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>      Serial.println(username);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  radio.startListening();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(radio.available()) {\n</span></span><span style=\"display:flex;\"><span>    radio.read(<span style=\"color:#f92672\">&amp;</span>dataReceived, <span style=\"color:#66d9ef\">sizeof</span>(dataReceived));\n</span></span><span style=\"display:flex;\"><span>    Serial.println(dataReceived);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(Serial.available()) {\n</span></span><span style=\"display:flex;\"><span>    radio.stopListening();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    dataInput <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;[&#34;</span> <span style=\"color:#f92672\">+</span> username <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;] &#34;</span> <span style=\"color:#f92672\">+</span> Serial.readStringUntil(<span style=\"color:#e6db74\">&#39;\\n&#39;</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.println(dataInput);\n</span></span><span style=\"display:flex;\"><span>    dataInput.toCharArray(dataToSend, <span style=\"color:#ae81ff\">32</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    radio.write(<span style=\"color:#f92672\">&amp;</span>dataToSend, <span style=\"color:#66d9ef\">sizeof</span>(dataToSend));\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"nrf24l01을-이용한-센서값-전송\">nRF24L01을 이용한 센서값 전송<a class=\"anchor\" href=\"#nrf24l01%ec%9d%84-%ec%9d%b4%ec%9a%a9%ed%95%9c-%ec%84%bc%ec%84%9c%ea%b0%92-%ec%a0%84%ec%86%a1\">#</a></h3>\r\n<h4 id=\"for-receiver\">for Receiver<a class=\"anchor\" href=\"#for-receiver\">#</a></h4>\r\n<h5 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h5>\r\n<p><img src=\"/image/n/ESP32-nRF24L01-01.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h5>\r\n<h6 id=\"long-long-address--0x1234abcdefll\">long long address = 0x1234ABCDEFLL;<a class=\"anchor\" href=\"#long-long-address--0x1234abcdefll\">#</a></h6>\r\n<ul>\n<li>receiver와 transmitter의 페어링을 위한 파이프(주소)를 지정함. (receiver와 transmitter의 파이프(주소)는 동일해야 함)</li>\n<li>주변 여러 사람이 동시에 nRF24L01 모듈을 사용할 경우, <strong>서로 다른 고유의 파이프(주소)를 지정</strong>하여야 한다.</li>\n</ul>\n<br>\n<h6 id=\"uint16_t-temphumi2\">uint16_t temphumi[2];<a class=\"anchor\" href=\"#uint16_t-temphumi2\">#</a></h6>\r\n<ul>\n<li>\n<p>8-bit 기반 Arduino와 32-bit 기반 ESP32를 receiver와 transmitter로 혼용하여 사용할 경우, 아래와 같이 <strong>int를 사용하여 변수(혹은 배열)를 선언하면 문제가 발생</strong>함.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> temphumi[<span style=\"color:#ae81ff\">2</span>];</span></span></code></pre></div><p>8비트 아키텍처에서 int는 16비트이지만, 32비트 아키텍처에서는 32비트로 정의되기 때문이며,</p>\n</li>\n<li>\n<p>이로 인해 radio.write 또는 radio.read를 할때 일부 데이터가 송신(혹은 수신)되지 않을 수 있다.</p>\n</li>\n<li>\n<p>그러므로, arduino와 ESP32를 함께 사용할때에는, 아래와 같은 형태로 변수(혹은 배열) 선언시 특정 비트의 변수로 제한하여 선언할 필요가 있다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">uint16_t</span> temphumi[<span style=\"color:#ae81ff\">2</span>];</span></span></code></pre></div></li>\n<li>\n<p>단, 송수신기로 Arduino만 사용하거나, 혹은 ESP32만 사용하는 경우에는 int를 사용해도 됨</p>\n</li>\n</ul>\n<br>\n<h6 id=\"radioopenreadingpipe1-address\">radio.openReadingPipe(1, address);<a class=\"anchor\" href=\"#radioopenreadingpipe1-address\">#</a></h6>\r\n<p>페어링 파이프(주소)를 오픈</p>\n<br>\n<h4 id=\"for-transmitter\">for Transmitter<a class=\"anchor\" href=\"#for-transmitter\">#</a></h4>\r\n<h5 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h5>\r\n<p>스케치를 업로드하고, 컴퓨터와 연결한 USB선을 분리한 뒤, 독립하여 동작하도록 외부 전원을 연결한다.</p>\n<p>※ nRF24L01 모듈에 따라 10uF 캐페시터가 없으면 통신이 안되는 경우가 있음. 이런 경우에만 사용할 것.</p>\n<p><img src=\"/image/n/ESP32-nRF24L01-03.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"18650을-사용하여-5v-외부-전원-만들기\">18650을 사용하여 5V 외부 전원 만들기<a class=\"anchor\" href=\"#18650%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-5v-%ec%99%b8%eb%b6%80-%ec%a0%84%ec%9b%90-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h5>\r\n<ul>\n<li>ESP32를 외부전원을 통해 동작시키려면, ESP32의 5V/GND 단자를 사용하여 5<del>12V의 전압(최적 전압은 6</del>7V)을 공급하여야 한다.</li>\n<li>18650 소켓에 F단자를 납땜하여 연결한다. (<strong>M단자는 서로 맞닿을 경우 과열 위험이 있으므로 사용금지!</strong>)</li>\n</ul>\n<p><img src=\"/image/n/ESP32-nRF24L01-04.png\" alt=\"\" /></p>\n<br>\n<ul>\n<li>DC-DC 5V 승압 모듈에 아래 그림과 같이 납땜하여 연결한다. (USB단자는 사용하지 않음)</li>\n</ul>\n<p><img src=\"/image/n/ESP32-nRF24L01-06.png\" alt=\"\" /></p>\n<br>\n<p>※ USB단자가 있는 5V 승압 모듈을 사용하였지만, USB단자가 없는 승압모듈을 사용하면 더 깔끔하게 제작 가능하다.</p>\n<p><img src=\"/image/n/ESP32-nRF24L01-05.png\" alt=\"\" /></p>\n<br>\n<ul>\n<li>위 사진과 같이 납땜한 승압 모듈을 18650배터리와 ESP32에 연결한다.</li>\n</ul>\n<table>\n  <thead>\n      <tr>\n          <th>승압 모듈</th>\n          <th>ESP32</th>\n          <th>18650배터리</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>파란색 원 (GND)</td>\n          <td>GND</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>빨간색 원 (5V)</td>\n          <td>5V</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>노란색 원(IN+)</td>\n          <td></td>\n          <td>(+)극</td>\n      </tr>\n      <tr>\n          <td>초록색 원(IN-)</td>\n          <td></td>\n          <td>(-)극</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<blockquote class='book-hint '>\r\n<p>(transmitter의 경우, 많은 전류를 사용하지 않으므로) 위 그림처럼 ESP32에 DC컨버터를 사용하여 전원을 공급하는 형태보다는, <strong>TTGO T-Energy</strong> 사용을 추천함</p></blockquote><table>\n  <thead>\n      <tr>\n          <th>TTGO T-Energy</th>\n          <th></th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td><figure class=\"center\"><img src=\"/image/n/TTGO-T-Energy03.png\" width=\"67%\">\n</figure>\n</td>\n          <td><figure class=\"center\"><img src=\"/image/n/TTGO-T-Energy04.png\" width=\"67%\">\n</figure>\n</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h5 id=\"sketch-dht22-temperature-and-humidity-sensor\">sketch: DHT22 temperature and humidity Sensor<a class=\"anchor\" href=\"#sketch-dht22-temperature-and-humidity-sensor\">#</a></h5>\r\n<h6 id=\"library-for-dht11-or-dht22-sensor\">library for DHT11 or DHT22 sensor<a class=\"anchor\" href=\"#library-for-dht11-or-dht22-sensor\">#</a></h6>\r\n<p>먼저 온습도 센서 데이터를 보내기 위해 온습도 센서 라이브러리를 설치</p>\n<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt; <strong>DHT</strong> 검색</p>\n<ul>\n<li>\n<p>먼저 **DHT sensor library (by Adafruit)**를 검색하여 <strong>설치</strong>를 누르면,</p>\n<p><img src=\"/image/dht22-03.png\" alt=\"\" /></p>\n</li>\n</ul>\n<ul>\n<li>\n<p><strong>Dependencies for library DHT sensor library</strong> 창이 나오면 <strong>Install all</strong>을 클릭하여 2개의 라이브러리를 동시에 설치</p>\n<p><img src=\"/image/dht22-04.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Libraries for NRF24L01+ module.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//RF24 object with two pins defined with arguments. CE: 4, CSN: 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Address of the pipe. 40 bit long, you can choose this freely.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Remember to use different address in different projects.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for temperature, humidity sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&#34;DHT.h&#34;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DHTPIN    13         </span><span style=\"color:#75715e\">// data pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define DHTTYPE   DHT22      </span><span style=\"color:#75715e\">// change to DHT11 if you&#39;re using the DHT11\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//float temphumi[2];         // AM2301(DHT21) -&gt; DHT21, AM2302(DHT22) -&gt; DHT22\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">uint16_t</span> temphumi[<span style=\"color:#ae81ff\">2</span>];\n</span></span><span style=\"display:flex;\"><span>DHT <span style=\"color:#a6e22e\">dht</span>(DHTPIN, DHTTYPE);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Start the radio\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">openWritingPipe</span>(address);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//RF24_PA_MIN, RF24_PA_LOW, RF24_PA_HIGH and RF24_PA_MAX\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//NRF24L01: -18dBm, -12dBm,-6dBM, and 0dBm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  radio.<span style=\"color:#a6e22e\">setPALevel</span>(RF24_PA_LOW);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">stopListening</span>();\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>  dht.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Get temperature from the sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">uint16_t</span> t <span style=\"color:#f92672\">=</span> dht.<span style=\"color:#a6e22e\">readTemperature</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> h <span style=\"color:#f92672\">=</span> dht.<span style=\"color:#a6e22e\">readHumidity</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  temphumi[<span style=\"color:#ae81ff\">0</span>] <span style=\"color:#f92672\">=</span> t;\n</span></span><span style=\"display:flex;\"><span>  temphumi[<span style=\"color:#ae81ff\">1</span>] <span style=\"color:#f92672\">=</span> h;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Send the temperature wirelessly, print error if failed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#f92672\">!</span>radio.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#f92672\">&amp;</span>temphumi, <span style=\"color:#66d9ef\">sizeof</span>(temphumi))) {\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#a6e22e\">F</span>(<span style=\"color:#e6db74\">&#34;Sending temperature failed&#34;</span>));\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Check if any reads failed and exit early (to try again).\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">isnan</span>(h) <span style=\"color:#f92672\">||</span> <span style=\"color:#a6e22e\">isnan</span>(t)) {\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#a6e22e\">F</span>(<span style=\"color:#e6db74\">&#34;Failed to read from DHT sensor!&#34;</span>));\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">return</span>;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">2000</span>);\n</span></span><span style=\"display:flex;\"><span>  } \n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<ul>\n<li>\n<p>long long address = 0x1234ABCDEFLL;</p>\n<ul>\n<li>\n<p>receiver와 transmitter의 페어링을 위한 파이프(주소)를 지정함. (receiver와 transmitter의 파이프(주소)는 동일해야 함)</p>\n</li>\n<li>\n<p>주변 여러 사람이 동시에 nRF24L01 모듈을 사용할 경우, <strong>서로 다른 고유의 파이프(주소)를 지정</strong>하여야 한다.</p>\n</li>\n</ul>\n</li>\n</ul>\n<br>\n<ul>\n<li>radio.setPALevel(RF24_PA_LOW);\n<ul>\n<li>RF24_PA_MIN</li>\n<li>RF24_PA_LOW</li>\n<li>RF24_PA_HIGH</li>\n<li>RF24_PA_MAX: 가장 강함 (전류소모도 큼)</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"result\">result<a class=\"anchor\" href=\"#result\">#</a></h4>\r\n<p><img src=\"/image/n/ESP32-nRF24L01-07.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"nrf24l01--dual-joystick\">nRF24L01 + Dual Joystick<a class=\"anchor\" href=\"#nrf24l01--dual-joystick\">#</a></h3>\r\n<p>2개의 조이스틱을 사용하여 x축, y축 좌표값을 받아보자.</p>\n<br>\n<h4 id=\"for-transmitter-1\">for Transmitter<a class=\"anchor\" href=\"#for-transmitter-1\">#</a></h4>\r\n<h5 id=\"schematic-nrf24l01-transmitter-with-esp32-dual-joystick\">schematic: nRF24L01 transmitter with ESP32, Dual Joystick<a class=\"anchor\" href=\"#schematic-nrf24l01-transmitter-with-esp32-dual-joystick\">#</a></h5>\r\n<p>하나의 조이스틱으로도 일반적인 조정이 가능하지만, 시판되는 조정기의 경우 dual joystick(혹은 dual channel)을 사용하는 형태가 많으므로, 여기서도 이와 같은 형태의 transmitter를 만들어 보자.</p>\n<p><img src=\"/image/n/ESP32-nRF24L01-08.png\" alt=\"\" /></p>\n<ul>\n<li>\n<p>위 그림에서는 18650을 DC 컨버터를 사용하여 5V핀에 입력하고 있음.</p>\n</li>\n<li>\n<p>(transmitter의 경우, 많은 전류를 사용하지 않으므로) 위 그림처럼 ESP32에 DC컨버터를 사용하여 전원을 공급하는 형태보다는, TTGO T-Energy 사용을 추천함</p>\n<table>\n  <thead>\n      <tr>\n          <th>TTGO T-Energy</th>\n          <th></th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td><figure class=\"center\"><img src=\"/image/n/TTGO-T-Energy03.png\" width=\"67%\">\n</figure>\n</td>\n          <td><figure class=\"center\"><img src=\"/image/n/TTGO-T-Energy04.png\" width=\"67%\">\n</figure>\n</td>\n      </tr>\n  </tbody>\n</table>\n</li>\n</ul>\n<br>\n<h6 id=\"pinmap\">pinmap<a class=\"anchor\" href=\"#pinmap\">#</a></h6>\r\n<table>\n  <thead>\n      <tr>\n          <th>ESP32</th>\n          <th>Joystick1 (x축)</th>\n          <th>Joystick2 (y축)</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>GND</td>\n          <td>GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>5V</td>\n          <td>5V</td>\n          <td>5V</td>\n      </tr>\n      <tr>\n          <td>25</td>\n          <td>VRX</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>32</td>\n          <td></td>\n          <td>VRY</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h5 id=\"sketch-nrf24l01-transmitter-with-esp32-dual-joystick\">sketch: nRF24L01 transmitter with ESP32, Dual Joystick<a class=\"anchor\" href=\"#sketch-nrf24l01-transmitter-with-esp32-dual-joystick\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c\" data-lang=\"c\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for no interference, two joysticks must be used with each other ADC!  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// one joystick use ADC1: GPIO 36,39,32,33,34,35\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// the other must use ADC2: GPIO 4,0,2,15,13,12,14,27,25,26\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_x_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;           <span style=\"color:#75715e\">// Left_Right GPIO25\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_y_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">32</span>;           <span style=\"color:#75715e\">// Forward_Back GPIO32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">struct</span> Value{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_x;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_y;\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Value data;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">openWritingPipe</span>(address);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">setPALevel</span>(RF24_PA_MIN);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">stopListening</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  data.value_x <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">Jstick</span>(Jstick_x_pin);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>  data.value_y <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">Jstick</span>(Jstick_y_pin);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Serial.print(&#34;x: &#34;); Serial.print(data.value_x);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//Serial.print(&#34;, y: &#34;); Serial.println(data.value_y);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">uint16_t</span> <span style=\"color:#a6e22e\">Jstick</span>(<span style=\"color:#66d9ef\">int</span> Jstick_Pin){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">return</span> <span style=\"color:#a6e22e\">analogRead</span>(Jstick_Pin);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"joystick-gpio의-선정\">Joystick GPIO의 선정<a class=\"anchor\" href=\"#joystick-gpio%ec%9d%98-%ec%84%a0%ec%a0%95\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for no interference, two joysticks must be used with each other ADC! \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// one joystick use ADC1: GPIO 36,39,32,33,34,35\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// the other must use ADC2: GPIO 4,0,2,15,13,12,14,27,25,26\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_x_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;           <span style=\"color:#75715e\">// Left_Right GPIO25\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_y_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">32</span>;           <span style=\"color:#75715e\">// Forward_Back GPIO32\n</span></span></span></code></pre></div><ul>\n<li>2개의 joystick을 동시에 사용할때 동일한 ADC의 GPIO를 사용하면, <strong>한쪽 joystick을 움직여 값을 변화시킬 경우 다른 한쪽 joystick을 움직이지 않았음에도 동시에 값이 일부 (소폭) 변화하는 현상</strong>이 생긴다.</li>\n<li>이 문제를 해결하기 위해 각각의 joystick을 서로 다른 ADC에 연결한다.\n<ul>\n<li>ADC1: GPIO 36,39,32,33,34,35 중 1개 사용 (예제에서는 GPIO 32를 y축 joystick으로 사용)</li>\n<li>ADC2:  GPIO 4,(0),(2),15,13,(12),14,27,25,26 중 1개 사용 (()안의 핀은 사용시 주의 필요) (예제에서는 GPIO 25를 x축 joystick으로 사용)</li>\n</ul>\n</li>\n<li>단, ESP32의 wifi 기능을 이용하면 ADC1핀 중에서 wifi 기능에 공유되는 핀의 사용에 제한을 받게 되므로 주의가 필요하다.</li>\n<li>그밖에도 사용하는 ADC의 noise를 제거하기 위해 다음과 같은 방법을 쓰는 것이 좋다.\n<ul>\n<li>GPIO와 GND에 100nF 케패시터를 연결하여 사용</li>\n<li>10여회 정도의 값을 받아 평균값으로 사용</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"for-receiver-1\">for Receiver<a class=\"anchor\" href=\"#for-receiver-1\">#</a></h4>\r\n<h5 id=\"schematic-nrf24l01-receiver-with-esp32-1\">schematic: nRF24L01 receiver with ESP32<a class=\"anchor\" href=\"#schematic-nrf24l01-receiver-with-esp32-1\">#</a></h5>\r\n<p><img src=\"/image/n/ESP32-nRF24L01-01.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c++\" data-lang=\"c++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span> ,<span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">struct</span> <span style=\"color:#a6e22e\">Value</span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_x;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_y;\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Value data;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  radio.begin();\n</span></span><span style=\"display:flex;\"><span>  radio.openReadingPipe(<span style=\"color:#ae81ff\">1</span>, address);\n</span></span><span style=\"display:flex;\"><span>  radio.setPALevel(RF24_PA_LOW);\n</span></span><span style=\"display:flex;\"><span>  radio.startListening();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> lastRecvTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">recvData</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>( radio.available()){\n</span></span><span style=\"display:flex;\"><span>    radio.read(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>    lastRecvTime <span style=\"color:#f92672\">=</span> millis();  \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> now <span style=\"color:#f92672\">=</span> millis();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>( now <span style=\"color:#f92672\">-</span> lastRecvTime <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">1000</span>){\n</span></span><span style=\"display:flex;\"><span>\trecvData();\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  Serial.print(<span style=\"color:#e6db74\">&#34;x: &#34;</span>); Serial.print(data.value_x);\n</span></span><span style=\"display:flex;\"><span>  Serial.print(<span style=\"color:#e6db74\">&#34;, y: &#34;</span>); Serial.println(data.value_y); \n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"result-1\">result<a class=\"anchor\" href=\"#result-1\">#</a></h4>\r\n<p><img src=\"/image/n/ESP32-nRF24L01-09.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"nrf24l01--dual-joystick--dual-servomotors\">nRF24L01 + Dual Joystick + Dual Servomotors<a class=\"anchor\" href=\"#nrf24l01--dual-joystick--dual-servomotors\">#</a></h3>\r\n<h4 id=\"for-receiver-2\">for Receiver<a class=\"anchor\" href=\"#for-receiver-2\">#</a></h4>\r\n<h5 id=\"schematic-nrf24l01-receiver-with-esp32-dual-joystick\">schematic: nRF24L01 receiver with ESP32, Dual Joystick<a class=\"anchor\" href=\"#schematic-nrf24l01-receiver-with-esp32-dual-joystick\">#</a></h5>\r\n<p><img src=\"/image/n/ESP32-nRF24L01-10.png\" alt=\"\" /></p>\n<ul>\n<li>MG996R과 같이 전류 사용량이 큰 서보 모터를 2개 이상 사용하는 경우, ESP32의 5V pin에서 공급하는 전류량이 부족하여 서보모터 동작이 원활치 않을 수 있다. 이런 경우에는 아래와 같이 외부 전원을 사용하여야 한다.</li>\n</ul>\n<br>\n<h6 id=\"pinmap-1\">pinmap<a class=\"anchor\" href=\"#pinmap-1\">#</a></h6>\r\n<table>\n  <thead>\n      <tr>\n          <th>ESP32</th>\n          <th>servo_x</th>\n          <th>servo_y</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>GND</td>\n          <td>GND (갈)</td>\n          <td>GND (갈)</td>\n      </tr>\n      <tr>\n          <td>5V</td>\n          <td>5V (빨)</td>\n          <td>5V (빨)</td>\n      </tr>\n      <tr>\n          <td>25</td>\n          <td>VRX (주)</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>32</td>\n          <td></td>\n          <td>VRY (주)</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h5 id=\"schematic-nrf24l01-receiver-with-esp32-dual-joystick-external-power-standalone\">schematic: nRF24L01 receiver with ESP32, Dual Joystick, External Power (standalone)<a class=\"anchor\" href=\"#schematic-nrf24l01-receiver-with-esp32-dual-joystick-external-power-standalone\">#</a></h5>\r\n<p><img src=\"/image/n/esp32-nRF24L01-servo-02.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"외부-전원의-구성\">외부 전원의 구성<a class=\"anchor\" href=\"#%ec%99%b8%eb%b6%80-%ec%a0%84%ec%9b%90%ec%9d%98-%ea%b5%ac%ec%84%b1\">#</a></h5>\r\n<ul>\n<li>\n<p>18650 리튬이온 전지 2개를 사용하여 7.4V를 공급 (혹은 18650 3개를 사용하여 11.1V로 구성)</p>\n</li>\n<li>\n<p>XL4015E1칩을 사용한 HW-514 DC-DC regulator를 사용하여,  7.4V → 5V로 전압을 낮춘다. (유사한 형태의 모듈 사용 가능)</p>\n<table>\n  <thead>\n      <tr>\n          <th>HW-514 HC v0.2</th>\n          <th>Specification</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td><figure class=\"center\"><img src=\"/image/n/esp32-nRF24L01-servo-03.png\" width=\"50%\">\n</figure>\n</td>\n          <td>Input voltage: 5-36V (6.5V 미만 입력시 디스플레이 동작안됨) <br/><br/>Output voltage: 1.25-32V continuously adjustable<br/>Output current: adjustable, up to 5A (4.5A 이내 권장)<br/>Output power: 75W max (50W 이내 권장)<br/> <br/>Conversion efficiency: up to 96%<br/> <br/>Working frequency: 180KHz<br/>Short circuit protection: yes<br/>Over-temperature protection<br/>Input reverse polarity protection: None,<br/>(필요시 고전류 다이오드를 입력단에 사용)<br/> <br/>Module Size: 68.2 * 38.8 * 15 (mm)</td>\n      </tr>\n  </tbody>\n</table>\n<ul>\n<li>\n<p>왼쪽 가변저항으로 출력 전압을 5V 조정 (오른쪽 가변저항은 출력 전류를 조정)</p>\n</li>\n<li>\n<p>2P 출력단자는 모터에 직접 연결</p>\n</li>\n<li>\n<p>USB포트는 USB-A to microUSB 케이블을 사용하여 ESP32에 연결 (이런 이유로 USB단자가 있는 모듈을 사용하는 것이 편함)</p>\n</li>\n</ul>\n</li>\n<li>\n<p>아래와 같은 mini360, mini560 등의 소형 컨버터를 사용하면,</p>\n<table>\n  <thead>\n      <tr>\n          <th style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/n/regulator-mini560.png\" width=\"67%\">\n</figure>\n</th>\n          <th style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/n/regulator-mini360.png\" width=\"47%\">\n</figure>\n</th>\n      </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n<ul>\n<li>SG90 서보모터는 정상적으로 동작</li>\n<li>MG996R 서보모터를 연결한 경우에는 컨버터 자체가 불안정하여 모터 동작이 멈춤</li>\n</ul>\n</li>\n</ul>\n<br>\n<h5 id=\"-외부-전원-구성시-주의할-점\">※ 외부 전원 구성시 주의할 점!<a class=\"anchor\" href=\"#-%ec%99%b8%eb%b6%80-%ec%a0%84%ec%9b%90-%ea%b5%ac%ec%84%b1%ec%8b%9c-%ec%a3%bc%ec%9d%98%ed%95%a0-%ec%a0%90\">#</a></h5>\r\n<ul>\n<li>외부 전원을 ESP32의 5V or 3.3V 핀에 직접 연결하지 않도록 한다.</li>\n<li><strong>외부 전원을 DC 컨버터를 사용하여 5V or 3.3V로 만든 경우에도 5V or 3.3V 핀에 직접 연결하면 안된다.</strong></li>\n<li>ESP32의 스펙상 5V or 3.3V 핀을 사용하여 외부 전원을 구성해도 된다고 나와 있지만, 실제로는 모터 등의 모듈이 작동하지 않거나, 심할 경우 ESP32 보드가 망가질 수 있으므로 이와 같은 구성은 지양한다.</li>\n<li>(경험상) ESP32의 microUSB포트를 통해 전원을 공급하는 것이 가장 안정적으로 동작하였음!</li>\n</ul>\n<br>\n<h5 id=\"sketch-nrf24l01-receiver-with-esp32-dual-joystick--external-power-standalone\">sketch: nRF24L01 receiver with ESP32, Dual Joystick , External Power (standalone)<a class=\"anchor\" href=\"#sketch-nrf24l01-receiver-with-esp32-dual-joystick--external-power-standalone\">#</a></h5>\r\n<h6 id=\"library-for-esp32\">library for ESP32<a class=\"anchor\" href=\"#library-for-esp32\">#</a></h6>\r\n<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong> 에서 &ldquo;<strong>esp32servo</strong>&rdquo; 검색</p>\n<p><img src=\"/image/n/esp32-nRF24L01-servo-01.png\" alt=\"\" /></p>\n<br>\n<h6 id=\"sketch-2\">sketch<a class=\"anchor\" href=\"#sketch-2\">#</a></h6>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">struct</span> Value{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_x;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_y;\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Value data;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Servo motor library for ESP32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;ESP32Servo.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>Servo servo_x;  <span style=\"color:#75715e\">// create servo object to control a servo\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>Servo servo_y;  <span style=\"color:#75715e\">// 16 servo objects can be created on the ESP32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> angle_x, angle_y;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Recommended PWM GPIO pins on the ESP32 include 2,4,12-19,21-23,25-27,32-33 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> servo_xPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">15</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> servo_yPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// RecvTime\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> lastRecvTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">recvData</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>( radio.<span style=\"color:#a6e22e\">available</span>()){\n</span></span><span style=\"display:flex;\"><span>    radio.<span style=\"color:#a6e22e\">read</span>(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>    lastRecvTime <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();  \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">openReadingPipe</span>(<span style=\"color:#ae81ff\">1</span>, address);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">setPALevel</span>(RF24_PA_LOW);\n</span></span><span style=\"display:flex;\"><span>  radio.<span style=\"color:#a6e22e\">startListening</span>();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Allow allocation of all timers\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ESP32PWM<span style=\"color:#f92672\">::</span><span style=\"color:#a6e22e\">allocateTimer</span>(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span><span style=\"color:#a6e22e\">allocateTimer</span>(<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span><span style=\"color:#a6e22e\">allocateTimer</span>(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span><span style=\"color:#a6e22e\">allocateTimer</span>(<span style=\"color:#ae81ff\">3</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.<span style=\"color:#a6e22e\">setPeriodHertz</span>(<span style=\"color:#ae81ff\">50</span>);    <span style=\"color:#75715e\">// standard 50 hz servo\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  servo_y.<span style=\"color:#a6e22e\">setPeriodHertz</span>(<span style=\"color:#ae81ff\">50</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.<span style=\"color:#a6e22e\">attach</span>(servo_xPin, <span style=\"color:#ae81ff\">500</span>, <span style=\"color:#ae81ff\">2500</span>); <span style=\"color:#75715e\">// attaches the servo on pin 25 &amp; 32 to the servo object\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  servo_y.<span style=\"color:#a6e22e\">attach</span>(servo_yPin, <span style=\"color:#ae81ff\">500</span>, <span style=\"color:#ae81ff\">2500</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// using default min/max of 1000us and 2000us\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// different servos may require different min/max settings\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// for an accurate 0 to 180 sweep\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">recvData</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> now <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>( now <span style=\"color:#f92672\">-</span> lastRecvTime <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">1000</span>){\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//ResetData();\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">rotate_xy</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">rotate_xy</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;x: &#34;</span>); Serial.<span style=\"color:#a6e22e\">print</span>(data.value_x);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;, y: &#34;</span>); Serial.<span style=\"color:#a6e22e\">println</span>(data.value_y);\n</span></span><span style=\"display:flex;\"><span>  angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(data.value_x, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">4095</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>);\n</span></span><span style=\"display:flex;\"><span>  angle_y <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(data.value_y, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">4095</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.<span style=\"color:#a6e22e\">write</span>(angle_x);\n</span></span><span style=\"display:flex;\"><span>  servo_y.<span style=\"color:#a6e22e\">write</span>(angle_y);  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>); \n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h4 id=\"조이스틱-중립-조정\">조이스틱 중립 조정<a class=\"anchor\" href=\"#%ec%a1%b0%ec%9d%b4%ec%8a%a4%ed%8b%b1-%ec%a4%91%eb%a6%bd-%ec%a1%b0%ec%a0%95\">#</a></h4>\r\n<ul>\n<li>\n<p>2개의 조이스틱을 중립에 두고, 시리얼 모니터를 통해 센서값을 확인했을때, x축 서보모터는 2700정도, y축 서보모터는 2800 정도의 값을 나타내었다.</p>\n</li>\n<li>\n<p>이를 기준으로 조이스틱의 값에 따른 대략적인 형태를 생각해보면 (아래의 원 그림에 2개의 조이스틱 값을 모두 나타냄)</p>\n<p><img src=\"/image/s/ESP32-2servo-02.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>x축 조이스틱 값이</p>\n<ul>\n<li>1350~3400 일때: 중립 (서보모터는 90도 위치로 이동)</li>\n<li>0~1350 일때: 서보모터 1도씩 감소 (0도 위치가 될때까지)\n<ul>\n<li>단, 자동차 조향 시스템에 적용할 경우 <strong>55~90도</strong> 사이에서만 움직이도록 조정</li>\n</ul>\n</li>\n<li>3400~4095 일때: 서보모터 1도씩 증가 (180도 위치가 될때까지)\n<ul>\n<li>단, 자동차 조향 시스템에 적용할 경우 <strong>90~125도</strong> 사이에서만 움직이도록 조정</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>y축 조이스틱 값이</p>\n<ul>\n<li>1400~3350 일때: 중립 (서보모터는 90도 위치로 이동)</li>\n<li>0~1400 일때: 서보모터 1도씩 감소 (0도 위치가 될때까지) (자동차에 적용시 브레이크 역할)</li>\n<li>3350~4095 일때: 서보모터 1도씩 증가 (180도 위치가 될때까지) (자동차에 적용시 액셀레이터 역할)</li>\n</ul>\n</li>\n<li>\n<p>위 그림에 나타낸 값은 모든 조이스틱에 적용되는 절대적인 값이 아니며, 조이스틱마다 중립을 나타내는 센서값이 다르므로, 초기값을 100번 읽은 후 평균값을 만들어 사용한다.</p>\n</li>\n</ul>\n<br>\n<h5 id=\"sketch-3\">sketch<a class=\"anchor\" href=\"#sketch-3\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;RF24.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>RF24 <span style=\"color:#a6e22e\">radio</span>(<span style=\"color:#ae81ff\">4</span> ,<span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">long</span> <span style=\"color:#66d9ef\">long</span> address <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x1234ABCDEFLL</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">struct</span> <span style=\"color:#a6e22e\">Value</span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_x;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint16_t</span> value_y;\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Value data;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Servo motor library for ESP32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;ESP32Servo.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>Servo servo_x;  <span style=\"color:#75715e\">// create servo object to control a servo\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>Servo servo_y;  <span style=\"color:#75715e\">// 16 servo objects can be created on the ESP32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> angle_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> center_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> center_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> ref_xl, ref_xr, ref_ya, ref_yb;    <span style=\"color:#75715e\">// Servo rotation reference value \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for no interference, each joysticks must be used with other ADC! (* not recommended)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// one joystick use ADC1: GPIO 36,39,32,33,34,35\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// the other must use ADC2: GPIO 4,0*,2,15,13,12,14,27,25,26\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> servo_xPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">15</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> servo_yPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// RecvTime\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> lastRecvTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">centerData</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>(i <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">100</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(radio.available()){\n</span></span><span style=\"display:flex;\"><span>      radio.read(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>      center_x <span style=\"color:#f92672\">=</span> center_x <span style=\"color:#f92672\">+</span> data.value_x;\n</span></span><span style=\"display:flex;\"><span>      center_y <span style=\"color:#f92672\">=</span> center_y <span style=\"color:#f92672\">+</span> data.value_y;\n</span></span><span style=\"display:flex;\"><span>      i<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  center_x <span style=\"color:#f92672\">=</span> center_x <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">100</span>;         <span style=\"color:#75715e\">// x축 조이스틱 센터값\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  center_y <span style=\"color:#f92672\">=</span> center_y <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">100</span>;         <span style=\"color:#75715e\">// y축 조이스틱 센터값\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  ref_xl <span style=\"color:#f92672\">=</span> center_x <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;             <span style=\"color:#75715e\">// 좌회전 동작 기준값\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ref_xr <span style=\"color:#f92672\">=</span> (<span style=\"color:#ae81ff\">4095</span> <span style=\"color:#f92672\">+</span> center_x) <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;    <span style=\"color:#75715e\">// 우회전 동작 기준값\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ref_ya <span style=\"color:#f92672\">=</span> (<span style=\"color:#ae81ff\">4095</span> <span style=\"color:#f92672\">+</span> center_y) <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;    <span style=\"color:#75715e\">// accelator 동작 기준값\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ref_yb <span style=\"color:#f92672\">=</span> center_y <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;             <span style=\"color:#75715e\">// brake 동작 기준값\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">recvData</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>(radio.available()){\n</span></span><span style=\"display:flex;\"><span>    radio.read(<span style=\"color:#f92672\">&amp;</span>data, <span style=\"color:#66d9ef\">sizeof</span>(Value));\n</span></span><span style=\"display:flex;\"><span>    lastRecvTime <span style=\"color:#f92672\">=</span> millis();  \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  radio.begin();\n</span></span><span style=\"display:flex;\"><span>  radio.openReadingPipe(<span style=\"color:#ae81ff\">1</span>, address);\n</span></span><span style=\"display:flex;\"><span>  radio.setPALevel(RF24_PA_LOW);\n</span></span><span style=\"display:flex;\"><span>  radio.startListening();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Allow allocation of all timers\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ESP32PWM<span style=\"color:#f92672\">::</span>allocateTimer(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span>allocateTimer(<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span>allocateTimer(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span>allocateTimer(<span style=\"color:#ae81ff\">3</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.setPeriodHertz(<span style=\"color:#ae81ff\">50</span>);    <span style=\"color:#75715e\">// standard 50 hz servo\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  servo_y.setPeriodHertz(<span style=\"color:#ae81ff\">50</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.attach(servo_xPin, <span style=\"color:#ae81ff\">500</span>, <span style=\"color:#ae81ff\">2500</span>); <span style=\"color:#75715e\">// attaches the servo on pin 25 &amp; 32 to the servo object\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  servo_y.attach(servo_yPin, <span style=\"color:#ae81ff\">500</span>, <span style=\"color:#ae81ff\">2500</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// using default min/max of 1000us and 2000us\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// different servos may require different min/max settings\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// for an accurate 0 to 180 sweep\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// center value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  centerData();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> now <span style=\"color:#f92672\">=</span> millis();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>( now <span style=\"color:#f92672\">-</span> lastRecvTime <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">5</span>){    <span style=\"color:#75715e\">// 5ms 마다 서보출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    recvData();\n</span></span><span style=\"display:flex;\"><span>    rotate_xy();\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">rotate_xy</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//Serial.print(&#34;x: &#34;); Serial.print(data.value_x);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//Serial.print(&#34;, y: &#34;); Serial.println(data.value_y);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//x축 서보 구동 조건 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span>(data.value_x <span style=\"color:#f92672\">&lt;</span> ref_xl) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(angle_x <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>      angle_x<span style=\"color:#f92672\">--</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(data.value_x <span style=\"color:#f92672\">&gt;</span> ref_xr) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(angle_x <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">180</span>) {\n</span></span><span style=\"display:flex;\"><span>      angle_x<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(angle_x <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">90</span>) {\n</span></span><span style=\"display:flex;\"><span>      angle_x<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(angle_x <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">90</span>) {\n</span></span><span style=\"display:flex;\"><span>      angle_x<span style=\"color:#f92672\">--</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      angle_x <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span> <span style=\"color:#75715e\">//y축 서보 구동 조건 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> <span style=\"color:#66d9ef\">if</span>(data.value_y <span style=\"color:#f92672\">&lt;</span> ref_yb) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(angle_y <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>      angle_y<span style=\"color:#f92672\">--</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      angle_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(data.value_y <span style=\"color:#f92672\">&gt;</span> ref_ya) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(angle_y <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">180</span>) {\n</span></span><span style=\"display:flex;\"><span>      angle_y<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      angle_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(angle_y <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">90</span>) {\n</span></span><span style=\"display:flex;\"><span>      angle_y<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(angle_y <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">90</span>) {\n</span></span><span style=\"display:flex;\"><span>      angle_y<span style=\"color:#f92672\">--</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      angle_y <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  servo_x.write(angle_x);\n</span></span><span style=\"display:flex;\"><span>  servo_y.write(angle_y);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">5</span>);                    <span style=\"color:#75715e\">// delay를 더 줄이면 서보 모터 기어에 무리가 감\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/esp32-oled/","title":"ESP32, OLED (한글 출력 하기)","content":"<h3 id=\"oled\">OLED<a class=\"anchor\" href=\"#oled\">#</a></h3>\r\n<h4 id=\"종류\">종류<a class=\"anchor\" href=\"#%ec%a2%85%eb%a5%98\">#</a></h4>\r\n<p>ESP32나 Arduino에서 사용할 수 있는  oled의 종류는 매우 많지만, 주로 128*64 픽셀을 가진 0.96인치, 1.3인치의 SSD1306, SH1106 컨트롤러를 사용한 oled가 판매되고 있으며, 통신 프로토콜은 I2C나 SPI를 사용한다. oled 모듈 구입시 픽셀수, 컨트롤러 및 통신프로토콜을 잘 알아두어야 스케치 작성시 참고할 수 있음에 유의한다. I2C 방식은 GPIO를 2개만 사용하여 구성이 쉽다는 장점이 있고, SPI방식은 4~5개의 GPIO를 사용하지만 속도가 빠르다는 장점이 있다. 겉모습만으로는 컨트롤러를 확인하기는 어렵다.</p>\n<table>\n  <thead>\n      <tr>\n          <th>I2C</th>\n          <th>SPI</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td><img src=\"/image/u/u8g2-oled-i2c-01.png\" alt=\"\" /></td>\n          <td><img src=\"/image/u/u8g2-oled-spi-01.png\" alt=\"\" /></td>\n      </tr>\n      <tr>\n          <td><img src=\"/image/u/u8g2-oled-i2c-02.png\" alt=\"\" /></td>\n          <td><img src=\"/image/u/u8g2-oled-spi-02.png\" alt=\"\" /></td>\n      </tr>\n  </tbody>\n</table>\n<p>이밖에도 U8g2 라이브러리에서 사용가능한 다양한 oled의 종류를 아래 링크에서 확인할 수 있다.</p>\n<p><a href=\"https://github.com/olikraus/u8g2/wiki/u8g2setupcpp#constructor-reference\">Constructor Reference for U8g2 library</a></p>\n <br>\n<br>\n<h3 id=\"spi-oled\">SPI OLED<a class=\"anchor\" href=\"#spi-oled\">#</a></h3>\r\n<h4 id=\"pinmap\">pinmap<a class=\"anchor\" href=\"#pinmap\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>OLED</th>\n          <th>ESP32 (HW_SPI로 사용시) (VSPI)</th>\n          <th></th>\n          <th>(I2C겸용보드인 경우)</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>GND</td>\n          <td>GND</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>VDD</td>\n          <td>3.3V</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>D0</td>\n          <td><strong>18</strong> (HW_SPI 사용시 GPIO_18로 고정)</td>\n          <td>SCK/CLK/CLOCK</td>\n          <td>SCL</td>\n      </tr>\n      <tr>\n          <td>D1</td>\n          <td><strong>23</strong> (HW_SPI 사용시 GPIO_23으로 고정)</td>\n          <td>DATA/DIN/MOSI</td>\n          <td>SDA</td>\n      </tr>\n      <tr>\n          <td>RES</td>\n          <td>15</td>\n          <td>RST/RESET</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>DC</td>\n          <td>14</td>\n          <td>Data Command</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>CS</td>\n          <td>5</td>\n          <td>Chip Select</td>\n          <td></td>\n      </tr>\n  </tbody>\n</table>\n<p>※ HW_SPI로 사용하는 경우에는 D0, D1의 핀번호를 바꿀 수 없으며, SW_SPI로 사용하는 경우에는 사용되는 모든 핀의 번호를 임의로 지정하여 사용할 수 있다.</p>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<ul>\n<li>SW_SPI 연결시에는 스케치에서 지정하는 GPIO핀에 연결한다.</li>\n<li>HW_SPI로 연결할 때의 회로도는 아래 그림과 같다.</li>\n</ul>\n<p><img src=\"/image/u/u8g2-oled-spi-03.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<p>oled를 SPI로 연결하는 경우, 다음을 추가해야 한다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span></span></span></code></pre></div><br>\n<h5 id=\"sketch-sh1106-hw_spi\">sketch: SH1106, HW_SPI<a class=\"anchor\" href=\"#sketch-sh1106-hw_spi\">#</a></h5>\r\n<p>HW_SPI를 사용하는 경우에는 D0(CLK), D1(MOSI)을 ESP32에 지정된 핀으로 사용하기 때문에, 나머지 3개의 핀만 sketch에서 지정해주면 된다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for HW_SPI (VSPI)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>U8G2_SH1106_128X64_NONAME_F_4W_HW_SPI <span style=\"color:#a6e22e\">u8g2</span>(U8G2_R0, <span style=\"color:#75715e\">/* cs=*/</span> <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#75715e\">/* dc=*/</span> <span style=\"color:#ae81ff\">14</span>, <span style=\"color:#75715e\">/* reset=*/</span> <span style=\"color:#ae81ff\">15</span>);</span></span></code></pre></div><br>\n<h5 id=\"sketch-sh1106-sw_spi\">sketch: SH1106, SW_SPI<a class=\"anchor\" href=\"#sketch-sh1106-sw_spi\">#</a></h5>\r\n<p>SW_SPI를 사용하는 경우, 4~5개의 핀을 sketch에 지정해주어야 한다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SW_SPI\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>U8G2_SH1106_128X64_NONAME_F_4W_SW_SPI <span style=\"color:#a6e22e\">u8g2</span>(U8G2_R0, <span style=\"color:#75715e\">/* clock=*/</span> <span style=\"color:#ae81ff\">26</span>, <span style=\"color:#75715e\">/* data=*/</span> <span style=\"color:#ae81ff\">25</span>, <span style=\"color:#75715e\">/* cs=*/</span> <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#75715e\">/* dc=*/</span> <span style=\"color:#ae81ff\">14</span>, <span style=\"color:#75715e\">/* reset=*/</span> <span style=\"color:#ae81ff\">15</span>);</span></span></code></pre></div><br>\n<h5 id=\"sketch-ssd1306-hw_spi\">sketch: SSD1306, HW_SPI<a class=\"anchor\" href=\"#sketch-ssd1306-hw_spi\">#</a></h5>\r\n<p>SSD1306을 사용하는 oled의 경우 <strong>U8G2_SH1106_</strong>~ 부분을 <strong>U8G2_SSD1306_</strong>~ 으로 수정하여 사용한다. 자세한 옵션은 <a href=\"https://github.com/olikraus/u8g2/wiki/u8g2setupcpp#constructor-reference\">Constructor Reference for U8g2 library</a>에서 확인할 수 있다.</p>\n<pre tabindex=\"0\"><code>// for HW_SPI (VSPI)\nU8G2_SSD1306_128X64_NONAME_F_4W_HW_SPI u8g2(U8G2_R0, /* cs=*/ 5, /* dc=*/ 14, /* reset=*/ 15);</code></pre><br>\n<h5 id=\"sketch-ssd1306-sw_spi\">sketch: SSD1306, SW_SPI<a class=\"anchor\" href=\"#sketch-ssd1306-sw_spi\">#</a></h5>\r\n<p>SW_SPI를 사용하는 경우, 4~5개의 핀을 sketch에 지정해주어야 한다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SW_SPI\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>U8G2_SSD1306_128X64_NONAME_F_4W_SW_SPI <span style=\"color:#a6e22e\">u8g2</span>(U8G2_R0, <span style=\"color:#75715e\">/* clock=*/</span> <span style=\"color:#ae81ff\">26</span>, <span style=\"color:#75715e\">/* data=*/</span> <span style=\"color:#ae81ff\">25</span>, <span style=\"color:#75715e\">/* cs=*/</span> <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#75715e\">/* dc=*/</span> <span style=\"color:#ae81ff\">14</span>, <span style=\"color:#75715e\">/* reset=*/</span> <span style=\"color:#ae81ff\">15</span>);</span></span></code></pre></div><br>\n<br>\n<h3 id=\"i2c-oled\">I2C OLED<a class=\"anchor\" href=\"#i2c-oled\">#</a></h3>\r\n<h4 id=\"pinmap-1\">pinmap<a class=\"anchor\" href=\"#pinmap-1\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>OLED</th>\n          <th>ESP32</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>VDD</td>\n          <td>3.3V</td>\n      </tr>\n      <tr>\n          <td>SDA</td>\n          <td><strong>21</strong> (HW_I2C 사용시 GPIO_21로 고정)</td>\n      </tr>\n      <tr>\n          <td>SCL</td>\n          <td><strong>22</strong> (HW_I2C 사용시 GPIO_22으로 고정)</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/u/u8g2-oled-i2c-03.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<h5 id=\"sketch-sh1106-hw_i2c\">sketch: SH1106, HW_I2C<a class=\"anchor\" href=\"#sketch-sh1106-hw_i2c\">#</a></h5>\r\n<p>HW_I2C를 사용하는 경우에는 SDA, SCL을 ESP32에 지정된 핀으로 사용하기 때문에, 구동 드라이버만 지정해주면 된다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SH1106,  I2C, (ESP32: SDA 21, SCL 22)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>U8G2_SH1106_128X64_NONAME_F_HW_I2C <span style=\"color:#a6e22e\">u8g2</span>(U8G2_R0, <span style=\"color:#75715e\">/* reset=*/</span> U8X8_PIN_NONE);</span></span></code></pre></div><br>\n<h5 id=\"sketch-ssd1306-hw_i2c\">sketch: SSD1306, HW_I2C<a class=\"anchor\" href=\"#sketch-ssd1306-hw_i2c\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SSD1306, I2C, (ESP32: SDA 21, SCL 22)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>U8G2_SSD1306_128X64_NONAME_F_HW_I2C <span style=\"color:#a6e22e\">u8g2</span>(U8G2_R0, <span style=\"color:#75715e\">/* reset=*/</span> U8X8_PIN_NONE);</span></span></code></pre></div><br>\n<br>\n<h3 id=\"u8g2-라이브러리\">U8g2 라이브러리<a class=\"anchor\" href=\"#u8g2-%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac\">#</a></h3>\r\n<p>ESP32나 Arduino에서 OLED를 사용을 위한 대표적인 라이브러리는 3~4가지 정도이다.</p>\n<ul>\n<li>U8glib</li>\n<li><strong>U8g2</strong></li>\n<li>Adafruit SSD1306</li>\n<li>UTF8_HanDraw</li>\n</ul>\n<p>이들 중에서도 특히 U8glib와 Adafruit SSD1306 라이브러리가 가장 많이 사용되고 있다. 그렇지만 한글 출력이 쉽지 않다는 단점이 있으며, U8glib는 현재 개발이 중단된 상태이기도 하다. U8g2는 U8glib를 이어 새롭게 개발되는 라이브러리이며, U8glib의 기능을 모두 포함하고 있으므로 접근이 용이하다. 그러므로 여기서는 U8g2 라이브러리를 중심으로 ESP32에서 OLED를 사용하는 방법을 알아보고, 이에 더하여 한글 출력이 용이한 UTF8_HanDraw를 사용해보도록 한다.</p>\n<br>\n<h4 id=\"사용-방법\">사용 방법<a class=\"anchor\" href=\"#%ec%82%ac%ec%9a%a9-%eb%b0%a9%eb%b2%95\">#</a></h4>\r\n<h5 id=\"라이브러리-설치\">라이브러리 설치<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%84%a4%ec%b9%98\">#</a></h5>\r\n<ul>\n<li><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt; <strong>u8g2</strong> 검색 후 <strong>설치</strong> 클릭</li>\n</ul>\n<p><img src=\"/image/u/u8g2-01.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"u8g2-reference\">U8g2 reference<a class=\"anchor\" href=\"#u8g2-reference\">#</a></h5>\r\n<p>U8g2 라이브러리 사용에 필요한 명령어들은 <a href=\"https://github.com/olikraus/u8g2/wiki/u8g2reference\">u8g2reference · olikraus/u8g2 Wiki · GitHub</a> 를 참고한다.</p>\n<br>\n<h4 id=\"sketch-2\">sketch<a class=\"anchor\" href=\"#sketch-2\">#</a></h4>\r\n<ul>\n<li>\n<p>SH1106 드라이버를 사용하여 HW_SPI로 OLED 출력을 수행할 경우, 아래와 같은 예제를 사용해볼 수 있다.</p>\n</li>\n<li>\n<p>실제 사용하는 OLED 드라이버와 통신 프로토콜에 따라 sketch를 수정해서 사용해야 한다.</p>\n</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Arduino.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;U8g2lib.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SPI\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for using Korean NanumGothicCoding font\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#include &#34;u8g2_font_unifont_t_korean_NanumGothicCoding_16.h&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Please UNCOMMENT one of the contructor lines below\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// U8g2 Contructor List (Frame Buffer)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// The complete list is available here: https://github.com/olikraus/u8g2/wiki/u8g2setupcpp\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Please update the pin numbers according to your setup. Use U8X8_PIN_NONE if the reset pin is not connected\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for HW_SPI (VSPI)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>U8G2_SH1106_128X64_NONAME_F_4W_HW_SPI <span style=\"color:#a6e22e\">u8g2</span>(U8G2_R0, <span style=\"color:#75715e\">/* cs=*/</span> <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#75715e\">/* dc=*/</span> <span style=\"color:#ae81ff\">14</span>, <span style=\"color:#75715e\">/* reset=*/</span> <span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SW_SPI\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SH1106_128X64_NONAME_F_4W_SW_SPI u8g2(U8G2_R0, /* clock=*/ 26, /* data=*/ 25, /* cs=*/ 5, /* dc=*/ 14, /* reset=*/ 15);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SSD1306, I2C, (ESP32: SDA 21, SCL 22)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SH1106,  I2C, (ESP32: SDA 21, SCL 22)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SH1106_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">enableUTF8Print</span>();   <span style=\"color:#75715e\">// enable UTF8 support for the Arduino print() function\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">firstPage</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">do</span> {\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">setFont</span>(u8g2_font_ncenB14_tr);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">drawStr</span>(<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">15</span>, <span style=\"color:#e6db74\">&#34;SKS STEAM!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">drawTriangle</span>(<span style=\"color:#ae81ff\">27</span>,<span style=\"color:#ae81ff\">50</span>, <span style=\"color:#ae81ff\">64</span>,<span style=\"color:#ae81ff\">32</span>, <span style=\"color:#ae81ff\">100</span>,<span style=\"color:#ae81ff\">50</span>);\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">while</span> ( u8g2.<span style=\"color:#a6e22e\">nextPage</span>() );\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"기본-사용-선언\">기본 사용 선언<a class=\"anchor\" href=\"#%ea%b8%b0%eb%b3%b8-%ec%82%ac%ec%9a%a9-%ec%84%a0%ec%96%b8\">#</a></h5>\r\n<p>void setup() 내에 U8g2 라이브러리를 사용하여 oled를 사용하는 것을 선언 한다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>u8g2.<span style=\"color:#a6e22e\">begin</span>();</span></span></code></pre></div><br>\n<h5 id=\"폰트\">폰트<a class=\"anchor\" href=\"#%ed%8f%b0%ed%8a%b8\">#</a></h5>\r\n<ul>\n<li>폰트는 <strong>u8g2_font_ncenB14_tr</strong>를 사용하고 있는데, <a href=\"https://github.com/olikraus/u8g2/wiki/fntlist8#u8g2-font-list\">fntlist8 · olikraus/u8g2 Wiki · GitHub</a>에서 글자 크기별로 사용 가능한 폰트 목록을 확인할 수 있다.</li>\n<li>폰트명에 ncenB14가 포함되어 있으므로 <strong>폰트(세로) 픽셀수가 14</strong> 라는 것을 알 수 있다.</li>\n</ul>\n<pre tabindex=\"0\"><code>u8g2.setFont(u8g2_font_ncenB14_tr);</code></pre><br>\n<h5 id=\"drawing-sheet-사용하여-그림-그려보기\">drawing sheet 사용하여, 그림 그려보기<a class=\"anchor\" href=\"#drawing-sheet-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-%ea%b7%b8%eb%a6%bc-%ea%b7%b8%eb%a0%a4%eb%b3%b4%ea%b8%b0\">#</a></h5>\r\n<p>128X64 픽셀을 표시한 Drawing Sheet를 사용하여, 원하는 그림을 그려보자.</p>\n<p><a href=\"/attach/OLED_128X64_drawing_sheet.xlsx\">Drawing Sheet</a></p>\n<br>\n<h5 id=\"drawstr\">drawStr<a class=\"anchor\" href=\"#drawstr\">#</a></h5>\r\n<pre tabindex=\"0\"><code>u8g2.drawStr(0,15, &#34;SKS STEAM!&#34;)</code></pre><ul>\n<li>drawStr를 통해 문자를 프린트할 수 있다.</li>\n<li>예제에서 사용한 <strong>0,15</strong>는 프린트할 문자열 &ldquo;<strong>SKS STEAM!</strong>&rdquo; 중 맨 앞글자인 &ldquo;<strong>S</strong>&ldquo;의 왼쪽 아래 시작 픽셀을 의미한다.</li>\n<li>폰트사이즈가 14이므로 <strong>0,15</strong> 픽셀에서 시작하며, <strong>0,1</strong> 픽셀까지 출력에 사용한다.</li>\n<li>만약 시작 픽셀을 <strong>0,14</strong>로 바꾸면, <strong>0,0</strong> 픽셀까지 출력하므로, 문자를 올바르게 출력할 수 있다.</li>\n<li>만약 시작 픽셀을 <strong>0,13</strong>으로 2픽셀 위로 올리게되면 <strong>0,-1</strong> 픽셀까지 출력되므로, 글자의 맨 윗부분 1행 전체가 삭제된 상태로 출력된다.</li>\n<li>음수(-)를 허용하므로, 이를 적절히 이용하면 가로방향 또는 세로방향 스크롤로 사용할 수 있다.</li>\n</ul>\n<br>\n<h5 id=\"drawtriangle\">drawTriangle<a class=\"anchor\" href=\"#drawtriangle\">#</a></h5>\r\n<pre tabindex=\"0\"><code>u8g2.drawTriangle(27,50, 64,32, 100,50);</code></pre><ul>\n<li>U8g2 라이브러리에서 삼각형을 그릴때 사용하는 명령어이다.</li>\n<li>지정된 픽셀(128x64)내에 3쌍의 순서쌍으로 3개의 꼭지점을 지정하면 이에 맞춰 삼각형을 그린다. 여기서는 (27,50), (64,32), (100,50)이 꼭지점이다.</li>\n</ul>\n<br>\n<p>※ 그밖의 도형을 그리거나 글자 모양을 바꾸려면, <a href=\"https://github.com/olikraus/u8g2/wiki/u8g2reference\">u8g2reference · olikraus/u8g2 Wiki · GitHub</a> 를 참고한다.</p>\n<br>\n<h4 id=\"한글-사용하기\">한글 사용하기<a class=\"anchor\" href=\"#%ed%95%9c%ea%b8%80-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<p>U8g2 라이브러리에서 한글을 사용하려면, 한글 폰트를 사용하여야 한다. 기본적으로 제공되는 한글 폰트는 2가지가 있다.</p>\n<ul>\n<li>\n<p>u8g2_font_unifont_t_korean1 : 사용가능한 글자가 제한되며, 용량이 17kB 정도</p>\n</li>\n<li>\n<p>u8g2_font_unifont_t_korean2 : korean1폰트보다 사용가능한 글자수가 많으나, 용량이 70kB 정도</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>u8g2.<span style=\"color:#a6e22e\">setFont</span>(u8g2_font_unifont_t_korean2);</span></span></code></pre></div></li>\n<li>\n<p>한글 사용을 위해 void setup()에 아래의 코드를 추가하여야 한다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>u8g2.<span style=\"color:#a6e22e\">enableUTF8Print</span>();   <span style=\"color:#75715e\">// enable UTF8 support for the Arduino print() function\n</span></span></span></code></pre></div></li>\n</ul>\n<br>\n<h5 id=\"sketch-한글-사용하기\">sketch: 한글 사용하기<a class=\"anchor\" href=\"#sketch-%ed%95%9c%ea%b8%80-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Arduino.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;U8g2lib.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SPI\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Please UNCOMMENT one of the contructor lines below\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// U8g2 Contructor List (Frame Buffer)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// The complete list is available here: https://github.com/olikraus/u8g2/wiki/u8g2setupcpp\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Please update the pin numbers according to your setup. Use U8X8_PIN_NONE if the reset pin is not connected\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for HW_SPI (VSPI)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>U8G2_SH1106_128X64_NONAME_F_4W_HW_SPI <span style=\"color:#a6e22e\">u8g2</span>(U8G2_R0, <span style=\"color:#75715e\">/* cs=*/</span> <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#75715e\">/* dc=*/</span> <span style=\"color:#ae81ff\">14</span>, <span style=\"color:#75715e\">/* reset=*/</span> <span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SW_SPI\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SH1106_128X64_NONAME_F_4W_SW_SPI u8g2(U8G2_R0, /* clock=*/ 26, /* data=*/ 25, /* cs=*/ 5, /* dc=*/ 14, /* reset=*/ 15);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SSD1306, I2C, (ESP32: SDA 21, SCL 22)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SH1106,  I2C, (ESP32: SDA 21, SCL 22)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SH1106_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>(<span style=\"color:#66d9ef\">void</span>) \n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">enableUTF8Print</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>(<span style=\"color:#66d9ef\">void</span>) \n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">firstPage</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">do</span> {\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">setFont</span>(u8g2_font_ncenB14_tr);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">drawStr</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">15</span>, <span style=\"color:#e6db74\">&#34;SKS STEAM!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">drawTriangle</span>(<span style=\"color:#ae81ff\">27</span>,<span style=\"color:#ae81ff\">50</span>, <span style=\"color:#ae81ff\">64</span>,<span style=\"color:#ae81ff\">32</span>, <span style=\"color:#ae81ff\">100</span>,<span style=\"color:#ae81ff\">50</span>);\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">while</span> ( u8g2.<span style=\"color:#a6e22e\">nextPage</span>() );\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">firstPage</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">do</span> {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//u8g2.setFont(u8g2_font_unifont_t_korean1);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    u8g2.<span style=\"color:#a6e22e\">setFont</span>(u8g2_font_unifont_t_korean2);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">setFontDirection</span>(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">clearBuffer</span>();\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">16</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Hello!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">40</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;안녕하세요.&#34;</span>);  \n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">sendBuffer</span>();\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">while</span> ( u8g2.<span style=\"color:#a6e22e\">nextPage</span>() );\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"나눔고딕폰트-사용하기\">나눔고딕폰트 사용하기<a class=\"anchor\" href=\"#%eb%82%98%eb%88%94%ea%b3%a0%eb%94%95%ed%8f%b0%ed%8a%b8-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ul>\n<li>\n<p>(한글의 모든 글자를 사용해야 할 경우) U8g2 라이브러리에서 사용할 나눔고딕 폰트를 다운로드 (created by xyz37) 한다.</p>\n<p><a href=\"https://github.com/xyz37/U8G2_Korean_Font/blob/master/Samples/U8g2_PrintUTF8/u8g2_font_unifont_t_korean_NanumGothicCoding_16.h\">u8g2_font_unifont_t_korean_NanumGothicCoding_16.h</a></p>\n<p>※ <strong>주의!</strong> 폰트 크기가 1.09MB이므로 메모리가 작은 <strong>아두이노에서는 위 폰트를 사용하기 어렵지만, ESP32에서 사용할 수 있다.</strong> U8g2에서 제공하는 폰트인 korean1이 17k, korean2는 70k이므로 아두이노를 사용해야하는 경우는, (모든 한글 글자를 표현할 수 없더라도) korean1이나 korean2 폰트를 사용해야 한다.</p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>다운로드 받은 나눔고딕 폰트 파일을 **&ldquo;u8g2 라이브러리 폴더&rdquo;**에 넣는다.</p>\n<p><img src=\"/image/u/u8g2-02.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>u8g2 라이브러리 폴더의 위치를 모를 경우,</p>\n<p>아래 그림과 같이 아두이노 IDE에서 <strong>파일</strong>&gt; <strong>환경설정</strong> 에서 <strong>스케치북 위치</strong>를 확인한 후,</p>\n</li>\n</ul>\n<p><img src=\"/image/u/u8g2-03.png\" alt=\"\" /></p>\n<p>\u200b\t\t<strong>(스케치북 위치)/libraries/U8g2/src/</strong> 폴더를 찾아, 폰트 파일을 넣는다.</p>\n<br>\n<ul>\n<li>\n<p>위 폰트를 사용하려면 스케치에 다음을 포함해야 한다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&#34;u8g2_font_unifont_t_korean_NanumGothicCoding_16.h&#34;</span></span></span></code></pre></div><div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span> u8g2.<span style=\"color:#a6e22e\">setFont</span>(u8g2_font_unifont_t_korean_NanumGothicCoding_16);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div></li>\n</ul>\n<br>\n<h5 id=\"sketch-3\">sketch<a class=\"anchor\" href=\"#sketch-3\">#</a></h5>\r\n<pre tabindex=\"0\"><code>#include &lt;Arduino.h&gt;\n#include &lt;U8g2lib.h&gt;\n\n// for SPI\n#include &lt;SPI.h&gt;\n\n// for using Korean NanumGothicCoding font\n#include &#34;u8g2_font_unifont_t_korean_NanumGothicCoding_16.h&#34;\n\n// Please UNCOMMENT one of the contructor lines below\n// U8g2 Contructor List (Frame Buffer)\n// The complete list is available here: https://github.com/olikraus/u8g2/wiki/u8g2setupcpp\n// Please update the pin numbers according to your setup. Use U8X8_PIN_NONE if the reset pin is not connected\n\n// for HW_SPI (VSPI)\nU8G2_SH1106_128X64_NONAME_F_4W_HW_SPI u8g2(U8G2_R0, /* cs=*/ 5, /* dc=*/ 14, /* reset=*/ 15);\n// for SW_SPI\n//U8G2_SH1106_128X64_NONAME_F_4W_SW_SPI u8g2(U8G2_R0, /* clock=*/ 26, /* data=*/ 25, /* cs=*/ 5, /* dc=*/ 14, /* reset=*/ 15);\n// for SSD1306, I2C, (ESP32: SDA 21, SCL 22)\n//U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);\n// for SH1106,  I2C, (ESP32: SDA 21, SCL 22)\n//U8G2_SH1106_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);\n\nvoid setup(void) \n{\n  u8g2.begin();\n  u8g2.enableUTF8Print();\n}\n\nvoid loop(void) \n{\n  u8g2.firstPage();\n  do {\n    u8g2.setFont(u8g2_font_ncenB14_tr);\n    u8g2.drawStr(0, 15, &#34;SKS STEAM!&#34;);\n    u8g2.drawTriangle(27,50, 64,32, 100,50);\n  } while ( u8g2.nextPage() );\n  delay(1000);\n\n  u8g2.firstPage();\n  do {\n    //u8g2.setFont(u8g2_font_unifont_t_korean1);\n    //u8g2.setFont(u8g2_font_unifont_t_korean2);\n    u8g2.setFont(u8g2_font_unifont_t_korean_NanumGothicCoding_16);\n    u8g2.setFontDirection(0);\n    u8g2.clearBuffer();\n    u8g2.setCursor(0, 16);\n    u8g2.print(&#34;Hello!&#34;);\n    u8g2.setCursor(0, 40);\n    u8g2.print(&#34;안녕하세요.&#34;);  \n    u8g2.sendBuffer();\n  } while ( u8g2.nextPage() );\n  delay(1000);\n}</code></pre><br>\n<br>\n<h3 id=\"비트맵-그림사진-출력하기\">비트맵 그림/사진 출력하기<a class=\"anchor\" href=\"#%eb%b9%84%ed%8a%b8%eb%a7%b5-%ea%b7%b8%eb%a6%bc%ec%82%ac%ec%a7%84-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>OLED의 해상도(128×64)에 맞추어 그림이나 로고를 출력해보자. 윈도우 기준으로 설명하며, Mac의 경우 GIMP에서 비슷한 작업을 수행할 수 있다.</p>\n<br>\n<h4 id=\"사진-or-로고-그림파일-준비\">사진 or 로고 그림파일 준비<a class=\"anchor\" href=\"#%ec%82%ac%ec%a7%84-or-%eb%a1%9c%ea%b3%a0-%ea%b7%b8%eb%a6%bc%ed%8c%8c%ec%9d%bc-%ec%a4%80%eb%b9%84\">#</a></h4>\r\n<h5 id=\"사진-픽셀수-조정\">사진 픽셀수 조정<a class=\"anchor\" href=\"#%ec%82%ac%ec%a7%84-%ed%94%bd%ec%85%80%ec%88%98-%ec%a1%b0%ec%a0%95\">#</a></h5>\r\n<p>우선 oled에 출력하려는 작은 사진이나 로고 파일(.jpg or .png 등)을 준비한 뒤, 사용하는 oled의 해상도(예를들어 128×64) 고려하여 사진의 픽셀 수를 줄여야 한다. (※주의할 점: 화면상에 보이는 크기를 축소하는 것이 아니라 실제 픽셀수를 조정해야 함!)</p>\n<br>\n<ul>\n<li>\n<p>윈도우에서 <strong>그림판</strong>을 연다. (그림판3D 아님!) : <strong>시작</strong>&gt; <strong>Windows 보조프로그램</strong>&gt; <strong>그림판</strong></p>\n<p><img src=\"/image/u/u8g2-bitmap-01.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>그림판 하단에 불러온 그림의 실제 픽셀수가 나타납니다. (픽셀수 오른쪽의 % 수치는 화면상에서 보이는 확대/축소 비율이므로, 여기서는 신경쓰지 않는다.)</p>\n<p><img src=\"/image/u/u8g2-bitmap-02.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p><strong>Ctrl-A를 눌러 전체 그림을 선택</strong>하면 그림 겉테두리에 점선이 표시되는데, 이때 (파란색 동그라미 표시된) <strong>사진 오른쪽 상단 모서리</strong>의 포인트를 마우스로 클릭하여 픽셀사이즈를 <strong>원본 그림의 비율에 맞추어</strong> 128x64 이하로 조정한다. 예시에서는 1000x1000px, 즉 1:1의 비율 그림이므로 64x64로 조정하였다. 캔버스 크기를 나타내는 1000x1000px 왼쪽에, 축소되는 그림의 픽셀수가 나타나므로, 이를 확인하면서 픽셀수를 64x64로 조정하면 된다.</p>\n<p><img src=\"/image/u/u8g2-bitmap-03.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>64x64px이 표시되어는 부분은, 마우스로 크기를 조정한 뒤에 클릭하고 있는 마우스 버튼에서 손을 떼는 순간 사라진다. (신경쓰지 않아도 됨)</li>\n</ul>\n<br>\n<ul>\n<li><strong>중요!</strong> 위 그림처럼 <strong>축소된 작은 그림</strong>(전체 캔버스가 아님!)의 테두리에 점선이 남아 있는 상태에서 <strong>Ctrl-c</strong>를 눌러, 축소된 그림만 클립보드에 복사한다.</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>메뉴에서 <strong>파일</strong>&gt; <strong>새로 만들기</strong>&gt;를 클릭한다.</p>\n<p>이때, <strong>변경내용을 저장하시겠습니까?</strong> 팝업이 뜨면 <strong>저장 안 함</strong> 클릭 (저장을 해도 관계없으나, 원본파일이 사라짐)</p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>메뉴에서 <strong>파일</strong>&gt; <strong>속성</strong>&gt; 을 클릭한 뒤</p>\n<p><img src=\"/image/u/u8g2-bitmap-04.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>이미지 속성에서 단위를 픽셀로 지정하고, 너비와 높이를 oled의 전체 픽셀 사이즈(128x64)로 조정한다.</p>\n<p><img src=\"/image/u/u8g2-bitmap-05.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>그림판에 128x64 크기의 캔버스가 나타난다. (화면상에 나타나는 크기가 너무 작아 확대/축소 비율을 100%로 조정함)</p>\n<p><img src=\"/image/u/u8g2-bitmap-06.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>위 상태에서 <strong>Ctrl-v</strong>를 클릭하여, 클립보드에 복사한 그림을 붙여넣기 한다.</p>\n<p><img src=\"/image/u/u8g2-bitmap-07.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>붙여넣은 그림을 마우스로 클릭하여 위치를 조정한다. 추가로 그림판의 텍스트 기능을 사용하여 글씨를 넣어보았다.</p>\n<p><img src=\"/image/u/u8g2-bitmap-08.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<h5 id=\"단색-1-bit-비트맵-bmp-파일로-저장하기\">단색 1-bit 비트맵 bmp 파일로 저장하기<a class=\"anchor\" href=\"#%eb%8b%a8%ec%83%89-1-bit-%eb%b9%84%ed%8a%b8%eb%a7%b5-bmp-%ed%8c%8c%ec%9d%bc%eb%a1%9c-%ec%a0%80%ec%9e%a5%ed%95%98%ea%b8%b0\">#</a></h5>\r\n<ul>\n<li>\n<p>이제 작업한 파일을 1-bit 비트맵 bmp 파일로 저장한다. <strong>파일</strong>&gt; <strong>다른 이름으로 저장</strong>&gt; <strong>BMP 그림</strong> 을 클릭한 뒤,</p>\n<p><img src=\"/image/u/u8g2-bitmap-09.png\" alt=\"\" />)</p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>저장할 경로와 파일이름을 지정한 뒤, 파일 형식을 **단색 비트맵(*.bmp; *dlb)**으로 지정하여 저장한다. (사진 품질 저하에 대한 경고를 확인하면 최종 저장 된다.)</p>\n<p><img src=\"/image/u/u8g2-bitmap-10.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>최종 결과물은 다음과 같다. (<a href=\"/attach/apeach.bmp\">어피치 로고 bmp 파일 다운로드</a>)</p>\n<p><img src=\"/image/u/u8g2-bitmap-11.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<p>※ Mac에서는 GIMP를 이용하여 단색 비트맵 파일로 저장할 수 있다.</p>\n<p>\u200b\t<a href=\"https://community.silabs.com/s/article/creating-monochrome-bitmap-files-for-lcd-glib-using-gimp?language=en_US\">링크 참고 - Creating monochrome bitmap files for LCD / GLIB using GIMP</a>)</p>\n<br>\n<h4 id=\"단색-bmp-파일을-hex파일로-변경하기\">단색 bmp 파일을 hex파일로 변경하기<a class=\"anchor\" href=\"#%eb%8b%a8%ec%83%89-bmp-%ed%8c%8c%ec%9d%bc%ec%9d%84-hex%ed%8c%8c%ec%9d%bc%eb%a1%9c-%eb%b3%80%ea%b2%bd%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<h5 id=\"프로그램-설치\">프로그램 설치<a class=\"anchor\" href=\"#%ed%94%84%eb%a1%9c%ea%b7%b8%eb%9e%a8-%ec%84%a4%ec%b9%98\">#</a></h5>\r\n<p>이제 아래와 같은 bitmap converter 프로그램을 사용하여, 단색 bmp 파일을 hex 파일로 변경한다. (여기서는 윈도우 기준으로 설명)</p>\n<ul>\n<li>윈도우: <a href=\"/attach/LCDAssistant.zip\">LCD Assistant</a></li>\n<li>Mac: <a href=\"/attach/BitmapToC.app.zip\">BitmapToC</a></li>\n</ul>\n<br>\n<h5 id=\"bmp--hex\">bmp → hex<a class=\"anchor\" href=\"#bmp--hex\">#</a></h5>\r\n<ul>\n<li>\n<p>LCD Assistant를 실행한 후,</p>\n<p><strong>File</strong>&gt; <strong>Load image</strong>&gt; 를 클릭하여 위에서 제작한 단색 bmp 파일을 연다.</p>\n<p><img src=\"/image/u/u8g2-bitmap-12.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>Byte orientation을 <strong>Horizontal</strong>로 변경한다. Size, Pixel/byte, Table name은 자동으로 지정되나, 만일 자동으로 설정되지 않는 경우, 아래와 같이 변경한다.\n<ul>\n<li>Size: OLED 픽셀수</li>\n<li>Pixel/byte: 8</li>\n<li>Table name: 스케치내에서 사용할 이름</li>\n</ul>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p><strong>File</strong>&gt; <strong>Save output</strong>&gt; 를 클릭하여 파일을 저장한다. 이때 파일 형식을 별도로 지정하지 않으며, 사용할 파일이름에 <strong>.h</strong> 또는 <strong>.txt</strong> 를 덧붙여 구분하여도 된다. 예시에서는 <a href=\"../attach/apeach.h\">apeach.h</a> 로 지정하였다.</p>\n<p><img src=\"/image/u/u8g2-bitmap-13.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<ul>\n<li>메모장이나 텍스트 에디터 등을 사용하여 apeach.h 파일을 열어보면, 단색 bmp 파일의 hex 코드를 볼 수 있다. 이제 이를 sketch에 반영하면 된다.</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">char</span> apeach [] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x70</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x8C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x04</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x04</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x38</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0xC6</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x8C</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x21</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x21</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x84</span>, <span style=\"color:#ae81ff\">0x22</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x42</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x84</span>, <span style=\"color:#ae81ff\">0x61</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x42</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x84</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x42</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x85</span>, <span style=\"color:#ae81ff\">0xF9</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x43</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x86</span>, <span style=\"color:#ae81ff\">0x06</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x55</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xD6</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x38</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x06</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x3E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x61</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x48</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x23</span>, <span style=\"color:#ae81ff\">0xC4</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x4C</span>, <span style=\"color:#ae81ff\">0x36</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xD9</span>, <span style=\"color:#ae81ff\">0x9C</span>, <span style=\"color:#ae81ff\">0x0E</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xB0</span>, <span style=\"color:#ae81ff\">0xF3</span>, <span style=\"color:#ae81ff\">0x38</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xD8</span>, <span style=\"color:#ae81ff\">0x1A</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF9</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0x8F</span>, <span style=\"color:#ae81ff\">0xF1</span>, <span style=\"color:#ae81ff\">0xF3</span>, <span style=\"color:#ae81ff\">0x7C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x93</span>, <span style=\"color:#ae81ff\">0xCB</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x28</span>, <span style=\"color:#ae81ff\">0x0E</span>, <span style=\"color:#ae81ff\">0x39</span>, <span style=\"color:#ae81ff\">0xC7</span>, <span style=\"color:#ae81ff\">0x31</span>, <span style=\"color:#ae81ff\">0x9C</span>, <span style=\"color:#ae81ff\">0x73</span>, <span style=\"color:#ae81ff\">0x83</span>, <span style=\"color:#ae81ff\">0x8C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xA6</span>, <span style=\"color:#ae81ff\">0x25</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x28</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x19</span>, <span style=\"color:#ae81ff\">0x83</span>, <span style=\"color:#ae81ff\">0x21</span>, <span style=\"color:#ae81ff\">0x98</span>, <span style=\"color:#ae81ff\">0x33</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xA4</span>, <span style=\"color:#ae81ff\">0x35</span>, <span style=\"color:#ae81ff\">0xD0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x19</span>, <span style=\"color:#ae81ff\">0x83</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0x98</span>, <span style=\"color:#ae81ff\">0x33</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xA4</span>, <span style=\"color:#ae81ff\">0x96</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x19</span>, <span style=\"color:#ae81ff\">0x83</span>, <span style=\"color:#ae81ff\">0x3E</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x33</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x97</span>, <span style=\"color:#ae81ff\">0x94</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x0E</span>, <span style=\"color:#ae81ff\">0x39</span>, <span style=\"color:#ae81ff\">0xC7</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x9C</span>, <span style=\"color:#ae81ff\">0x73</span>, <span style=\"color:#ae81ff\">0x83</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x34</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x84</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF9</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0x8F</span>, <span style=\"color:#ae81ff\">0xF1</span>, <span style=\"color:#ae81ff\">0xF3</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x48</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x84</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xD9</span>, <span style=\"color:#ae81ff\">0xBC</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xB0</span>, <span style=\"color:#ae81ff\">0xF3</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x47</span>, <span style=\"color:#ae81ff\">0xCC</span>, <span style=\"color:#ae81ff\">0x11</span>, <span style=\"color:#ae81ff\">0x04</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x09</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1C</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x06</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>\n</span></span><span style=\"display:flex;\"><span>};</span></span></code></pre></div><br>\n<h3 id=\"스케치에-이미지-hex-코드-넣기\">스케치에 이미지 hex 코드 넣기<a class=\"anchor\" href=\"#%ec%8a%a4%ec%bc%80%ec%b9%98%ec%97%90-%ec%9d%b4%eb%af%b8%ec%a7%80-hex-%ec%bd%94%eb%93%9c-%eb%84%a3%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"sketch-4\">sketch<a class=\"anchor\" href=\"#sketch-4\">#</a></h4>\r\n<p>위에서 만든 어피치로고와 함께 학교로고를 추가로 만들고, 2개의 이미지를 OLED에 3초씩 출력하는 코드이다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Arduino.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;U8g2lib.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;                                                   // for SPI</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// #include &#34;u8g2_font_unifont_t_korean_NanumGothicCoding_16.h&#34;       // for using Korean NanumGothicCoding font\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Please UNCOMMENT one of the contructor lines below\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// U8g2 Contructor List (Frame Buffer)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// The complete list is available here: https://github.com/olikraus/u8g2/wiki/u8g2setupcpp\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Please update the pin numbers according to your setup. Use U8X8_PIN_NONE if the reset pin is not connected\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for HW_SPI (VSPI)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>U8G2_SH1106_128X64_NONAME_F_4W_HW_SPI <span style=\"color:#a6e22e\">u8g2</span>(U8G2_R0, <span style=\"color:#75715e\">/* cs=*/</span> <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#75715e\">/* dc=*/</span> <span style=\"color:#ae81ff\">14</span>, <span style=\"color:#75715e\">/* reset=*/</span> <span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SW_SPI\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SH1106_128X64_NONAME_F_4W_SW_SPI u8g2(U8G2_R0, /* clock=*/ 26, /* data=*/ 25, /* cs=*/ 5, /* dc=*/ 14, /* reset=*/ 15);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SSD1306, I2C, (ESP32: SDA 21, SCL 22)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SH1106,  I2C, (ESP32: SDA 21, SCL 22)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SH1106_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">char</span> apeach [] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x70</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x8C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x04</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x04</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x38</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0xC6</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x8C</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x21</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x21</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x84</span>, <span style=\"color:#ae81ff\">0x22</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x42</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x84</span>, <span style=\"color:#ae81ff\">0x61</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x42</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x84</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x42</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x85</span>, <span style=\"color:#ae81ff\">0xF9</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x43</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x86</span>, <span style=\"color:#ae81ff\">0x06</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x55</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xD6</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x38</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x06</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x3E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x61</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x48</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x23</span>, <span style=\"color:#ae81ff\">0xC4</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x4C</span>, <span style=\"color:#ae81ff\">0x36</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xD9</span>, <span style=\"color:#ae81ff\">0x9C</span>, <span style=\"color:#ae81ff\">0x0E</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xB0</span>, <span style=\"color:#ae81ff\">0xF3</span>, <span style=\"color:#ae81ff\">0x38</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xD8</span>, <span style=\"color:#ae81ff\">0x1A</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF9</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0x8F</span>, <span style=\"color:#ae81ff\">0xF1</span>, <span style=\"color:#ae81ff\">0xF3</span>, <span style=\"color:#ae81ff\">0x7C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x93</span>, <span style=\"color:#ae81ff\">0xCB</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x28</span>, <span style=\"color:#ae81ff\">0x0E</span>, <span style=\"color:#ae81ff\">0x39</span>, <span style=\"color:#ae81ff\">0xC7</span>, <span style=\"color:#ae81ff\">0x31</span>, <span style=\"color:#ae81ff\">0x9C</span>, <span style=\"color:#ae81ff\">0x73</span>, <span style=\"color:#ae81ff\">0x83</span>, <span style=\"color:#ae81ff\">0x8C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xA6</span>, <span style=\"color:#ae81ff\">0x25</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x28</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x19</span>, <span style=\"color:#ae81ff\">0x83</span>, <span style=\"color:#ae81ff\">0x21</span>, <span style=\"color:#ae81ff\">0x98</span>, <span style=\"color:#ae81ff\">0x33</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xA4</span>, <span style=\"color:#ae81ff\">0x35</span>, <span style=\"color:#ae81ff\">0xD0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x19</span>, <span style=\"color:#ae81ff\">0x83</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0x98</span>, <span style=\"color:#ae81ff\">0x33</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xA4</span>, <span style=\"color:#ae81ff\">0x96</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x19</span>, <span style=\"color:#ae81ff\">0x83</span>, <span style=\"color:#ae81ff\">0x3E</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x33</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x97</span>, <span style=\"color:#ae81ff\">0x94</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x0E</span>, <span style=\"color:#ae81ff\">0x39</span>, <span style=\"color:#ae81ff\">0xC7</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x9C</span>, <span style=\"color:#ae81ff\">0x73</span>, <span style=\"color:#ae81ff\">0x83</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0x34</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x84</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF9</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0x8F</span>, <span style=\"color:#ae81ff\">0xF1</span>, <span style=\"color:#ae81ff\">0xF3</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x48</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x84</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xD9</span>, <span style=\"color:#ae81ff\">0xBC</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xB0</span>, <span style=\"color:#ae81ff\">0xF3</span>, <span style=\"color:#ae81ff\">0x0C</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x47</span>, <span style=\"color:#ae81ff\">0xCC</span>, <span style=\"color:#ae81ff\">0x11</span>, <span style=\"color:#ae81ff\">0x04</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x18</span>, <span style=\"color:#ae81ff\">0x09</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1C</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x06</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">char</span> skslogo_1bit_128x64 [] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x2E</span>, <span style=\"color:#ae81ff\">0x66</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC9</span>, <span style=\"color:#ae81ff\">0x64</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x49</span>, <span style=\"color:#ae81ff\">0x66</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x76</span>, <span style=\"color:#ae81ff\">0x28</span>, <span style=\"color:#ae81ff\">0x64</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x44</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x06</span>, <span style=\"color:#ae81ff\">0xE5</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x64</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x2E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x78</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x16</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x04</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x05</span>, <span style=\"color:#ae81ff\">0xA0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x28</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x11</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xA0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x6E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x22</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x12</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1C</span>, <span style=\"color:#ae81ff\">0x0E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x1E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xB8</span>, <span style=\"color:#ae81ff\">0x3C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x3C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x7C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x41</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xC1</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x8D</span>, <span style=\"color:#ae81ff\">0xB1</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xC1</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xB5</span>, <span style=\"color:#ae81ff\">0x26</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x9C</span>, <span style=\"color:#ae81ff\">0x73</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xC3</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xC4</span>, <span style=\"color:#ae81ff\">0x78</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x05</span>, <span style=\"color:#ae81ff\">0x41</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x35</span>, <span style=\"color:#ae81ff\">0x26</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x85</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x82</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xE6</span>, <span style=\"color:#ae81ff\">0x7C</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xF1</span>, <span style=\"color:#ae81ff\">0x7C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0xA1</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xF3</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0x37</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x7B</span>, <span style=\"color:#ae81ff\">0xDF</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0x97</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x7B</span>, <span style=\"color:#ae81ff\">0x67</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFA</span>, <span style=\"color:#ae81ff\">0xD7</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xE7</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xF9</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x3E</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0x5C</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xFB</span>, <span style=\"color:#ae81ff\">0x7C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0x38</span>, <span style=\"color:#ae81ff\">0x7E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0xB6</span>, <span style=\"color:#ae81ff\">0xBC</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x87</span>, <span style=\"color:#ae81ff\">0xB8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0xCF</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xFB</span>, <span style=\"color:#ae81ff\">0x8F</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xED</span>, <span style=\"color:#ae81ff\">0xD3</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xE3</span>, <span style=\"color:#ae81ff\">0x27</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFA</span>, <span style=\"color:#ae81ff\">0xAB</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x38</span>, <span style=\"color:#ae81ff\">0x73</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xF7</span>, <span style=\"color:#ae81ff\">0xCE</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0xB9</span>, <span style=\"color:#ae81ff\">0xE7</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0x15</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x37</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0x0E</span>, <span style=\"color:#ae81ff\">0x31</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0xDE</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0xCD</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0xEF</span>, <span style=\"color:#ae81ff\">0xDC</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xFB</span>, <span style=\"color:#ae81ff\">0xB0</span>, <span style=\"color:#ae81ff\">0xEF</span>, <span style=\"color:#ae81ff\">0x9F</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0xE1</span>, <span style=\"color:#ae81ff\">0xD7</span>, <span style=\"color:#ae81ff\">0x6F</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF9</span>, <span style=\"color:#ae81ff\">0xDA</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xBB</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>(<span style=\"color:#66d9ef\">void</span>) \n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">enableUTF8Print</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>(<span style=\"color:#66d9ef\">void</span>) \n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">firstPage</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">do</span> {\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">drawBitmap</span>( <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">64</span>, apeach);\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">while</span>(u8g2.<span style=\"color:#a6e22e\">nextPage</span>());\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">3000</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">firstPage</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">do</span> {\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">drawBitmap</span>( <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">64</span>, skslogo_1bit_128x64);\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">while</span>(u8g2.<span style=\"color:#a6e22e\">nextPage</span>());\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">3000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><p><br><br></p>\n<h3 id=\"센서값-출력하기\">센서값 출력하기<a class=\"anchor\" href=\"#%ec%84%bc%ec%84%9c%ea%b0%92-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"ds18b20-온도센서\">DS18b20 온도센서<a class=\"anchor\" href=\"#ds18b20-%ec%98%a8%eb%8f%84%ec%84%bc%ec%84%9c\">#</a></h4>\r\n<h5 id=\"pinmap-2\">pinmap<a class=\"anchor\" href=\"#pinmap-2\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th>OLED</th>\n          <th>ESP32 (HW_SPI로 사용시) (VSPI)</th>\n          <th></th>\n          <th>DS18b20</th>\n          <th>4.7kΩ</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>GND</td>\n          <td>GND</td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>VDD</td>\n          <td>3.3V</td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>D0</td>\n          <td><strong>18</strong> (HW_SPI 사용시 GPIO_18로 고정)</td>\n          <td>SCK/CLK/CLOCK</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>D1</td>\n          <td><strong>23</strong> (HW_SPI 사용시 GPIO_23으로 고정)</td>\n          <td>DATA/DIN/MOSI</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>RES</td>\n          <td>15</td>\n          <td>RST/RESET</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>DC</td>\n          <td>14</td>\n          <td>Data Command</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>CS</td>\n          <td>5</td>\n          <td>Chip Select</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>GND</td>\n          <td></td>\n          <td>GND (Black)</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>5V</td>\n          <td></td>\n          <td>VCC (Red)</td>\n          <td>O</td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>13</td>\n          <td></td>\n          <td>Signal (Yellow)</td>\n          <td>O</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h5 id=\"schematic-2\">schematic<a class=\"anchor\" href=\"#schematic-2\">#</a></h5>\r\n<p><img src=\"/image/u/u8g2-DS18b20-01.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"library\">library<a class=\"anchor\" href=\"#library\">#</a></h5>\r\n<p><strong>Sketch</strong>&gt; <strong>Include Library</strong>&gt; <strong>Manage Libraries</strong>&gt;</p>\n<ul>\n<li>OneWire (by Jim Studt etc.)</li>\n<li>DallasTemperature (by Miles Burton)</li>\n</ul>\n<br>\n<h5 id=\"sketch-5\">sketch<a class=\"anchor\" href=\"#sketch-5\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Arduino.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;U8g2lib.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SPI\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for using Korean NanumGothicCoding font\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// #include &#34;u8g2_font_unifont_t_korean_NanumGothicCoding_16.h&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Please UNCOMMENT one of the contructor lines below\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// U8g2 Contructor List (Frame Buffer)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// The complete list is available here: https://github.com/olikraus/u8g2/wiki/u8g2setupcpp\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Please update the pin numbers according to your setup. Use U8X8_PIN_NONE if the reset pin is not connected\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for HW_SPI (VSPI)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>U8G2_SH1106_128X64_NONAME_F_4W_HW_SPI <span style=\"color:#a6e22e\">u8g2</span>(U8G2_R0, <span style=\"color:#75715e\">/* cs=*/</span> <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#75715e\">/* dc=*/</span> <span style=\"color:#ae81ff\">14</span>, <span style=\"color:#75715e\">/* reset=*/</span> <span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SW_SPI\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SH1106_128X64_NONAME_F_4W_SW_SPI u8g2(U8G2_R0, /* clock=*/ 26, /* data=*/ 25, /* cs=*/ 5, /* dc=*/ 14, /* reset=*/ 15);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SSD1306, I2C, (ESP32: SDA 21, SCL 22)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for SH1106,  I2C, (ESP32: SDA 21, SCL 22)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//U8G2_SH1106_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;OneWire.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;DallasTemperature.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define TEMP_PIN 13\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>OneWire <span style=\"color:#a6e22e\">oneWire</span>(TEMP_PIN);\n</span></span><span style=\"display:flex;\"><span>DallasTemperature <span style=\"color:#a6e22e\">sensors</span>(<span style=\"color:#f92672\">&amp;</span>oneWire);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> startTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">char</span> skslogo_1bit_128x64 [] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x2E</span>, <span style=\"color:#ae81ff\">0x66</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC9</span>, <span style=\"color:#ae81ff\">0x64</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x49</span>, <span style=\"color:#ae81ff\">0x66</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x76</span>, <span style=\"color:#ae81ff\">0x28</span>, <span style=\"color:#ae81ff\">0x64</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x44</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x06</span>, <span style=\"color:#ae81ff\">0xE5</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x64</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x2E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x78</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x16</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x04</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x05</span>, <span style=\"color:#ae81ff\">0xA0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x28</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x11</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xA0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x24</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x6E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x22</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x12</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1C</span>, <span style=\"color:#ae81ff\">0x0E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x1E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x08</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xB8</span>, <span style=\"color:#ae81ff\">0x3C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x3C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x40</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0x7C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x60</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x41</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xC1</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x8D</span>, <span style=\"color:#ae81ff\">0xB1</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x10</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xC1</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xB5</span>, <span style=\"color:#ae81ff\">0x26</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x9C</span>, <span style=\"color:#ae81ff\">0x73</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xC3</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xC4</span>, <span style=\"color:#ae81ff\">0x78</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x05</span>, <span style=\"color:#ae81ff\">0x41</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x35</span>, <span style=\"color:#ae81ff\">0x26</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x02</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x85</span>, <span style=\"color:#ae81ff\">0x90</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x20</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x82</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xE6</span>, <span style=\"color:#ae81ff\">0x7C</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xF1</span>, <span style=\"color:#ae81ff\">0x7C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0xA1</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xF3</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0x37</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x7B</span>, <span style=\"color:#ae81ff\">0xDF</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0x97</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x7B</span>, <span style=\"color:#ae81ff\">0x67</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFA</span>, <span style=\"color:#ae81ff\">0xD7</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xE7</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xF9</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x3E</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0x5C</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xFB</span>, <span style=\"color:#ae81ff\">0x7C</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0x38</span>, <span style=\"color:#ae81ff\">0x7E</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0xB6</span>, <span style=\"color:#ae81ff\">0xBC</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x87</span>, <span style=\"color:#ae81ff\">0xB8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0xCF</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xFB</span>, <span style=\"color:#ae81ff\">0x8F</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xED</span>, <span style=\"color:#ae81ff\">0xD3</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xE3</span>, <span style=\"color:#ae81ff\">0x27</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x01</span>, <span style=\"color:#ae81ff\">0xFA</span>, <span style=\"color:#ae81ff\">0xAB</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x38</span>, <span style=\"color:#ae81ff\">0x73</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xF7</span>, <span style=\"color:#ae81ff\">0xCE</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0xB9</span>, <span style=\"color:#ae81ff\">0xE7</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0x15</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x37</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0x0E</span>, <span style=\"color:#ae81ff\">0x31</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0xDE</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x1F</span>, <span style=\"color:#ae81ff\">0xCD</span>, <span style=\"color:#ae81ff\">0x30</span>, <span style=\"color:#ae81ff\">0xEF</span>, <span style=\"color:#ae81ff\">0xDC</span>, <span style=\"color:#ae81ff\">0xFC</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xFB</span>, <span style=\"color:#ae81ff\">0xB0</span>, <span style=\"color:#ae81ff\">0xEF</span>, <span style=\"color:#ae81ff\">0x9F</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x03</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0xE1</span>, <span style=\"color:#ae81ff\">0xD7</span>, <span style=\"color:#ae81ff\">0x6F</span>, <span style=\"color:#ae81ff\">0xE0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF9</span>, <span style=\"color:#ae81ff\">0xDA</span>, <span style=\"color:#ae81ff\">0x7F</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x3F</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xBB</span>, <span style=\"color:#ae81ff\">0xFE</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x0F</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xFF</span>, <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>,\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x07</span>, <span style=\"color:#ae81ff\">0xF0</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>(<span style=\"color:#66d9ef\">void</span>) \n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">enableUTF8Print</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">firstPage</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">do</span> {\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">drawBitmap</span>( <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">64</span>, skslogo_1bit_128x64);\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">while</span>(u8g2.<span style=\"color:#a6e22e\">nextPage</span>());\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">3000</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">firstPage</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">do</span> {\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">setFont</span>(u8g2_font_ncenB14_tr);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">drawStr</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">15</span>, <span style=\"color:#e6db74\">&#34;SKS STEAM!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">drawTriangle</span>(<span style=\"color:#ae81ff\">27</span>,<span style=\"color:#ae81ff\">50</span>, <span style=\"color:#ae81ff\">64</span>,<span style=\"color:#ae81ff\">32</span>, <span style=\"color:#ae81ff\">100</span>,<span style=\"color:#ae81ff\">50</span>);\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">while</span> ( u8g2.<span style=\"color:#a6e22e\">nextPage</span>() );\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">3000</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  startTime <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Start up the DS18b20 library\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  sensors.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>(<span style=\"color:#66d9ef\">void</span>) \n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> ttime <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  sensors.<span style=\"color:#a6e22e\">requestTemperatures</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">float</span> temperatureC <span style=\"color:#f92672\">=</span> sensors.<span style=\"color:#a6e22e\">getTempCByIndex</span>(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">float</span> temperatureF <span style=\"color:#f92672\">=</span> sensors.<span style=\"color:#a6e22e\">getTempFByIndex</span>(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  u8g2.<span style=\"color:#a6e22e\">firstPage</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">do</span> {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//u8g2.setFont(u8g2_font_unifont_t_korean1);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    u8g2.<span style=\"color:#a6e22e\">setFont</span>(u8g2_font_unifont_t_korean2);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//u8g2.setFont(u8g2_font_unifont_t_korean_NanumGothicCoding_16);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// Title\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    u8g2.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">8</span>, <span style=\"color:#ae81ff\">14</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;[[ 온도측정 ]]&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// actual time measured. (1초 마다 출력되지는 않음)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    u8g2.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">31</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;시간: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">63</span>, <span style=\"color:#ae81ff\">31</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#a6e22e\">getTime</span>(ttime));\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// Celcius temperature\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    u8g2.<span style=\"color:#a6e22e\">setFont</span>(u8g2_font_unifont_t_korean2);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">47</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;섭씨: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">setFont</span>(u8g2_font_unifont_tf);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(temperatureC<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">100</span>) {\n</span></span><span style=\"display:flex;\"><span>      u8g2.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">71</span>, <span style=\"color:#ae81ff\">47</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      u8g2.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">63</span>, <span style=\"color:#ae81ff\">47</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">print</span>(temperatureC, <span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">drawGlyph</span>(<span style=\"color:#ae81ff\">111</span>, <span style=\"color:#ae81ff\">47</span>, <span style=\"color:#ae81ff\">0x00b0</span>); <span style=\"color:#75715e\">// degree\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    u8g2.<span style=\"color:#a6e22e\">drawStr</span>(<span style=\"color:#ae81ff\">119</span>, <span style=\"color:#ae81ff\">47</span>, <span style=\"color:#e6db74\">&#34;C&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// Fahrenheit temperature\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    u8g2.<span style=\"color:#a6e22e\">setFont</span>(u8g2_font_unifont_t_korean2);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">63</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;화씨: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">setFont</span>(u8g2_font_unifont_tf);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(temperatureF<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">100</span>) {\n</span></span><span style=\"display:flex;\"><span>      u8g2.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">71</span>, <span style=\"color:#ae81ff\">63</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      u8g2.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">63</span>, <span style=\"color:#ae81ff\">63</span>);\n</span></span><span style=\"display:flex;\"><span>    }    \n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">print</span>(temperatureF, <span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>    u8g2.<span style=\"color:#a6e22e\">drawGlyph</span>(<span style=\"color:#ae81ff\">111</span>, <span style=\"color:#ae81ff\">63</span>, <span style=\"color:#ae81ff\">0x00b0</span>); <span style=\"color:#75715e\">// degree\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    u8g2.<span style=\"color:#a6e22e\">drawStr</span>(<span style=\"color:#ae81ff\">119</span>, <span style=\"color:#ae81ff\">63</span>, <span style=\"color:#e6db74\">&#34;F&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">while</span> ( u8g2.<span style=\"color:#a6e22e\">nextPage</span>() );\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>String <span style=\"color:#a6e22e\">getTime</span>(<span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> ttime) {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">int</span> sec <span style=\"color:#f92672\">=</span> ttime <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">1000</span>; <span style=\"color:#66d9ef\">int</span> min <span style=\"color:#f92672\">=</span> sec <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">60</span>; <span style=\"color:#66d9ef\">int</span> hr <span style=\"color:#f92672\">=</span> min <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">60</span>;\n</span></span><span style=\"display:flex;\"><span>  String ts <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 시간\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span> (hr <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">10</span>) ts <span style=\"color:#f92672\">+=</span> <span style=\"color:#e6db74\">&#34;0&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>  ts <span style=\"color:#f92672\">+=</span> hr;\n</span></span><span style=\"display:flex;\"><span>  ts <span style=\"color:#f92672\">+=</span> <span style=\"color:#e6db74\">&#34;:&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 분\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span> ((min <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">60</span>) <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">10</span>) ts <span style=\"color:#f92672\">+=</span> <span style=\"color:#e6db74\">&#34;0&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>  ts <span style=\"color:#f92672\">+=</span> min <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">60</span>;\n</span></span><span style=\"display:flex;\"><span>  ts <span style=\"color:#f92672\">+=</span> <span style=\"color:#e6db74\">&#34;:&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 초\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span> ((sec <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">60</span>) <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">10</span>) ts <span style=\"color:#f92672\">+=</span> <span style=\"color:#e6db74\">&#34;0&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>  ts <span style=\"color:#f92672\">+=</span> sec <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">60</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">return</span> (ts);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"result\">result<a class=\"anchor\" href=\"#result\">#</a></h5>\r\n<p><img src=\"/image/u/u8g2-bitmap-14.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"utf8_handraw-라이브러리-한글-출력하기\">UTF8_HanDraw 라이브러리 한글 출력하기<a class=\"anchor\" href=\"#utf8_handraw-%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ed%95%9c%ea%b8%80-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"esp32-spiffs-영역에-폰트-업로드\">ESP32 SPIFFS 영역에 폰트 업로드<a class=\"anchor\" href=\"#esp32-spiffs-%ec%98%81%ec%97%ad%ec%97%90-%ed%8f%b0%ed%8a%b8-%ec%97%85%eb%a1%9c%eb%93%9c\">#</a></h4>\r\n<ul>\n<li>\n<p>SPIFFS란?</p>\n<ul>\n<li>**SPIFFS(Serial Peripheral Interface Flash File System)**는 ESP32와 ESP8266의 모듈에 내부 탑재 되어 있는 메모리를 저장공간으로 사용하기 위한 파일 시스템이다.</li>\n<li>ESP8266과 ESP32에는 보통 <strong>4MByte의 메모리</strong>가 탑재되어 있으며 이 메모리의 일부를 플래쉬 메모리로 사용하고 나머지를 파일 저장공간으로 사용할 수가 있다.</li>\n<li><strong>작은 용량의 SD카드가 내장</strong>이 되었다고 생각하면 이해하기 쉽다.</li>\n</ul>\n</li>\n<li>\n<p>아두이노에서의 SPIFFS의 이용</p>\n<ul>\n<li>\n<p>아두이노 IDE에는 이 메모리의 분리를 설정할 수 있는 메뉴가 있다. 아두이노IDE에서 아래의 항목을 설정하는 것 만으로 스케치를 업로드하면 영역이 분할되어 스케치가 업로드 된다.</p>\n<p><strong>툴</strong>&gt; <strong>Partition Scheme</strong>&gt; <strong>Default 4MB with spiffs (1.2MB APPS / 1.5MB SPIFFS)</strong></p>\n</li>\n<li>\n<p>기본설정은 위와 같지만 SPIFFS 용량이 부족하다면, **위 메뉴에서 **</p>\n<p>**No OTA(1MB APP/3MB SPIFFS)**와 같은 다른 설정을 선택하여, 코딩이 들어가는 플래쉬 메모리를 1MByte를 사용하고, 나머지 3MByte의 SPIFFS영역에는 코딩에서 필요한 자료(예를 들면 그림파일이나 텍스트 파일등)을 업로드 하고 코딩에서 그 파일을 사용하면 됩니다.</p>\n</li>\n<li>\n<p>아두이노 우노의 플래쉬메모리가 32KByte인 것을 고려하면 ESP32에 플래쉬 메모리를 1MByte만 할당 하는 것도 적지 않은 할당이지만, ESP32의 고급기능(WIFI, 블루투스)등을 사용하면 이 메모리도 모자라게 되는 경우도 있다.</p>\n</li>\n</ul>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>아두이노 IDE에 SPIFFS 설정하기</p>\n<ul>\n<li>\n<p>아두이노 IDE에서 ESP32의 SPIFFS영역에 파일을 올리기 위해서는 별도의 툴을 설치하여야 한다. 아래의 링크를 클릭하여 ESP32FS-1.0.zip 파일을 다운로드 받은 뒤,</p>\n<p><a href=\"https://github.com/me-no-dev/arduino-esp32fs-plugin/releases/\"><strong>https://github.com/me-no-dev/arduino-esp32fs-plugin/releases/</strong></a></p>\n</li>\n<li>\n<p>압축을 풀어 나오는 ESP32FS폴더를 아두이노 설치 폴더 내의 tools폴더 아래에 복사한다.</p>\n<p>예를들면, c:\\Program Files (x86)\\Arduino\\tools\\ESP32FS\\tool\\esp32fs.jar</p>\n<p>같은 형태로 파일 경로가 만들어져야 한다.</p>\n</li>\n<li>\n<p>아두이노IDE를 종료하였다가 다시 실행시키면</p>\n<p><strong>툴</strong>&gt; <strong>ESP32 Sketch Data Upload</strong> 항목이 만들어진다.</p>\n<p><img src=\"/image/ESP32-OLED-02.png\" alt=\"\" /></p>\n</li>\n</ul>\n</li>\n</ul>\n<br>\n<ul>\n<li>SPIFFS에 (폰트) 파일 업로드하기\n<ul>\n<li>기본적으로 ESP32의 SPIFFS에 파일을 업로드 하기 위해서는, <strong>업로드하려는 스케치(.ino) 파일이 위치한 폴더에 data폴더를 생성</strong>한 뒤, <strong>업로드하려는 파일을 복사</strong>해 넣으면 된다.</li>\n<li>그러므로 이번 과정에서 SPIFFS에 (폰트)파일을 업로드하려면, (폰트) 파일을 업로드하려는 스케치(UTF8_HanDraw.ino)가 저장되어 있는 폴더 안에, (UTF8_HanDraw.zip 파일의 압축을 풀었을때 만들어진) data폴더를 복사해 넣으면 된다.</li>\n<li>아두이노 IDE에 스케치를 열고, 메뉴에 추가된 <strong>ESP32 Sketch Data Upload</strong>를 클릭하면, 스케치 파일은 컴파일 후 APP영역에 저장되고, Data폴더안의 (폰트) 파일은 SPIFFS영역에 분리되어 저장된다.</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"schematic-3\">schematic<a class=\"anchor\" href=\"#schematic-3\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>OLED (I2C)</th>\n          <th>ESP32</th>\n          <th>if, Arduino UNO</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>GND</td>\n          <td>GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>VCC</td>\n          <td>3V3</td>\n          <td>3V3</td>\n      </tr>\n      <tr>\n          <td>SCL</td>\n          <td>22</td>\n          <td>A5</td>\n      </tr>\n      <tr>\n          <td>SDA</td>\n          <td>21</td>\n          <td>A4</td>\n      </tr>\n  </tbody>\n</table>\n<p><img src=\"/image/ESP32-OLED-03.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-6\">sketch<a class=\"anchor\" href=\"#sketch-6\">#</a></h4>\r\n<p>출처: [OLED에 한글을 출력하자 by Andy Kim (andy-power.blogspot.com)](<a href=\"http://andy-power.blogspot.com/2018/08/oled.html\">Andy Kim: OLED에 한글을 출력하자. (andy-power.blogspot.com)</a>)</p>\n<pre tabindex=\"0\"><code>#include &lt;Arduino.h&gt;\n#include &#34;Display_SSD1306.h&#34;\n#include &#34;HanDraw.h&#34;\n\n#define OLED_RESET -1             // for S/W 리셋\nDisplay_SSD1306 Oled(OLED_RESET);\n\n/************************* Global variables *********************************/\nunsigned long startTime = 0;\nuint32_t loopcnt = 0;\nchar fpsbuf[128] = &#34;FPS:&#34;;\nbool invert = true;  // 화면을 역상으로 표시\n\nvoid setup() {\n  Serial.begin(115200);\n  delay(50);\n\n  // Oled를 I2C 방식으로 연결하고, 그 주소는 0x3c\n  Oled.begin(SSD1306_SWITCHCAPVCC, 0x3C, false);\n  \n  // Callback 함수를 설정해 주면 필요시 호출 하여 사용함.\n  HanDraw.begin(12, \n    // 화면 지우는 콜백함수 \n    [](void) {  Oled.clearDisplay(); },\n    // 1개 픽셀을 그리는 콜백 함수\n    [](int16_t x, int16_t y, uint16_t color) { Oled.drawPixel(x, y, color); },\n    // 메모리에서 Display 표시 버퍼까지 보내는 함수\n    [](void) { Oled.display(); }\n  );\n\n  HanDraw.display(); // 사실상 Oled.display() 와 동일....\n  delay(2000);\n\n  HanDraw.clear();\n  HanDraw.setFontSize(12);\n  // 특수한 문자 몇개는... 아래와 같이 주면 출력된다. (통용되는 코드가 아니라 변칙 코드임)\n  // 12px:한글 21℃℉‰μ°   라고 출력\n  HanDraw.drawString(1, 0, &#34;12px:한글 21\\x10\\x0f\\x11\\x12\\x13&#34;); \n  HanDraw.setFontSize(14);\n  // 14:아래첨자 A₁₂₃₄   라고 출력\n  HanDraw.drawString(1, 13, &#34;14:아래첨자 A\\x0b\\x0c\\x0d\\x0e&#34;);\n  HanDraw.setFontSize(16);\n  // 16:위첨자 M¹²³⁴   라고 출력\n  HanDraw.drawString(1, 28, &#34;16:위첨자 M\\x15\\x16\\x17\\x18&#34;);\n  HanDraw.display();\n  delay(3000);\n\n  HanDraw.setFontSize(12);\n  startTime = millis();\n  delay(1);\n  Serial.println(&#34;Setup All done&#34;);\n}\n\nString getTime(unsigned long  ttime) {\n  int sec = ttime / 1000; int min = sec / 60; int hr = min / 60;\n  String ts = &#34;&#34;; \n  if (hr &lt; 10) ts += &#34;0&#34;;\n  ts += hr;   ts += &#34;:&#34;;\n  if ((min % 60) &lt; 10) ts += &#34;0&#34;;\n  ts += min % 60;   ts += &#34;:&#34;;\n  if ((sec % 60) &lt; 10) ts += &#34;0&#34;;\n  ts += sec % 60;\n  return (ts);\n}\n\nvoid loop() {\n  unsigned long  ttime = millis();\n  dtostrf(loopcnt * 1000.0 / (ttime - startTime), 5, 2,   fpsbuf + 4);\n\n  HanDraw.clear();\n  HanDraw.drawString(15, 2, &#34;[[ 화면 정보 ]]&#34;);\n  HanDraw.drawString(2, 14, &#34;--------------------&#34;);\n  HanDraw.drawString(2, 24, &#34;한글 출력 테스트&#34;);\n  HanDraw.drawString(2, 38, fpsbuf);\n  HanDraw.drawString(2, 51, getTime(ttime));\n  HanDraw.display();\n\n  loopcnt++;\n  if (loopcnt % 100 == 0) {\n    Oled.invertDisplay(invert);\n    invert = !invert;\n  }\n}</code></pre><br>\n<br>\n<h3 id=\"oled에-ds18b20-온도-출력하기\">OLED에 DS18b20 온도 출력하기<a class=\"anchor\" href=\"#oled%ec%97%90-ds18b20-%ec%98%a8%eb%8f%84-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic-4\">schematic<a class=\"anchor\" href=\"#schematic-4\">#</a></h4>\r\n<p><img src=\"/image/ESP32-OLED-04.png\" alt=\"\" /></p>\n<table>\n  <thead>\n      <tr>\n          <th>OLED (I2C)</th>\n          <th>ESP32</th>\n          <th>DS18b20</th>\n          <th>4.7kΩ</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>GND</td>\n          <td>GND</td>\n          <td>BLK</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>VCC</td>\n          <td>3V3</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>SCL</td>\n          <td>33</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>SDA</td>\n          <td>32</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>5V</td>\n          <td>RED</td>\n          <td>O</td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>GPIO13</td>\n          <td>YELLOW</td>\n          <td>O</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"library-1\">library<a class=\"anchor\" href=\"#library-1\">#</a></h4>\r\n<p><strong>Sketch</strong>&gt; <strong>Include Library</strong>&gt; <strong>Manage Libraries</strong>&gt;</p>\n<ul>\n<li>OneWire (by Jim Studt etc.)</li>\n<li>DallasTemperature (by Miles Burton)</li>\n</ul>\n<br>\n<h4 id=\"sketch-7\">sketch<a class=\"anchor\" href=\"#sketch-7\">#</a></h4>\r\n<pre tabindex=\"0\"><code>#include &lt;Arduino.h&gt;\n\n#include &lt;OneWire.h&gt;\n#include &lt;DallasTemperature.h&gt;\n\n#define TEMP_PIN 13\n\nOneWire oneWire(TEMP_PIN);\nDallasTemperature sensors(&amp;oneWire);\n\n#include &#34;Display_SSD1306.h&#34;\n#include &#34;HanDraw.h&#34;\n\n#define OLED_RESET -1              // for  S/W 리셋\nDisplay_SSD1306 Oled(OLED_RESET);\n\n/************************* Global variables *********************************/\nunsigned long startTime = 0;\nuint32_t loopcnt = 0;\nchar fpsbuf[128] = &#34;FPS:&#34;;\nchar tC[128];\nchar tF[128];\nbool invert = true;  // 화면을 역상으로 표시\n\n\nvoid setup() {\n  Serial.begin(115200);\n  delay(50);\n\n  // Oled를 I2C 방식으로 연결하고, 그 주소는 0x3c\n  Oled.begin(SSD1306_SWITCHCAPVCC, 0x3C, false);\n  \n  // Callback 함수를 설정해 주면 필요시 호출 하여 사용함.\n  HanDraw.begin(12, \n    // 화면 지우는 콜백함수 \n    [](void) {  Oled.clearDisplay(); },\n    // 1개 픽셀을 그리는 콜백 함수\n    [](int16_t x, int16_t y, uint16_t color) { Oled.drawPixel(x, y, color); },\n    // 메모리에서 Display 표시 버퍼까지 보내는 함수\n    [](void) { Oled.display(); }\n  );\n\n  startTime = millis();\n  delay(1);\n  \n  // Start up the DS18b20 library\n  sensors.begin();\n}\n\nvoid loop() {\n  unsigned long  ttime = millis();\n  dtostrf(loopcnt * 1000.0 / (ttime - startTime), 5, 2, fpsbuf + 4);\n\n  sensors.requestTemperatures();\n  float temperatureC = sensors.getTempCByIndex(0);\n  float temperatureF = sensors.getTempFByIndex(0);\n  dtostrf(temperatureC, 6, 2, tC);\n  String tempC = &#34;섭씨온도 * &#34; + (String)tC + &#34;\\x10&#34;;\n  dtostrf(temperatureF, 6, 2, tF);\n  String tempF = &#34;화씨온도 * &#34; + (String)tF + &#34;\\x0f&#34;;\n\n  HanDraw.display();\n\n  HanDraw.clear();\n  HanDraw.setFontSize(12);\n  HanDraw.drawString(15, 2, &#34;[[ 온도 측정 ]]&#34;);\n  HanDraw.drawString(2, 14, &#34;--------------------&#34;);\n  HanDraw.drawString(2, 24, getTime(ttime));\n  HanDraw.drawString(2, 38, tempC);\n  HanDraw.drawString(2, 51, tempF);\n  HanDraw.display();\n}\n\nString getTime(unsigned long ttime) {\n  int sec = ttime / 1000; int min = sec / 60; int hr = min / 60;\n  //String ts = &#34;&#34;;\n  String ts = &#34;측정시간 * &#34;;\n  if (hr &lt; 10) ts += &#34;0&#34;;\n  ts += hr;   ts += &#34;:&#34;;\n  if ((min % 60) &lt; 10) ts += &#34;0&#34;;\n  ts += min % 60;   ts += &#34;:&#34;;\n  if ((sec % 60) &lt; 10) ts += &#34;0&#34;;\n  ts += sec % 60;\n  return (ts);\n}</code></pre>"}{"uri":"http://localhost:1313/posts/esp32-%EC%8A%A4%ED%85%9D%EB%AA%A8%ED%84%B0-%EC%A0%9C%EC%96%B4/","title":"ESP32, 스텝모터","content":"<h3 id=\"스텝-모터-28byj-48\">스텝 모터, 28BYJ-48<a class=\"anchor\" href=\"#%ec%8a%a4%ed%85%9d-%eb%aa%a8%ed%84%b0-28byj-48\">#</a></h3>\r\n<h4 id=\"specification\">Specification<a class=\"anchor\" href=\"#specification\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/s/Step-Motor-02.png\">\n</figure>\n\n<ul>\n<li>\n<p>정격전압: 5VDC</p>\n</li>\n<li>\n<p>기어비: 1/64\n$$\n\\frac {32}{9} \\times \\frac {22}{11} \\times \\frac {26}{9} \\times \\frac {31}{10} = 63.68395 \\fallingdotseq 64\n$$</p>\n</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/s/Step-Motor-01.png\">\n</figure>\n\n<ul>\n<li>스트라이드 각도\n<ul>\n<li><strong>스펙상 5.625º / 64</strong> = 0.087890625\n<ul>\n<li>그러므로,  360º / 0.087890625 = 4096 스텝</li>\n</ul>\n</li>\n<li><strong>실제로는 11.25º / 64</strong> = 0.17578125\n<ul>\n<li>그러므로,  360º / 0.17578125 = <strong>2048 스텝으로 1회전</strong></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Frequency: 100Hz</li>\n<li>토크: 34.3mN,m</li>\n</ul>\n<br>\n<h3 id=\"모터드라이브-uln2003\">모터드라이브 ULN2003<a class=\"anchor\" href=\"#%eb%aa%a8%ed%84%b0%eb%93%9c%eb%9d%bc%ec%9d%b4%eb%b8%8c-uln2003\">#</a></h3>\r\n<figure class=\"center\"><img src=\"/image/s/Step-Motor-03.png\" width=\"67%\">\n</figure>\n\n<br>\n<br>\n<h3 id=\"스텝-모터의-구동\">스텝 모터의 구동<a class=\"anchor\" href=\"#%ec%8a%a4%ed%85%9d-%eb%aa%a8%ed%84%b0%ec%9d%98-%ea%b5%ac%eb%8f%99\">#</a></h3>\r\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/s/Step-Motor-04.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"pin-map\">Pin Map<a class=\"anchor\" href=\"#pin-map\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>외부전원</th>\n          <th>모터드라이브</th>\n          <th>ESP32</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td></td>\n          <td>INT1</td>\n          <td>19</td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>INT2</td>\n          <td>18</td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>INT3</td>\n          <td>5</td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>INT4</td>\n          <td>17</td>\n      </tr>\n      <tr>\n          <td>(+) 5V</td>\n          <td>GND</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>(-)</td>\n          <td>VCC</td>\n          <td></td>\n      </tr>\n  </tbody>\n</table>\n<p>※ 모터드라이브에 연결하는 전원(VCC)는 <strong>외부전원 5V를 사용</strong>한다. (ESP32의 5V는, 전류가 부족하여 ESP32와 연결한 노트북에 영향을 줄 수 있으므로, 사용하지 않는 것이 좋다.)</p>\n<br>\n<h4 id=\"스텝업-모듈\">스텝업 모듈<a class=\"anchor\" href=\"#%ec%8a%a4%ed%85%9d%ec%97%85-%eb%aa%a8%eb%93%88\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/s/Stepup-Module-01.png\" width=\"67%\">\n</figure>\n\n<ul>\n<li>입력전압: 0.9~5V</li>\n<li>출력전압: 5V</li>\n<li>출력전류: 500~600mA</li>\n<li>최대효율: 96%</li>\n</ul>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c++\" data-lang=\"c++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Stepper.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> stepsPerRevolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2048</span>;  <span style=\"color:#75715e\">// change this to fit the number of steps per revolution\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// ULN2003 Motor Driver Pins\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define IN1 19\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define IN2 18\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define IN3 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define IN4 17\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// initialize the stepper library\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>Stepper <span style=\"color:#a6e22e\">myStepper</span>(stepsPerRevolution, IN1, IN3, IN2, IN4);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// set the speed at 5 rpm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  myStepper.setSpeed(<span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// initialize the serial port\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// step one revolution in one direction:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.println(<span style=\"color:#e6db74\">&#34;clockwise&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  myStepper.step(stepsPerRevolution);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// step one revolution in the other direction:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.println(<span style=\"color:#e6db74\">&#34;counterclockwise&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  myStepper.step(<span style=\"color:#f92672\">-</span>stepsPerRevolution);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><ul>\n<li>\n<p>setSpeed(5);</p>\n<ul>\n<li>\n<p>외부 전원의 전력에 따라 최대값이 달라짐.</p>\n</li>\n<li>\n<p>5V 전원 사용시 16이 최대값인 경우가 있었고. 그 이상은 안정적으로 회전이 안되며, 17을 넣으면 한바퀴 돌고 정지. 18을 넣으면 돌지 않음.</p>\n</li>\n<li>\n<p>7.4V 전원 사용시 22가 최대값인 경우가 있었고, 그 이상은 안정적으로 회전이 안됨. (23을 넣으면 시계방향 회전 후, 반시계방향 회전이 안됨. 24를 넣으면 돌지 않음)</p>\n</li>\n<li>\n<p>전압에 따라 수치가 고정된 것은 아닌 듯 하며, 외부 전원의 상태에 따라 달라질 수 있으므로 테스트가 필요함.</p>\n</li>\n</ul>\n</li>\n</ul>\n"}{"uri":"http://localhost:1313/posts/esp32-%EC%98%A8%EB%8F%84%EC%B8%A1%EC%A0%95-ds18b20/","title":"ESP32, 온도측정(DS18b20), PLX_DAQ","content":"<h3 id=\"ds18b20-온도센서\">DS18b20 온도센서<a class=\"anchor\" href=\"#ds18b20-%ec%98%a8%eb%8f%84%ec%84%bc%ec%84%9c\">#</a></h3>\r\n<p>DS18b20 온도 센서를 이용하여 온도를 측정한다.</p>\n<ul>\n<li>one-wire 버스 통신</li>\n<li>공급전압: 3.0V ~ 5.5V</li>\n<li>작동온도: -55ºC ~ +125ºC</li>\n<li>오차: +/-0.5 ºC (-10ºC ~ 85ºC 범위에서)</li>\n</ul>\n<br>\n<h4 id=\"pinout\">Pinout<a class=\"anchor\" href=\"#pinout\">#</a></h4>\r\n<p><img src=\"/image/DS18b20.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p>DS18b20 센서는 두 가지 연결방법을 제공하는데, 하나는 VCC를 5V에 연결하는 Normal Mode이고 다른 하나는 VCC를 GND에 연결하는 Parasite Mode이다. 두가지 방법 모두 지원되지만 (경험상) Normal를 추천하며 (원인은 잘 모르겠지만) Parasite Mode에서는 온도센서가 작동이 되지 않는 경우도 가끔 있었다. 회로 구성을 위해 <strong>4.7㏀ 저항 1개</strong>가 필요하며 Normal Mode 구성을 위해 다음 그림과 같이 연결한다.</p>\n<ul>\n<li>3가닥의 선에 브레드보드에 연결할 수 있는 핀을 납땜하고, 노란색선과 빨간색선의 연결부위에 4.7㏀ 저항을 추가로 납땜하여 연결한다.</li>\n</ul>\n<p><img src=\"/image/ESP32-DS18b20-R01.png\" alt=\"\" /></p>\n<ul>\n<li>수축튜브를 사용하여 연결부위를 절연한 뒤,</li>\n</ul>\n<p><img src=\"/image/ESP32-DS18b20-R02.png\" alt=\"\" /></p>\n<ul>\n<li>구경이 조금 더 큰 수축튜브를 사용하여 3가닥을 하나로 감싸 마무리한다.</li>\n</ul>\n<p><img src=\"/image/ESP32-DS18b20-R03.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"normal-mode\">Normal Mode<a class=\"anchor\" href=\"#normal-mode\">#</a></h5>\r\n<p><img src=\"/image/ESP32-DS18b20-temperature.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"라이브러리-준비하기\">라이브러리 준비하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%a4%80%eb%b9%84%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p><strong>Sketch</strong>&gt; <strong>Include Library</strong>&gt; <strong>Manage Libraries</strong>&gt;</p>\n<ul>\n<li>OneWire (by Jim Studt etc.)</li>\n<li>DallasTemperature (by Miles Burton)</li>\n</ul>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;OneWire.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;DallasTemperature.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define TEMP_PIN 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>OneWire <span style=\"color:#a6e22e\">oneWire</span>(TEMP_PIN);\n</span></span><span style=\"display:flex;\"><span>DallasTemperature <span style=\"color:#a6e22e\">sensors</span>(<span style=\"color:#f92672\">&amp;</span>oneWire);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);  \n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;DallasTemperature IC Control&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Start up the library\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  sensors.begin();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  sensors.requestTemperatures();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">float</span> temperatureC <span style=\"color:#f92672\">=</span> sensors.getTempCByIndex(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">float</span> temperatureF <span style=\"color:#f92672\">=</span> sensors.getTempFByIndex(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.print(temperatureC);\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;*C&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.print(temperatureF);\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;*F&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">2000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"plx-daq\">PLX-DAQ<a class=\"anchor\" href=\"#plx-daq\">#</a></h3>\r\n<p>ESP32를 사용하여 센서데이터를 Excel로 보내고 실시간 그래프를 그려주는 Excel 매크로 파일이다. Parallax에서 만든 것이지만, 현재 공식적인 업데이트는 중지되어 있다. 이런 이유로 Parallax 홈페이지에서 다운로드 받을 수 있는 PLX-DAQ는 최신 버전의 Excel에서 활용이 불가능하며, ESP32에서의 활용도 불가능하다. 현재는 아두이노 포럼 등에서 최신 버전의 Excel과 ESP32 등에서 활용 가능하도록 업데이트를 진행하고 있으므로 Parallax 홈페이지가 아닌, 아두이노 포럼에서 다운로드 받도록 한다.</p>\n<br>\n<h4 id=\"download\">download<a class=\"anchor\" href=\"#download\">#</a></h4>\r\n<p><a href=\"https://forum.arduino.cc/t/plx-daq-version-2-now-with-64-bit-support-and-further-new-features/420628/72#msg3251256\">PLX-DAQ version 2 - now with 64 bit support! (and further new features) - Using Arduino / Interfacing w/ Software on the Computer - Arduino Forum</a>)</p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<ul>\n<li>\n<p><strong>void setup()</strong></p>\n<ul>\n<li>Excel Sheet Clear</li>\n</ul>\n<pre tabindex=\"0\"><code>Serial.println(&#34;CLEARDATA&#34;);</code></pre><ul>\n<li>Label 만들기 (콤마(,)로 구분)</li>\n</ul>\n<pre tabindex=\"0\"><code>Serial.println(&#34;LABEL,Date,Time,Millis,SensorValue&#34;);</code></pre></li>\n<li>\n<p><strong>void loop()</strong></p>\n<ul>\n<li>Data 출력</li>\n</ul>\n<pre tabindex=\"0\"><code>Serial.println( (String) &#34;DATA,DATE,TIME,&#34; + millis() + &#34;,&#34; + SensorValue );\n  delay(200);</code></pre><p>(혹은, 아래와 같이 라인을 구분하는 것도 좋은 방법이다.</p>\n<pre tabindex=\"0\"><code>  Serial.print(&#34;DATA,DATE,TIME,&#34;);\n  Serial.print(millis());\n  Serial.print(&#34;,&#34;);\n  Serial.print(i);\n  Serial.print(&#34;,&#34;);\n  Serial.println(SensorValue);</code></pre><ul>\n<li>DATA 출력시작은 Serial.print(&ldquo;DATA,&rdquo;); 로 하며, DATA 출력종료는 println을 통해 개행한다.</li>\n<li>delay를 500이상 주어야 안정적으로 데이터를 수신한다.</li>\n</ul>\n</li>\n<li>\n<p><strong>전체 sketch</strong></p>\n<p>GPIO4 데이터를 엑셀 파일에 기록한다.</p>\n<pre tabindex=\"0\"><code>int i = 0;\nconst int SensorPin = 4;\nfloat SensorValue;\n\nvoid setup() {\n  Serial.begin(115200);\n  Serial.println(&#34;CLEARDATA&#34;);\n  Serial.println(&#34;LABEL,Date,Time,Millis,Times,SensorValue&#34;);\n}\n\nvoid loop() {\n  SensorValue = analogRead(SensorPin)/100.00;\n  Serial.print(&#34;DATA,DATE,TIME,&#34;);\n  Serial.print(millis());\n  Serial.print(&#34;,&#34;);\n  Serial.print(i);\n  Serial.print(&#34;,&#34;);\n  Serial.println(SensorValue);\n  i++;\n  delay(5000);  // 5초마다 1번씩 측정\n}</code></pre></li>\n</ul>\n<br>\n<br>\n<h3 id=\"온도센서의-온도값-기록하기\">온도센서의 온도값 기록하기<a class=\"anchor\" href=\"#%ec%98%a8%eb%8f%84%ec%84%bc%ec%84%9c%ec%9d%98-%ec%98%a8%eb%8f%84%ea%b0%92-%ea%b8%b0%eb%a1%9d%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"sketch-2\">sketch<a class=\"anchor\" href=\"#sketch-2\">#</a></h4>\r\n<pre tabindex=\"0\"><code>#include &lt;OneWire.h&gt;\n#include &lt;DallasTemperature.h&gt;\n\nint i = 0;\nconst int SensorPin = 4;\nfloat temperatureC;\n//float temperatureF;\n\nOneWire oneWire(SensorPin);\nDallasTemperature sensors(&amp;oneWire);\n\nvoid setup() {\n  Serial.begin(115200);  \n  Serial.println(&#34;DallasTemperature IC Control&#34;);\n\n  // Start up the library\n  sensors.begin();\n  Serial.println(&#34;CLEARDATA&#34;);\n  Serial.println(&#34;LABEL,Date,Time,Millis,Times,SensorValue&#34;);\n}\n\nvoid loop() {\n  sensors.requestTemperatures();\n  temperatureC = sensors.getTempCByIndex(0);\n  // temperatureF = sensors.getTempFByIndex(0);\n\n  Serial.print(&#34;DATA,DATE,TIME,&#34;);\n  Serial.print(millis());\n  Serial.print(&#34;,&#34;);\n  Serial.print(i);\n  Serial.print(&#34;,&#34;);\n  Serial.println(temperatureC);\n  i++;\n  delay(5000);  // 5초마다 1번씩 측정\n}</code></pre><br>\n<h4 id=\"plx-daq-엑셀파일-실행\">PLX-DAQ 엑셀파일 실행<a class=\"anchor\" href=\"#plx-daq-%ec%97%91%ec%85%80%ed%8c%8c%ec%9d%bc-%ec%8b%a4%ed%96%89\">#</a></h4>\r\n<ul>\n<li>\n<p>다운로드 받은 <a href=\"/attach/ESP32-PLX-DAQ-AutoGrapher-SensorValue.xlsm\">PLX-DAQ 엑셀 매크로 파일</a>을 더블 클릭하여 불러들인다.</p>\n<p><img src=\"/image/PLX-DAQ-01.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>Settings에서 ESP32가 연결된 Com port와 Baud rate 설정</p>\n<ul>\n<li>Port: 6 (<strong>장치 관리자</strong>&gt; <strong>포트</strong>&gt; 에서 확인)</li>\n<li>Baud: 115200 (ESP32의 경우 115200, 아두이노는 9600으로 셋팅)</li>\n</ul>\n</li>\n<li>\n<p>스케치를 업로드 한 뒤, Connect를 누르면 실시간으로 데이터를 받아서 기록함</p>\n</li>\n<li>\n<p>기본적으로 셋팅되어 있는 차트가 실시간으로 그려진다. 단, 차트가 그려지지 않거나 잘못된 형태로 표현되는 경우, 엑셀 차트의 데이터 범위를 재설정하여야 한다.</p>\n</li>\n</ul>\n<p><img src=\"/image/PLX-DAQ-02.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"microsoft-data-streamer\">Microsoft Data Streamer<a class=\"anchor\" href=\"#microsoft-data-streamer\">#</a></h3>\r\n<p>PLX-DAQ와 비슷한 역할을 하는 Microsoft Data Streamer가 있으나, 현재 아두이노만 지원하며 ESP32에서는 데이터를 전송받지 못하는 문제가 있음.</p>\n"}{"uri":"http://localhost:1313/","title":"STEM with","content":"<style>\r\n.grid-two {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 2rem;\r\n}\r\n.grid-two h3 {\r\n  margin-top: 0;\r\n}\r\n\r\n/* ✅ 화면이 768px 이하일 때는 1열로 전환 */\r\n@media (max-width: 768px) {\r\n  .grid-two {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style>\r\n<div class=\"grid-two\">\r\n<div>\r\n<h3>아두이노</h3>\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  <ul>\r\n    \r\n      <li><a href=\"/posts/arduino-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0/\">Arduino 시작하기, RGB LED, PWM</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-%EC%8A%A4%EC%9C%84%EC%B9%98-%ED%92%80%EB%8B%A4%EC%9A%B4-%ED%92%80%EC%97%85%EC%A0%80%ED%95%AD/\">Arduino 스위치, 풀다운저항, 풀업저항</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-%EC%98%A8%EB%8F%84%EC%B8%A1%EC%A0%95-ds18b20/\">Arduino, 온도측정(DS18b20)</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-%EC%98%A8%EC%8A%B5%EB%8F%84%EC%B8%A1%EC%A0%95-dht22/\">Arduino, 온도 및 습도 측정 (DHT22)</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-tm1637-%EB%AA%A8%EB%93%88-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/\">Arduino, TM1637 모듈 사용하기</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-1602-lcd-i2c/\">Arduino, 1602 LCD (I2C)</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-ir-%EB%A6%AC%EB%AA%A8%EC%BB%A8/\">Arduino, IR 리모컨</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-%ED%82%A4%ED%8C%A8%EB%93%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/\">Arduino, 키패드 사용하기</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-piezo-buzzer/\">Arduino, 피에조 부저</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-%EC%84%9C%EB%B3%B4%EB%AA%A8%ED%84%B0/\">Arduino, 서보모터</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-%EC%8A%A4%ED%85%9D%EB%AA%A8%ED%84%B0/\">Arduino, 스텝모터</a></li>\r\n    \r\n      <li><a href=\"/posts/7-segment-fnd-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/\">7 Segment (FND) 사용하기</a></li>\r\n    \r\n      <li><a href=\"/posts/1602-lcd-display/\">1602 LCD, 조도, 초음파, 온습도</a></li>\r\n    \r\n      <li><a href=\"/posts/processing-%EA%B8%B0%EC%B4%88/\">Processing 기초</a></li>\r\n    \r\n      <li><a href=\"/posts/bluetooth-%EC%8B%9C%EB%A6%AC%EC%96%BC-%ED%86%B5%EC%8B%A0/\">Bluetooth Serial Controller 앱</a></li>\r\n    \r\n      <li><a href=\"/posts/blynk%EC%97%90-%EC%84%BC%EC%84%9C%EA%B0%92-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0/\">Blynk에 센서값 출력하기</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-bluetooth-blynk/\">Arduino, Bluetooth, Blynk</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-bluetooth-%ED%8E%98%EC%96%B4%EB%A7%81/\">Arduino, Bluetooth 페어링</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-%EB%9D%BC%EC%9D%B8%ED%8A%B8%EB%A0%88%EC%9D%B4%EC%84%9C-l298n/\">Arduino, 라인트레이서, L298N</a></li>\r\n    \r\n      <li><a href=\"/posts/dc%EB%AA%A8%ED%84%B0-4wd-%EC%9E%90%EB%8F%99%EC%B0%A8-%EB%A7%8C%EB%93%A4%EA%B8%B0/\">DC모터 &#43; 4WD 자동차 만들기 (TB6612FNG)</a></li>\r\n    \r\n      <li><a href=\"/posts/4wd-bluetooth/\">4WD Bluetooth</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-nrf24l01_draft/\">Arduino, nRF24L01 무선통신</a></li>\r\n    \r\n  </ul>\r\n\r\n</div>\r\n<div>\r\n<h3>ESP32</h3>\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  <ul>\r\n    \r\n      <li><a href=\"/posts/esp-wroom-32d-devkitc-v4/\">esp32-WROOM-32D DevkitC V4</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0/\">esp32 시작하기</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-adc/\">esp32 ADC</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-ble-blynk-button/\">esp32 BLE, Blynk Button</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-ble-blynk-slider-pwm/\">esp32 BLE, Blynk Slider (PWM)</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-ble-blynk-gauge/\">esp32 BLE, Blynk Gauge</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-ap-mode-and-websocket_draft/\">esp32 AP mode &amp; Websocket</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-openweathermap/\">esp32 OpenWeatherMap에서 실시간 날씨 정보 받기</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-%EC%84%9C%EB%B3%B4%EB%AA%A8%ED%84%B0-%EC%A0%9C%EC%96%B4/\">esp32 서보모터 PWM제어</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-%EC%98%A8%EB%8F%84%EC%B8%A1%EC%A0%95-ds18b20/\">ESP32, 온도측정(DS18b20), PLX_DAQ</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-%EC%8A%A4%ED%85%9D%EB%AA%A8%ED%84%B0-%EC%A0%9C%EC%96%B4/\">ESP32, 스텝모터</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-oled/\">ESP32, OLED (한글 출력 하기)</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-nrf24l01/\">ESP32, nRF24L01 무선통신</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-dc%EB%AA%A8%ED%84%B0/\">ESP32, DC모터, TB6612FNG</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-rc%EC%B9%B4/\">ESP32, RC카</a></li>\r\n    \r\n  </ul>\r\n\r\n</div>\r\n<div>\r\n<h3>과학실험</h3>\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  <ul>\r\n    \r\n      <li><a href=\"/posts/arduino-geiger-counter/\">Arduino, Geiger Counter</a></li>\r\n    \r\n      <li><a href=\"/posts/stem-%EC%A4%91%EB%A0%A5-%EA%B0%80%EC%86%8D%EB%8F%84-%EC%B8%A1%EC%A0%95/\">ESP32, 중력 가속도 측정</a></li>\r\n    \r\n      <li><a href=\"/posts/stem-solar-tracker/\">STEM, Solar Tracker</a></li>\r\n    \r\n      <li><a href=\"/posts/stem-%EC%A0%84%EC%9E%90%EA%B8%B0%ED%8C%8C-%EA%B2%80%EC%B6%9C%EA%B8%B0/\">전자기파 검출기 만들기</a></li>\r\n    \r\n      <li><a href=\"/posts/stem-%EC%95%8C%EC%BD%94%EC%98%AC-%EB%9E%A8%ED%94%84-%EB%B0%9B%EC%B9%A8%EB%8C%80/\">알코올 램프 안전 손잡이 받침대 3D프린팅</a></li>\r\n    \r\n  </ul>\r\n\r\n</div>\r\n<div>\r\n<h3>Blynk, IoT</h3>\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  <ul>\r\n    \r\n      <li><a href=\"/posts/bluetooth-%EC%8B%9C%EB%A6%AC%EC%96%BC-%ED%86%B5%EC%8B%A0/\">Bluetooth Serial Controller 앱</a></li>\r\n    \r\n      <li><a href=\"/posts/blynk%EC%97%90-%EC%84%BC%EC%84%9C%EA%B0%92-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0/\">Blynk에 센서값 출력하기</a></li>\r\n    \r\n      <li><a href=\"/posts/arduino-bluetooth-blynk/\">Arduino, Bluetooth, Blynk</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-ble-blynk-button/\">esp32 BLE, Blynk Button</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-ble-blynk-slider-pwm/\">esp32 BLE, Blynk Slider (PWM)</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-ble-blynk-gauge/\">esp32 BLE, Blynk Gauge</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-openweathermap/\">esp32 OpenWeatherMap에서 실시간 날씨 정보 받기</a></li>\r\n    \r\n  </ul>\r\n\r\n</div>\r\n<div>\r\n<h3>드론</h3>\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  <ul>\r\n    \r\n      <li><a href=\"/posts/%EB%93%9C%EB%A1%A0%EC%9D%98-%EB%B9%84%ED%96%89-%EC%9B%90%EB%A6%AC/\">드론의 비행 원리</a></li>\r\n    \r\n      <li><a href=\"/posts/drone-hardware/\">드론 Part1 기체 조립</a></li>\r\n    \r\n      <li><a href=\"/posts/drone-%EC%A1%B0%EC%A2%85%EA%B8%B0-%EC%88%98%EC%8B%A0%EA%B8%B0/\">드론 Part2 조종기 FrSky TaranisQ X7 수신기 FrSky X8R</a></li>\r\n    \r\n  </ul>\r\n\r\n</div>\r\n<div>\r\n<h3>RC, 라인트레이서</h3>\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  <ul>\r\n    \r\n      <li><a href=\"/posts/arduino-%EB%9D%BC%EC%9D%B8%ED%8A%B8%EB%A0%88%EC%9D%B4%EC%84%9C-l298n/\">Arduino, 라인트레이서, L298N</a></li>\r\n    \r\n      <li><a href=\"/posts/dc%EB%AA%A8%ED%84%B0-4wd-%EC%9E%90%EB%8F%99%EC%B0%A8-%EB%A7%8C%EB%93%A4%EA%B8%B0/\">DC모터 &#43; 4WD 자동차 만들기 (TB6612FNG)</a></li>\r\n    \r\n      <li><a href=\"/posts/4wd-bluetooth/\">4WD Bluetooth</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-dc%EB%AA%A8%ED%84%B0/\">ESP32, DC모터, TB6612FNG</a></li>\r\n    \r\n      <li><a href=\"/posts/esp32-rc%EC%B9%B4/\">ESP32, RC카</a></li>\r\n    \r\n  </ul>\r\n\r\n</div>\r\n<div>\r\n<h3>만들기</h3>\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  <ul>\r\n    \r\n      <li><a href=\"/posts/%EC%97%AD%EC%82%BC%ED%88%AC%EC%95%95-%EC%A0%95%EC%88%98%EA%B8%B0-diy/\">역삼투압 정수기 DIY</a></li>\r\n    \r\n      <li><a href=\"/posts/%EC%97%B0%EC%88%98%EA%B8%B0-diy/\">연수기 DIY</a></li>\r\n    \r\n      <li><a href=\"/posts/hexo-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0/\">hexo icarus 테마로 Github 블로그 만들기</a></li>\r\n    \r\n  </ul>\r\n\r\n</div>\r\n<div>\r\n<h3>오피스</h3>\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  <ul>\r\n    \r\n      <li><a href=\"/posts/%EC%97%91%EC%85%80-%EB%B9%88%EC%85%80-%EC%B1%84%EC%9A%B0%EA%B8%B0/\">엑셀, 빈셀 채우기</a></li>\r\n    \r\n      <li><a href=\"/posts/%EC%97%91%EC%85%80-%EC%82%AC%EC%A7%84%EC%9C%BC%EB%A1%9C-vlookup-%ED%9A%A8%EA%B3%BC-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0/\">엑셀, 사진으로 vlookup 효과 구현하기</a></li>\r\n    \r\n      <li><a href=\"/posts/%EC%97%91%EC%85%80-%EB%8B%A4%EC%A4%91%EC%A1%B0%EA%B1%B4%EB%9E%AD%ED%82%B9/\">엑셀, 다중조건을 사용하여 랭킹 구하기</a></li>\r\n    \r\n      <li><a href=\"/posts/%EC%97%91%EC%85%80-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9C%A0%ED%9A%A8%EC%84%B1%EA%B2%80%EC%82%AC-%EB%8F%99%EC%A0%81%EB%B2%94%EC%9C%84%EC%84%A4%EC%A0%95/\">엑셀, 데이터 유효성 검사의 목록 구성시 동적 범위 설정</a></li>\r\n    \r\n  </ul>\r\n\r\n</div>\r\n</div>\r\n"}{"uri":"http://localhost:1313/posts/drone-%EC%A1%B0%EC%A2%85%EA%B8%B0-%EC%88%98%EC%8B%A0%EA%B8%B0/","title":"드론 Part2 조종기 FrSky TaranisQ X7 수신기 FrSky X8R","content":"<br>\n<h3 id=\"조종기-frsky-taranisq-x7\">조종기 FrSky TaranisQ X7<a class=\"anchor\" href=\"#%ec%a1%b0%ec%a2%85%ea%b8%b0-frsky-taranisq-x7\">#</a></h3>\r\n<h4 id=\"button\">Button<a class=\"anchor\" href=\"#button\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/d/drone2_01.png\">\n</figure>\n\n<br>\n<h4 id=\"펌웨어-업데이트\">펌웨어 업데이트<a class=\"anchor\" href=\"#%ed%8e%8c%ec%9b%a8%ec%96%b4-%ec%97%85%eb%8d%b0%ec%9d%b4%ed%8a%b8\">#</a></h4>\r\n<p>① 펌웨어 다운로드: <a href=\"https://www.open-tx.org\">https://www.open-tx.org</a></p>\n<ul>\n<li>Installation&gt; News&gt;에서 최신 버전 OpenTX 클릭</li>\n</ul>\n<ul>\n<li>\n<p>Download&gt; SDCard&gt; opentx-x7 클릭한 뒤, 최신버전의 zip파일 다운로드 후 압축해제</p>\n</li>\n<li>\n<p>Download&gt; 본인 PC의 OS Companion 다운로드 (펌웨어 버전에 맞는 Companion 선택해야 함)</p>\n</li>\n</ul>\n<p>② Yaw, Roll 트림을 동시에 서로 안쪽으로 민 상태로 전원버튼을 누르면, Bootloader로 진입함</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_02.png\">\n</figure>\n\n<p>③ TaranisQ X7 하단커버을 열고 miniUSB포트를 이용하여 PC와 연결하면,</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_03.png\">\n</figure>\n\n<ul>\n<li>Taranis 드라이브와 USB 드라이브 폴더가 열림 (USB 드라이버는 조정기에 삽입되어 있는 miniSD카드를 의미)</li>\n</ul>\n<p>④ [한글 음성 파일 업데이트]</p>\n<ul>\n<li>다운로드 경로: <a href=\"https://drive.google.com/file/d/1GVKBr7kgxWDjCjIttx5D6jugeeoedwVM/\">https://drive.google.com/file/d/1GVKBr7kgxWDjCjIttx5D6jugeeoedwVM/</a></li>\n<li>1.의 과정에서 다운로드 한 새로운 펌웨어의 SOUND폴더의 en폴더에, 다운로드 한 한글 음성 파일 폴더(en)을 덮어씌운다.</li>\n</ul>\n<p>⑤ USB 드라이브(조정기의 miniSD카드) 포맷 (오래 걸림)</p>\n<ul>\n<li>파일시스템 FAT32</li>\n</ul>\n<p>⑥ SOUND파일이 업데이트 된 새로운 펌웨어 파일 전체를 USB 드라이브에 복사한다. (오래 걸림)</p>\n<p>⑦ 컴퓨터에 다운로드 받은 Companion 설치 후 실행</p>\n<ul>\n<li>\n<p>[Radio Profile]</p>\n<p>Profile Name: My Profile (임의 지정)</p>\n<p>Radio Type: Taranis X7/X7S 선택</p>\n<p>Menu Language: en</p>\n<p>Build Option: noheli &amp; lua 선택</p>\n</li>\n<li>\n<p>[Application Setting]</p>\n<p>Splash Screen Library: Show user and companion splash Images 선택</p>\n<p>(조정기를 킬 때 나타나는 이미지를 companion 제공 이미지로 바꿀 수 있음)</p>\n</li>\n</ul>\n<p>⑧ 좌측메뉴 두 번째의 Read Models and Settings from Radio 클릭 <figure class=\"center\"><img src=\"/image/d/drone2_04.png\">\n</figure>\n</p>\n<ul>\n<li>기존에 입력해두었던 수신기 리스트 백업</li>\n</ul>\n<p>⑨ 상단메뉴의 Download 클릭 <figure class=\"center\"><img src=\"/image/d/drone2_05.png\">\n</figure>\n</p>\n<ul>\n<li>다운로드 경로 지정한 뒤 확인</li>\n</ul>\n<p>⑩ 다운로드가 완료되면 확인</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_06.png\">\n</figure>\n\n<p>⑪ 좌측메뉴 밑에서 세 번째 Write Firmware to Radio 클릭 <figure class=\"center\"><img src=\"/image/d/drone2_07.png\">\n</figure>\n</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_08.png\">\n</figure>\n\n<p>⑫ 업데이트 하려는 범위에 버전이 맞는 지 확인 한 후, Write to TX 클릭. Flashing Done 이 표시되면 Close</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_09.png\">\n</figure>\n\n<p>⑬ 좌측메뉴 밑에서 세 번째 Write Firmware to Radio 클릭 <figure class=\"center\"><img src=\"/image/d/drone2_10.png\">\n</figure>\n</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_11.png\">\n</figure>\n\n<ul>\n<li>Check Firmware compatibility 체크한 후 Write to RX 클릭 (백업했던 기존 수신기 등록자료 업데이트)</li>\n</ul>\n<p>⑭ USB선 제거</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_12.png\">\n</figure>\n\n<ul>\n<li>스크린에 업데이트한 펌웨어 버전이 표시되면 완료</li>\n<li>다이얼을 돌려 Exit 선택 후 Enter 버튼</li>\n<li>이때 EEPROM warning 이 표시될 수 있음 (Enter 버튼을 1~2회 누르면 됨)</li>\n</ul>\n<br>\n<h4 id=\"calibration\">Calibration<a class=\"anchor\" href=\"#calibration\">#</a></h4>\r\n<p>① 펌웨어 업데이트 후 Calibration을 먼저 진행한다.</p>\n<p>② 메뉴 길게&gt; Page 5차례 눌러서 6페이지에 Hardware&gt; Calibration 선택 후 Enter</p>\n<p>③ SET STICKS MIDPOINT</p>\n<ul>\n<li>스틱을 모두 중립에 두고 Enter</li>\n</ul>\n<p>④ MOVE STICKS/POTS</p>\n<ul>\n<li>\n<p>각 스틱을 4개의 모서리로 이동시키며 돌려줌</p>\n</li>\n<li>\n<p>상단의 다이얼 돌려주고 중간에 위치시킨 뒤 (여러번 시행 후) Enter</p>\n</li>\n</ul>\n<p>⑤ Exit &amp; Exit</p>\n<br>\n<h4 id=\"radio-setup\">Radio Setup<a class=\"anchor\" href=\"#radio-setup\">#</a></h4>\r\n<p>메뉴 길게&gt; Page 2번 눌러서 3페이지에 Radio Setup</p>\n<ul>\n<li>\n<p>Batt.range: 6.5-8.4 (2S배터리 이용시) (Enter와 다이얼 이용하여 설정)</p>\n</li>\n<li>\n<p>Alarms&gt; Battery low: 6.5V</p>\n</li>\n<li>\n<p>Backlight&gt; Duration: 30s</p>\n</li>\n<li>\n<p>Backlight&gt; Brightness: 75</p>\n</li>\n<li>\n<p>Splash Screen: &mdash;</p>\n</li>\n<li>\n<p>RX channel ord: <strong>AERT</strong></p>\n</li>\n<li>\n<p>Mode 2</p>\n</li>\n</ul>\n<br>\n<h3 id=\"수신기-frsky-x8r\">수신기 FrSky X8R<a class=\"anchor\" href=\"#%ec%88%98%ec%8b%a0%ea%b8%b0-frsky-x8r\">#</a></h3>\r\n<table>\n  <thead>\n      <tr>\n          <th>X8R</th>\n          <th>핀레일 (위:S, 중간:+, 아래:-)</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td><figure class=\"center\"><img src=\"/image/d/drone2_13.png\">\n</figure>\n</td>\n          <td><figure class=\"center\"><img src=\"/image/d/drone2_14.png\" width=\"67%\">\n</figure>\n</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"조종기에-수신기-이름-설정\">조종기에 수신기 이름 설정<a class=\"anchor\" href=\"#%ec%a1%b0%ec%a2%85%ea%b8%b0%ec%97%90-%ec%88%98%ec%8b%a0%ea%b8%b0-%ec%9d%b4%eb%a6%84-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<p>① 조종기 전원을 켜기(LCD 위쪽의 전원 버튼 5초간 누르기) (스로틀은 아래쪽으로 두어야 함)</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_15.png\" width=\"150%\">\n</figure>\n\n<p>② 메뉴 버튼(≡) 짧게 누르기</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_16.png\" width=\"150%\">\n</figure>\n\n<p>③ Page 버튼을 한번 누르고,</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_17.png\" width=\"150%\">\n</figure>\n\n<p>④ Enter 버튼을 누른 뒤</p>\n<p>⑤ 다이얼을 돌려 알파벳이나 숫자를 골른 뒤, 엔터 버튼을 눌러 모델 이름을 한글자씩 정해준다. 소문자를 고른 뒤 엔터 버튼을 길게 누르면, 대문자가 나타남</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_18.png\" width=\"150%\">\n</figure>\n\n<br>\n<h4 id=\"수신기-바인딩--x8r-16채널-사용-설정\">수신기 바인딩 &amp; X8R 16채널 사용 설정<a class=\"anchor\" href=\"#%ec%88%98%ec%8b%a0%ea%b8%b0-%eb%b0%94%ec%9d%b8%eb%94%a9--x8r-16%ec%b1%84%eb%84%90-%ec%82%ac%ec%9a%a9-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<p>① Mode 4(D16) 설정 → 1-8ch S-bus, 9-16ch (1-8번 포트를 통한) Conventional Channel out</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_19.png\">\n</figure>\n\n<p>② CH1&amp;CH2, CH3&amp;CH4 signal 핀을 아래 사진와 같이 점퍼를 사용하여 쇼트시킨다.</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_20.png\">\n</figure>\n\n<p>③ 조종기의 SETUP 메뉴에서 다이얼을 돌려 Internal RF 메뉴가 나올 때까지 아래쪽으로 내려감</p>\n<p>④ Internal RF&gt; Mode&gt; XJT D16 선택</p>\n<ul>\n<li>\n<p>펌웨어 2.3.1 이상부터 XJT 선택 가능 (낮은 펌웨어에서는 D16만 나타남)</p>\n</li>\n<li>\n<p>D8: XM 수신기를 사용할 경우</p>\n</li>\n<li>\n<p>D16: XM+ 이상급 (X8R, R-XSR 포함)</p>\n</li>\n</ul>\n<p>⑤ Internal RF&gt; Ch.Range&gt;</p>\n<ul>\n<li>\n<p>CH1-8 전송속도 9ms (※ 8채널만 사용하면 CH1-8 선택 추천)</p>\n</li>\n<li>\n<p>CH1-16 선택시 전송속도 18ms</p>\n</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone2_21.png\">\n</figure>\n\n<p>⑥ Internal RF&gt; RxNum (or Receiver)</p>\n<ul>\n<li>\n<p>수신기마다 다른 번호를 지정    ex) 첫 번째 바인딩할 수신기는 01로 지정</p>\n</li>\n<li>\n<p>[Bnd] 누르면 텔레메트리 선택창이 나옴</p>\n</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone2_22.png\">\n</figure>\n\n<ul>\n<li>Ch9-16 Telem ON 선택하면, “띠리릭” 소리가 나면서 바인딩을 준비함</li>\n</ul>\n<p>⑦ X8R 수신기 ‘F/S’ 버튼을 누르고 있는 상태에서,</p>\n<figure class=\"center\"><img src=\"/image/d/drone2_23.png\" width=\"150%\">\n</figure>\n\n<p>⑧ X8R에 전원을 연결</p>\n<ul>\n<li>수신기가 이미 드론에 연결된 상태일 경우, 드론 FC에 메인 배터리 연결</li>\n</ul>\n<ul>\n<li>혹은 4-10V 외부 배터리를 X8R (+),(-)에 연결 (중간 레일 (+)극, 아래쪽 레일 (-)극)</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone2_24.png\">\n</figure>\n\n<p>⑨ F/S 버튼 아래쪽의 LED 녹색빨간색이 점멸 (이 상태는 조종기와 연결이 되었음을 의미)</p>\n<ul>\n<li>누르고 있던 F/S 버튼을 떼고, 조종기의 [Bnd] 버튼을 누름</li>\n</ul>\n<p>⑩ X8R의 전원을 뺏다가 다시 공급했을 때, 수신기에 녹색불이 계속 켜져 있는 상태가 되면 바인딩 성공 (녹색발간색이 점멸하는 상태에서 10~30초 정도 대기하면 바인딩이 되면서 녹색불만 들어옴)</p>\n<ul>\n<li>오래 기다려도 녹색불이 유지되지 않으면, 바인딩을 다시 해본다.</li>\n</ul>\n<p>⑪ X8R에 쇼트시켰던 2개의 점퍼를 빼고, X8R Ch1 레일에 서보모터를 연결하여 테스트</p>\n<ul>\n<li>조종기 MIXER 설정에서 Ch9에 스위치를 설정한뒤, 스위치를 토글하였을 때, 서보모터가 움직이면 OK</li>\n</ul>\n<br>\n<h5 id=\"failsafe-설정\">Failsafe 설정<a class=\"anchor\" href=\"#failsafe-%ec%84%a4%ec%a0%95\">#</a></h5>\r\n<p>Internal RF&gt; Failsafe&gt; Receiver로 설정 (수신기 신호가 끊어지면 Failsafe 작동)</p>\n<br>\n<h5 id=\"external-rf-crossfire-선택사항\">External RF (CROSSFIRE) (선택사항)<a class=\"anchor\" href=\"#external-rf-crossfire-%ec%84%a0%ed%83%9d%ec%82%ac%ed%95%ad\">#</a></h5>\r\n<p>External RF는 CROSSFIRE(CRSF) 수신기 (40km이상 장거리 수신)이 필요한 경우에 설정할 수 있다.</p>\n<p>※ 추후 업데이트</p>\n<br>\n<h4 id=\"조종기-채널-할당\">조종기 채널 할당<a class=\"anchor\" href=\"#%ec%a1%b0%ec%a2%85%ea%b8%b0-%ec%b1%84%eb%84%90-%ed%95%a0%eb%8b%b9\">#</a></h4>\r\n<p>① 메뉴 짧게&gt; Page 4번 눌러서 5페이지에 INPUTS</p>\n<ul>\n<li>(Ch8에 RSSI를 설정하는 경우) 【I】08에 RSSI 설정</li>\n<li>【I】08으로 내려가서 Enter</li>\n<li>Name: rssi</li>\n<li>Source: 텔레메트리에서 찾았던 RSSI 선택</li>\n<li>Scale: 100dB</li>\n</ul>\n<p>② 메뉴 짧게&gt; Page 5번 눌러서 6페이지에 MIXER</p>\n<ul>\n<li>\n<p>CH1~4는 기본 채널로 수정하지 않음</p>\n<ul>\n<li>\n<p>CH1 100【I】Thr</p>\n</li>\n<li>\n<p>CH2 100【I】Ail</p>\n</li>\n<li>\n<p>CH3 100【I】Ele</p>\n</li>\n<li>\n<p>CH4 100【I】Rud</p>\n</li>\n</ul>\n</li>\n<li>\n<p>단, QGround Control을 사용할 경우,</p>\n<ul>\n<li>CH1 100【I】Ele</li>\n<li>CH2 100【I】Ail</li>\n<li>CH3 100【I】Thr</li>\n<li>CH4 100【I】Rud</li>\n</ul>\n</li>\n</ul>\n<p>③ CH5 비행모드 설정</p>\n<ul>\n<li>\n<p>CH5로 이동하여 Enter</p>\n</li>\n<li>\n<p>Mix name: F-Mode</p>\n</li>\n<li>\n<p>Source: Enter키 누르고, 모드키로 할당할 3단 스위치(SB)를 움직이면, 소스가 SB로 변경</p>\n</li>\n</ul>\n<p>④ CH6 아밍 설정</p>\n<ul>\n<li>\n<p>CH6로 이동하여 Enter</p>\n</li>\n<li>\n<p>Mix name: Arm</p>\n</li>\n<li>\n<p>Source: Enter키 누르고, 아밍키로 할당할 스위치(SF)를 움직이면, 소스가 SF로 변경</p>\n</li>\n</ul>\n<p>⑤ CH7 RTL or 부저 설정</p>\n<ul>\n<li>\n<p>CH7로 이동하여 Enter</p>\n</li>\n<li>\n<p>Mix name: RTL or Buz</p>\n</li>\n<li>\n<p>Source: Enter키 누르고, RTL (or Buz)키로 할당할 스위치(SA)를 움직이면, 소스가 SA로 변경</p>\n</li>\n</ul>\n<p>⑥ CH8은 필요에 따라 RSSI로 할당 (X8R, XSR 등 텔레메트리 지원 수신기인 경우)</p>\n<ul>\n<li>메뉴 짧게&gt; Page 10번 눌러서 12페이지에 TELEMETRY</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone2_25.png\">\n</figure>\n\n<ul>\n<li>TELEMETRY&gt; Sensors&gt; Discover new sensors 선택</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone2_26.png\">\n</figure>\n\n<p>\u200b       센서가 발견되면 Stop Discovery, Exit 버튼을 눌러서 빠져나감</p>\n<ul>\n<li>\n<p>메뉴 짧게&gt; Page 6번 눌러서 6페이지에 MIXER</p>\n<ul>\n<li>\n<p>CH8로 이동하여 Enter</p>\n</li>\n<li>\n<p>Mix name: rssi</p>\n</li>\n<li>\n<p>Source: Enter키 누르고</p>\n</li>\n<li>\n<p>Weight: 200</p>\n</li>\n<li>\n<p>Offset: -100 (채널범위는 –100<del>100, 즉 200의 범위인데, RSSI는 0</del>100까지의 값만 갖기 때문)</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>\u200b         ※ XM, XM+ 등은 이미 채널이 할당되어 있으므로 위와 같이 INPUT, MIXER를 설정할 필요 없음</p>\n<p>⑨ QGC에서 RC_RSSI_PWM_CHAN: Channel 8 로 변경</p>\n<br>\n<h4 id=\"frsky-수신기-리스트\">FrSky 수신기 리스트<a class=\"anchor\" href=\"#frsky-%ec%88%98%ec%8b%a0%ea%b8%b0-%eb%a6%ac%ec%8a%a4%ed%8a%b8\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/d/drone2_29.png\">\n</figure>\n\n<br>\n<h4 id=\"frsky-rx8r-수신기-메뉴얼\">FrSky RX8R 수신기 메뉴얼<a class=\"anchor\" href=\"#frsky-rx8r-%ec%88%98%ec%8b%a0%ea%b8%b0-%eb%a9%94%eb%89%b4%ec%96%bc\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/d/drone2_30.png\">\n</figure>\n\n<figure class=\"center\"><img src=\"/image/d/drone2_31.png\">\n</figure>\n\n"}{"uri":"http://localhost:1313/posts/drone-hardware/","title":"드론 Part1 기체 조립","content":"<br>\n<h3 id=\"드론-조립\">드론 조립<a class=\"anchor\" href=\"#%eb%93%9c%eb%a1%a0-%ec%a1%b0%eb%a6%bd\">#</a></h3>\r\n<h4 id=\"s500-기체-조립\">S500 기체 조립<a class=\"anchor\" href=\"#s500-%ea%b8%b0%ec%b2%b4-%ec%a1%b0%eb%a6%bd\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/d/drone1_01.png\" width=\"75%\">\n</figure>\n\n<ul>\n<li>\n<p>전원부: 아래 3가지 방법중 1가지 방법을 선택하여 구성</p>\n<ul>\n<li>S500 기판 오른쪽에 있는 (+), (-) 단자에 납을 크게 먹인 뒤, AWG12 와이어를 붙이고, 반대쪽 끝은 (사용할 LiPo 배터리의 단자 형태를 고려하여) XT60 Male 혹은 Deans (T plug) 단자를 납땝하여 연결한다.</li>\n<li>(사용할 LiPo 배터리의 단자가 XT60인 경우) S500 기판 하단에 있는 단자 구멍 중 오른쪽 부분에 XT60 Male 단자를 직접 붙인다.</li>\n<li>(사용할 LiPo 배터리의 단자가 Deans인 경우) S500 기판 하단에 있는 단자 구멍 중 왼쪽 부분에 Deans (T plug) Male 단자를 직접 붙인다.</li>\n</ul>\n</li>\n<li>\n<p>1번, 2번 모터</p>\n<ul>\n<li>CCW회전을 해야 함 → 매장에서 모터 구입시 <strong>CW모터</strong> 구입</li>\n<li>S500 기판의 1번, 2번 위치의 (+), (-) 단자에 납을 크게 먹인 뒤, ESC의 (+), (-) 선을 납땜하여 연결한다.</li>\n<li>방향표시가 없는 모터를 구입한 경우</li>\n<li>ESC의 (+)와 연결되어 있는 단자(위 그림에서는 ESC의 C단자)에 모터의 (-)선을 연결</li>\n<li>ESC의 (-)와 연결되어 있는 단자(위 그림에서는 ESC의 A단자)에 모터의 (+)선을 연결</li>\n</ul>\n</li>\n<li>\n<p>3번, 4번 모터</p>\n<ul>\n<li>\n<p>CW회전을 해야 함 → 매장에서 모터 구입시 <strong>CCW모터</strong> 구입</p>\n</li>\n<li>\n<p>S500 기판의 3번, 4번 위치의 (+), (-) 단자에 납을 크게 먹인 뒤, ESC의 (+), (-) 선을 납땜하여 연결한다.</p>\n</li>\n<li>\n<p>방향표시가 없는 모터를 구입한 경우</p>\n<ul>\n<li>ESC의 (+)와 연결되어 있는 단자(위 그림에서는 ESC의 C단자)에 모터의 (+)선을 연결</li>\n<li>ESC의 (-)와 연결되어 있는 단자(위 그림에서는 ESC의 A단자)에 모터의 (-)선을 연결</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>ESC의 signal선</p>\n<ul>\n<li>1번 모터의 ESC signal: 픽스호크 뒷면의 1번 채널핀에 연결 (이때, 흰색선은 S, 회색선은 (-)에 연결)</li>\n<li>2~4번 모터의 ESC signal도 동일한 방법으로 픽스호크 뒷면에 연결</li>\n</ul>\n</li>\n</ul>\n<br>\n<ul>\n<li>드론 날개에 모터 조립</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_02.png\">\n</figure>\n\n<ul>\n<li>모터에 ESC를 연결한 후, 케이블타이를 이용하여 선을 정리한다.</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_03.png\">\n</figure>\n\n<ul>\n<li>(위 그림에서는 하지 않았으나) 길이를 맞춰 짧게 자른 뒤 연결하는 것이 좋음. ESC와 모터선을 짧게 잘라 재연결하는 경우, 아래와 같은 3.5파이 바나나잭을 사용한다. 일반적으로 모터에 바나나잭 male 단자를 사용하며, ESC에는 female 단자를 사용한다.</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_05.png\">\n</figure>\n\n<ul>\n<li>이후에 드론 지지대와 랜딩스키드를 설치한다.</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_04.png\">\n</figure>\n\n<figure class=\"center\"><img src=\"/image/d/drone1_06.png\">\n</figure>\n\n<ul>\n<li>배터리 설치 가이드 부착 (짐벌이 없으면 중앙에 설치하고, 짐벌을 설치할 예정이면 뒤쪽에 설치)</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_07.png\">\n</figure>\n\n<br>\n<h4 id=\"수신기-연결\">수신기 연결<a class=\"anchor\" href=\"#%ec%88%98%ec%8b%a0%ea%b8%b0-%ec%97%b0%ea%b2%b0\">#</a></h4>\r\n<ul>\n<li>수신기를 기체에 고정 (FrSky X8R의 경우 송수신기 바인딩에 사용하는 버튼이 수신기 윗면에 위치하므로, 바인딩을 먼저 한 후 설치하는 것을 추천!)</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_08.png\" width=\"150%\">\n</figure>\n\n<ul>\n<li>FrSky X8R의 S.Bus를 이용하는 경우\n<ul>\n<li>아래 그림과 같이 픽스호크의 RC단자에 순서대로 연결한다. (※SB단자를 사용하는 것이 아님)</li>\n</ul>\n</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_09.png\" width=\"150%\">\n</figure>\n\n<ul>\n<li>Devo RX701과 PWM to PPM encoder를 이용하는 경우 (선 색깔은 제품별로 다를 수 있음)</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_10.png\" width=\"150%\">\n</figure>\n\n<p>\u200b</p>\n<table>\n  <thead>\n      <tr>\n          <th>커넥터</th>\n          <th>수신기 RX701</th>\n          <th>색깔</th>\n          <th>픽스호크</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>(CH1에 붙어있는 제품도 있음)</td>\n          <td>GND</td>\n          <td>검</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>(CH1에 붙어있는 제품도 있음)</td>\n          <td>VCC</td>\n          <td>적</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>CH1</td>\n          <td>AILE</td>\n          <td>흰</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>CH2</td>\n          <td>ELEV</td>\n          <td>주</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>CH3</td>\n          <td>THRO</td>\n          <td>노</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>CH4</td>\n          <td>RUDD</td>\n          <td>초</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>CH5</td>\n          <td>GEAR</td>\n          <td>파</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>Ch6</td>\n          <td>AUX1</td>\n          <td>보</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>CH7</td>\n          <td>AUX2</td>\n          <td>갈</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>CH8</td>\n          <td>(없음)</td>\n          <td>회</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>PPM</td>\n          <td></td>\n          <td>검적흰</td>\n          <td>RC IN</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"상판-조립\">상판 조립<a class=\"anchor\" href=\"#%ec%83%81%ed%8c%90-%ec%a1%b0%eb%a6%bd\">#</a></h4>\r\n<ul>\n<li>상판을 올려 조립하고</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_11.png\">\n</figure>\n\n<ul>\n<li>FC (픽스호크 등) 및 댐퍼를 설치한다. (댐퍼 크기가 제조사마다 달라서 나사로 고정이 안되는 경우가 있으며, 이럴 경우 케이블 타이를 사용하여 고정하여야 함)</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_12.png\">\n</figure>\n\n<ul>\n<li>GPS 지지대를 이용하여 GPS 설치</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_13.png\" width=\"150%\">\n</figure>\n\n<ul>\n<li>부저 연결</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_15.png\">\n</figure>\n\n<ul>\n<li>스위치 연결</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_16.png\" width=\"33%\">\n</figure>\n\n<ul>\n<li>픽스호크 상단 커넥터에 각 장치(전원, GPS(I2C&amp;GPS 커넥터), 스위치, 부저 등)들을 연결한다.</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_14.png\">\n</figure>\n\n<br>\n<br>\n<h3 id=\"픽스호크-핀아웃\">픽스호크 핀아웃<a class=\"anchor\" href=\"#%ed%94%bd%ec%8a%a4%ed%98%b8%ed%81%ac-%ed%95%80%ec%95%84%ec%9b%83\">#</a></h3>\r\n<p>※참고: <a href=\"https://ardupilot.org/copter/docs/common-pixhawk-overview.html\">https://ardupilot.org/copter/docs/common-pixhawk-overview.html</a></p>\n<h4 id=\"후면-수신기-및-esc-signal-연결\">후면 (수신기 및 ESC signal 연결)<a class=\"anchor\" href=\"#%ed%9b%84%eb%a9%b4-%ec%88%98%ec%8b%a0%ea%b8%b0-%eb%b0%8f-esc-signal-%ec%97%b0%ea%b2%b0\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/d/drone1_17.png\" width=\"150%\">\n</figure>\n\n<ul>\n<li>\n<p>Ⅰ : RC (Radio Control receiver input) ; 수신기 연결</p>\n</li>\n<li>\n<p>Ⅱ : SB (S.Bus output)  ※주의:S.Bus 수신기의 Input으로 사용하는 것이 아님!</p>\n</li>\n<li>\n<p>Ⅲ : Main output ; ESC 연결 (ESC의 ground와 signal만 연결하며 power rail은 연결하지 않음)</p>\n</li>\n<li>\n<p>Ⅳ : Auxiliary output</p>\n</li>\n<li>\n<p>Ground rail</p>\n</li>\n<li>\n<p>Power rail: servo power rail voltage, 5V (7V, up to 9.9V)</p>\n</li>\n<li>\n<p>Signal rail</p>\n</li>\n<li>\n<p>현재 운용중인 픽스호크의 후면 결선한 모습 (X8R 수신기: 파란색(-), 보라색(+), 초록색(signal))</p>\n</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_18.png\">\n</figure>\n\n<br>\n<h4 id=\"상단\">상단<a class=\"anchor\" href=\"#%ec%83%81%eb%8b%a8\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/d/drone1_19.png\" width=\"150%\">\n</figure>\n\n<ul>\n<li>\n<p>1 Spektrum DSM receiver</p>\n</li>\n<li>\n<p>2 Telemetry (OSD, on-screen display)</p>\n</li>\n<li>\n<p>3 Telemetry (radio telemetry)</p>\n</li>\n<li>\n<p>4 USB</p>\n</li>\n<li>\n<p>5 SPI (serial peripheral interface) Bus</p>\n</li>\n<li>\n<p><strong>6 Power module</strong></p>\n</li>\n<li>\n<p><strong>7 Safety switch button</strong></p>\n</li>\n<li>\n<p><strong>8 Buzzer</strong></p>\n</li>\n<li>\n<p>9 Serial</p>\n</li>\n<li>\n<p><strong>10 GPS module</strong></p>\n</li>\n<li>\n<p>11 CAN (controller area network) Bus</p>\n</li>\n<li>\n<p><strong>12 I2C: GPS(Compass) module</strong> or I2C splitter (I2C 포트 부족시 splitter 연결 가능)</p>\n</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_20.png\" width=\"150%\">\n</figure>\n\n<ul>\n<li>\n<p>13 ADC (AnalogtoDigitalconverter6.6V)</p>\n</li>\n<li>\n<p>14 ADC (AnalogtoDigitalconverter3.3V)</p>\n</li>\n<li>\n<p>15 LED indicator</p>\n</li>\n</ul>\n<br>\n<h4 id=\"측면\">측면<a class=\"anchor\" href=\"#%ec%b8%a1%eb%a9%b4\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/d/drone1_21.png\">\n</figure>\n\n<ul>\n<li>\n<p>1 Input/Output reset button</p>\n</li>\n<li>\n<p>2 SD card</p>\n</li>\n<li>\n<p>3 Flight management reset button</p>\n</li>\n<li>\n<p>4 microUSB port</p>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"프롭-설치\">프롭 설치<a class=\"anchor\" href=\"#%ed%94%84%eb%a1%ad-%ec%84%a4%ec%b9%98\">#</a></h3>\r\n<h4 id=\"프롭-회전-방향\">프롭 회전 방향<a class=\"anchor\" href=\"#%ed%94%84%eb%a1%ad-%ed%9a%8c%ec%a0%84-%eb%b0%a9%ed%96%a5\">#</a></h4>\r\n<p><figure class=\"center\"><img src=\"/image/d/drone1_22.png\" width=\"125%\">\n</figure>\n               <figure class=\"center\"><img src=\"/image/d/drone1_23.png\" width=\"125%\">\n               </figure>\n</p>\n<br>\n<h4 id=\"프롭-단면에서의-공기-흐름과-양력\">프롭 단면에서의 공기 흐름과 양력<a class=\"anchor\" href=\"#%ed%94%84%eb%a1%ad-%eb%8b%a8%eb%a9%b4%ec%97%90%ec%84%9c%ec%9d%98-%ea%b3%b5%ea%b8%b0-%ed%9d%90%eb%a6%84%ea%b3%bc-%ec%96%91%eb%a0%a5\">#</a></h4>\r\n<ul>\n<li>프롭의 높은쪽으로 회전하는 경우: <strong>양력 발생 (상승)</strong></li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_24.png\" width=\"150%\">\n </figure>\n\n<ul>\n<li>프롭의 낮은쪽으로 회전하는 경우: <strong>양력 감소 (하강)</strong></li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_25.png\" width=\"150%\">\n</figure>\n\n<ul>\n<li>\n<p>프롭의 형태</p>\n<table>\n  <thead>\n      <tr>\n          <th>CW프롭 (3,4번에 사용)</th>\n          <th>CCW프롭 (1,2번에 사용)</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td><figure class=\"center\"><img src=\"/image/d/drone1_26.png\" width=\"67%\">\n</figure>\n</td>\n          <td><figure class=\"center\"><img src=\"/image/d/drone1_27.png\" width=\"67%\">\n</figure>\n</td>\n      </tr>\n  </tbody>\n</table>\n</li>\n<li>\n<p>모터, 프롭, 캡너트 사용방법</p>\n</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/d/drone1_28.png\">\n</figure>\n\n<table>\n  <thead>\n      <tr>\n          <th></th>\n          <th>1,2번</th>\n          <th>3,4번</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>모터</td>\n          <td>CW 표기 모터 구입</td>\n          <td>CCW 표기 모터 구입</td>\n      </tr>\n      <tr>\n          <td>프롭</td>\n          <td>(위에서 내려다 볼 때) CCW 회전</td>\n          <td>(위에서 내려다 볼 때) CW 회전</td>\n      </tr>\n      <tr>\n          <td>캡너트 고정할 때</td>\n          <td>CW로 돌려 잠궈야만 프롭회전 시 풀리지 않음!</td>\n          <td>CCW로 돌려 잠궈야만 프롭회전 시 풀리지 않음!</td>\n      </tr>\n      <tr>\n          <td>캡너트 풀때</td>\n          <td>캡너트를 CCW로 돌려서 풀어냄</td>\n          <td>캡너트를 CCW로 돌려서 풀어냄</td>\n      </tr>\n  </tbody>\n</table>\n<p>※ 캡너트를 풀어낼 때 → (위에서 내려다 볼 때의) 프롭 회전방향과 같은 방향으로 돌린다!</p>\n<br>\n<h4 id=\"단발-프롭-비행기\">단발 프롭 비행기<a class=\"anchor\" href=\"#%eb%8b%a8%eb%b0%9c-%ed%94%84%eb%a1%ad-%eb%b9%84%ed%96%89%ea%b8%b0\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/d/drone1_29.png\" width=\"67%\">\n</figure>\n\n<br>\n<ul>\n<li>\n<p>매장에서 모터를 판매할 때는 캡너트가 나사산을 따라 조여지는 방향으로 표기하기 때문에, 블레이드 회전 방향과 정반대로 표기되어 있다. 즉, CCW 회전하는 1번/2번모터는 CW 모터로 표기하여 판매하고, CW 회전하는 3번/4번 모터는 CCW 모터로 표기하여 판매한다.</p>\n</li>\n<li>\n<p>이렇게 방향을 반대로 쓰게 된 이유는 옛날부터 사용해왔던 단발 프롭 비행기로부터 유래한다. 예를 들어, 비행기 조종사가 조종석에 앉아 앞쪽의 프롭을 바라볼 때 프롭이 CCW로 돌고 있는 상황이 있다고 하자. 이 상태에서 프롭이 빠지지 않게 하려면, 프롭을 비행기에 끼우는 사람 입장에서도 모터캡(프롭너트)을 CCW로 돌려서 끼워 넣어야 했을 것이다. 그런데, 프롭을 끼우고 보니 프롭이 실제 돌아가는 방향을 보니 CW이다. 조종사는 프롭이 CCW로 돈다고 이야기하고, 프롭을 끼운 사람은 CW로 돌아가도록 고정시켰다고 이야기를 하고 있으니 같은 상황을 서로 반대로 보고 있는 것이다.</p>\n</li>\n<li>\n<p>이와 같은 상황을 프롭 위쪽에서 드론을 내려다 보는 관찰자의 입장에 대입해보면 다음과 같다. CCW 회전하는 프롭의 경우, 이러한 움직임을 만들어 내기 위해 프롭을 돌리는 모터축은 CW로 회전을 해야 한다. 모터축이 CW로 회전을 할 때, 모터축에 끼워지는 프롭은 나사산을 따라 CW로 돌려져야만 프롭이 회전할수록 풀리지 않고 더욱 꽉 조여지게 된다.</p>\n</li>\n<li>\n<p>이러한 이유로, 보유하고 있는 4개 모터의 나사산 방향이 모두 같다면 다음의 방법으로 문제를 해결해야 한다. 첫째, 나사산 방향이 반대인 프롭어댑터를 2개 구입하거나, 둘째, 나이록(niloc, nilon)너트 혹은 나이록후렌지 너트를 사용하여 고정시켜야 한다.</p>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"bec\">BEC<a class=\"anchor\" href=\"#bec\">#</a></h3>\r\n<h4 id=\"픽스호크용-bec\">픽스호크용 BEC<a class=\"anchor\" href=\"#%ed%94%bd%ec%8a%a4%ed%98%b8%ed%81%ac%ec%9a%a9-bec\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/d/drone1_30.png\" width=\"150%\">\n</figure>\n\n<ul>\n<li>\n<p>입력전압: 2S~6S(최대 28V)</p>\n</li>\n<li>\n<p>출력전압: 5.3V</p>\n</li>\n<li>\n<p>최대전류: 3A</p>\n</li>\n<li>\n<p>최대측정전류: 90A</p>\n</li>\n<li>\n<p>배터리 커넥터 규격: XT60</p>\n</li>\n<li>\n<p>커넥터</p>\n<table>\n  <thead>\n      <tr>\n          <th>Pin</th>\n          <th>Signal</th>\n          <th>V</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>1 (red)</td>\n          <td>VCC</td>\n          <td>+5V</td>\n      </tr>\n      <tr>\n          <td>2 (blk)</td>\n          <td>VCC</td>\n          <td>+5V</td>\n      </tr>\n      <tr>\n          <td>3 (blk)</td>\n          <td>Current</td>\n          <td>+3.3V</td>\n      </tr>\n      <tr>\n          <td>4 (blk)</td>\n          <td>Voltage</td>\n          <td>+3.3V</td>\n      </tr>\n      <tr>\n          <td>5 (blk)</td>\n          <td>GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>6 (blk)</td>\n          <td>GND</td>\n          <td>GND</td>\n      </tr>\n  </tbody>\n</table>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"배터리\">배터리<a class=\"anchor\" href=\"#%eb%b0%b0%ed%84%b0%eb%a6%ac\">#</a></h3>\r\n<p>LiPo 4S 14.8V 4200mAh 90C / XT60</p>\n<figure class=\"center\"><img src=\"/image/d/drone1_31.png\">\n</figure>\n\n"}{"uri":"http://localhost:1313/posts/stem-solar-tracker/","title":"STEM, Solar Tracker","content":"<h3 id=\"solar-tracker-만들기\">Solar Tracker 만들기<a class=\"anchor\" href=\"#solar-tracker-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h3>\r\n<p>팬(도리도리) &amp; 틸트(끄덕끄덕)가 가능한 2축 서보모터 거치대와 2개의 서보모터를 사용하여 Solar Tracker를 만들어 보자.</p>\n<br>\n<h4 id=\"단계1-solar-tracker-frame-3d-printing\">단계1: Solar Tracker Frame 3D Printing<a class=\"anchor\" href=\"#%eb%8b%a8%ea%b3%841-solar-tracker-frame-3d-printing\">#</a></h4>\r\n<p><img src=\"/image/SolarTracker01.png\" alt=\"\" /></p>\n<p><a href=\"/attach/Sun_Tracker_Gnomon_B.stl\">.stl 파일</a>  <a href=\"/attach/Sun_Tracker_Gnomon_B.gcode\">.gcode 파일</a></p>\n<p>3D 프린팅 후, 조도센서를 설치할 4곳에 1mm 드릴을 이용하여 각각 2개씩 구멍을 뚫는다 (총 8개).</p>\n<br>\n<br>\n<h4 id=\"단계2-조도센서-조립하기\">단계2: 조도센서 조립하기<a class=\"anchor\" href=\"#%eb%8b%a8%ea%b3%842-%ec%a1%b0%eb%8f%84%ec%84%bc%ec%84%9c-%ec%a1%b0%eb%a6%bd%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<h5 id=\"조도센서-삽입\">조도센서 삽입<a class=\"anchor\" href=\"#%ec%a1%b0%eb%8f%84%ec%84%bc%ec%84%9c-%ec%82%bd%ec%9e%85\">#</a></h5>\r\n<p><img src=\"/image/SolarTracker02.png\" alt=\"\" /></p>\n<p>조도센서의 다리를 위에서 뚫은 구멍을 통해 넣은 뒤,</p>\n<p><img src=\"/image/SolarTracker03.png\" alt=\"\" /></p>\n<p>뒤쪽에 글루건을 쏘아 고정시킨다. (조도센서는 극성을 구분할 필요가 없으므로, 서로 선이 맞닿지만 않으면 된다.)</p>\n<p>4개의 조도 센서를 위와 같은 방식으로 고정한다.</p>\n<br>\n<h5 id=\"10kω-저항-연결\">10kΩ 저항 연결<a class=\"anchor\" href=\"#10k%cf%89-%ec%a0%80%ed%95%ad-%ec%97%b0%ea%b2%b0\">#</a></h5>\r\n<p>아래 그림과 같이 연결한다.</p>\n<p><img src=\"/image/SolarTracker04.png\" alt=\"\" /></p>\n<ul>\n<li>각 조도센서에 연결된 2개의 선 중 하나를 골라 10k 저항을 연결하고 한 뒤, 저항의 다른 쪽 끝을 모두 맞붙여서 GND에 연결한다.</li>\n<li>조도센서의 다른 한쪽 끝을 모두 맞붙여서 ESP32의 3.3V에 연결한다.</li>\n</ul>\n<p><img src=\"/image/SolarTracker05.png\" alt=\"\" /></p>\n<ul>\n<li>\n<p>GND와 3.3로 연결되는 선들이 서로 붙지 않도록 절연테이프를 붙여준다.</p>\n<p><img src=\"/image/SolarTracker06.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>각 조도센서와 10k 저항의 사이에 ESP32에 연결할 GPIO선을 하나씩 납땜하여 연결한다.</p>\n</li>\n</ul>\n<p><img src=\"/image/SolarTracker07.png\" alt=\"\" /></p>\n<ul>\n<li>\n<p>ESP32의 3.3V와 GND에 연결할 선도 함께 납땜하여 연결한다.</p>\n<p><img src=\"/image/SolarTracker08.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>선 모양을 잡아 정리한다. (위 사진에는 하트 모양처럼 양 옆으로 선이 나와 있지만, 추후 거치대 장착을 위해서는 아래 사진처럼 모두 오무려주어야 한다.)</p>\n<p><img src=\"/image/SolarTracker09.png\" alt=\"\" /></p>\n</li>\n</ul>\n<br>\n<br>\n<h4 id=\"단계3-2축-서보모터-거치대에-장착하기\">단계3: 2축 서보모터 거치대에 장착하기<a class=\"anchor\" href=\"#%eb%8b%a8%ea%b3%843-2%ec%b6%95-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-%ea%b1%b0%ec%b9%98%eb%8c%80%ec%97%90-%ec%9e%a5%ec%b0%a9%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<p><img src=\"/image/SolarTracker10.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h5>\r\n<p><img src=\"/image/SolarTracker11.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/************ ESP32 SKETCH FOR SOLAR TRACKER ***************************************\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">   Author: K. Jun, Lee\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">   Blog: https://stemwith.github.io         2020-12-04\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Use 3.3V for LDR sensor VCC\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Edit your sensor sensitivity: tolh, tolv\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Edit your sensor GPIO pin: ldr_lt, ldr_rt, ldr_ld, ldr_rd\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Edit initial sensor calibration value: avlt_cali, avrt_cali, avld_cali, avrd_cali \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">***********************************************************************************/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for horizontal Servo PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledPin_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">19</span>;       <span style=\"color:#75715e\">// corresponds to GPIO 19\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledChannel_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> freq_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">50</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> resolution_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">16</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for vertical Servo PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledPin_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">18</span>;       <span style=\"color:#75715e\">// corresponds to GPIO 18\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledChannel_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> freq_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">50</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> resolution_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">16</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> deg_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>; <span style=\"color:#75715e\">// default horizon\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> deg_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">45</span>; <span style=\"color:#75715e\">// default vertical\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> duty;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// LDR sensor pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> ldr_lt <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">32</span>; <span style=\"color:#75715e\">// Left_Top LDR pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> ldr_rt <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">33</span>; <span style=\"color:#75715e\">// Right_Top LDR pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> ldr_ld <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">34</span>; <span style=\"color:#75715e\">// Left_Down LDR pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> ldr_rd <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">35</span>; <span style=\"color:#75715e\">// Right_Down LDR pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// LDR sensor value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> lt[<span style=\"color:#ae81ff\">10</span>];\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> rt[<span style=\"color:#ae81ff\">10</span>];\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> ld[<span style=\"color:#ae81ff\">10</span>];\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> rd[<span style=\"color:#ae81ff\">10</span>];\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Sensitivity (tolerance)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> tolh <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">150</span>;              <span style=\"color:#75715e\">// horizon tolerance\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> tolv <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">150</span>;              <span style=\"color:#75715e\">// vertical tolerance\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// initial sensor correction value \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> avlt_cali <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;       <span style=\"color:#75715e\">// 초기값 보정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> avrt_cali <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">350</span>;     <span style=\"color:#75715e\">// (센서에 밝은 빛을 직접 가하여 최대값을 측정한 뒤 편차를 사용)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> avld_cali <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">330</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> avrd_cali <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">430</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Servo PWM Setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcSetup</span>(ledChannel_hori, freq_hori, resolution_hori);  <span style=\"color:#75715e\">// PWM CH1, Frequncy 50 Hz, 16bit resolution\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(ledPin_hori, ledChannel_hori);             <span style=\"color:#75715e\">// PWM CH1을 GPIO 19번으로 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcSetup</span>(ledChannel_vert, freq_vert, resolution_vert);  <span style=\"color:#75715e\">// PWM CH0, Frequncy 50 Hz, 16bit resolution\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(ledPin_vert, ledChannel_vert);             <span style=\"color:#75715e\">// PWM CH0을 GPIO 19번으로 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">int</span> avlt <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">int</span> avrt <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">int</span> avld <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">int</span> avrd <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; i<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">10</span>; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    lt[i] <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(ldr_lt); <span style=\"color:#75715e\">// Left Top\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    avlt <span style=\"color:#f92672\">=</span> avlt <span style=\"color:#f92672\">+</span> lt[i] <span style=\"color:#f92672\">-</span> avlt_cali;  \n</span></span><span style=\"display:flex;\"><span>    rt[i] <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(ldr_rt); <span style=\"color:#75715e\">// Right Top\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    avrt <span style=\"color:#f92672\">=</span> avrt <span style=\"color:#f92672\">+</span> rt[i] <span style=\"color:#f92672\">-</span> avrt_cali;\n</span></span><span style=\"display:flex;\"><span>    ld[i] <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(ldr_ld); <span style=\"color:#75715e\">// Left Down\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    avld <span style=\"color:#f92672\">=</span> avld <span style=\"color:#f92672\">+</span> ld[i] <span style=\"color:#f92672\">-</span> avld_cali;\n</span></span><span style=\"display:flex;\"><span>    rd[i] <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(ldr_rd); <span style=\"color:#75715e\">// Right Down\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    avrd <span style=\"color:#f92672\">=</span> avrd <span style=\"color:#f92672\">+</span> rd[i] <span style=\"color:#f92672\">-</span> avrd_cali;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  avlt <span style=\"color:#f92672\">=</span> avlt <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">10</span>;\n</span></span><span style=\"display:flex;\"><span>  avrt <span style=\"color:#f92672\">=</span> avrt <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">10</span>;\n</span></span><span style=\"display:flex;\"><span>  avld <span style=\"color:#f92672\">=</span> avld <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">10</span>;\n</span></span><span style=\"display:flex;\"><span>  avrd <span style=\"color:#f92672\">=</span> avrd <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">10</span>;\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">int</span> avt <span style=\"color:#f92672\">=</span> (avlt <span style=\"color:#f92672\">+</span> avrt) <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;    <span style=\"color:#75715e\">// Average of Top value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">int</span> avd <span style=\"color:#f92672\">=</span> (avld <span style=\"color:#f92672\">+</span> avrd) <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;    <span style=\"color:#75715e\">// Average of Down value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">int</span> avl <span style=\"color:#f92672\">=</span> (avlt <span style=\"color:#f92672\">+</span> avld) <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;    <span style=\"color:#75715e\">// Average of Left value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">int</span> avr <span style=\"color:#f92672\">=</span> (avrt <span style=\"color:#f92672\">+</span> avrd) <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>;    <span style=\"color:#75715e\">// Average of Right value.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">int</span> dvert <span style=\"color:#f92672\">=</span> avt <span style=\"color:#f92672\">-</span> avd;      <span style=\"color:#75715e\">// Difference Top, Down\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">int</span> dhoriz <span style=\"color:#f92672\">=</span> avl <span style=\"color:#f92672\">-</span> avr;     <span style=\"color:#75715e\">// Difference Left, Right\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;LT</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">RT</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">LD</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">RD</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">av.T</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">av.D</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">av.L</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">av.R</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">d.ver</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">d.hor&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(avlt);Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);Serial.<span style=\"color:#a6e22e\">print</span>(avrt);Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(avld);Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);Serial.<span style=\"color:#a6e22e\">print</span>(avrd);Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(avt);Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);Serial.<span style=\"color:#a6e22e\">print</span>(avd);Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(avl);Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);Serial.<span style=\"color:#a6e22e\">print</span>(avr);Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(dvert);Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);Serial.<span style=\"color:#a6e22e\">print</span>(dhoriz);Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t\\n</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">abs</span>(dvert) <span style=\"color:#f92672\">&gt;</span> tolv) {      <span style=\"color:#75715e\">// sensitivity\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (avt <span style=\"color:#f92672\">&lt;</span> avd) {            <span style=\"color:#75715e\">// 아래쪽 센서가 더 밝으면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      deg_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">++</span>deg_vert;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span> (deg_vert <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">90</span>) {\n</span></span><span style=\"display:flex;\"><span>        deg_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span> (avt <span style=\"color:#f92672\">&gt;</span> avd) {       <span style=\"color:#75715e\">// 윗쪽 센서가 더 밝으면,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      deg_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">--</span>deg_vert;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span> (deg_vert <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>        deg_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">servoWrite</span>(ledChannel_vert, deg_vert);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">abs</span>(dhoriz) <span style=\"color:#f92672\">&gt;</span> tolh) {     <span style=\"color:#75715e\">// sensitivity\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span> (avl <span style=\"color:#f92672\">&gt;</span> avr) {            <span style=\"color:#75715e\">// 왼쪽 센서가 더 밝으면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      deg_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">--</span>deg_hori;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span> (deg_hori <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>        deg_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span> (avl <span style=\"color:#f92672\">&lt;</span> avr) {       <span style=\"color:#75715e\">// 오른쪽 센서가 더 밝으면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      deg_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">++</span>deg_hori;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span> (deg_hori <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">180</span>) {\n</span></span><span style=\"display:flex;\"><span>        deg_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span> (avl <span style=\"color:#f92672\">==</span> avr) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">// nothing\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">servoWrite</span>(ledChannel_hori, deg_hori);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// deg는 0~180도 까지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">servoWrite</span>(<span style=\"color:#66d9ef\">int</span> ch, <span style=\"color:#66d9ef\">int</span> deg)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>    duty <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(deg, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>, <span style=\"color:#ae81ff\">1638</span>, <span style=\"color:#ae81ff\">8192</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">ledcWrite</span>(ch, duty);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">50</span>);                  <span style=\"color:#75715e\">// delay를 줄이면 180도가 완전히 돌지 않음 (최소값 15)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"태양광-패널의-전압-측정하기\">태양광 패널의 전압 측정하기<a class=\"anchor\" href=\"#%ed%83%9c%ec%96%91%ea%b4%91-%ed%8c%a8%eb%84%90%ec%9d%98-%ec%a0%84%ec%95%95-%ec%b8%a1%ec%a0%95%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>MPPT모듈을 만들기 전, 태양광패널에서 만들어지는 전기의 전압을 측정해본다. ESP32의 경우 내부전압 3.3V, 12bit ADC이므로</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// ESP32 3.3V -&gt; 3.21 , Arduino 5.0V -&gt; 4.89\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">float</span> referenceVolts <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">3.21</span>;</span></span></code></pre></div><div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// ESP32 12bit_ADC (4095.0), Arduino 10bit_ADC (1023.0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">float</span> volts <span style=\"color:#f92672\">=</span> (referenceVolts<span style=\"color:#f92672\">/</span><span style=\"color:#ae81ff\">4095.0</span>)<span style=\"color:#f92672\">*</span>val<span style=\"color:#f92672\">*</span><span style=\"color:#ae81ff\">1000</span>;</span></span></code></pre></div><p>를 사용한다.</p>\n<br>\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/SolarMPPT01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// ESP32 3.3V -&gt; 3.21 , Arduino 5.0V -&gt; 4.89\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">float</span> referenceVolts <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">3.21</span>; \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">float</span> volts_sum <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; i<span style=\"color:#f92672\">&lt;=</span><span style=\"color:#ae81ff\">10</span>; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">int</span> val <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(<span style=\"color:#ae81ff\">32</span>);\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// ESP32 12bit_ADC (4095.0), Arduino 10bit_ADC (1023.0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">float</span> volts <span style=\"color:#f92672\">=</span> (referenceVolts<span style=\"color:#f92672\">/</span><span style=\"color:#ae81ff\">4095.0</span>)<span style=\"color:#f92672\">*</span>val<span style=\"color:#f92672\">*</span><span style=\"color:#ae81ff\">1000</span>; \n</span></span><span style=\"display:flex;\"><span>    volts_sum <span style=\"color:#f92672\">=</span> volts_sum <span style=\"color:#f92672\">+</span> volts;\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  volts_sum <span style=\"color:#f92672\">=</span> volts_sum <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">10</span>;\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;V = &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(volts_sum);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34; mV&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n"}{"uri":"http://localhost:1313/posts/esp32-%EC%84%9C%EB%B3%B4%EB%AA%A8%ED%84%B0-%EC%A0%9C%EC%96%B4/","title":"esp32 서보모터 PWM제어","content":"<h3 id=\"sg90-mg90s--mg966r-서보모터\">SG90, MG90S,  MG966R 서보모터<a class=\"anchor\" href=\"#sg90-mg90s--mg966r-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0\">#</a></h3>\r\n<h4 id=\"datasheet\">datasheet<a class=\"anchor\" href=\"#datasheet\">#</a></h4>\r\n<p><img src=\"/image/SG90_Datasheet.jpg\" alt=\"\" /></p>\n<br>\n<h4 id=\"사용법\">사용법<a class=\"anchor\" href=\"#%ec%82%ac%ec%9a%a9%eb%b2%95\">#</a></h4>\r\n<ol>\n<li>\n<p>ESP32는 16개의 PWM채널이 있으므로, 최대 16개의 서보모터를 동시에 제어할 수 있다.</p>\n</li>\n<li>\n<p>서보모터 데이터 시트의 스펙상으로는&hellip;</p>\n<ul>\n<li>\n<p>대부분의 서보모터(<strong>SG90, MG90S, MG966R</strong> 등 포함)는 위의 그림처럼 20ms가 1주기가 되므로, PWM frequency를 50Hz로 설정한다.</p>\n</li>\n<li>\n<p>20ms가 1주기이고, HIGH 펄스가 2ms 지속될 때 180º 회전을 한다.</p>\n</li>\n<li>\n<p>그러므로, 전체 펄스 폭의 1/10만큼 HIGH 펄스가 주어지면 180º 회전을 한다.</p>\n</li>\n<li>\n<p>Resolution이 16비트라면 65535의 1/10에 해당하는 <del>6554</del>의 값이 duty값으로 주어지면 서보모터는 180º 회전을 한다.</p>\n</li>\n<li>\n<p><del>데이터 시트에 나온 스펙에 따라서, 16비트 해상도에서 duty값에 따른 회전 각도</del></p>\n<ul>\n<li>\n<p><del>PWM 5% : 3277 → 0º</del></p>\n</li>\n<li>\n<p><del>PWM 7.5% : 4915 → 90º</del></p>\n</li>\n<li>\n<p><del>PWM 10% : 6554 → 180º</del></p>\n<p>라고 생각했으나, 실제로는 이와 달랐다.</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>MG90S</strong></p>\n<ul>\n<li>\n<p>16비트 해상도(0~65535)에서 duty값에 따른 회전 각도는</p>\n<ul>\n<li>PWM 2.5% : 1639 → 0º</li>\n<li>PWM 7.5% : 4915 → 90º</li>\n<li>PWM 12.5% : 8191 → 180º</li>\n</ul>\n</li>\n<li>\n<p>즉, 각도에 따른 PWM값은 다음과 같이 지정한다.\n$$\nPWM = 2^{16} \\times 0.1 \\times \\frac{angle}{180} + 2^{16} \\times 0.025 = 2^{16} \\times 0.1 \\times (\\frac{angle}{180} + 0.25)\n$$</p>\n</li>\n<li>\n<p>그리고, 이 서보모터 스펙상 180도 회전을 하지만 PWM 값을 조절하면 최대 190도 정도까지는 회전한다.</p>\n</li>\n<li>\n<p>그러므로, map 함수를 사용하여 다음과 같이 각도를 조절한다.</p>\n<p>duty = map(deg, 0, 180, 1638, 8191);</p>\n</li>\n<li>\n<p>이에 따라, 12비트 해상도(0~4095)에서 duty값에 따른 회전 각도는</p>\n<ul>\n<li>PWM 2.5% : 103 → 0º</li>\n<li>PWM 7.5%  : 307 → 90º</li>\n<li>PWM 12.5% : 511 → 180º</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>MG996R</p>\n<p>duty = map(deg, 0, 180, 2720, 8191);</p>\n<p>가 가장 적당한 값을 나타내었다. (4.15% ~ 12.5%) (이유는 잘 모르겠음)</p>\n</li>\n<li>\n<p>이런 내용을 종합해 볼때, <strong>기기 데이터시트의 스펙과는 관계없이, 테스트를 통해 경험적으로 값을 찾아야 하는 듯&hellip;</strong></p>\n</li>\n<li>\n<p>delay( );</p>\n<ul>\n<li>\n<p>서보 회전 속도를 조절하며, 숫자가 작을 수록 빠르게 회전한다.</p>\n</li>\n<li>\n<p>이동하는 각도만큼 돌아갈 수 있는 충분한 시간을 주어야한다.</p>\n</li>\n<li>\n<p>(전류가 약하면) delay( ) 값이 너무 작을 경우 원하는 각도의 회전을 완성하지 못할 수도 있다.</p>\n</li>\n<li>\n<p>전류가 충분하면 delay값을 줄여도 됨.</p>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n<br>\n<h3 id=\"servo-라이브러리를-이용하지-않는-경우\">Servo 라이브러리를 이용하지 않는 경우<a class=\"anchor\" href=\"#servo-%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac%eb%a5%bc-%ec%9d%b4%ec%9a%a9%ed%95%98%ec%a7%80-%ec%95%8a%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h3>\r\n<p>일반적으로 아두이노에서 서보모터를 사용하는 경우 아두이노 IDE에 기본적으로 포함되어 있는 &lt;Servo.h&gt; 라이브러리를 사용하면 되지만 이 라이브러리는 ESP32에서 사용할 수 없다. 그러므로 ESP32에 맞는 별도의 Servo.h 라이브러리를 다운로드 받아 사용해야하는 불편함이 있다. 또한 ESP32servo와 같은 ESP32용 라이브러리를 사용할 경우, 라이브러리에 따라 ledcWrite를 사용할 수 없는 경우도 있다.</p>\n<p>그러므로, 여기서는 라이브러리를 사용하지 않고 PWM을 사용하여 ESP32로 MG90 서보모터를 제어해보고자 한다.</p>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/SG90.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">15</span>;  <span style=\"color:#75715e\">// corresponds to GPIO 15\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// setting PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledChannel <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> freq <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">50</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> resolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">16</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> deg, duty;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// PWM Setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcSetup</span>(ledChannel, freq, resolution);  <span style=\"color:#75715e\">// PWM CH0, Frequncy 50 Hz, 16bit resolution\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(ledPin, ledChannel);        <span style=\"color:#75715e\">// PWM CH0을 GPIO 15번으로 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;deg <span style=\"color:#f92672\">&lt;=</span> <span style=\"color:#ae81ff\">180</span>; deg<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">servoWrite</span>(ledChannel, deg);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>;deg <span style=\"color:#f92672\">&gt;=</span> <span style=\"color:#ae81ff\">0</span>; deg<span style=\"color:#f92672\">--</span>) {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">servoWrite</span>(ledChannel, deg);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// deg는 0~180도 까지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">servoWrite</span>(<span style=\"color:#66d9ef\">int</span> ch, <span style=\"color:#66d9ef\">int</span> deg)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>    duty <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(deg, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>, <span style=\"color:#ae81ff\">1638</span>, <span style=\"color:#ae81ff\">8192</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">ledcWrite</span>(ch, duty);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);                             <span style=\"color:#75715e\">// delay를 줄이면 180도가 완전히 돌지 않음\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><br>\n<h4 id=\"sketch-시리얼-모니터에-입력한-문자로-서보모터-회전시키기\">sketch: 시리얼 모니터에 입력한 문자로 서보모터 회전시키기<a class=\"anchor\" href=\"#sketch-%ec%8b%9c%eb%a6%ac%ec%96%bc-%eb%aa%a8%eb%8b%88%ed%84%b0%ec%97%90-%ec%9e%85%eb%a0%a5%ed%95%9c-%eb%ac%b8%ec%9e%90%eb%a1%9c-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-%ed%9a%8c%ec%a0%84%ec%8b%9c%ed%82%a4%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">15</span>;  <span style=\"color:#75715e\">// corresponds to GPIO 15\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// setting PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledChannel <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> freq <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">50</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> resolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">16</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> duty;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// PWM Setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcSetup</span>(ledChannel, freq, resolution);  <span style=\"color:#75715e\">// PWM CH0, Frequncy 50 Hz, 16bit resolution\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(ledPin, ledChannel);        <span style=\"color:#75715e\">// PWM CH0을 GPIO 15번으로 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">servoWrite</span>(ledChannel, deg);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>(Serial.<span style=\"color:#a6e22e\">available</span>() <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) \n</span></span><span style=\"display:flex;\"><span>  {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">char</span> flag<span style=\"color:#f92672\">=</span>Serial.<span style=\"color:#a6e22e\">read</span>();\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(flag<span style=\"color:#f92672\">==</span><span style=\"color:#e6db74\">&#39;l&#39;</span>) {\n</span></span><span style=\"display:flex;\"><span>        deg <span style=\"color:#f92672\">=</span> deg <span style=\"color:#f92672\">-</span> <span style=\"color:#ae81ff\">5</span>;\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">if</span>(deg <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>            deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>        }\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(flag<span style=\"color:#f92672\">==</span><span style=\"color:#e6db74\">&#39;r&#39;</span>) {\n</span></span><span style=\"display:flex;\"><span>        deg <span style=\"color:#f92672\">=</span> deg <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">5</span>;\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">if</span>(deg <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">180</span>) {\n</span></span><span style=\"display:flex;\"><span>            deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>;\n</span></span><span style=\"display:flex;\"><span>        }\n</span></span><span style=\"display:flex;\"><span>    }      \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">servoWrite</span>(ledChannel, deg);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// deg는 0~180도 까지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">servoWrite</span>(<span style=\"color:#66d9ef\">int</span> ch, <span style=\"color:#66d9ef\">int</span> deg)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>    duty <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(deg, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>, <span style=\"color:#ae81ff\">1638</span>, <span style=\"color:#ae81ff\">8192</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">ledcWrite</span>(ch, duty);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);                             <span style=\"color:#75715e\">// delay를 줄이면 180도가 완전히 돌지 않음\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"2축-서보모터-거치대-조립-및-테스트\">2축 서보모터 거치대 조립 및 테스트<a class=\"anchor\" href=\"#2%ec%b6%95-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-%ea%b1%b0%ec%b9%98%eb%8c%80-%ec%a1%b0%eb%a6%bd-%eb%b0%8f-%ed%85%8c%ec%8a%a4%ed%8a%b8\">#</a></h3>\r\n<h4 id=\"거치대-조립\">거치대 조립<a class=\"anchor\" href=\"#%ea%b1%b0%ec%b9%98%eb%8c%80-%ec%a1%b0%eb%a6%bd\">#</a></h4>\r\n<p>첫번째 단계로 서보모터 거치대를 조립하고 서보모터 2개를 장착한다.</p>\n<p>SG90 서보 2개를 준비하고</p>\n<figure class=\"center\"><img src=\"/image/servo-01.png\" width=\"50%\">\n</figure>\n\n<p>니퍼로 아래 빨간 동그라미로 표시한 부분의 크기에 맞추어, <strong>서보모터 날개를 잘라낸 뒤</strong></p>\n<p><img src=\"/image/servo-04.png\" alt=\"\" /></p>\n<p>아래 형태대로 조립한다.</p>\n<p><img src=\"/image/servo-02.png\" alt=\"\" /></p>\n<p><img src=\"/image/servo-03.png\" alt=\"\" /></p>\n<p>날개를 나사로 조인 부분에 순간접착제를 살짝 뿌려, 완전히 고정시킨다. (단, 서보모터의 회전축 부분에는 접착제가 뭍지 않도록 주의한다.)</p>\n<br>\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/servo-05.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-두개의-서보모터를-180도-회전시키기\">sketch: 두개의 서보모터를 180도 회전시키기<a class=\"anchor\" href=\"#sketch-%eb%91%90%ea%b0%9c%ec%9d%98-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0%eb%a5%bc-180%eb%8f%84-%ed%9a%8c%ec%a0%84%ec%8b%9c%ed%82%a4%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for horizontal Servo PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledPin_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">15</span>;  <span style=\"color:#75715e\">// corresponds to GPIO 15\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledChannel_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> freq_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">50</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> resolution_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">16</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for vertical Servo PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledPin_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;  <span style=\"color:#75715e\">// corresponds to GPIO 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledChannel_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> freq_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">50</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> resolution_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">16</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> deg_hori, deg_vert, duty;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// PWM Setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcSetup(ledChannel_hori, freq_hori, resolution_hori);  <span style=\"color:#75715e\">// PWM CH1, Frequncy 50 Hz, 16bit resolution\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcAttachPin(ledPin_hori, ledChannel_hori);             <span style=\"color:#75715e\">// PWM CH1을 GPIO 19번으로 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcSetup(ledChannel_vert, freq_vert, resolution_vert);  <span style=\"color:#75715e\">// PWM CH0, Frequncy 50 Hz, 16bit resolution\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcAttachPin(ledPin_vert, ledChannel_vert);             <span style=\"color:#75715e\">// PWM CH0을 GPIO 18번으로 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (deg_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;deg_hori <span style=\"color:#f92672\">&lt;=</span> <span style=\"color:#ae81ff\">180</span>; deg_hori<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>  servoWrite(ledChannel_hori, deg_hori);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (deg_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;deg_vert <span style=\"color:#f92672\">&lt;=</span> <span style=\"color:#ae81ff\">180</span>; deg_vert<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>  servoWrite(ledChannel_vert, deg_vert);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (deg_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>;deg_hori <span style=\"color:#f92672\">&gt;=</span> <span style=\"color:#ae81ff\">0</span>; deg_hori<span style=\"color:#f92672\">--</span>) {\n</span></span><span style=\"display:flex;\"><span>  servoWrite(ledChannel_hori, deg_hori);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (deg_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>;deg_vert <span style=\"color:#f92672\">&gt;=</span> <span style=\"color:#ae81ff\">0</span>; deg_vert<span style=\"color:#f92672\">--</span>) {\n</span></span><span style=\"display:flex;\"><span>  servoWrite(ledChannel_vert, deg_vert);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// deg는 0~180도 까지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">servoWrite</span>(<span style=\"color:#66d9ef\">int</span> ch, <span style=\"color:#66d9ef\">int</span> deg)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>    duty <span style=\"color:#f92672\">=</span> map(deg, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>, <span style=\"color:#ae81ff\">1638</span>, <span style=\"color:#ae81ff\">8192</span>);\n</span></span><span style=\"display:flex;\"><span>    ledcWrite(ch, duty);\n</span></span><span style=\"display:flex;\"><span>    delay(<span style=\"color:#ae81ff\">15</span>);                             <span style=\"color:#75715e\">// delay를 줄이면 180도가 완전히 돌지 않음\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"joystick-1개를-사용하여-2개의-서보모터-제어하기\">Joystick 1개를 사용하여 2개의 서보모터 제어하기<a class=\"anchor\" href=\"#joystick-1%ea%b0%9c%eb%a5%bc-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-2%ea%b0%9c%ec%9d%98-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-%ec%a0%9c%ec%96%b4%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic-2\">schematic<a class=\"anchor\" href=\"#schematic-2\">#</a></h4>\r\n<p><img src=\"/image/ESP32_Joystick_2Servo.png\" alt=\"\" /></p>\n<nr>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for horizontal Servo PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledPin_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">15</span>;       <span style=\"color:#75715e\">// corresponds to GPIO 15\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledChannel_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> freq_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">50</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> resolution_hori <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">16</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for vertical Servo PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledPin_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;       <span style=\"color:#75715e\">// corresponds to GPIO 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledChannel_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> freq_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">50</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> resolution_vert <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">16</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_LR_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">25</span>;           <span style=\"color:#75715e\">// Left_Right GPIO25\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Jstick_FB_pin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">32</span>;           <span style=\"color:#75715e\">// Forward_Backward GPIO32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> Jstick_LR, Jstick_FB, deg_hori, deg_vert, duty;          \n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Servo PWM Setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcSetup(ledChannel_hori, freq_hori, resolution_hori);  <span style=\"color:#75715e\">// PWM CH1, Frequncy 50 Hz, 16bit resolution\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcAttachPin(ledPin_hori, ledChannel_hori);             <span style=\"color:#75715e\">// PWM CH1을 GPIO 19번으로 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcSetup(ledChannel_vert, freq_vert, resolution_vert);  <span style=\"color:#75715e\">// PWM CH0, Frequncy 50 Hz, 16bit resolution\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ledcAttachPin(ledPin_vert, ledChannel_vert);             <span style=\"color:#75715e\">// PWM CH0을 GPIO 18번으로 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>(){\n</span></span><span style=\"display:flex;\"><span>    PrintValue();\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    Jstick_LR <span style=\"color:#f92672\">=</span> analogRead(Jstick_LR_pin);          \n</span></span><span style=\"display:flex;\"><span>    deg_hori <span style=\"color:#f92672\">=</span> map(Jstick_LR, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">4095</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>);     \n</span></span><span style=\"display:flex;\"><span>    servoWrite(ledChannel_hori, deg_hori);\n</span></span><span style=\"display:flex;\"><span>                             \n</span></span><span style=\"display:flex;\"><span>    Jstick_UD <span style=\"color:#f92672\">=</span> analogRead(Jstick_UD_pin);           \n</span></span><span style=\"display:flex;\"><span>    deg_vert <span style=\"color:#f92672\">=</span> map(Jstick_FB, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">4095</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>);     \n</span></span><span style=\"display:flex;\"><span>    servoWrite(ledChannel_vert, deg_vert); \n</span></span><span style=\"display:flex;\"><span>                              \n</span></span><span style=\"display:flex;\"><span>    delay(<span style=\"color:#ae81ff\">15</span>);                                  \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// deg는 0~180도 까지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">servoWrite</span>(<span style=\"color:#66d9ef\">int</span> ch, <span style=\"color:#66d9ef\">int</span> deg)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>    duty <span style=\"color:#f92672\">=</span> map(deg, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>, <span style=\"color:#ae81ff\">1638</span>, <span style=\"color:#ae81ff\">8192</span>);\n</span></span><span style=\"display:flex;\"><span>    ledcWrite(ch, duty);\n</span></span><span style=\"display:flex;\"><span>    delay(<span style=\"color:#ae81ff\">15</span>);                             <span style=\"color:#75715e\">// delay를 줄이면 180도가 완전히 돌지 않음 (최소값 15)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">PrintValue</span>(){\n</span></span><span style=\"display:flex;\"><span>    Serial.print(analogRead(Jstick_LR));\n</span></span><span style=\"display:flex;\"><span>    Serial.print (<span style=\"color:#e6db74\">&#34; - &#34;</span>); \n</span></span><span style=\"display:flex;\"><span>    Serial.print(analogRead(Jstick_FB));\n</span></span><span style=\"display:flex;\"><span>    Serial.println (<span style=\"color:#e6db74\">&#34; Joystick Value&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"esp32servo-라이브러리-사용시\">ESP32Servo 라이브러리 사용시<a class=\"anchor\" href=\"#esp32servo-%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%82%ac%ec%9a%a9%ec%8b%9c\">#</a></h3>\r\n<h4 id=\"library-for-esp32\">library for ESP32<a class=\"anchor\" href=\"#library-for-esp32\">#</a></h4>\r\n<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong> 에서 &ldquo;<strong>esp32servo</strong>&rdquo; (by Kevin Harrington) 검색 후 설치</p>\n<p><img src=\"/image/esp32-nRF24L01-servo-01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"schematic-3\">schematic<a class=\"anchor\" href=\"#schematic-3\">#</a></h4>\r\n<p><img src=\"/image/servo-05.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-2\">sketch<a class=\"anchor\" href=\"#sketch-2\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;ESP32Servo.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>Servo servo_x;  <span style=\"color:#75715e\">// create servo object to control a servo\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>Servo servo_y;  <span style=\"color:#75715e\">// 16 servo objects can be created on the ESP32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pos <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;    <span style=\"color:#75715e\">// variable to store the servo position\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Recommended PWM GPIO pins on the ESP32 include 2,4,12-19,21-23,25-27,32-33 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> servo_xPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">15</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> servo_yPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Allow allocation of all timers\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  ESP32PWM<span style=\"color:#f92672\">::</span>allocateTimer(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span>allocateTimer(<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span>allocateTimer(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  ESP32PWM<span style=\"color:#f92672\">::</span>allocateTimer(<span style=\"color:#ae81ff\">3</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.setPeriodHertz(<span style=\"color:#ae81ff\">50</span>);    <span style=\"color:#75715e\">// standard 50 hz servo\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  servo_y.setPeriodHertz(<span style=\"color:#ae81ff\">50</span>);\n</span></span><span style=\"display:flex;\"><span>  servo_x.attach(servo_xPin, <span style=\"color:#ae81ff\">500</span>, <span style=\"color:#ae81ff\">2500</span>); <span style=\"color:#75715e\">// attaches the servo on pin 25 &amp; 32 to the servo object\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  servo_y.attach(servo_yPin, <span style=\"color:#ae81ff\">500</span>, <span style=\"color:#ae81ff\">2500</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// using default min/max of 1000us and 2000us\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// different servos may require different min/max settings\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// for an accurate 0 to 180 sweep\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (pos <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; pos <span style=\"color:#f92672\">&lt;=</span> <span style=\"color:#ae81ff\">180</span>; pos <span style=\"color:#f92672\">+=</span> <span style=\"color:#ae81ff\">1</span>) { <span style=\"color:#75715e\">// goes from 0 degrees to 180 degrees\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#75715e\">// in steps of 1 degree\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    servo_x.write(pos);    <span style=\"color:#75715e\">// tell servo to go to position in variable &#39;pos&#39;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    servo_y.write(<span style=\"color:#ae81ff\">180</span><span style=\"color:#f92672\">-</span>pos);\n</span></span><span style=\"display:flex;\"><span>    delay(<span style=\"color:#ae81ff\">5</span>);             <span style=\"color:#75715e\">// waits 5ms for the servo to reach the position\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (pos <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>; pos <span style=\"color:#f92672\">&gt;=</span> <span style=\"color:#ae81ff\">0</span>; pos <span style=\"color:#f92672\">-=</span> <span style=\"color:#ae81ff\">1</span>) { <span style=\"color:#75715e\">// goes from 180 degrees to 0 degrees\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    servo_x.write(pos);    <span style=\"color:#75715e\">// tell servo to go to position in variable &#39;pos&#39;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    servo_y.write(<span style=\"color:#ae81ff\">180</span><span style=\"color:#f92672\">-</span>pos);\n</span></span><span style=\"display:flex;\"><span>    delay(<span style=\"color:#ae81ff\">5</span>);             <span style=\"color:#75715e\">// waits 5ms for the servo to reach the position\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/stem-%EC%A4%91%EB%A0%A5-%EA%B0%80%EC%86%8D%EB%8F%84-%EC%B8%A1%EC%A0%95/","title":"ESP32, 중력 가속도 측정","content":"<h3 id=\"중력gravitational-force\">중력(Gravitational Force)<a class=\"anchor\" href=\"#%ec%a4%91%eb%a0%a5gravitational-force\">#</a></h3>\r\n<p>뉴턴은 달의 운동과 케플러의 법칙을 통해, 달과 지구 사이에 작용하는 힘은 지구의 질량과 달의 질량의 곱에 비례하고 거리의 제곱에 반비례한다는 만유인력의 법칙을 밝혔다.</p>\n<span>\\[ F = G \\frac{Mm}{r^2} = m_i a = mg \\]</span><p>지구의 질량 M</p>\n<span>\\[ M=5.072 \\times 10^{24}~kg \\]</span><p>지구 반지름 r</p>\n<span>\\[ r = 6371~km \\]</span><p>만유인력 상수값은 다음과 같다. (캐번디시에 의해 측정된 G값은 6.674)</p>\n<span>\\[ G = 6.67259 \\times 10^{-11}~N \\cdot m^2 /kg^2 \\]</span><p>만유인력이 지상의 물체에 작용되는 경우, 이때 작용하는 힘을 중력이라고 한다.</p>\n<br>\n<h4 id=\"중력-가속도gravitational-acceleration\">중력 가속도(Gravitational Acceleration)<a class=\"anchor\" href=\"#%ec%a4%91%eb%a0%a5-%ea%b0%80%ec%86%8d%eb%8f%84gravitational-acceleration\">#</a></h4>\r\n<p>위 식에서 관성 질량(m_i)과 중력 질량(m)이 같다는 등가원리를 적용하면 중력 가속도는 작은 물체의 질량 m에 무관하게 된다.</p>\n<span>\\[ a = g = G \\frac{M}{r^2} \\]</span><p>지구의 질량 M과 지구 반지름 R은 지표면의 물체에 비해 매우 크고, 거의 구에 가까우므로, 위 식을 사용하여 지구 표면에서의 중력 가속도 g 값을 구할 수 있다.</p>\n<span>\\[ g = 9.80665~m/s^2 \\]</span><br>\n<h4 id=\"등가속도-직선-운동\">등가속도 직선 운동<a class=\"anchor\" href=\"#%eb%93%b1%ea%b0%80%ec%86%8d%eb%8f%84-%ec%a7%81%ec%84%a0-%ec%9a%b4%eb%8f%99\">#</a></h4>\r\n<p>가속도의 크기와 방향이 일정한 직선 운동으로, 속도가 일정하게 증가하거나 감속하는 직선 운동을 의미한다. 자유낙하의 경우 초기속도가 0인 물체를 중력장에 낙하시킬 때 중력가속도를 받으며 낙하하는 물체의 운동이며, 공기의 저항이 없다고 가정할 경우 등가속도 직선 운동이 된다.</p>\n<p>등가속도 직선 운동과 관련된 공식은 다음과 같다.</p>\n<span>\\[ v = v_0 + at~~~\\cdots~~~① \\]</span><span>\\[ s=v_0t + \\frac{1}{2}at^2~~~\\cdots~~~② \\]</span><span>\\[ 2as = v^2 - v_0^2~~~\\cdots~~~③ \\]</span><p>이 3가지 기본 공식을 통해 다양한 형태의 공식을 유도할 수도 있다.</p>\n<p>①, ②식을 조합하면</p>\n<span>\\[ s = \\frac{1}{2}(v_0+v)t~~~\\cdots~~~④ \\]</span><p>③식에서 초기속도(v_0)가 0인 경우</p>\n<span>\\[ v=\\sqrt{2as}~~~\\cdots~~~⑤ \\]</span><p>②식을 변형하면</p>\n<span>\\[ a=\\frac{2(s-v_0t)}{t^2}~~~\\cdots~~~⑥ \\]</span><p>③식을 변형하면</p>\n<span>\\[ a=\\frac{v^2-v_0^2}{2s}~~~\\cdots~~~⑦ \\]</span><br>\n<br>\n<h3 id=\"자유낙하를-이용한-중력-가속도-측정-실험\">자유낙하를 이용한 중력 가속도 측정 실험<a class=\"anchor\" href=\"#%ec%9e%90%ec%9c%a0%eb%82%99%ed%95%98%eb%a5%bc-%ec%9d%b4%ec%9a%a9%ed%95%9c-%ec%a4%91%eb%a0%a5-%ea%b0%80%ec%86%8d%eb%8f%84-%ec%b8%a1%ec%a0%95-%ec%8b%a4%ed%97%98\">#</a></h3>\r\n<ul>\n<li>\n<p>실험 목적: 중력 가속도를 측정하는 방법은 여러 가지가 있지만, 본 실험은 자유 낙하를 통해 중력 가속도를 측정하고자 한다. 자유낙하 운동이 중력을 가장 쉽게 표현할 수 있는 운동이라 판단하였기 때문이다. 정밀한 값의 측정보다는, 자유낙하 운동을 통해 중력 가속도를 이해하고 이를 실험을 통해 확인하는 것이 이번 실험의 목적이다. 보다 정밀한 중력 가속도를 측정하기 위해서는 진자의 운동 주기를 이용하는 것이 좋다.</p>\n</li>\n<li>\n<p>이번 실험에서는 2m 길이의 파이프에 25cm 간격으로 센서를 배치하고, 낙하하는 물체가 센서를 지날때마다 시간을 기록할 것이다. 변위와 시간을 측정할 수 있으므로 초기속도({{&lt; katex &gt;}}v_0{{&lt; /katex &gt;}})값만 알면 ⑥을 이용하여 중력 가속도를 계산할 수 있다.</p>\n</li>\n<li>\n<p>⑥을 단순화 시키기 위해서는 <strong>초기 속도가 0이 되도록 하기 위해 첫번째 센서를 파이프의 입구(최상단)에 배치</strong>하는 것이다. 단, 이렇게 할 경우 실험 과정에서 낙하시킬 물체를 놓을 때 물체를 잡고 있는 손가락의 영향을 제거하기 어려우며, 이 문제에 기인하는 오차는 큰 편이라고 할 수 있다.</p>\n</li>\n<li>\n<p>위 문제 해결을 위해 첫번째 센서를 최상단으로부터 12.5cm 정도 아래로 내려 설치한다. 이를 통해 센서가 측정하는 시간은 온전히 자유낙하하는 상태에서 측정되므로 비교적 정확하게 측정할 수 있다. 문제는 <strong>첫번째 센서 위치에서의 초기 속도(v_0)값</strong>이 0이 아니므로 이 값을 별도로 계산하여야 한다.</p>\n</li>\n<li>\n<p>이 값은 ③으로부터 계산할 수 있는데,</p>\n</li>\n</ul>\n<span>\\[ 2as = v^2 - v_0^2~~~\\cdots~~~③ \\]</span><ul>\n<li>파이프 입구에서의 <strong>초기 속도(v_0)를 0으로 가정</strong>하면, 12.5cm만큼 낙하하여 첫번째 센서에 반응할 때의 속도(v)값은 ⑤로 부터 구할 수 있다.</li>\n</ul>\n<span>\\[ v=\\sqrt{2as} = \\sqrt{2\\times9.80665\\times0.125}=1.5658~m/s \\]</span><ul>\n<li>이 값이 12.5cm 위치에 첫번째 센서를 설치한 실험기구를 사용하는 경우, <strong>⑥에서의 초기 속도(v_0)값</strong>이 된다. 파이프에 설치한 센서의 번호를 n이라고 하면, ⑥은 다음과 같이 쓸 수 있다.</li>\n</ul>\n<span>\\[ a_n=\\frac{2(s_n-1.5658t_n)}{t_n^2} \\]</span><ul>\n<li>s는 <strong>첫번째 센서 ~ 각 센서가 위치한 곳</strong>까지 물체가 이동한 변위이며, 8개의 센서를 사용하여 낙하하는 물체가 센서와 반응하는 시간(t_n)을 측정하고, 이를 ⑥에 대입하면 가속도(a_n)를 계산할 수 있다. 각 지점에서의 가속도를 평균계산하여 중력가속도를 구한다.</li>\n</ul>\n<table>\n  <thead>\n      <tr>\n          <th>센서</th>\n          <th>입구 ~ 0</th>\n          <th>0 ~ 1</th>\n          <th>0 ~ 2</th>\n          <th>0 ~ 3</th>\n          <th>0 ~ 4</th>\n          <th>0 ~ 5</th>\n          <th>0 ~ 6</th>\n          <th>0 ~ 7</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>s_n (m)</td>\n          <td>0.125</td>\n          <td>0.25</td>\n          <td>0.50</td>\n          <td>0.75</td>\n          <td>1.00</td>\n          <td>1.25</td>\n          <td>1.50</td>\n          <td>1.75</td>\n      </tr>\n      <tr>\n          <td>t_n</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>a_n</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"이-실험의-한계\">이 실험의 한계<a class=\"anchor\" href=\"#%ec%9d%b4-%ec%8b%a4%ed%97%98%ec%9d%98-%ed%95%9c%ea%b3%84\">#</a></h4>\r\n<ul>\n<li>이 실험의 목적은 자유 낙하하는 물체를 통해 중력 가속도를 측정하는 것이다. 그런데, 중력 가속도를 계산하는 중간 과정에서, ⑤를 이용하기 위한 초기 속도(v_0=1.5658m/s) 값을 계산하기 위해 (실험 목적값인) 중력 가속도 9.80665m/s²를 사용한 것은 이 실험을 행하는 본질을 벗어나는 것이라고 볼 수 있다.</li>\n<li>그렇지만, 여기서는 각 센서를 통해 측정되는 값으로 계산해낸 중력 가속도의 평균 값이 어느 정도되는지 확인해보고, 실제값과 어느 정도의 오차를 보이는지를 확인하는 교육 목적을 갖고 사용하는 것임을 감안할 필요가 있다. 이를 근거로 중력 가속도 값을 이용하여 계산한 첫번째 센서위치에서의 초기 속도 값을 기본 보정값의 개념으로 사용하고자 한다.</li>\n<li>이러한 방법이 합당하지 않다고 생각한다면, 위에서 언급한 것 처럼 초기 속도(v_0)가 0이 되도록 센서를 파이프의 입구(최상단)에 배치하고, 물체가 손에서 떨어짐과 동시에 첫번째 센서에 반응하도록 낙하시키는 위치를 정확하게 조절하며 실험해야 한다.</li>\n</ul>\n<br>\n<br>\n<h4 id=\"실험-장치-만들기\">실험 장치 만들기<a class=\"anchor\" href=\"#%ec%8b%a4%ed%97%98-%ec%9e%a5%ec%b9%98-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h4>\r\n<h5 id=\"파이프-준비\">파이프 준비<a class=\"anchor\" href=\"#%ed%8c%8c%ec%9d%b4%ed%94%84-%ec%a4%80%eb%b9%84\">#</a></h5>\r\n<ul>\n<li>길이 2m 투명 아크릴 파이프(내경 3.5cm)에 **구간 거리가 0.25m(=25cm)**가 되도록 일정하게 IR LED를 배치하고 고정한다.</li>\n</ul>\n<p><img src=\"/image/Gravitational-Acceleration01.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"센서-장착\">센서 장착<a class=\"anchor\" href=\"#%ec%84%bc%ec%84%9c-%ec%9e%a5%ec%b0%a9\">#</a></h5>\r\n<ul>\n<li>\n<p>맨 위쪽과 아래쪽에는 12.5cm정도 띄우고 IR LED와 Phototransistor를 배치함</p>\n<ul>\n<li>손에서 낙하물을 놓을 때, 낙하물이 바닥에 닿을 때, 낙하시간에 영향을 주는 요소를 제거하기 위함</li>\n</ul>\n</li>\n<li>\n<p>IR LED와 Phototransistor가 서로 정확하게 마주 볼 수 있는 위치에 유성펜을 사용하여 표시한다.</p>\n</li>\n<li>\n<p>드릴을 이용하여 아크릴 파이프에 지름 5mm의 구멍을 뚫는다.</p>\n<ul>\n<li>아크릴이 파손되지 않도록 유의한다. 이를 위해 먼저 작은 지름(1~2mm)의 드릴비트를 이용하여 작은 구멍을 뚫은 뒤, 그 구멍에 5mm 드릴비트를 사용하여 LED가 들어갈 구멍을 다시 뚫는 것이 좋다.</li>\n</ul>\n</li>\n<li>\n<p>IR LED와 Phototransistor를 구멍에 넣고 글루건을 사용하여 고정한다.</p>\n<ul>\n<li>글루건이 IR LED와 Phototransistor의 앞부분에 뭍지 않도록 주의</li>\n<li>글루건이 손에 뭍으면 화상을 입을 수 있으므로 주의</li>\n</ul>\n</li>\n</ul>\n<br>\n<h5 id=\"배선\">배선<a class=\"anchor\" href=\"#%eb%b0%b0%ec%84%a0\">#</a></h5>\r\n<ul>\n<li>각 센서 층마다 저항과 전원선과 데이터선을 다음과 같이 연결한다.</li>\n</ul>\n<p><img src=\"/image/Gravitational-Acceleration02.png\" alt=\"\" /></p>\n<br>\n<ul>\n<li>\n<p>IR LED</p>\n<ul>\n<li>\n<p>부품번호 및 제조회사가 표기되어 있지 않아 정확히 어떤 제품인지 알 수 없어, Everlight사의 IR333-A (940nm, 직경5mm)의 Datasheet를 참고하였다.</p>\n</li>\n<li>\n<p>Forward Current 100mA, Forward Voltage 1.5V</p>\n</li>\n<li>\n<p>5V를 전원으로 사용하는 경우</p>\n<span>\\[ R = \\frac{(5-1.5)V}{0.1A} = 35~Ω \\]</span><p>그러므로 35Ω보다 약간 큰 47Ω저항을 연결한다. 100Ω정도의 저항도 사용할 수 있으나, 너무 큰 저항을 사용할 경우 IR의 세기가 작아지게 되므로, 실험이 잘 안될 수 있다.</p>\n</li>\n<li>\n<p>실외에서는 태양광에 포함된 적외선의 영향도 받게 되므로 사용장소가 실내로 제한된다.</p>\n</li>\n</ul>\n <br>\n</li>\n<li>\n<p>Phototransistor</p>\n<ul>\n<li>\n<p>적외선이 닿으면 전류를 흐르게 하는 스위치 역할을 한다.</p>\n</li>\n<li>\n<p>콜렉터(Collector)의 역할을 하는 긴다리와 에미터(Emitter)의 역할을 하는 짧은 다리, 총 2개의 다리가 붙어가 있지만 적외선 빛이 베이스(Base)의 역할을 하는 트렌지스터이다.</p>\n</li>\n<li>\n<p>스위치의 역할을 하므로, 1MΩ의 풀업 저항을 긴다리에 부착한다. 10k옴을 써도 무방하지만 센서의 감도가 떨어지게 됨</p>\n</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<ul>\n<li>8세트의 IR LED와 Phototransistor를 사용하기 위해 아날로그 입력이 총 8개 필요하다. 그러므로 여기서는 많은 아날로그 입력핀을 갖고 있는 <strong>ESP32</strong>를 사용하도록 한다. 장치의 특성상, 최종 사용시에는 USB선을 분리한 상태에서 사용할 수 있도록 하는 것이 좋으므로, 18650 배터리 홀더가 내장된 ESP32를 사용하는 것도 좋은 방법이다.</li>\n</ul>\n<p><img src=\"/image/Gravitational-Acceleration03.png\" alt=\"\" /></p>\n<br>\n<p>※ 아두이노 UNO의 경우 아날로그 입력이 총 6개이고, 여기에 SDA, SCL과 같은 I2C 통신포트를 사용한다면 실제 사용가능한 아날로그 포트가 4개밖에 남지 않는다. 아두이노 UNO를 사용해야한다면 CD4051BE와 같은 멀티플렉서 IC를 추가로 사용하여야 한다. 혹은 아날로그 입력 포트를 많이 가지고 있는 아두이노 MEGA를 사용한다.</p>\n<br>\n<h4 id=\"sketch-센서-테스트\">sketch: 센서 테스트<a class=\"anchor\" href=\"#sketch-%ec%84%bc%ec%84%9c-%ed%85%8c%ec%8a%a4%ed%8a%b8\">#</a></h4>\r\n<ul>\n<li>모든 센서의 배선이 완료되면, 센서가 잘 작동하는지 테스트하기 위한 스케치를 업로드하여 센서를 점검한다.</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Potentiometer is connected to GPIO 34 (Analog ADC1_CH6) \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ir_Pin[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">36</span>, <span style=\"color:#ae81ff\">39</span>, <span style=\"color:#ae81ff\">34</span>, <span style=\"color:#ae81ff\">35</span>, <span style=\"color:#ae81ff\">32</span>, <span style=\"color:#ae81ff\">33</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">2</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// variable for storing the potentiometer value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> ir_Value[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Print the header:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Y0</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">Y1</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">Y2</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">Y3</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">Y4</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">Y5</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">Y6</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">Y7&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;---</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">---&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Loop through all eight pins.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span> (byte pin<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; pin<span style=\"color:#f92672\">&lt;=</span><span style=\"color:#ae81ff\">7</span>; pin<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    ir_Value[pin] <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(ir_Pin[pin]);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#a6e22e\">String</span>(ir_Value[pin]) <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><ul>\n<li>센서값이 4095으로 출력되는 센서는 배선 자체의 연결에 문제가 있는 것이므로, 배선이 연결되어야 하는 부분에 정확하게 연결이 되었는지 우선 점검한다.</li>\n<li>초기 상태의 센서값이 모두 0에 근접하는 값으로 표시될 수 있도록 하는 것이 좋으며, 초기값이 0에서 많이 벗어나는 경우에는 LED와 Phototransistor가 서로 정확하게 마주 볼 수 있도록 조절해준다. 조절 후에도 센서값이 0이 되지 않을 수 있다. 이때는 0에 가장 가까운 값이 만들어지도록 최대한 조절한다. 이 상태에서 물체를 떨어뜨려 모든 센서가 물체에 반응하는지 살펴본 뒤, 물체에 반응하는 센서값의 최소값을 점검한다.</li>\n</ul>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<ul>\n<li>테스트 sketch를 통해 센서의 반응 정도를 파악한 뒤에, 메인 스케치를 업로드 한다.</li>\n<li>업로드 전에 아래 부분을 찾아, 각 센서에 따라으로 물체에 반응하는 센서의 최소값(센서 테스트시 점검할 것!)으로 바꿔준다.  민감도의 범위는 0~4095이며, 값이 작을 수록 떨어지는 물체에 민감하게 반응한다. 기본값은 모두 100으로 설정되어 있다.</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// The smaller the value, the more sensitive (0~4095)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> min_Sensitive[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>};</span></span></code></pre></div><br>\n<h5 id=\"메인-스케치\">메인 스케치<a class=\"anchor\" href=\"#%eb%a9%94%ec%9d%b8-%ec%8a%a4%ec%bc%80%ec%b9%98\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/****** ESP32 SKETCH FOR GRAVITATIONAL ACCELERATION ******\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">   Author: K. Jun, Lee\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">   Blog: https://stemwith.github.io         2020-10-06\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*********************************************************/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// GPIO of connecting with 8 Phototransistors\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ir_Pin[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">36</span>, <span style=\"color:#ae81ff\">39</span>, <span style=\"color:#ae81ff\">34</span>, <span style=\"color:#ae81ff\">35</span>, <span style=\"color:#ae81ff\">32</span>, <span style=\"color:#ae81ff\">33</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">2</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// variable for storing the potentiometer value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> ir_Value[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// variable for IR Phototransistors&#39; sensitivity\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> ir_Sensitivity[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// The smaller the value, the more sensitive (0~4095)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> min_Sensitive[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>, <span style=\"color:#ae81ff\">100</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for recording of sensing time by micros()\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> nowTime[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for recording of interval time by micros()\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> intervalTime[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for distance of 8 sensors in micrometer unit\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// (12.5cm - 25cm - 25cm - 25cm - 25cm - 25cm - 25cm - 25cm)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">unsigned long ir_Distance[8] = {125000, 250000, 250000, 250000, 250000, 250000, 250000, 250000};\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for testing distance of 8 sensors in micrometer unit\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// (1.4cm - 2.54cm - 2.54cm - 2.54cm - 2.54cm - 2.54cm - 2.54cm - 2.54cm)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> ir_Distance[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">14000</span>, <span style=\"color:#ae81ff\">25400</span>, <span style=\"color:#ae81ff\">25400</span>, <span style=\"color:#ae81ff\">25400</span>, <span style=\"color:#ae81ff\">25400</span>, <span style=\"color:#ae81ff\">25400</span>, <span style=\"color:#ae81ff\">33300</span>, <span style=\"color:#ae81ff\">25400</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for displacemence of 8 sensors in micrometer unit\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> ir_Displacemence[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for interval acceleration\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">float</span> acceleration[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">0.0</span>, <span style=\"color:#ae81ff\">0.0</span>, <span style=\"color:#ae81ff\">0.0</span>, <span style=\"color:#ae81ff\">0.0</span>, <span style=\"color:#ae81ff\">0.0</span>, <span style=\"color:#ae81ff\">0.0</span>, <span style=\"color:#ae81ff\">0.0</span>, <span style=\"color:#ae81ff\">0.0</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for times number\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> t <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Gravitational Acceleration &amp; Initial Velocity\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">float</span> g <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9.80665</span>; <span style=\"color:#75715e\">// 9.80665 m/s^2 = 0.00000980665 um/us^2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">float</span> initVelocity <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">sqrt</span>(<span style=\"color:#ae81ff\">2</span><span style=\"color:#f92672\">*</span>g<span style=\"color:#f92672\">*</span>((<span style=\"color:#66d9ef\">float</span>)ir_Distance[<span style=\"color:#ae81ff\">0</span>]<span style=\"color:#f92672\">/</span><span style=\"color:#ae81ff\">1000000</span>)); <span style=\"color:#75715e\">// in m/s unit\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Setup Displacemence\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span> (byte pin<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1</span>; pin<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">8</span>; pin<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>      ir_Displacemence[pin] <span style=\"color:#f92672\">=</span> ir_Displacemence[pin<span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">1</span>] <span style=\"color:#f92672\">+</span> ir_Distance[pin];\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Print the header:;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  t<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">float</span> sum_Accel <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0.0</span>;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> initTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Experiment #&#34;</span>); Serial.<span style=\"color:#a6e22e\">println</span>(t);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">Y0</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">Y1</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">Y2</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">Y3</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">Y4</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">Y5</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">Y6</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">Y7&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">---</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">---&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Initializing 8 IR Phototransistors&#39; Sensitivity:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> s<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; s<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">101</span>; s<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">for</span> (byte pin<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; pin<span style=\"color:#f92672\">&lt;=</span><span style=\"color:#ae81ff\">7</span>; pin<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>      ir_Sensitivity[pin] <span style=\"color:#f92672\">=</span> ir_Sensitivity[pin] <span style=\"color:#f92672\">+</span> <span style=\"color:#a6e22e\">analogRead</span>(ir_Pin[pin]);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Average of Initial Senser value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;IR_Sensivitity</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (byte pin<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; pin<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">8</span>; pin<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    ir_Sensitivity[pin] <span style=\"color:#f92672\">=</span> ir_Sensitivity[pin] <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">100</span>;\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#a6e22e\">String</span>(ir_Sensitivity[pin]) <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Loop through #0~7 pins.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;IR_Value</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (byte pin<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; pin<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">8</span>; pin<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">while</span> (ir_Value[pin] <span style=\"color:#f92672\">&lt;=</span> ir_Sensitivity[pin] <span style=\"color:#f92672\">+</span> min_Sensitive[pin]) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span>(pin<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>        initTime <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">micros</span>();\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>      nowTime[pin] <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">micros</span>() <span style=\"color:#f92672\">-</span> initTime;\n</span></span><span style=\"display:flex;\"><span>      ir_Value[pin] <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(ir_Pin[pin]);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#a6e22e\">String</span>(ir_Value[pin]) <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Now Time(us)</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (byte pin<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; pin<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">8</span>; pin<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#a6e22e\">String</span>(nowTime[pin]) <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    ir_Value[pin] <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>    ir_Sensitivity[pin] <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Interval(s)</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (byte pin<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1</span>; pin<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">8</span>; pin<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    intervalTime[pin] <span style=\"color:#f92672\">=</span> nowTime[pin] <span style=\"color:#f92672\">-</span> nowTime[pin<span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">1</span>];\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">float</span> f_intervalTime <span style=\"color:#f92672\">=</span> (<span style=\"color:#66d9ef\">float</span>)intervalTime[pin] <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">1000000.0</span>;\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;     &#34;</span> <span style=\"color:#f92672\">+</span> <span style=\"color:#a6e22e\">String</span>(f_intervalTime, <span style=\"color:#ae81ff\">6</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Distance(m)</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (byte pin<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1</span>; pin<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">8</span>; pin<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">float</span> f_Distance <span style=\"color:#f92672\">=</span> (<span style=\"color:#66d9ef\">float</span>)ir_Distance[pin] <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">1000000.0</span>;\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;     &#34;</span> <span style=\"color:#f92672\">+</span> <span style=\"color:#a6e22e\">String</span>(f_Distance, <span style=\"color:#ae81ff\">4</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Displace.(m)</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">for</span> (byte pin<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1</span>; pin<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">8</span>; pin<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">float</span> f_Displacemence <span style=\"color:#f92672\">=</span> (<span style=\"color:#66d9ef\">float</span>)ir_Displacemence[pin] <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">1000000.0</span>;\n</span></span><span style=\"display:flex;\"><span>      Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;     &#34;</span> <span style=\"color:#f92672\">+</span> <span style=\"color:#a6e22e\">String</span>(f_Displacemence, <span style=\"color:#ae81ff\">4</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// using a = 2(s - v_0*t) / t^2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Accel.(m/s^2)</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (byte pin<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1</span>; pin<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">8</span>; pin<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//Serial.print(&#34;     &#34; + String(initVelocity, 4) + &#34;\\t&#34;);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">float</span> f_numerator <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span><span style=\"color:#f92672\">*</span>(ir_Displacemence[pin]<span style=\"color:#f92672\">-</span>(initVelocity<span style=\"color:#f92672\">*</span>nowTime[pin]));\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//Serial.print(&#34;     &#34; + String(f_numerator) + &#34;\\t&#34;);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> l_numerator <span style=\"color:#f92672\">=</span> (<span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span>)f_numerator;\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//Serial.print(&#34;     &#34; + String(l_numerator) + &#34;\\t&#34;);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">float</span> f_denominator <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">pow</span>(nowTime[pin], <span style=\"color:#ae81ff\">2</span>) <span style=\"color:#f92672\">*</span> <span style=\"color:#a6e22e\">pow</span>(<span style=\"color:#ae81ff\">10</span>, <span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">6</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//Serial.print(&#34;     &#34; + String(f_denominator) + &#34;\\t&#34;);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> l_denominator <span style=\"color:#f92672\">=</span> (<span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span>)f_denominator;\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//Serial.print(&#34;     &#34; + String(l_denominator) + &#34;\\t&#34;);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    acceleration[pin] <span style=\"color:#f92672\">=</span> (<span style=\"color:#66d9ef\">float</span>)l_numerator<span style=\"color:#f92672\">/</span>(<span style=\"color:#66d9ef\">float</span>)l_denominator;\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;     &#34;</span> <span style=\"color:#f92672\">+</span> <span style=\"color:#a6e22e\">String</span>(acceleration[pin]) <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (byte pin<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1</span>; pin<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">8</span>; pin<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    sum_Accel <span style=\"color:#f92672\">=</span> sum_Accel <span style=\"color:#f92672\">+</span> acceleration[pin];\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">float</span> ave_Accel <span style=\"color:#f92672\">=</span> sum_Accel <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">7.0</span>;\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Gravitational Acceleration = &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(ave_Accel); Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34; m/s^2&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1500</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<p>※ 스케치 내부에서 사용하는 시간과 거리의 단위는 소수 자리수 계산의 편의를 위해 microsecond, micrometer를 사용하며, 출력시에 second, meter 단위로 변환한다.</p>\n<br>\n<br>\n<h4 id=\"실험-결과\">실험 결과<a class=\"anchor\" href=\"#%ec%8b%a4%ed%97%98-%ea%b2%b0%ea%b3%bc\">#</a></h4>\r\n<h5 id=\"예비-실험\">예비 실험<a class=\"anchor\" href=\"#%ec%98%88%eb%b9%84-%ec%8b%a4%ed%97%98\">#</a></h5>\r\n<p>예비 실험은 파이프 없이 브레드 보드를 사용한 프로토 타입으로 실시하였다. 센서 간격이 원래의 계획보다 작기 때문에 아래와 같이 설정하였다. 입구부터 첫번째 센서까지의 거리 1.4cm, 각 센서간의 거리는 2.54cm이며, 6번째~7번째 센서의 간격만 3.33cm 이다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-Arduino\" data-lang=\"Arduino\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// for testing distance of 8 sensors in micrometer unit\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> ir_Distance[<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">14000</span>, <span style=\"color:#ae81ff\">25400</span>, <span style=\"color:#ae81ff\">25400</span>, <span style=\"color:#ae81ff\">25400</span>, <span style=\"color:#ae81ff\">25400</span>, <span style=\"color:#ae81ff\">25400</span>, <span style=\"color:#ae81ff\">33300</span>, <span style=\"color:#ae81ff\">25400</span>};</span></span></code></pre></div><br>\n<p>브레드 보드에 배선을 하고 수직으로 세운 뒤, IR LED와 Phototansistor 사이에 스티로폼 공과 쇠구슬을 차례로 낙하시킨다. 질량이 다른 물체의 낙하 속도를 비교할 수 있다.</p>\n<p><img src=\"/image/Gravitational-Acceleration07.jpg\" alt=\"\" /></p>\n<br>\n<p>스티로폼 공은 집에 있는 스티로폼을 커터칼로 적당히 구 형태로 잘라낸 뒤, 손바닥과 바닥 사이에 놓고 손바닥에 살짝 힘을 주어 누르면서 돌돌 굴리면 스티로폼 공 형태를 쉽게 만들 수 있다.</p>\n<p><img src=\"/image/Gravitational-Acceleration08.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"결과\">결과<a class=\"anchor\" href=\"#%ea%b2%b0%ea%b3%bc\">#</a></h5>\r\n<p>스티로폼 공과 쇠구슬 2종류를 사용하였고, 몇 차례 시도한 결과 다음과 같은 결과가 나왔다.</p>\n<table>\n  <thead>\n      <tr>\n          <th>센서</th>\n          <th>Y0</th>\n          <th>Y1</th>\n          <th>Y2</th>\n          <th>Y3</th>\n          <th>Y4</th>\n          <th>Y5</th>\n          <th>Y6</th>\n          <th>Y7</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>NowTime(us)</td>\n          <td>1</td>\n          <td>35232</td>\n          <td>62407</td>\n          <td>81854</td>\n          <td>100329</td>\n          <td>117774</td>\n          <td>141384</td>\n          <td>141428</td>\n      </tr>\n      <tr>\n          <td>Interval(s)</td>\n          <td></td>\n          <td>0.035231</td>\n          <td>0.027075</td>\n          <td>0.019547</td>\n          <td>0.018475</td>\n          <td>0.017445</td>\n          <td>0.023610</td>\n          <td>0.000044</td>\n      </tr>\n      <tr>\n          <td>Distance(m)</td>\n          <td></td>\n          <td>0.0254</td>\n          <td>0.0254</td>\n          <td>0.0254</td>\n          <td>0.0254</td>\n          <td>0.0254</td>\n          <td>0.0254</td>\n          <td>0.0254</td>\n      </tr>\n      <tr>\n          <td>Displace.(m)</td>\n          <td></td>\n          <td>0.0254</td>\n          <td>0.0508</td>\n          <td>0.0762</td>\n          <td>0.1016</td>\n          <td>0.1270</td>\n          <td>0.1603</td>\n          <td>0.1857</td>\n      </tr>\n      <tr>\n          <td>Acceleration(m/s^2)</td>\n          <td></td>\n          <td>11.18</td>\n          <td>9.35</td>\n          <td>9.94</td>\n          <td>9.74</td>\n          <td>9.41</td>\n          <td>8.63</td>\n          <td>11.16</td>\n      </tr>\n  </tbody>\n</table>\n<p>∴ Gravitational Acceleration = 9.92 m/s²</p>\n<br>\n<h4 id=\"문제점-및-해결-방법\">문제점 및 해결 방법<a class=\"anchor\" href=\"#%eb%ac%b8%ec%a0%9c%ec%a0%90-%eb%b0%8f-%ed%95%b4%ea%b2%b0-%eb%b0%a9%eb%b2%95\">#</a></h4>\r\n<p>언제나 중력 가속도 9.81 m/s² 에 근접한 값이 나오는 것은 아니다.</p>\n<ul>\n<li>\n<p>낙하시키는 물체가 센서나 브레드보드에 닿지 않도록 조심스럽게 낙하시켜야 한다. 조금이라도 충돌이 일어나면 가속도 값이 전혀 다른 값으로 출력된다.</p>\n<ul>\n<li>파이프를 사용하면 문제를 보완할 수 있을 것이다.</li>\n</ul>\n</li>\n<li>\n<p>처음 물체를 잡고 낙하시키는 위치를 셋팅된 값과 일치시켜야 한다.</p>\n<ul>\n<li>셋팅값보다 멀리서(위에서) 낙하시키면 중력 가속도 값이 커지고, 반대로 가까이서(아래에서) 낙하시키면 중력 가속도 값이 작아진다.</li>\n</ul>\n</li>\n<li>\n<p>손에서 놓는 과정에서 발생하는 초기 속도의 오차는 지속적으로 발생한다.</p>\n<ul>\n<li>되도록이면 낙하 물체를 살짝 잡은 상태에서 낙하시키도록 한다.</li>\n<li>쇠구슬인 경우 전자석을 이용하거나, 솔레노이드 밸브 등의 사용을 고려할 필요가 있다.</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"실제-측정-장치\">실제 측정 장치<a class=\"anchor\" href=\"#%ec%8b%a4%ec%a0%9c-%ec%b8%a1%ec%a0%95-%ec%9e%a5%ec%b9%98\">#</a></h4>\r\n<p>이민O 학생과 황정O 학생이 제작한 측정 장치의 외형이다.</p>\n<p><img src=\"/image/Gravitational-Acceleration09.png\" alt=\"\" /></p>\n<p>각 센서부를 보호하고 외형을 돋보이게 하는 틀을 3D프린터를 사용하여 직접 제작한 뒤 덧붙인 모습이다. 중앙에 18650 배터리를 내장한 ESP32를 덧붙여 제작하였다.</p>\n<br>\n<br>\n<h4 id=\"대체-가능-센서\">대체 가능 센서<a class=\"anchor\" href=\"#%eb%8c%80%ec%b2%b4-%ea%b0%80%eb%8a%a5-%ec%84%bc%ec%84%9c\">#</a></h4>\r\n<p>이 실험에서 사용한 IR LED와 Phototransistor의 조합은 여러가지 장점이 많지만, 배선이 복잡하다는 것은 제작하는 입장에서는 (특히 학생들이 제작을 한다면) 난감할 수 있다. 이럴 경우 다른 형태의 센서들로 대체할 수 있다.</p>\n<table>\n  <thead>\n      <tr>\n          <th></th>\n          <th>IRLED + <br>Phototransistor</th>\n          <th>포토 인터럽터</th>\n          <th>금속 감지기</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>가격</td>\n          <td>저렴, 쉽게 구할 수 있음. 타오바오에서 1세트당 0.1<del>0.5위안 (약 20원</del>100원)</td>\n          <td>센서 간격 3<del>5cm인 제품은 가격이 비쌈 (타오바오에서 25</del>45위안)</td>\n          <td>구경 3cm인 제품의 경우 타오바오에서 18위안 (단, 3cm 초과 제품은 매우 비쌈)</td>\n      </tr>\n      <tr>\n          <td>종류</td>\n          <td>낙하물의 종류, 재질의 영향이 없다. <br>(고정이 가능하면 파이프를 사용하지 않아도 되므로) 낙하물이 크기가 큰 경우에도 가능</td>\n          <td>낙하물의 종류, 재질의 영향이 없다.<br>낙하물체의 길이가 5cm를  넘어가면 불가능</td>\n          <td>금속 낙하물만 가능<br>낙하물체의 직경이 3cm 이내 추천</td>\n      </tr>\n      <tr>\n          <td>전류</td>\n          <td>사용 전류가 작으므로 배터리홀더가 내장된 ESP32를 사용할 경우, 별도의 전원장지 없이도 (컴퓨터와 연결하지 않고) 독립적으로 사용할 수 있다.</td>\n          <td>좌동</td>\n          <td>개당 전류값이 0.3A로 큰 편이다.</td>\n      </tr>\n      <tr>\n          <td>배선</td>\n          <td>저항을 2개 붙여야 하고, 배선이 복잡</td>\n          <td>간편</td>\n          <td>간편</td>\n      </tr>\n      <tr>\n          <td>실외</td>\n          <td>불가</td>\n          <td>불가</td>\n          <td>가능</td>\n      </tr>\n      <tr>\n          <td>기타</td>\n          <td></td>\n          <td>크기가 작은 것은 본 실험에 부적합<br>구하기 어려움(단종여부 확인)</td>\n          <td></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h5 id=\"포토-인터럽터\">포토 인터럽터<a class=\"anchor\" href=\"#%ed%8f%ac%ed%86%a0-%ec%9d%b8%ed%84%b0%eb%9f%bd%ed%84%b0\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th>TT Electronics OPB819Z</th>\n          <th>泰邦工控 TBGK E3S-GS30</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td><img src=\"/image/Gravitational-Acceleration04.png\" alt=\"\" /></td>\n          <td><img src=\"/image/Gravitational-Acceleration05.png\" alt=\"\" /></td>\n      </tr>\n  </tbody>\n</table>\n<h5 id=\"금속-감지기\">금속 감지기<a class=\"anchor\" href=\"#%ea%b8%88%ec%86%8d-%ea%b0%90%ec%a7%80%ea%b8%b0\">#</a></h5>\r\n<p><img src=\"/image/Gravitational-Acceleration06.png\" alt=\"\" /></p>\n<p>위 제품은 <a href=\"https://detail.tmall.com/item.htm?spm=a1z0d.6639537.1997196601.4.77eb7484HSzCG2&amp;id=620286916175#\">环形接近开关金属感应传感器</a>이라는 이름으로 타오바오에서 판매하고 있는 금속감지센서이다. 구경 3cm (30mm孔径, NPN型) 정도인 제품까지는 저렴한 가격(18위안, 약 3,000원)에 구입할 수 있다. 생김새만 보아서는 가장 쉽게 제작할 수 있을 것 같다. 단, 낙하물은 금속을 사용해야하며, 적당한 크기의 금속 구슬을 사용하면 될 것 같다. 외경 3cm 투명 아크릴 파이프에 일정한 간격으로 테이프를 두껍게 감은 뒤 감지기를 끼우는 형태로 설치하면 될 것 같다.</p>\n"}{"uri":"http://localhost:1313/posts/arduino-geiger-counter/","title":"Arduino, Geiger Counter","content":"<p>※ SAT Subject Chemistry: Pactice Test</p>\n<pre tabindex=\"0\"><code>Used to detect radioactivity.\n① Calorimeter\n② Geiger Counter\n③ Burette\n④ Funnel\n⑤ Bunsen Burner</code></pre><br>\n<h3 id=\"가이거-계수기\">가이거 계수기<a class=\"anchor\" href=\"#%ea%b0%80%ec%9d%b4%ea%b1%b0-%ea%b3%84%ec%88%98%ea%b8%b0\">#</a></h3>\r\n<ul>\n<li>방사선을 측정할 수 있는 관으로  방사능 입자 하나하나를 셀 수 있다. 1908년 러더퍼드의 제자 요하네스 한스 빌헬름 가이거(Johannes Hans Wilhelm Geiger)가 알파선을 감지할 수 있는 감지기를 개발하였으며, 그 후 1928년 가이거와 가이거의 제자인 발터 뮐러가 함께 개량하여 모든 전리방사선을 감지할 수 있도록 만든 것이 현재의 가이거-뮐러 튜브(GM Tube)이다.</li>\n<li>원리: 튜브는 비활성 기체가 충전된 상태이며  중심 전극(+극, anode)과 관의 내벽(-극, cathode, 금속이나 흑연으로 코팅)으로 구성되어 있다. 여기에 수백V의 전압을 걸면, 관 안에 걸린 높은 전기장 때문에 이온은 음극을 향해 가속되고, 전자는 양극을 향해 가속되며 운동에너지를 얻게 되며 이동 중에 충돌한 기체분자도 함께 전이된다. 이렇게 가스 안에 하전입자의 붕괴가 일어나면 음극에서 양극을 향해 짧고 강한 펄스전류가 순간적으로 나타나 흐르게 된다. 이 펄스전류가 &lsquo;스피커&rsquo;를 지날때 반응음으로 가이거 계수기 특유의 &lsquo;틱티티틱&rsquo;하는 소리가 만들어지는데, 이것이 &lsquo;방사선이 존재한다&rsquo;는 상황을 알려주는 소리이다. 그리고 이 소리 1개음이 방사능 입자 1개에 대한 대응 신호가 된다.  오래된 방식이지만 오늘날에도 큰 변화 없이 이 원리를 응용하여 방사선을 측정하고 있다.</li>\n<li>단점: 상당히 큰 펄스신호를 얻을 수 있지만, 이 전류의 강도는 방사선이 가진 에너지와 비례관계를 나타내는 것은 아니기때문에, 방사선이 가진 에너지를 측정하는 것은 불가능하다. (방사선의 에너지를 알기 위해서는 비례계수관을 사용해야 한다.) 또한 고준위 방사선의 경우에는 전류가 연속적으로 흐르게 되어 펄스의 횟수를 계수할 수 없게 되는 경우도 있다. (주로 500cps 이상의 경우) 이것을 막기 위해 전자의 흐름을 제어하는 별도의 장치를 부착하거나, 신틸레이터(scintillator)나 이온화 챔버 같은 다른 검출기로 계측한다.</li>\n<li>가이거 카운터에 사용하는 튜브관은 여러 종류가 제조되고 있다. 대부분의 GM관은 감마선과 2.5MeV 이상의 베타선을 검출한다. 감마선의 검출 감도는 좋지는 않다. GM관 안의 가스밀도가 낮아서, 투과력이 높은 감마선은 상호작용을 일으키기 어렵기 때문이다. 중성자선은 가스로부터 전리하지 않기때문에 검출하지 못한다. 하지만, 관 안쪽을 붕소로 코팅하거나, 삼불화붕소 아니면 ³He가스를 충전하면 중성자선에도 반응하는 GM관을 만들 수 있다. 중성자는 붕소원자핵과 반응하여 알파선을 생성하거나,  ³He원자와 반응하여 수소와 트리튬이온과 전자를 생성하므로 이 전하입자들이 붕괴를 발생시킨다. 각 튜브마다 검출하는 입자가 다르기 때문에, CPM(Count Per Minute) 단위를 uSv/h(Sieverts Per Hours) 단위로 바꾸기 위한 Conversion Factor가 모두 다르다. 그러므로 사용하는 튜브관이 어떤 것인지 정확하게 알아두어야 한다.</li>\n<li>GM관은 하드웨어 난수발생기로서 이용할 수도 있다.</li>\n<li>Background Radiation: 자연적으로 존재하는 자연 방사선, 즉 Background Radiation의 경우 J305β 튜브관을 사용할때 평균 15.6 CPM이 측정된다. (주변 상황에 따라 조금씩 달라짐)</li>\n</ul>\n<br>\n<h4 id=\"라이브러리-추가하기\">라이브러리 추가하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%b6%94%ea%b0%80%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ul>\n<li>Wire : 기본 내장 라이브러리</li>\n<li>LiquidCrystal I2C (by Frank de Brabander) 검색하여 설치</li>\n</ul>\n<br>\n<h4 id=\"schematic-for-standalone\">schematic (for standalone)<a class=\"anchor\" href=\"#schematic-for-standalone\">#</a></h4>\r\n<p><img src=\"/image/Geiger-Counter.png\" alt=\"\" /></p>\n<table>\n  <thead>\n      <tr>\n          <th>GM Monule</th>\n          <th>GND</th>\n          <th>5V</th>\n          <th>VIN</th>\n          <th></th>\n          <th></th>\n          <th></th>\n          <th></th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>Arduino</td>\n          <td>GND</td>\n          <td>5V</td>\n          <td>D2</td>\n          <td>VIN</td>\n          <td>A4</td>\n          <td>A5</td>\n          <td>PowerJack</td>\n      </tr>\n      <tr>\n          <td>1602 LCD I2C</td>\n          <td>GND</td>\n          <td>VCC</td>\n          <td></td>\n          <td>(VCC)</td>\n          <td>SDA</td>\n          <td>SCL</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>9V battery</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td>(+)(-)</td>\n      </tr>\n  </tbody>\n</table>\n<ul>\n<li>외부로 들고 다니면서 측정할 수 있도록 9V 배터리 1개를 추가하여 Arduino, 1602 LCD, GM Molule을 모두 작동시킬 수 있도록 하였다.</li>\n</ul>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/* --------------------------------------------------------------------------------------\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">* WHAT IS CPM?\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">* CPM (counts per minute) is events quantity from Geiger Tube you get during one minute.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">* Usually it used to calculate a radiation level.  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">* Different GM Tubes has different quantity of CPM for background.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">* Some tubes can produce about 10-50 CPM for normal background,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">* other GM Tube models produce 50-100 CPM or 0-5 CPM for same radiation level.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">* Please refer your GM Tube datasheet for more information. \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">* Just for reference here, SBM-20 can generate about 10-50 CPM for normal background.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">* --------------------------------------------------------------------------------------*/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// This Sketch counts the number of pulses a minute.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Connect the GND on Arduino to the GND on the Geiger counter.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Connect the 5V on Arduino to the 5V on the Geiger counter.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Connect the VIN on the Geiger counter to the D2 on Arduino.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// For I2C 1602 LCD : VCC-5V / GND-GND / SDA-A4 / SCL-A5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Wire.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal_I2C.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// I2C address: 0x20~0x27 or 0x3F\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>LiquidCrystal_I2C <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">0x27</span>, <span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">2</span>);  \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> cpm;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">float</span> sievertshour; <span style=\"color:#75715e\">// for converting from cpm to sieverts/hour\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//float sieverts; // for converting from cpm to sieverts  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> counts; <span style=\"color:#75715e\">//variable for GM Tube events\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> previousMillis; <span style=\"color:#75715e\">//variable for measuring time\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define LOG_PERIOD 60000 </span><span style=\"color:#75715e\">// count rate (1 minute)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define CONV_FACTOR 0.008120 </span><span style=\"color:#75715e\">// for GM tube of J305beta type\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() { <span style=\"color:#75715e\">//setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  counts <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(<span style=\"color:#ae81ff\">2</span>, INPUT);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">init</span>();               <span style=\"color:#75715e\">// lcd 초기화\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.<span style=\"color:#a6e22e\">backlight</span>();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">attachInterrupt</span>(<span style=\"color:#a6e22e\">digitalPinToInterrupt</span>(<span style=\"color:#ae81ff\">2</span>), impulse, FALLING); <span style=\"color:#75715e\">//define external interrupts\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;CPM:&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">9</span>,<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34; #:&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">12</span>,<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(counts);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;uSv/h:&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//lcd.print(&#34;uSv  :&#34;);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> currentMillis <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (currentMillis <span style=\"color:#f92672\">-</span> previousMillis <span style=\"color:#f92672\">&gt;</span> LOG_PERIOD) {   <span style=\"color:#75715e\">//every 1 minute\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    previousMillis <span style=\"color:#f92672\">=</span> currentMillis;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>    cpm <span style=\"color:#f92672\">=</span> counts;\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">print</span>(cpm); <span style=\"color:#75715e\">//Display CPM\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    Serial.<span style=\"color:#a6e22e\">println</span>(cpm);\n</span></span><span style=\"display:flex;\"><span>    sievertshour <span style=\"color:#f92672\">=</span> cpm <span style=\"color:#f92672\">*</span> CONV_FACTOR;\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//sieverts = sievertshour * 356 * 24;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">7</span>,<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">print</span>(sievertshour);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//lcd.print(sieverts);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>     \n</span></span><span style=\"display:flex;\"><span>    counts <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">impulse</span>() { <span style=\"color:#75715e\">// called every time there is a FALLING signal at pin 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  counts<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"sketch--for-esp8266-geigerzaehler-lcd-espino\">sketch : for ESP8266 (Geigerzaehler-LCD-ESP.ino)<a class=\"anchor\" href=\"#sketch--for-esp8266-geigerzaehler-lcd-espino\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*************ARDUINO SKETCH FOR GEIGER COUNTER******************\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">Author: RH Electronics www.radiohobbystore.com / www.mygeiger.org\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*****************************************************************\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">This sketch can be used with DIY Geiger Counter board. It allow\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">to receive CPM data during minute. You can modify the sketch\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">for your needs.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*****************************************************************\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">LCD I2C Connection:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">LCD SDA -&gt; D10  =  1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">LCD SCL -&gt; D9   =  3\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">VCC to +3,3V and ground\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">****************************************************************/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// include the library code:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal_I2C.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SPI.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Wire.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define LOG_PERIOD 15000  </span><span style=\"color:#75715e\">//Logging period in milliseconds, recommended value 15000-60000.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define MAX_PERIOD 60000  </span><span style=\"color:#75715e\">//Maximum logging period without modifying this sketch\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define PERIOD 60000.0 </span><span style=\"color:#75715e\">// (60 sec) one minute measure period\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">volatile</span> <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> CNT; <span style=\"color:#75715e\">// variable for counting interrupts from dosimeter\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> counts;     <span style=\"color:#75715e\">//variable for GM Tube events\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> cpm;        <span style=\"color:#75715e\">//variable for CPM\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">int</span> multiplier;  <span style=\"color:#75715e\">//variable for calculation CPM in this sketch\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> previousMillis;  <span style=\"color:#75715e\">//variable for time measurement\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> dispPeriod; <span style=\"color:#75715e\">// variable for measuring time\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> CPM; <span style=\"color:#75715e\">// variable for measuring CPM\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> inputPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">4</span>;  <span style=\"color:#75715e\">// pin D2 is VIN on geiger counter\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// initialize the library with the numbers of the interface pins\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>LiquidCrystal_I2C <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">0x3F</span>,<span style=\"color:#ae81ff\">20</span>,<span style=\"color:#ae81ff\">4</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {               <span style=\"color:#75715e\">// setup\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>Wire.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">3</span>);\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">20</span>, <span style=\"color:#ae81ff\">4</span>);\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">init</span>();\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Turn on the backlight.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>lcd.<span style=\"color:#a6e22e\">backlight</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>CNT <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>CPM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>dispPeriod <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">attachInterrupt</span>(<span style=\"color:#a6e22e\">digitalPinToInterrupt</span>(inputPin), GetEvent, FALLING); <span style=\"color:#75715e\">// Define interrupt D2 on falling edge\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {           <span style=\"color:#75715e\">// main loop\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Berlin-Siemensstadt&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;   Geiger Counter &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">2</span>); <span style=\"color:#75715e\">// print text and CNT on the LCD\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;CPM:&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">3</span>);\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;CNT:&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">5</span>,<span style=\"color:#ae81ff\">3</span>);\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">print</span>(CNT);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">if</span> (<span style=\"color:#a6e22e\">millis</span>() <span style=\"color:#f92672\">&gt;=</span>dispPeriod <span style=\"color:#f92672\">+</span> PERIOD) { <span style=\"color:#75715e\">// If one minute is over\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">cleanDisplay</span>(); <span style=\"color:#75715e\">// Clear LCD\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Do something about accumulated CNT events....\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>CPM <span style=\"color:#f92672\">=</span> CNT;\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">print</span>(CPM); <span style=\"color:#75715e\">//Display CPM\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>CNT <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>dispPeriod <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">GetEvent</span>(){           <span style=\"color:#75715e\">// Get Event from Device\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>CNT<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">cleanDisplay</span> (){      <span style=\"color:#75715e\">// Clear LCD routine\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>lcd.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><p>(출처: rhelectronics.net)</p>\n<br>\n<br>\n<h3 id=\"conversion-index--background-radiation\">Conversion Index &amp; Background Radiation<a class=\"anchor\" href=\"#conversion-index--background-radiation\">#</a></h3>\r\n<p>CPM값은 사용하는 GM tube의 종류에 따라 다르게 측정된다. 왜냐하면, GM tube의 종류에 따라 감지할 수 있는 방사능의 종류가 다르기 때문이다. 그러므로 제조회사에서 제공하는 Conversion Index 값을 사용하여 CPM값을 Sieverts 단위로 바꿔주어야 한다.</p>\n<p>예를들어, 위 sketch에서 사용한 J305β tube관은 CONV_FACTOR값이 0.008120이다. 이 값의 유도과정은 다음과 같다.</p>\n<ul>\n<li>제조사에서 제공하는 J305β 스펙 :  <strong>65 cps/µR/s for 60Co</strong> (cps: count per second, µR = microRem)</li>\n<li>이것은 1µR/s = <strong>65cps</strong> 임을 뜻한다. (즉 1mR/s = <strong>65000cps</strong>)</li>\n<li>1mR/h = 65000cps / (60 × 60) = 18.06cps</li>\n<li>18 cps/mR/h = 18 × 60 cpm/mR/h  = 1080 / 8.77 cpm/µSv/h = 123.14 cpm/µSv/h (※1mR = 8.77μSv)</li>\n<li>∴ Conversion Index = 123.14</li>\n<li>123CPM = 1μSv/h   →   1CPM = 0.008120 μSv/h</li>\n<li>∴ CONV_FACTOR = 0.008120</li>\n<li>CPM × CONV_FACTOR  = μSv/h</li>\n</ul>\n<br>\n<p>이 CONV_FACTOR값에 24*365를 곱하면 Sv 단위의 값을 만들어 낼 수도 있다.</p>\n<ul>\n<li>만일 어떤 지역에서 J305β tube를 사용하여 측정한 CPM값이 20이라면,</li>\n<li>20×0.008120 = 0.1624μSv/h 에 해당하는 방사선이 검출되는 것이며</li>\n<li>이는 0.1624 × 24 × 365 = 1422.6 μSv를 뜻한다. 방사능 생활척도를 통해 일반적인 배경복사보다는 다소 낮은 수준이라는 것을 알 수 있다.</li>\n</ul>\n<br>\n<table>\n  <thead>\n      <tr>\n          <th>tube</th>\n          <th>Conversion Index</th>\n          <th>CONV_FACTOR</th>\n          <th>Background Radiation (CPM)</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>J305β</td>\n          <td>123.14</td>\n          <td>0.008120</td>\n          <td>15.6</td>\n      </tr>\n      <tr>\n          <td>SBM-20</td>\n          <td>175.4</td>\n          <td>0.0057</td>\n          <td>23.4</td>\n      </tr>\n      <tr>\n          <td>M4011</td>\n          <td>153.8</td>\n          <td>0.006502</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>LDN-712</td>\n          <td></td>\n          <td>0.01</td>\n          <td></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<br>\n<h3 id=\"방사능-생활척도\">방사능 생활척도<a class=\"anchor\" href=\"#%eb%b0%a9%ec%82%ac%eb%8a%a5-%ec%83%9d%ed%99%9c%ec%b2%99%eb%8f%84\">#</a></h3>\r\n<p>밀리시버트(mSv)는 X선, PET, CT 등과 같은 의료 검진시 발생하는 유효 노출을 측정하는 경우 사용된다. 일상생활에서 노출되는 방사선량은 다음과 같다. (출처: 위키피디아)</p>\n<ul>\n<li>\n<p>10 μSv – 오늘받은 평균 방사선</p>\n</li>\n<li>\n<p>0.02 ~ 0.04 mSv = 20 ~ 40 μSv – 흉부 X-레이</p>\n</li>\n<li>\n<p>40 μSv – 뉴욕에서 L.A.까지 비행기를 타면받는 방사선</p>\n</li>\n<li>\n<p>100 μSv – 치과 용 X- 레이 동안받는 방사선</p>\n</li>\n<li>\n<p>0.24 mSv – 해수면에 도달하는 우주입자선 (연간)</p>\n</li>\n<li>\n<p>0.28 mSv – 지하로부터 나오는 지상 방사선 (연간)</p>\n</li>\n<li>\n<p>800 μSv – 사고 기간 동안 Three-Mile Island의 총 방사선 량</p>\n</li>\n<li>\n<p>2 mSv – 미국 가정의 연 평균 라돈 방사선 양</p>\n</li>\n<li>\n<p>3000 μSv – 유방 조영술의 방사선 량</p>\n</li>\n<li>\n<p>3650 μSv (= 10 μSv per day = 0.081 μSv/h) = 2.5 ~ 3.5 mSv – 일반적인 배경복사 (장소에 따른 편차가 큼)</p>\n<p>\u200b                        ※ 호주 1.5 mSv, 미국 3 mSv, 이란, 인도, 유럽의 연간 배경 방사선 양 : 50 mSv</p>\n</li>\n<li>\n<p>0.8 ~ 5 mSv – 뇌 CT 스캔</p>\n</li>\n<li>\n<p>6 ~ 18 mSv – 흉부 CT 스캔</p>\n</li>\n<li>\n<p>6.2 mSv – 미국인 연 평균 방사선 노출량</p>\n</li>\n<li>\n<p>9 mSv – 뉴욕-동경간 항공 승무원이 받는 연간 방사선 양</p>\n</li>\n<li>\n<p>14 mSv – 내장기관 X-레이</p>\n</li>\n<li>\n<p>20 mSv – 핵관련 종사자 연간 허용치</p>\n</li>\n<li>\n<p>50000 μSv – 연간 최대 허용 직업 선량</p>\n<p>\u200b                       ※ 시간당 최대 방사능 = 50000 μSv / (24 * 365) = 5.70 μSv/h</p>\n</li>\n<li>\n<p>100000 μSv – 암 위험 증가와 관련이 있을 가능성이 높은 연간 최저 용량</p>\n</li>\n<li>\n<p>80~160 mSv – 하루 담배 1.5갑씩 1년을 필 때</p>\n</li>\n<li>\n<p>350 mSv – 체르노빌 사태 후 이주를 결정한 근거 (매년)</p>\n</li>\n<li>\n<p>1 Sv = 1000000 μSv – 약간의 혈액 변화 유발</p>\n</li>\n<li>\n<p>2 Sv = 2000000 μSv – 심각한 방사선 중독 (때로는 치명적)</p>\n</li>\n<li>\n<p>2 ~ 5 Sv = 2000000 ~ 5000000 μSv – 메스꺼움, 탈모, 출혈을 유발, 많은 경우 사망</p>\n</li>\n<li>\n<p>6 Sv = 6000000 μSv – 2개월 이내에 80% 이상 사망</p>\n</li>\n</ul>\n<br>\n<h4 id=\"radiation-cartooon\">Radiation Cartooon<a class=\"anchor\" href=\"#radiation-cartooon\">#</a></h4>\r\n<p><img src=\"/image/RADIATION-Poster-Cartoon.jpg\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"electrical-information-for-gm-tubes\">Electrical Information for GM Tubes<a class=\"anchor\" href=\"#electrical-information-for-gm-tubes\">#</a></h3>\r\n<table>\n  <thead>\n      <tr>\n          <th>Tube</th>\n          <th>Working Voltages</th>\n          <th>Nominal Voltage</th>\n          <th>Anode Resistor</th>\n          <th>Dead Time μs</th>\n          <th>Detection</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>SBM-20</td>\n          <td>350 ~ 450V</td>\n          <td>400V</td>\n          <td>4M7</td>\n          <td>100 ~ 190</td>\n          <td>β, γ</td>\n      </tr>\n      <tr>\n          <td>SBM-19</td>\n          <td>&quot;</td>\n          <td>&quot;</td>\n          <td>4M7</td>\n          <td>125 ~ 250</td>\n          <td>β, γ</td>\n      </tr>\n      <tr>\n          <td>SBT-10</td>\n          <td>&quot;</td>\n          <td>&quot;</td>\n          <td>4M7</td>\n          <td>65</td>\n          <td>β, γ</td>\n      </tr>\n      <tr>\n          <td>SI29BG</td>\n          <td>&quot;</td>\n          <td>&quot;</td>\n          <td>4M7</td>\n          <td>95</td>\n          <td>β, γ</td>\n      </tr>\n      <tr>\n          <td>SI21BG</td>\n          <td>&quot;</td>\n          <td>&quot;</td>\n          <td>10M</td>\n          <td>30</td>\n          <td>β, γ</td>\n      </tr>\n      <tr>\n          <td>SBT-9</td>\n          <td>&quot;</td>\n          <td>380V</td>\n          <td>4M7</td>\n          <td>50 ~ 100</td>\n          <td>α, β, γ</td>\n      </tr>\n      <tr>\n          <td>SBT-11A</td>\n          <td>&quot;</td>\n          <td>390V</td>\n          <td>3M3 ~ 4M7</td>\n          <td>75</td>\n          <td>α, β, γ</td>\n      </tr>\n      <tr>\n          <td>SI-22G</td>\n          <td>&quot;</td>\n          <td>400V</td>\n          <td>10M</td>\n          <td></td>\n          <td>γ</td>\n      </tr>\n      <tr>\n          <td>SI180G</td>\n          <td>&quot;</td>\n          <td>&quot;</td>\n          <td>4M7</td>\n          <td></td>\n          <td>γ</td>\n      </tr>\n      <tr>\n          <td>LND-712</td>\n          <td>450 ~ 650V</td>\n          <td>500V</td>\n          <td>10M</td>\n          <td>90</td>\n          <td>α, β, γ</td>\n      </tr>\n      <tr>\n          <td>LND-7317</td>\n          <td>475 ~ 675V</td>\n          <td>&quot;</td>\n          <td>4M7</td>\n          <td>40</td>\n          <td>α, β, γ</td>\n      </tr>\n      <tr>\n          <td>Philips 18504</td>\n          <td>425 ~ 675V</td>\n          <td>&quot;</td>\n          <td>10M</td>\n          <td>100</td>\n          <td>α, β, γ, n</td>\n      </tr>\n  </tbody>\n</table>\n<p>(출처: rhelectronics.net)</p>\n"}{"uri":"http://localhost:1313/posts/esp32-openweathermap/","title":"esp32 OpenWeatherMap에서 실시간 날씨 정보 받기","content":"<h3 id=\"openweathermaporg\">OpenWeatherMap.org<a class=\"anchor\" href=\"#openweathermaporg\">#</a></h3>\r\n<p><a href=\"https://openweathermap.org/\">OpenWeatherMap</a>은 세계 각 지역의 현재 날씨, 예보, 과거 날씨 데이터를 제공하는 사이트입니다. (몇가지 제약이 있긴 하지만) 회원가입을 통해서 API Key를 생성하고 이를 통해 무료로 실시간 날씨 정보를 얻을 수 있습니다.</p>\n<br>\n<h4 id=\"free-current-weather-and-forecasts-collection\">Free Current weather and forecasts collection<a class=\"anchor\" href=\"#free-current-weather-and-forecasts-collection\">#</a></h4>\r\n<ul>\n<li>60 Calls per minute (no more than)</li>\n<li><a href=\"https://openweathermap.org/current\">Current weather API</a></li>\n<li><a href=\"https://openweathermap.org/forecast5\">5 days/3 hour forecast API</a></li>\n<li><a href=\"https://openweathermap.org/api/weathermaps\">Weather maps 1.0</a></li>\n<li><a href=\"https://openweathermap.org/api/uvi\">UV index</a></li>\n<li><a href=\"https://openweathermap.org/triggers\">Weather alerts</a></li>\n<li>Availability 95%</li>\n<li>Weather API data update  &lt; 2 hours</li>\n<li>Weather maps data update  &lt; 3 hours</li>\n<li>API lifetime support :  Current version</li>\n<li>Historical weather collection은 모두 Starter 이상(유료)</li>\n</ul>\n<br>\n<h4 id=\"current-weather-collections-api-key-생성\">Current weather collections API Key 생성<a class=\"anchor\" href=\"#current-weather-collections-api-key-%ec%83%9d%ec%84%b1\">#</a></h4>\r\n<ol>\n<li>\n<p>Sign Up을 클릭하여 회원가입을 하고,</p>\n<p><img src=\"/image/owm-api-01.png\" alt=\"\" /></p>\n<br>\n<p><img src=\"/image/owm-api-02.png\" alt=\"\" /></p>\n<br>\n</li>\n<li>\n<p>Sign In을 클릭하여 로그인한 뒤, API Keys를 누릅니다.</p>\n<p><img src=\"/image/owm-api-03.png\" alt=\"\" /></p>\n<br>\n<p><img src=\"/image/owm-api-04.png\" alt=\"\" /></p>\n<br>\n</li>\n<li>\n<p>Default로 지정되어 있는 Key를 복사하거나, 새로운 Key를 생성합니다.</p>\n</li>\n</ol>\n<p><img src=\"/image/owm-api-05.png\" alt=\"\" /></p>\n<br>\n<ol start=\"4\">\n<li>\n<p>API Key를 이용하는 방법은 메인홈페이지 메뉴의 API 탭을 누른뒤, 얻고자 하는 날씨정보(예를 들어 Current weather data)의 <a href=\"https://openweathermap.org/api\"><strong>API doc</strong></a>을 참고하세요.</p>\n<p><img src=\"/image/owm-api-06.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>먼저 인터넷 브라우저를 통해 날씨정보가 어떻게 출력되는지 알아보기위하여 아래 홈페이지 주소에 접속해봅니다. 이때 주소의 끝부분에 있는 YOUR_API_KEY 대신 본인의 API Key를 입력합니다.</p>\n</li>\n</ol>\n<br>\n<ul>\n<li>서울: <a href=\"https://api.openweathermap.org/data/2.5/weather?q=Seoul,KR&amp;units=metric&amp;APPID=YOUR_API_KEY\">https://api.openweathermap.org/data/2.5/weather?q=Seoul,KR&units=metric&APPID=YOUR_API_KEY</a></li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-http\" data-lang=\"http\"><span style=\"display:flex;\"><span><span style=\"color:#960050;background-color:#1e0010\">https://api.openweathermap.org/data/2.5/weather?q=Seoul,KR&amp;units=metric&amp;APPID=1bf3d5e1bd2e5934aadd86..........</span></span></span></code></pre></div><br>\n<ul>\n<li>런던: <a href=\"https://api.openweathermap.org/data/2.5/weather?q=London,GB&amp;units=metric&amp;appid=YOUR_API_KEY\">https://api.openweathermap.org/data/2.5/weather?q=London,GB&units=metric&appid=YOUR_API_KEY</a></li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-http\" data-lang=\"http\"><span style=\"display:flex;\"><span><span style=\"color:#960050;background-color:#1e0010\">https://api.openweathermap.org/data/2.5/weather?q=London,GB&amp;units=metric&amp;APPID=1bf3d5e1bd2e5934aadd86..........</span></span></span></code></pre></div><br>\n<ul>\n<li>상하이: <a href=\"https://api.openweathermap.org/data/2.5/weather?q=Shanghai,CN&amp;units=metric&amp;APPID=YOUR_API_KEY\">https://api.openweathermap.org/data/2.5/weather?q=Shanghai,CN&units=metric&APPID=YOUR_API_KEY</a></li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-http\" data-lang=\"http\"><span style=\"display:flex;\"><span><span style=\"color:#960050;background-color:#1e0010\">https://api.openweathermap.org/data/2.5/weather?q=Shanghai,CN&amp;units=metric&amp;APPID=1bf3d5e1bd2e5934aadd86..........</span></span></span></code></pre></div><br>\n<h4 id=\"브라우저에-출력되는-내용\">브라우저에 출력되는 내용<a class=\"anchor\" href=\"#%eb%b8%8c%eb%9d%bc%ec%9a%b0%ec%a0%80%ec%97%90-%ec%b6%9c%eb%a0%a5%eb%90%98%eb%8a%94-%eb%82%b4%ec%9a%a9\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-json\" data-lang=\"json\"><span style=\"display:flex;\"><span>{<span style=\"color:#f92672\">&#34;coord&#34;</span>:{<span style=\"color:#f92672\">&#34;lon&#34;</span>:<span style=\"color:#ae81ff\">-0.13</span>,<span style=\"color:#f92672\">&#34;lat&#34;</span>:<span style=\"color:#ae81ff\">51.51</span>},<span style=\"color:#f92672\">&#34;weather&#34;</span>:[{<span style=\"color:#f92672\">&#34;id&#34;</span>:<span style=\"color:#ae81ff\">804</span>,<span style=\"color:#f92672\">&#34;main&#34;</span>:<span style=\"color:#e6db74\">&#34;Clouds&#34;</span>,<span style=\"color:#f92672\">&#34;description&#34;</span>:<span style=\"color:#e6db74\">&#34;overcast clouds&#34;</span>,<span style=\"color:#f92672\">&#34;icon&#34;</span>:<span style=\"color:#e6db74\">&#34;04n&#34;</span>}],<span style=\"color:#f92672\">&#34;base&#34;</span>:<span style=\"color:#e6db74\">&#34;stations&#34;</span>,<span style=\"color:#f92672\">&#34;main&#34;</span>:{<span style=\"color:#f92672\">&#34;temp&#34;</span>:<span style=\"color:#ae81ff\">277.16</span>,<span style=\"color:#f92672\">&#34;pressure&#34;</span>:<span style=\"color:#ae81ff\">1007</span>,<span style=\"color:#f92672\">&#34;humidity&#34;</span>:<span style=\"color:#ae81ff\">86</span>,<span style=\"color:#f92672\">&#34;temp_min&#34;</span>:<span style=\"color:#ae81ff\">274.82</span>,<span style=\"color:#f92672\">&#34;temp_max&#34;</span>:<span style=\"color:#ae81ff\">279.26</span>},<span style=\"color:#f92672\">&#34;visibility&#34;</span>:<span style=\"color:#ae81ff\">8000</span>,<span style=\"color:#f92672\">&#34;wind&#34;</span>:{<span style=\"color:#f92672\">&#34;speed&#34;</span>:<span style=\"color:#ae81ff\">5.1</span>,<span style=\"color:#f92672\">&#34;deg&#34;</span>:<span style=\"color:#ae81ff\">90</span>},<span style=\"color:#f92672\">&#34;clouds&#34;</span>:{<span style=\"color:#f92672\">&#34;all&#34;</span>:<span style=\"color:#ae81ff\">90</span>},<span style=\"color:#f92672\">&#34;dt&#34;</span>:<span style=\"color:#ae81ff\">1574300635</span>,<span style=\"color:#f92672\">&#34;sys&#34;</span>:{<span style=\"color:#f92672\">&#34;type&#34;</span>:<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#f92672\">&#34;id&#34;</span>:<span style=\"color:#ae81ff\">1414</span>,<span style=\"color:#f92672\">&#34;country&#34;</span>:<span style=\"color:#e6db74\">&#34;GB&#34;</span>,<span style=\"color:#f92672\">&#34;sunrise&#34;</span>:<span style=\"color:#ae81ff\">1574321288</span>,<span style=\"color:#f92672\">&#34;sunset&#34;</span>:<span style=\"color:#ae81ff\">1574352288</span>},<span style=\"color:#f92672\">&#34;timezone&#34;</span>:<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#f92672\">&#34;id&#34;</span>:<span style=\"color:#ae81ff\">2643743</span>,<span style=\"color:#f92672\">&#34;name&#34;</span>:<span style=\"color:#e6db74\">&#34;London&#34;</span>,<span style=\"color:#f92672\">&#34;cod&#34;</span>:<span style=\"color:#ae81ff\">200</span>}</span></span></code></pre></div><br>\n<p>그밖의 도시 및 국가명은 Maps&gt; Weather maps를 클릭하여 표시되는 지도를 통해 확인할 수 있습니다.</p>\n<br>\n<br>\n<h3 id=\"esp32에서-사용하는-경우\">ESP32에서 사용하는 경우<a class=\"anchor\" href=\"#esp32%ec%97%90%ec%84%9c-%ec%82%ac%ec%9a%a9%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h3>\r\n<h4 id=\"wifi-접속-설정\">wifi 접속 설정<a class=\"anchor\" href=\"#wifi-%ec%a0%91%ec%86%8d-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> ssid     <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;your ssid&#34;</span>;                  <span style=\"color:#75715e\">// 연결할 SSID\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> password <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;your password&#34;</span>;              <span style=\"color:#75715e\">// 연결할 SSID의 비밀번호\n</span></span></span></code></pre></div><ul>\n<li>wifi에 접속하기 위한 ssid와 password를 설정</li>\n</ul>\n<br>\n<h4 id=\"openweathermaporg-접속-설정\">OpenWeatherMap.org 접속 설정<a class=\"anchor\" href=\"#openweathermaporg-%ec%a0%91%ec%86%8d-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> String endpoint <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;https://api.openweathermap.org&#34;</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> String ver <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;/data/2.5/weather?q=&#34;</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> String city <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;Shanghai,CN&#34;</span>;                 <span style=\"color:#75715e\">// City,Country (띄어쓰기 금지)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> String appid <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;&amp;units=metric&amp;APPID=&#34;</span>;       <span style=\"color:#75715e\">// Units: metric\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> String key <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;1bf3d5e1bd2e5934aadd86..........&#34;</span>;    <span style=\"color:#75715e\">// API Key\n</span></span></span></code></pre></div><ul>\n<li>날씨 데이터를 받아올 도시, 국가를 지정 (Shanghai,CN)  (※주의: <strong>Shanghai,CN</strong> 사이에 <strong>띄어쓰기를 하면 안됨</strong>)</li>\n<li>key 변수에 본의 API Key를 입력</li>\n</ul>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;WiFi.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;HTTPClient.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> ssid     <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;your ssid&#34;</span>;                  <span style=\"color:#75715e\">// 연결할 SSID\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> password <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;your password&#34;</span>;              <span style=\"color:#75715e\">// 연결할 SSID의 비밀번호\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// OpenWeatherMap.org: Shanghai,CN\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> String endpoint <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;https://api.openweathermap.org&#34;</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> String ver <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;/data/2.5/weather?q=&#34;</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> String city <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;Shanghai,CN&#34;</span>;                 <span style=\"color:#75715e\">// City,Country (띄어쓰기 금지)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> String appid <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;&amp;units=metric&amp;APPID=&#34;</span>;       <span style=\"color:#75715e\">// Units: metric\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> String key <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;1bf3d5e1bd2e5934aadd86..........&#34;</span>;    <span style=\"color:#75715e\">// API Key\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>    Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>    delay(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    WiFi.begin(ssid, password);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// 와이파이 연결\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">while</span> (WiFi.status() <span style=\"color:#f92672\">!=</span> WL_CONNECTED) {\n</span></span><span style=\"display:flex;\"><span>      delay(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>      Serial.println(<span style=\"color:#e6db74\">&#34;Connecting to WiFi..&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    Serial.println(<span style=\"color:#e6db74\">&#34;Connected to the WiFi network&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 연결 여부 로그 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> ((WiFi.status() <span style=\"color:#f92672\">==</span> WL_CONNECTED)) {    <span style=\"color:#75715e\">// Check the current connection status\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span>    HTTPClient http;\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>    http.begin(endpoint <span style=\"color:#f92672\">+</span> ver <span style=\"color:#f92672\">+</span> city <span style=\"color:#f92672\">+</span> appid <span style=\"color:#f92672\">+</span> key); <span style=\"color:#75715e\">// Specify the URL\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">int</span> httpCode <span style=\"color:#f92672\">=</span> http.GET();                       <span style=\"color:#75715e\">// Make the request\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (httpCode <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) {                              <span style=\"color:#75715e\">// Check for the returning code\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span>        String json <span style=\"color:#f92672\">=</span> http.getString();         <span style=\"color:#75715e\">// get JSON format data\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.println(httpCode);\n</span></span><span style=\"display:flex;\"><span>        Serial.println(json);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      Serial.println(<span style=\"color:#e6db74\">&#34;Error on HTTP request&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>    http.end();                                     <span style=\"color:#75715e\">// Free the resources\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">30000</span>); \n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"출력-data\">출력 DATA<a class=\"anchor\" href=\"#%ec%b6%9c%eb%a0%a5-data\">#</a></h4>\r\n<p>출력 데이터는 <strong>JSON</strong>(JavaScript Object Notation)을 기반으로 합니다. JSON은 프로그래밍 언어에 관계없이 데이터를 생성하고 읽을 수 있도록 만들어졌으며, 이를 통해 상호간에 보다 쉽게 데이터를 교환이 가능한 텍스트 기반의 데이터 교환 방식입니다. OpenWeatherMap에서도 이 방식을 사용하여 날씨 데이터를 생성하여 출력하고 있으며, 출력 데이터의 형태는 아래와 같습니다.</p>\n<blockquote class='book-hint '>\r\n<p>스케치 맨 아래라인의 delay 명령으로 인해 10초마다 1번씩 data를 출력합니다. 단, OpenWeatherMap free service의 update time이 2시간 이하로 되어 있으므로, 자료 갱신이 매 출력시마다 진행되지는 않습니다.</p></blockquote><p><img src=\"/image/owm-01.png\" alt=\"\" /></p>\n<br>\n<p>Firefox 등의 몇몇 인터넷 브라우저에서는 JSON 데이터를 보다 직관적으로 이해할 수 있도록 계층별로 나누어 출력해주기도 합니다.</p>\n<p><img src=\"/image/owm-02.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"json-parsing\">JSON Parsing<a class=\"anchor\" href=\"#json-parsing\">#</a></h3>\r\n<p>위와 같이 복잡한 형태로 출력되는 날씨 데이터 중에서 필요한 날씨 정보를 추출하기 위하여 JSON (JavaScript Object Notation) 파싱 과정을 거쳐야 하는데요. 이를 위해 아두이노 IDE에서 Json 파싱을 위한 라이브러리를 설치하여야 합니다.</p>\n<br>\n<h4 id=\"라이브러리-설치\">라이브러리 설치<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%84%a4%ec%b9%98\">#</a></h4>\r\n<p>ArduinoJson (by Benoit Blanchon) 라이브러리 (version 6)를 설치합니다.</p>\n<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong></p>\n<p><img src=\"/image/json-01.png\" alt=\"\" /></p>\n<br>\n<p><img src=\"/image/json-02.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"memory-pool-크기-계산\">Memory pool 크기 계산<a class=\"anchor\" href=\"#memory-pool-%ed%81%ac%ea%b8%b0-%ea%b3%84%ec%82%b0\">#</a></h4>\r\n<ol>\n<li>JSON 파싱에 사용할 배열의 크기를 계산하여 메모리를 확보합니다. 이를 위해 샘플로 사용할 JSON데이터가 필요하므로, 먼저 웹브라우저에서 OpenWeatherMap에 접속한 뒤,</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-http\" data-lang=\"http\"><span style=\"display:flex;\"><span><span style=\"color:#960050;background-color:#1e0010\">https://api.openweathermap.org/data/2.5/weather?q=Shanghai,CN&amp;units=metric&amp;APPID=1bf3d5e1bd2e5934aadd86..........</span></span></span></code></pre></div><br>\n<ol start=\"2\">\n<li>출력되는 JSON 데이터를 드래그하여 복사합니다.</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-json\" data-lang=\"json\"><span style=\"display:flex;\"><span>{<span style=\"color:#f92672\">&#34;coord&#34;</span>:{<span style=\"color:#f92672\">&#34;lon&#34;</span>:<span style=\"color:#ae81ff\">-0.13</span>,<span style=\"color:#f92672\">&#34;lat&#34;</span>:<span style=\"color:#ae81ff\">51.51</span>},<span style=\"color:#f92672\">&#34;weather&#34;</span>:[{<span style=\"color:#f92672\">&#34;id&#34;</span>:<span style=\"color:#ae81ff\">804</span>,<span style=\"color:#f92672\">&#34;main&#34;</span>:<span style=\"color:#e6db74\">&#34;Clouds&#34;</span>,<span style=\"color:#f92672\">&#34;description&#34;</span>:<span style=\"color:#e6db74\">&#34;overcast clouds&#34;</span>,<span style=\"color:#f92672\">&#34;icon&#34;</span>:<span style=\"color:#e6db74\">&#34;04n&#34;</span>}],<span style=\"color:#f92672\">&#34;base&#34;</span>:<span style=\"color:#e6db74\">&#34;stations&#34;</span>,<span style=\"color:#f92672\">&#34;main&#34;</span>:{<span style=\"color:#f92672\">&#34;temp&#34;</span>:<span style=\"color:#ae81ff\">277.16</span>,<span style=\"color:#f92672\">&#34;pressure&#34;</span>:<span style=\"color:#ae81ff\">1007</span>,<span style=\"color:#f92672\">&#34;humidity&#34;</span>:<span style=\"color:#ae81ff\">86</span>,<span style=\"color:#f92672\">&#34;temp_min&#34;</span>:<span style=\"color:#ae81ff\">274.82</span>,<span style=\"color:#f92672\">&#34;temp_max&#34;</span>:<span style=\"color:#ae81ff\">279.26</span>},<span style=\"color:#f92672\">&#34;visibility&#34;</span>:<span style=\"color:#ae81ff\">8000</span>,<span style=\"color:#f92672\">&#34;wind&#34;</span>:{<span style=\"color:#f92672\">&#34;speed&#34;</span>:<span style=\"color:#ae81ff\">5.1</span>,<span style=\"color:#f92672\">&#34;deg&#34;</span>:<span style=\"color:#ae81ff\">90</span>},<span style=\"color:#f92672\">&#34;clouds&#34;</span>:{<span style=\"color:#f92672\">&#34;all&#34;</span>:<span style=\"color:#ae81ff\">90</span>},<span style=\"color:#f92672\">&#34;dt&#34;</span>:<span style=\"color:#ae81ff\">1574300635</span>,<span style=\"color:#f92672\">&#34;sys&#34;</span>:{<span style=\"color:#f92672\">&#34;type&#34;</span>:<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#f92672\">&#34;id&#34;</span>:<span style=\"color:#ae81ff\">1414</span>,<span style=\"color:#f92672\">&#34;country&#34;</span>:<span style=\"color:#e6db74\">&#34;GB&#34;</span>,<span style=\"color:#f92672\">&#34;sunrise&#34;</span>:<span style=\"color:#ae81ff\">1574321288</span>,<span style=\"color:#f92672\">&#34;sunset&#34;</span>:<span style=\"color:#ae81ff\">1574352288</span>},<span style=\"color:#f92672\">&#34;timezone&#34;</span>:<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#f92672\">&#34;id&#34;</span>:<span style=\"color:#ae81ff\">2643743</span>,<span style=\"color:#f92672\">&#34;name&#34;</span>:<span style=\"color:#e6db74\">&#34;London&#34;</span>,<span style=\"color:#f92672\">&#34;cod&#34;</span>:<span style=\"color:#ae81ff\">200</span>}</span></span></code></pre></div><br>\n<ol start=\"3\">\n<li><a href=\"https://arduinojson.org/assistant\">https://arduinojson.org/assistant</a> 에 접속한 뒤, <strong>Input</strong>란에 있는 내용을 모두 지우고 복사한 JSON데이터를 붙여넣기하면, Memory pool size가 자동으로 계산됩니다.</li>\n</ol>\n<p><img src=\"/image/owm-04.png\" alt=\"\" /></p>\n<br>\n<ol start=\"4\">\n<li>Memory pool size의 Expression부분을 드래그하여 복사하고, Additional bytes for strings dubplucation 부분의 숫자를 이용하여 스케치에서 다음의 형식으로 변수를 생성합니다.</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> size_t capacity <span style=\"color:#f92672\">=</span> JSON_ARRAY_SIZE(<span style=\"color:#ae81ff\">1</span>) <span style=\"color:#f92672\">+</span> JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">1</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">2</span><span style=\"color:#f92672\">*</span>JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">2</span>) <span style=\"color:#f92672\">+</span> JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">4</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">2</span><span style=\"color:#f92672\">*</span>JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">5</span>) <span style=\"color:#f92672\">+</span> JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">13</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">240</span>;</span></span></code></pre></div><blockquote class='book-hint '>\r\n<p>실제로는 아래 Parsing Program에 이미 변수가 설정되어 있으므로, 이 과정은 수행하지 않아도 됩니다.</p></blockquote><br>\n<h4 id=\"parsing-program\">Parsing program<a class=\"anchor\" href=\"#parsing-program\">#</a></h4>\r\n<ol>\n<li>Memory pool size가 출력된 화면의 아래쪽에 Parsing program도 함께 출력됩니다.</li>\n</ol>\n<p><img src=\"/image/owm-05.png\" alt=\"\" /></p>\n<br>\n<ol start=\"2\">\n<li>우선 Parsing Program 전체를 복사한 뒤, 스케치의 void loop() 부분에 붙여넣기 합니다.</li>\n</ol>\n<br>\n<ol start=\"3\">\n<li>밑줄친 부분의 json 변수가 나타나 있는 라인을 모두 지우고</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> json <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;{</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">coord</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:{</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">lon</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:121.49,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">lat</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:31.23},</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">weather</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:[{</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">id</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:804,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">main</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">Clouds</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">description</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">overcast clouds</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">icon</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">04d</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">}],</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">base</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">stations</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">main</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:{</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">temp</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:293.02,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">pressure</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:1027,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">humidity</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:55,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">temp_min</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:289.82,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">temp_max</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:298.71},</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">visibility</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:10000,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">wind</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:{</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">speed</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:3,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">deg</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:60},</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">clouds</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:{</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">all</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:94},</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">dt</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:1574303919,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">sys</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:{</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">type</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:1,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">id</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:9659,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">country</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">CN</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">sunrise</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:1574288762,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">sunset</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:1574326426},</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">timezone</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:28800,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">id</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:1796236,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">name</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">Shanghai</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">,</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">cod</span><span style=\"color:#ae81ff\">\\&#34;</span><span style=\"color:#e6db74\">:200}&#34;</span>;</span></span></code></pre></div><br>\n<ol start=\"4\">\n<li>OpenWeatherMap에서 실시간으로 받는 String 형식의 데이터 변수로 바꿔줍니다.</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span>String json <span style=\"color:#f92672\">=</span> http.getString();</span></span></code></pre></div><br>\n<ol start=\"5\">\n<li>Timezone 반영을 위하여, 붙여넣기 한 Parsing program의 아래 부분에 아래 내용을 추가합니다.</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span>dt <span style=\"color:#f92672\">=</span> dt <span style=\"color:#f92672\">+</span> timezone;                     <span style=\"color:#75715e\">// for GMT+8 -&gt; +28800, for GMT+9 -&gt; +32400\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>sys_sunrise <span style=\"color:#f92672\">=</span> sys_sunrise <span style=\"color:#f92672\">+</span> timezone;\n</span></span><span style=\"display:flex;\"><span>sys_sunset <span style=\"color:#f92672\">=</span> sys_sunset <span style=\"color:#f92672\">+</span> timezone;</span></span></code></pre></div><br>\n<ol start=\"6\">\n<li>\n<p>UNIX Timestamp로 표기되는 시간을 일반적인 날짜, 시간으로 표기되도록 변환해줍니다. 이를 위해서 timelib.h 파일을 이용해야하는데, 이 파일은 Time 라이브러리(by Michael Margolis)에 포함되어 있지요. 그러므로 라이브러리 매니저를 통해 Time라이브러리를 찾아 설치해줍니다.</p>\n<p><img src=\"/image/owm-10.png\" alt=\"\" /></p>\n</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span>year(dt), month(dt), day(dt), hour(dt), minute(dt), second(dt), weekday(dt));</span></span></code></pre></div><p>\u200b\t\t위의 스케치를 통해서 UTC를 YYYY.MM.DD HH:MM:SS(요일) 형태의 날짜를 변환하며, printf문을 통해 출력할 수 있습니다.</p>\n<br>\n<h4 id=\"data-출력에-사용한-variables\">Data 출력에 사용한 variables<a class=\"anchor\" href=\"#data-%ec%b6%9c%eb%a0%a5%ec%97%90-%ec%82%ac%ec%9a%a9%ed%95%9c-variables\">#</a></h4>\r\n<p>JSON 형식의 데이터를 파싱할때 사용한 변수들입니다.</p>\n<table>\n  <thead>\n      <tr>\n          <th>내용</th>\n          <th>형식</th>\n          <th>변수</th>\n          <th>unit</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>UNIX Time(UTC)</td>\n          <td>long</td>\n          <td>dt</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>Weather ID</td>\n          <td>int</td>\n          <td>weather_0_id</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>Weather Main</td>\n          <td>const char*</td>\n          <td>weather_0_main</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>Weather Description</td>\n          <td>const char*</td>\n          <td>weather_0_description</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>Weather Icon ID</td>\n          <td>const char*</td>\n          <td>weather_0_icon</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>Temperature</td>\n          <td>float</td>\n          <td>main_temp</td>\n          <td>℃</td>\n      </tr>\n      <tr>\n          <td>Temperature Max.</td>\n          <td>float</td>\n          <td>main_temp_max</td>\n          <td>℃</td>\n      </tr>\n      <tr>\n          <td>Temperature Min.</td>\n          <td>float</td>\n          <td>main_temp_min</td>\n          <td>℃</td>\n      </tr>\n      <tr>\n          <td>Pressure</td>\n          <td>int</td>\n          <td>main_pressure</td>\n          <td>hPa</td>\n      </tr>\n      <tr>\n          <td>Humidity</td>\n          <td>int</td>\n          <td>main_humidity</td>\n          <td>%</td>\n      </tr>\n      <tr>\n          <td>Visibility</td>\n          <td>int</td>\n          <td>visibility</td>\n          <td>m</td>\n      </tr>\n      <tr>\n          <td>Wind Speed</td>\n          <td>int</td>\n          <td>wind_speed</td>\n          <td>m/s</td>\n      </tr>\n      <tr>\n          <td>Wind Degree</td>\n          <td>int</td>\n          <td>wind_deg</td>\n          <td>º</td>\n      </tr>\n      <tr>\n          <td>Clouds</td>\n          <td>int</td>\n          <td>clouds_all</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>Sunrise</td>\n          <td>long</td>\n          <td>sys_sunrise</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>Sunset</td>\n          <td>long</td>\n          <td>sys_sunset</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>City ID</td>\n          <td>long</td>\n          <td>id</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>City name</td>\n          <td>const char*</td>\n          <td>name</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>Country</td>\n          <td>const char*</td>\n          <td>sys_country</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>Longitude</td>\n          <td>float</td>\n          <td>coord_lon</td>\n          <td>º</td>\n      </tr>\n      <tr>\n          <td>Latitude</td>\n          <td>float</td>\n          <td>coord_lat</td>\n          <td>º</td>\n      </tr>\n      <tr>\n          <td>GMT</td>\n          <td>int</td>\n          <td>timezone  (※timezone/3600)</td>\n          <td>hour</td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>int</td>\n          <td>sys_type</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td></td>\n          <td>int</td>\n          <td>sys_id</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>Base</td>\n          <td>const char*</td>\n          <td>base</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>COD</td>\n          <td>int</td>\n          <td>cod</td>\n          <td></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<br>\n<h4 id=\"sketch-전체\">sketch: 전체<a class=\"anchor\" href=\"#sketch-%ec%a0%84%ec%b2%b4\">#</a></h4>\r\n<p>위의 과정을 통해 만들진 부분 스케치를 병합하여 JSON 파싱을 위한 전체 스케치를 구성해봅니다.</p>\n<blockquote class='book-hint '>\r\n<p>ArduinoJson 라이브러리의 경우 version 5와 6의 사용 문법이 조금 다릅니다. 현재 Arduino IDE에서 라이브러리 추가과정을 통해 다운로드 받을 수 있는 최신 라이브러리 버전이 ArduinoJson 6이므로, 이에 맞게 작성하여야합니다. (기존의 ArduinoJson 5에 맞게 작성된 스케치는 컴파일이 되지 않으므로, <a href=\"https://arduinojson.org/v6/doc/upgrade/\">Migrating from version 5 to 6</a> 문서를 참고하여 스케치를 변경해야 합니다.)</p></blockquote><div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;WiFi.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;HTTPClient.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;ArduinoJson.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;TimeLib.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> ssid     <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;your ssid&#34;</span>;                  <span style=\"color:#75715e\">// 연결할 SSID\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> password <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;your password&#34;</span>;              <span style=\"color:#75715e\">// 연결할 SSID의 비밀번호\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> String endpoint <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;https://api.openweathermap.org&#34;</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> String ver <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;/data/2.5/weather?q=&#34;</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> String city <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;Shanghai,CN&#34;</span>;                 <span style=\"color:#75715e\">// City,Country (띄어쓰기 금지)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> String appid <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;&amp;units=metric&amp;APPID=&#34;</span>;       <span style=\"color:#75715e\">// Units: metric\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> String key <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;1bf3d5e1bd2e5934aadd86..........&#34;</span>;    <span style=\"color:#75715e\">// API Key\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> offset_days <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">3</span>;     <span style=\"color:#75715e\">// 3 days for convert unix timestamp to datetime\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  WiFi.begin(ssid, password);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span> (WiFi.status() <span style=\"color:#f92672\">!=</span> WL_CONNECTED) {\n</span></span><span style=\"display:flex;\"><span>    delay(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.println(<span style=\"color:#e6db74\">&#34;Connecting to WiFi..&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;Connected to the WiFi network&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> ((WiFi.status() <span style=\"color:#f92672\">==</span> WL_CONNECTED)) {      <span style=\"color:#75715e\">// Check the current connection status\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span>    HTTPClient http;\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>    http.begin(endpoint <span style=\"color:#f92672\">+</span> ver <span style=\"color:#f92672\">+</span> city <span style=\"color:#f92672\">+</span> appid <span style=\"color:#f92672\">+</span> key); <span style=\"color:#75715e\">// Specify the URL\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">int</span> httpCode <span style=\"color:#f92672\">=</span> http.GET();                       <span style=\"color:#75715e\">// Make the request\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (httpCode <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) {                              <span style=\"color:#75715e\">// Check for the returning code\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">// 데이터 파싱\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> size_t capacity <span style=\"color:#f92672\">=</span> JSON_ARRAY_SIZE(<span style=\"color:#ae81ff\">1</span>) <span style=\"color:#f92672\">+</span> JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">1</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">2</span><span style=\"color:#f92672\">*</span>JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">2</span>) <span style=\"color:#f92672\">+</span> JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">4</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">2</span><span style=\"color:#f92672\">*</span>JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">5</span>) <span style=\"color:#f92672\">+</span> JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">13</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">270</span>;\n</span></span><span style=\"display:flex;\"><span>      DynamicJsonDocument doc(capacity);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      String json <span style=\"color:#f92672\">=</span> http.getString();                <span style=\"color:#75715e\">// get JSON format data\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      deserializeJson(doc, json);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">float</span> coord_lon <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;coord&#34;</span>][<span style=\"color:#e6db74\">&#34;lon&#34;</span>]; <span style=\"color:#75715e\">// 121.49\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">float</span> coord_lat <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;coord&#34;</span>][<span style=\"color:#e6db74\">&#34;lat&#34;</span>]; <span style=\"color:#75715e\">// 31.23\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      JsonObject weather_0 <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;weather&#34;</span>][<span style=\"color:#ae81ff\">0</span>];\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> weather_0_id <span style=\"color:#f92672\">=</span> weather_0[<span style=\"color:#e6db74\">&#34;id&#34;</span>]; <span style=\"color:#75715e\">// 804\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> weather_0_main <span style=\"color:#f92672\">=</span> weather_0[<span style=\"color:#e6db74\">&#34;main&#34;</span>]; <span style=\"color:#75715e\">// &#34;Clouds&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> weather_0_description <span style=\"color:#f92672\">=</span> weather_0[<span style=\"color:#e6db74\">&#34;description&#34;</span>]; <span style=\"color:#75715e\">// &#34;overcast clouds&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> weather_0_icon <span style=\"color:#f92672\">=</span> weather_0[<span style=\"color:#e6db74\">&#34;icon&#34;</span>]; <span style=\"color:#75715e\">// &#34;04d&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      JsonObject weather_1 = weather[1];\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      int weather_1_id = weather_1[&#34;id&#34;]; // 701\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_1_main = weather_1[&#34;main&#34;]; // &#34;Mist&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_1_description = weather_1[&#34;description&#34;]; // &#34;mist&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_1_icon = weather_1[&#34;icon&#34;]; // &#34;50n&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      JsonObject weather_2 = weather[2];\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      int weather_2_id = weather_2[&#34;id&#34;]; // 741\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_2_main = weather_2[&#34;main&#34;]; // &#34;Fog&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_2_description = weather_2[&#34;description&#34;]; // &#34;fog&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_2_icon = weather_2[&#34;icon&#34;]; // &#34;50n&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      */</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> base <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;base&#34;</span>]; <span style=\"color:#75715e\">// &#34;stations&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      JsonObject main <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;main&#34;</span>];\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">float</span> main_temp <span style=\"color:#f92672\">=</span> main[<span style=\"color:#e6db74\">&#34;temp&#34;</span>]; <span style=\"color:#75715e\">// 293.02\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> main_pressure <span style=\"color:#f92672\">=</span> main[<span style=\"color:#e6db74\">&#34;pressure&#34;</span>]; <span style=\"color:#75715e\">// 1027\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> main_humidity <span style=\"color:#f92672\">=</span> main[<span style=\"color:#e6db74\">&#34;humidity&#34;</span>]; <span style=\"color:#75715e\">// 55\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">float</span> main_temp_min <span style=\"color:#f92672\">=</span> main[<span style=\"color:#e6db74\">&#34;temp_min&#34;</span>]; <span style=\"color:#75715e\">// 289.82\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">float</span> main_temp_max <span style=\"color:#f92672\">=</span> main[<span style=\"color:#e6db74\">&#34;temp_max&#34;</span>]; <span style=\"color:#75715e\">// 298.71\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> visibility <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;visibility&#34;</span>]; <span style=\"color:#75715e\">// 10000\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> wind_speed <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;wind&#34;</span>][<span style=\"color:#e6db74\">&#34;speed&#34;</span>]; <span style=\"color:#75715e\">// 3\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> wind_deg <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;wind&#34;</span>][<span style=\"color:#e6db74\">&#34;deg&#34;</span>]; <span style=\"color:#75715e\">// 60\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> clouds_all <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;clouds&#34;</span>][<span style=\"color:#e6db74\">&#34;all&#34;</span>]; <span style=\"color:#75715e\">// 94\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      \n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">long</span> dt <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;dt&#34;</span>]; <span style=\"color:#75715e\">// 1574303919\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      JsonObject sys <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;sys&#34;</span>];\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> sys_type <span style=\"color:#f92672\">=</span> sys[<span style=\"color:#e6db74\">&#34;type&#34;</span>]; <span style=\"color:#75715e\">// 1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> sys_id <span style=\"color:#f92672\">=</span> sys[<span style=\"color:#e6db74\">&#34;id&#34;</span>]; <span style=\"color:#75715e\">// 9659\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//float sys_message = sys[&#34;message&#34;]; // Internal parameter (0.0226)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> sys_country <span style=\"color:#f92672\">=</span> sys[<span style=\"color:#e6db74\">&#34;country&#34;</span>]; <span style=\"color:#75715e\">// &#34;CN&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">long</span> sys_sunrise <span style=\"color:#f92672\">=</span> sys[<span style=\"color:#e6db74\">&#34;sunrise&#34;</span>]; <span style=\"color:#75715e\">// 1574288762\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">long</span> sys_sunset <span style=\"color:#f92672\">=</span> sys[<span style=\"color:#e6db74\">&#34;sunset&#34;</span>]; <span style=\"color:#75715e\">// 1574326426\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> timezone <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;timezone&#34;</span>]; <span style=\"color:#75715e\">// 28800\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">long</span> id <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;id&#34;</span>]; <span style=\"color:#75715e\">// 1796236\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> name <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;name&#34;</span>]; <span style=\"color:#75715e\">// &#34;Shanghai&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> cod <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;cod&#34;</span>]; <span style=\"color:#75715e\">// 200\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      dt <span style=\"color:#f92672\">=</span> dt <span style=\"color:#f92672\">+</span> timezone;                <span style=\"color:#75715e\">// for GMT+8 -&gt; +28800, for GMT+9 -&gt; +32400\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      sys_sunrise <span style=\"color:#f92672\">=</span> sys_sunrise <span style=\"color:#f92672\">+</span> timezone;\n</span></span><span style=\"display:flex;\"><span>      sys_sunset <span style=\"color:#f92672\">=</span> sys_sunset <span style=\"color:#f92672\">+</span> timezone;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">//int main_sea_level = main[&#34;sea_level&#34;]; // Atmospheric pressure hPa on the sea level\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//int main_grnd_level = main[&#34;grnd_level&#34;]; // Atmospheric pressure hPa on the ground level     \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//int rain_1h = doc[&#34;rain&#34;][&#34;1h&#34;]; // Rain volume for the last 1 hour, mm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//int rain_3h = doc[&#34;rain&#34;][&#34;3h&#34;]; // Rain volume for the last 3 hour, mm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//int snow_1h = doc[&#34;snow&#34;][&#34;1h&#34;]; // Snow volume for the last 1 hour, mm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//int snow_3h = doc[&#34;snow&#34;][&#34;3h&#34;]; // Snow volume for the last 3 hour, mm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">//데이터 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      Serial.print(<span style=\"color:#e6db74\">&#34;UNIX Time of Weather: &#34;</span>); Serial.println(dt);\n</span></span><span style=\"display:flex;\"><span>      Serial.printf(<span style=\"color:#e6db74\">&#34;Time of Weather: %4d-%02d-%02d %02d:%02d:%02d(%1d)</span><span style=\"color:#ae81ff\">\\n</span><span style=\"color:#e6db74\">&#34;</span>, year(dt), month(dt), day(dt), hour(dt), minute(dt), second(dt), weekday(dt));\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Weather ID: &#34;</span>); Serial.println(weather_0_id);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Weather Main: &#34;</span>); Serial.println(weather_0_main);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Weather Description: &#34;</span>); Serial.println(weather_0_description);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Weather Icon: &#34;</span>); Serial.println(weather_0_icon);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Temperature(℃): &#34;</span>); Serial.println(main_temp);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Temperature Max(℃): &#34;</span>); Serial.println(main_temp_max);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Temperature Min(℃): &#34;</span>); Serial.println(main_temp_min);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Pressure(hPa): &#34;</span>); Serial.println(main_pressure);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Humidity(%): &#34;</span>); Serial.println(main_humidity);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Visibility(m): &#34;</span>); Serial.println(visibility);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Wind Speed(m/s): &#34;</span>); Serial.println(wind_speed);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Wind Degree(º): &#34;</span>); Serial.println(wind_deg);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Clouds: &#34;</span>); Serial.println(clouds_all);\n</span></span><span style=\"display:flex;\"><span>      Serial.printf(<span style=\"color:#e6db74\">&#34;Sunrise: %02d:%02d:%02d</span><span style=\"color:#ae81ff\">\\n</span><span style=\"color:#e6db74\">&#34;</span>, hour(sys_sunrise), minute(sys_sunrise), second(sys_sunrise));\n</span></span><span style=\"display:flex;\"><span>      Serial.printf(<span style=\"color:#e6db74\">&#34;Sunset:  %02d:%02d:%02d</span><span style=\"color:#ae81ff\">\\n</span><span style=\"color:#e6db74\">&#34;</span>, hour(sys_sunset), minute(sys_sunset), second(sys_sunset));\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;City/Country: &#34;</span>); Serial.print(name); Serial.print(<span style=\"color:#e6db74\">&#34;/&#34;</span>); Serial.println(sys_country);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;longitude/latidude: &#34;</span>); Serial.print(coord_lon); Serial.print(<span style=\"color:#e6db74\">&#34;/&#34;</span>); Serial.println(coord_lat);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Timezone: GMT+&#34;</span>); Serial.println(timezone<span style=\"color:#f92672\">/</span><span style=\"color:#ae81ff\">3600</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Sea Level(hPa): &#34;); Serial.println(main_sea_level);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Ground Level(hPa): &#34;); Serial.println(main_grnd_level);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Rain 1h(mm): &#34;); Serial.println(rain_1h);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Rain 3h(mm): &#34;); Serial.println(rain_3h);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Snow 1h(mm): &#34;); Serial.println(snow_1h);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Snow 3h(mm): &#34;); Serial.println(snow_3h);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      */</span>\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      Serial.println(<span style=\"color:#e6db74\">&#34;Error on HTTP request&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>    http.end();\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">30000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"출력-data-1\">출력 Data<a class=\"anchor\" href=\"#%ec%b6%9c%eb%a0%a5-data-1\">#</a></h4>\r\n<p><img src=\"/image/owm-03.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"weather-condition-code\">Weather Condition Code<a class=\"anchor\" href=\"#weather-condition-code\">#</a></h3>\r\n<h4 id=\"group-2xx-thunderstorm\">Group 2xx: Thunderstorm<a class=\"anchor\" href=\"#group-2xx-thunderstorm\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>ID</th>\n          <th>Main</th>\n          <th>Description</th>\n          <th>Icon</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>200</td>\n          <td>Thunderstorm</td>\n          <td>thunderstorm with light rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/11d@2x.png\" alt=\"img\" /> 11d</td>\n      </tr>\n      <tr>\n          <td>201</td>\n          <td>Thunderstorm</td>\n          <td>thunderstorm with rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/11d@2x.png\" alt=\"img\" /> 11d</td>\n      </tr>\n      <tr>\n          <td>202</td>\n          <td>Thunderstorm</td>\n          <td>thunderstorm with heavy rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/11d@2x.png\" alt=\"img\" /> 11d</td>\n      </tr>\n      <tr>\n          <td>210</td>\n          <td>Thunderstorm</td>\n          <td>light thunderstorm</td>\n          <td><img src=\"http://openweathermap.org/img/wn/11d@2x.png\" alt=\"img\" /> 11d</td>\n      </tr>\n      <tr>\n          <td>211</td>\n          <td>Thunderstorm</td>\n          <td>thunderstorm</td>\n          <td><img src=\"http://openweathermap.org/img/wn/11d@2x.png\" alt=\"img\" /> 11d</td>\n      </tr>\n      <tr>\n          <td>212</td>\n          <td>Thunderstorm</td>\n          <td>heavy thunderstorm</td>\n          <td><img src=\"http://openweathermap.org/img/wn/11d@2x.png\" alt=\"img\" /> 11d</td>\n      </tr>\n      <tr>\n          <td>221</td>\n          <td>Thunderstorm</td>\n          <td>ragged thunderstorm</td>\n          <td><img src=\"http://openweathermap.org/img/wn/11d@2x.png\" alt=\"img\" /> 11d</td>\n      </tr>\n      <tr>\n          <td>230</td>\n          <td>Thunderstorm</td>\n          <td>thunderstorm with light drizzle</td>\n          <td><img src=\"http://openweathermap.org/img/wn/11d@2x.png\" alt=\"img\" /> 11d</td>\n      </tr>\n      <tr>\n          <td>231</td>\n          <td>Thunderstorm</td>\n          <td>thunderstorm with drizzle</td>\n          <td><img src=\"http://openweathermap.org/img/wn/11d@2x.png\" alt=\"img\" /> 11d</td>\n      </tr>\n      <tr>\n          <td>232</td>\n          <td>Thunderstorm</td>\n          <td>thunderstorm with heavy drizzle</td>\n          <td><img src=\"http://openweathermap.org/img/wn/11d@2x.png\" alt=\"img\" /> 11d</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"group-3xx-drizzle\">Group 3xx: Drizzle<a class=\"anchor\" href=\"#group-3xx-drizzle\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>ID</th>\n          <th>Main</th>\n          <th>Description</th>\n          <th>Icon</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>300</td>\n          <td>Drizzle</td>\n          <td>light intensity drizzle</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n      <tr>\n          <td>301</td>\n          <td>Drizzle</td>\n          <td>drizzle</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n      <tr>\n          <td>302</td>\n          <td>Drizzle</td>\n          <td>heavy intensity drizzle</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n      <tr>\n          <td>310</td>\n          <td>Drizzle</td>\n          <td>light intensity drizzle rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n      <tr>\n          <td>311</td>\n          <td>Drizzle</td>\n          <td>drizzle rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n      <tr>\n          <td>312</td>\n          <td>Drizzle</td>\n          <td>heavy intensity drizzle rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n      <tr>\n          <td>313</td>\n          <td>Drizzle</td>\n          <td>shower rain and drizzle</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n      <tr>\n          <td>314</td>\n          <td>Drizzle</td>\n          <td>heavy shower rain and drizzle</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n      <tr>\n          <td>321</td>\n          <td>Drizzle</td>\n          <td>shower drizzle</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"group-5xx-rain\">Group 5xx: Rain<a class=\"anchor\" href=\"#group-5xx-rain\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>ID</th>\n          <th>Main</th>\n          <th>Description</th>\n          <th>Icon</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>500</td>\n          <td>Rain</td>\n          <td>light rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/10d@2x.png\" alt=\"img\" /> 10d</td>\n      </tr>\n      <tr>\n          <td>501</td>\n          <td>Rain</td>\n          <td>moderate rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/10d@2x.png\" alt=\"img\" /> 10d</td>\n      </tr>\n      <tr>\n          <td>502</td>\n          <td>Rain</td>\n          <td>heavy intensity rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/10d@2x.png\" alt=\"img\" /> 10d</td>\n      </tr>\n      <tr>\n          <td>503</td>\n          <td>Rain</td>\n          <td>very heavy rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/10d@2x.png\" alt=\"img\" /> 10d</td>\n      </tr>\n      <tr>\n          <td>504</td>\n          <td>Rain</td>\n          <td>extreme rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/10d@2x.png\" alt=\"img\" /> 10d</td>\n      </tr>\n      <tr>\n          <td>511</td>\n          <td>Rain</td>\n          <td>freezing rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n      <tr>\n          <td>520</td>\n          <td>Rain</td>\n          <td>light intensity shower rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n      <tr>\n          <td>521</td>\n          <td>Rain</td>\n          <td>shower rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n      <tr>\n          <td>522</td>\n          <td>Rain</td>\n          <td>heavy intensity shower rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n      <tr>\n          <td>531</td>\n          <td>Rain</td>\n          <td>ragged shower rain</td>\n          <td><img src=\"http://openweathermap.org/img/wn/09d@2x.png\" alt=\"img\" /> 09d</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"group-6xx-snow\">Group 6xx: Snow<a class=\"anchor\" href=\"#group-6xx-snow\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>ID</th>\n          <th>Main</th>\n          <th>Description</th>\n          <th>Icon</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>600</td>\n          <td>Snow</td>\n          <td>light snow</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n      <tr>\n          <td>601</td>\n          <td>Snow</td>\n          <td>Snow</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n      <tr>\n          <td>602</td>\n          <td>Snow</td>\n          <td>Heavy snow</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n      <tr>\n          <td>611</td>\n          <td>Snow</td>\n          <td>Sleet</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n      <tr>\n          <td>612</td>\n          <td>Snow</td>\n          <td>Light shower sleet</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n      <tr>\n          <td>613</td>\n          <td>Snow</td>\n          <td>Shower sleet</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n      <tr>\n          <td>615</td>\n          <td>Snow</td>\n          <td>Light rain and snow</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n      <tr>\n          <td>616</td>\n          <td>Snow</td>\n          <td>Rain and snow</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n      <tr>\n          <td>620</td>\n          <td>Snow</td>\n          <td>Light shower snow</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n      <tr>\n          <td>621</td>\n          <td>Snow</td>\n          <td>Shower snow</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n      <tr>\n          <td>622</td>\n          <td>Snow</td>\n          <td>Heavy shower snow</td>\n          <td><img src=\"http://openweathermap.org/img/wn/13d@2x.png\" alt=\"img\" /> 13d</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"group-7xx-atmosphere\">Group 7xx: Atmosphere<a class=\"anchor\" href=\"#group-7xx-atmosphere\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>ID</th>\n          <th>Main</th>\n          <th>Description</th>\n          <th>Icon</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>701</td>\n          <td>Mist</td>\n          <td>mist</td>\n          <td><img src=\"http://openweathermap.org/img/wn/50d@2x.png\" alt=\"img\" /> 50d</td>\n      </tr>\n      <tr>\n          <td>711</td>\n          <td>Smoke</td>\n          <td>Smoke</td>\n          <td><img src=\"http://openweathermap.org/img/wn/50d@2x.png\" alt=\"img\" /> 50d</td>\n      </tr>\n      <tr>\n          <td>721</td>\n          <td>Haze</td>\n          <td>Haze</td>\n          <td><img src=\"http://openweathermap.org/img/wn/50d@2x.png\" alt=\"img\" /> 50d</td>\n      </tr>\n      <tr>\n          <td>731</td>\n          <td>Dust</td>\n          <td>sand/ dust whirls</td>\n          <td><img src=\"http://openweathermap.org/img/wn/50d@2x.png\" alt=\"img\" /> 50d</td>\n      </tr>\n      <tr>\n          <td>741</td>\n          <td>Fog</td>\n          <td>fog</td>\n          <td><img src=\"http://openweathermap.org/img/wn/50d@2x.png\" alt=\"img\" /> 50d</td>\n      </tr>\n      <tr>\n          <td>751</td>\n          <td>Sand</td>\n          <td>sand</td>\n          <td><img src=\"http://openweathermap.org/img/wn/50d@2x.png\" alt=\"img\" /> 50d</td>\n      </tr>\n      <tr>\n          <td>761</td>\n          <td>Dust</td>\n          <td>dust</td>\n          <td><img src=\"http://openweathermap.org/img/wn/50d@2x.png\" alt=\"img\" /> 50d</td>\n      </tr>\n      <tr>\n          <td>762</td>\n          <td>Ash</td>\n          <td>volcanic ash</td>\n          <td><img src=\"http://openweathermap.org/img/wn/50d@2x.png\" alt=\"img\" /> 50d</td>\n      </tr>\n      <tr>\n          <td>771</td>\n          <td>Squall</td>\n          <td>squalls</td>\n          <td><img src=\"http://openweathermap.org/img/wn/50d@2x.png\" alt=\"img\" /> 50d</td>\n      </tr>\n      <tr>\n          <td>781</td>\n          <td>Tornado</td>\n          <td>tornado</td>\n          <td><img src=\"http://openweathermap.org/img/wn/50d@2x.png\" alt=\"img\" /> 50d</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"group-800-clear\">Group 800: Clear<a class=\"anchor\" href=\"#group-800-clear\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>ID</th>\n          <th>Main</th>\n          <th>Description</th>\n          <th>Icon</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>800</td>\n          <td>Clear</td>\n          <td>clear sky</td>\n          <td><img src=\"http://openweathermap.org/img/wn/01d@2x.png\" alt=\"img\" /> 01d <img src=\"http://openweathermap.org/img/wn/01n@2x.png\" alt=\"img\" /> 01n</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"group-80x-clouds\">Group 80x: Clouds<a class=\"anchor\" href=\"#group-80x-clouds\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>ID</th>\n          <th>Main</th>\n          <th>Description</th>\n          <th>Icon</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>801</td>\n          <td>Clouds</td>\n          <td>few clouds: 11-25%</td>\n          <td><img src=\"http://openweathermap.org/img/wn/02d@2x.png\" alt=\"img\" /> 02d <img src=\"http://openweathermap.org/img/wn/02n@2x.png\" alt=\"img\" /> 02n</td>\n      </tr>\n      <tr>\n          <td>802</td>\n          <td>Clouds</td>\n          <td>scattered clouds: 25-50%</td>\n          <td><img src=\"http://openweathermap.org/img/wn/03d@2x.png\" alt=\"img\" /> 03d <img src=\"http://openweathermap.org/img/wn/03n@2x.png\" alt=\"img\" /> 03n</td>\n      </tr>\n      <tr>\n          <td>803</td>\n          <td>Clouds</td>\n          <td>broken clouds: 51-84%</td>\n          <td><img src=\"http://openweathermap.org/img/wn/04d@2x.png\" alt=\"img\" /> 04d <img src=\"http://openweathermap.org/img/wn/04n@2x.png\" alt=\"img\" /> 04n</td>\n      </tr>\n      <tr>\n          <td>804</td>\n          <td>Clouds</td>\n          <td>overcast clouds: 85-100%</td>\n          <td><img src=\"http://openweathermap.org/img/wn/04d@2x.png\" alt=\"img\" /> 04d <img src=\"http://openweathermap.org/img/wn/04n@2x.png\" alt=\"img\" /> 04n</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"icon-출력방법\">ICON 출력방법<a class=\"anchor\" href=\"#icon-%ec%b6%9c%eb%a0%a5%eb%b0%a9%eb%b2%95\">#</a></h4>\r\n<p>Weather ID 801에 해당하는 아이콘 code가 02d이므로 URL을 다음과 같이 지정하면</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-html\" data-lang=\"html\"><span style=\"display:flex;\"><span>http://openweathermap.org/img/wn/10d.png</span></span></code></pre></div><p><img src=\"http://openweathermap.org/img/wn/10d.png\" alt=\"\" /></p>\n<p>ICON크기를 크게 출력하고 싶은 경우에는 아이콘 code에 <strong>@2x</strong>를 덧붙입니다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-html\" data-lang=\"html\"><span style=\"display:flex;\"><span>http://openweathermap.org/img/wn/10d@2x.png</span></span></code></pre></div><p><img src=\"http://openweathermap.org/img/wn/10d@2x.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"1602-lcd에-날씨-정보-출력하기\">1602 LCD에 날씨 정보 출력하기<a class=\"anchor\" href=\"#1602-lcd%ec%97%90-%eb%82%a0%ec%94%a8-%ec%a0%95%eb%b3%b4-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>여러가지 날씨 정보 중에서 현재 온도를 1602 LCD(I2C)에 출력해보겠습니다.</p>\n<br>\n<h4 id=\"라이브러리-설치하기\">라이브러리 설치하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%84%a4%ec%b9%98%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong></p>\n<ul>\n<li>LiquidCrystal I2C (by Frank de Brabander) 검색하여 설치</li>\n</ul>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/owm-06.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;WiFi.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;HTTPClient.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;ArduinoJson.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;TimeLib.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> ssid     <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;your ssid&#34;</span>;                  <span style=\"color:#75715e\">// 연결할 SSID\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> password <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;your password&#34;</span>;              <span style=\"color:#75715e\">// 연결할 SSID의 비밀번호\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> String endpoint <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;https://api.openweathermap.org&#34;</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> String ver <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;/data/2.5/weather?q=&#34;</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> String city <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;Shanghai,CN&#34;</span>;                 <span style=\"color:#75715e\">// City,Country (띄어쓰기 금지)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> String appid <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;&amp;units=metric&amp;APPID=&#34;</span>;       <span style=\"color:#75715e\">// Units: metric\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> String key <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;1bf3d5e1bd2e5934aadd86..........&#34;</span>;    <span style=\"color:#75715e\">// API Key\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> offset_days <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">3</span>;                            <span style=\"color:#75715e\">// 3 days for convert unix timestamp to datetime\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">float</span> main_temp;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// set the LCD\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal_I2C.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> lcdColumns <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">16</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> lcdRows <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// set LCD address, number of columns and rows\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// if you don&#39;t know your display address, run an I2C scanner sketch\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>LiquidCrystal_I2C <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">0x27</span>, lcdColumns, lcdRows);  \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  WiFi.begin(ssid, password);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span> (WiFi.status() <span style=\"color:#f92672\">!=</span> WL_CONNECTED) {\n</span></span><span style=\"display:flex;\"><span>    delay(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.println(<span style=\"color:#e6db74\">&#34;Connecting to WiFi..&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;Connected to the WiFi network&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// initialize LCD\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.init();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// turn on LCD backlight                      \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.backlight();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> ((WiFi.status() <span style=\"color:#f92672\">==</span> WL_CONNECTED)) {            <span style=\"color:#75715e\">// Check the current connection status\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span>    HTTPClient http;\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>    http.begin(endpoint <span style=\"color:#f92672\">+</span> ver <span style=\"color:#f92672\">+</span> city <span style=\"color:#f92672\">+</span> appid <span style=\"color:#f92672\">+</span> key); <span style=\"color:#75715e\">// Specify the URL\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">int</span> httpCode <span style=\"color:#f92672\">=</span> http.GET();                       <span style=\"color:#75715e\">// Make the request\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (httpCode <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) {                              <span style=\"color:#75715e\">// Check for the returning code\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">// 데이터 파싱\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> size_t capacity <span style=\"color:#f92672\">=</span> JSON_ARRAY_SIZE(<span style=\"color:#ae81ff\">1</span>) <span style=\"color:#f92672\">+</span> JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">1</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">2</span><span style=\"color:#f92672\">*</span>JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">2</span>) <span style=\"color:#f92672\">+</span> JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">4</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">2</span><span style=\"color:#f92672\">*</span>JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">5</span>) <span style=\"color:#f92672\">+</span> JSON_OBJECT_SIZE(<span style=\"color:#ae81ff\">13</span>) <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">270</span>;\n</span></span><span style=\"display:flex;\"><span>      DynamicJsonDocument doc(capacity);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      String json <span style=\"color:#f92672\">=</span> http.getString();                <span style=\"color:#75715e\">// get JSON format data\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      deserializeJson(doc, json);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">float</span> coord_lon <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;coord&#34;</span>][<span style=\"color:#e6db74\">&#34;lon&#34;</span>]; <span style=\"color:#75715e\">// 121.49\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">float</span> coord_lat <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;coord&#34;</span>][<span style=\"color:#e6db74\">&#34;lat&#34;</span>]; <span style=\"color:#75715e\">// 31.23\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      JsonObject weather_0 <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;weather&#34;</span>][<span style=\"color:#ae81ff\">0</span>];\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> weather_0_id <span style=\"color:#f92672\">=</span> weather_0[<span style=\"color:#e6db74\">&#34;id&#34;</span>]; <span style=\"color:#75715e\">// 804\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> weather_0_main <span style=\"color:#f92672\">=</span> weather_0[<span style=\"color:#e6db74\">&#34;main&#34;</span>]; <span style=\"color:#75715e\">// &#34;Clouds&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> weather_0_description <span style=\"color:#f92672\">=</span> weather_0[<span style=\"color:#e6db74\">&#34;description&#34;</span>]; <span style=\"color:#75715e\">// &#34;overcast clouds&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> weather_0_icon <span style=\"color:#f92672\">=</span> weather_0[<span style=\"color:#e6db74\">&#34;icon&#34;</span>]; <span style=\"color:#75715e\">// &#34;04d&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      JsonObject weather_1 = weather[1];\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      int weather_1_id = weather_1[&#34;id&#34;]; // 701\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_1_main = weather_1[&#34;main&#34;]; // &#34;Mist&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_1_description = weather_1[&#34;description&#34;]; // &#34;mist&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_1_icon = weather_1[&#34;icon&#34;]; // &#34;50n&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      JsonObject weather_2 = weather[2];\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      int weather_2_id = weather_2[&#34;id&#34;]; // 741\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_2_main = weather_2[&#34;main&#34;]; // &#34;Fog&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_2_description = weather_2[&#34;description&#34;]; // &#34;fog&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      const char* weather_2_icon = weather_2[&#34;icon&#34;]; // &#34;50n&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      */</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> base <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;base&#34;</span>]; <span style=\"color:#75715e\">// &#34;stations&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      JsonObject main <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;main&#34;</span>];\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">float</span> main_temp <span style=\"color:#f92672\">=</span> main[<span style=\"color:#e6db74\">&#34;temp&#34;</span>]; <span style=\"color:#75715e\">// 293.02\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> main_pressure <span style=\"color:#f92672\">=</span> main[<span style=\"color:#e6db74\">&#34;pressure&#34;</span>]; <span style=\"color:#75715e\">// 1027\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> main_humidity <span style=\"color:#f92672\">=</span> main[<span style=\"color:#e6db74\">&#34;humidity&#34;</span>]; <span style=\"color:#75715e\">// 55\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">float</span> main_temp_min <span style=\"color:#f92672\">=</span> main[<span style=\"color:#e6db74\">&#34;temp_min&#34;</span>]; <span style=\"color:#75715e\">// 289.82\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">float</span> main_temp_max <span style=\"color:#f92672\">=</span> main[<span style=\"color:#e6db74\">&#34;temp_max&#34;</span>]; <span style=\"color:#75715e\">// 298.71\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> visibility <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;visibility&#34;</span>]; <span style=\"color:#75715e\">// 10000\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> wind_speed <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;wind&#34;</span>][<span style=\"color:#e6db74\">&#34;speed&#34;</span>]; <span style=\"color:#75715e\">// 3\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> wind_deg <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;wind&#34;</span>][<span style=\"color:#e6db74\">&#34;deg&#34;</span>]; <span style=\"color:#75715e\">// 60\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> clouds_all <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;clouds&#34;</span>][<span style=\"color:#e6db74\">&#34;all&#34;</span>]; <span style=\"color:#75715e\">// 94\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      \n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">long</span> dt <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;dt&#34;</span>]; <span style=\"color:#75715e\">// 1574303919\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      JsonObject sys <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;sys&#34;</span>];\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> sys_type <span style=\"color:#f92672\">=</span> sys[<span style=\"color:#e6db74\">&#34;type&#34;</span>]; <span style=\"color:#75715e\">// 1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> sys_id <span style=\"color:#f92672\">=</span> sys[<span style=\"color:#e6db74\">&#34;id&#34;</span>]; <span style=\"color:#75715e\">// 9659\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//float sys_message = sys[&#34;message&#34;]; // Internal parameter (0.0226)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> sys_country <span style=\"color:#f92672\">=</span> sys[<span style=\"color:#e6db74\">&#34;country&#34;</span>]; <span style=\"color:#75715e\">// &#34;CN&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">long</span> sys_sunrise <span style=\"color:#f92672\">=</span> sys[<span style=\"color:#e6db74\">&#34;sunrise&#34;</span>]; <span style=\"color:#75715e\">// 1574288762\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">long</span> sys_sunset <span style=\"color:#f92672\">=</span> sys[<span style=\"color:#e6db74\">&#34;sunset&#34;</span>]; <span style=\"color:#75715e\">// 1574326426\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">int</span> timezone <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;timezone&#34;</span>]; <span style=\"color:#75715e\">// 28800\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">long</span> id <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;id&#34;</span>]; <span style=\"color:#75715e\">// 1796236\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> name <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;name&#34;</span>]; <span style=\"color:#75715e\">// &#34;Shanghai&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> cod <span style=\"color:#f92672\">=</span> doc[<span style=\"color:#e6db74\">&#34;cod&#34;</span>]; <span style=\"color:#75715e\">// 200\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      dt <span style=\"color:#f92672\">=</span> dt <span style=\"color:#f92672\">+</span> timezone;                     <span style=\"color:#75715e\">// for GMT+8 -&gt; +28800, for GMT+9 -&gt; +32400\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      sys_sunrise <span style=\"color:#f92672\">=</span> sys_sunrise <span style=\"color:#f92672\">+</span> timezone;\n</span></span><span style=\"display:flex;\"><span>      sys_sunset <span style=\"color:#f92672\">=</span> sys_sunset <span style=\"color:#f92672\">+</span> timezone;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">//int main_sea_level = main[&#34;sea_level&#34;]; // Atmospheric pressure hPa on the sea level\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//int main_grnd_level = main[&#34;grnd_level&#34;]; // Atmospheric pressure hPa on the ground level     \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//int rain_1h = doc[&#34;rain&#34;][&#34;1h&#34;]; // Rain volume for the last 1 hour, mm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//int rain_3h = doc[&#34;rain&#34;][&#34;3h&#34;]; // Rain volume for the last 3 hour, mm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//int snow_1h = doc[&#34;snow&#34;][&#34;1h&#34;]; // Snow volume for the last 1 hour, mm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//int snow_3h = doc[&#34;snow&#34;][&#34;3h&#34;]; // Snow volume for the last 3 hour, mm\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">//데이터 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      Serial.print(<span style=\"color:#e6db74\">&#34;UNIX Time of Weather: &#34;</span>); Serial.println(dt);\n</span></span><span style=\"display:flex;\"><span>      Serial.printf(<span style=\"color:#e6db74\">&#34;Time of Weather: %4d-%02d-%02d %02d:%02d:%02d(%1d)</span><span style=\"color:#ae81ff\">\\n</span><span style=\"color:#e6db74\">&#34;</span>, year(dt), month(dt), day(dt), hour(dt), minute(dt), second(dt), weekday(dt));\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Weather ID: &#34;</span>); Serial.println(weather_0_id);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Weather Main: &#34;</span>); Serial.println(weather_0_main);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Weather Description: &#34;</span>); Serial.println(weather_0_description);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Weather Icon: &#34;</span>); Serial.println(weather_0_icon);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Temperature(℃): &#34;</span>); Serial.println(main_temp);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Temperature Max(℃): &#34;</span>); Serial.println(main_temp_max);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Temperature Min(℃): &#34;</span>); Serial.println(main_temp_min);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Pressure(hPa): &#34;</span>); Serial.println(main_pressure);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Humidity(%): &#34;</span>); Serial.println(main_humidity);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Visibility(m): &#34;</span>); Serial.println(visibility);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Wind Speed(m/s): &#34;</span>); Serial.println(wind_speed);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Wind Degree(º): &#34;</span>); Serial.println(wind_deg);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Clouds: &#34;</span>); Serial.println(clouds_all);\n</span></span><span style=\"display:flex;\"><span>      Serial.printf(<span style=\"color:#e6db74\">&#34;Sunrise: %02d:%02d:%02d</span><span style=\"color:#ae81ff\">\\n</span><span style=\"color:#e6db74\">&#34;</span>, hour(sys_sunrise), minute(sys_sunrise), second(sys_sunrise));\n</span></span><span style=\"display:flex;\"><span>      Serial.printf(<span style=\"color:#e6db74\">&#34;Sunset:  %02d:%02d:%02d</span><span style=\"color:#ae81ff\">\\n</span><span style=\"color:#e6db74\">&#34;</span>, hour(sys_sunset), minute(sys_sunset), second(sys_sunset));\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;City/Country: &#34;</span>); Serial.print(name); Serial.print(<span style=\"color:#e6db74\">&#34;/&#34;</span>); Serial.println(sys_country);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;longitude/latidude: &#34;</span>); Serial.print(coord_lon); Serial.print(<span style=\"color:#e6db74\">&#34;/&#34;</span>); Serial.println(coord_lat);\n</span></span><span style=\"display:flex;\"><span>      Serial.print(<span style=\"color:#e6db74\">&#34;Timezone: GMT+&#34;</span>); Serial.println(timezone<span style=\"color:#f92672\">/</span><span style=\"color:#ae81ff\">3600</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Sea Level(hPa): &#34;); Serial.println(main_sea_level);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Ground Level(hPa): &#34;); Serial.println(main_grnd_level);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Rain 1h(mm): &#34;); Serial.println(rain_1h);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Rain 3h(mm): &#34;); Serial.println(rain_3h);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Snow 1h(mm): &#34;); Serial.println(snow_1h);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      Serial.print(&#34;Snow 3h(mm): &#34;); Serial.println(snow_3h);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">      */</span>\n</span></span><span style=\"display:flex;\"><span>      lcd.setCursor(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>      lcd.print(<span style=\"color:#e6db74\">&#34;Temperature : &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>      lcd.setCursor(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>      lcd.print(main_temp);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      Serial.println(<span style=\"color:#e6db74\">&#34;Error on HTTP request&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>    http.end();\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">30000</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  lcd.setCursor(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.print(<span style=\"color:#e6db74\">&#34;                &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><blockquote class='book-hint '>\r\n<p>Arduino IDE에서 컴파일시 *&ldquo;&ldquo;경고: 라이브러리 LiquidCrystal_I2C가 avr 아키텍처에서 실행되며 esp32아키텍처에서 실행되는 현재보드에서는 호환되지 않을 수 있습니다.&rdquo;&quot;*라는 메세지가 나타나지만, LCD 출력에는 문제가 없습니다.</p></blockquote><br>\n<br>\n<h3 id=\"공공데이터-활용하기\">공공데이터 활용하기<a class=\"anchor\" href=\"#%ea%b3%b5%ea%b3%b5%eb%8d%b0%ec%9d%b4%ed%84%b0-%ed%99%9c%ec%9a%a9%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>위의 방법을 응용하면 국가별, 관련 업체별로 제공되는 여러가지 공공데이터를 활용할 수 있습니다.</p>\n<ul>\n<li>대기질 관련 데이터 : <a href=\"https://aqicn.org/api/\">https://aqicn.org/api/</a></li>\n<li>(한국)공공데이터포털 : <a href=\"https://www.data.go.kr/\">https://www.data.go.kr/</a></li>\n<li>(미국)공공데이터포털 : <a href=\"https://www.data.gov/\">https://www.data.gov/</a></li>\n</ul>\n<p>그밖에 활용가능한 공공데이터가 어떤 것이 있는지, 살펴보세요~</p>\n"}{"uri":"http://localhost:1313/posts/esp32-ap-mode-and-websocket_draft/","title":"esp32 AP mode & Websocket","content":"<h3 id=\"ap-mode\">AP mode<a class=\"anchor\" href=\"#ap-mode\">#</a></h3>\r\n<p>ESP32를 AP mode로 설정하여 라우터(공유기) 장치 없이 Client가 ESP32에 직접 접속하는 방법으로 데이터를 주고받는 통신을 구현해보도록 하겠습니다.</p>\n<br>\n<p>ESP32는 기본적으로 블루투스와 wifi를 방식의 무선 통신을 지원합니다. 각각의 방식이 갖는 장단점이 있으므로 상황에 맞추어 적절한 통신 방식을 선택하면 됩니다.</p>\n<table>\n  <thead>\n      <tr>\n          <th>ESP32 통신모드</th>\n          <th>블루투스</th>\n          <th>wifi Station Mode</th>\n          <th>wifi AP Mode</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>라우터</td>\n          <td>불필요</td>\n          <td>필요</td>\n          <td>불필요</td>\n      </tr>\n      <tr>\n          <td>통신거리</td>\n          <td>10m 이내 (장애물에 약함)</td>\n          <td>일반적인 wifi 도달 거리와 동일</td>\n          <td>좌동</td>\n      </tr>\n      <tr>\n          <td>전력</td>\n          <td>저전력</td>\n          <td>블루투스 통신에 비해 사용량 큼</td>\n          <td>좌동</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<p>학교에서 ESP32를 이용하는 경우,</p>\n<ul>\n<li>다양한 형태의 과학 실험에 대응할 수 있어야 함</li>\n<li>과학실 내부 혹은 야외에서도 이용할 수 있도록 이동이 편리해야 함\n<ul>\n<li>기본적으로 라우터에 종속되지 않는 것이 좋음</li>\n</ul>\n</li>\n<li>디스플레이 장치는 학생이 본인의 스마트폰을 이용할 수 있어야 함\n<ul>\n<li>별도의 OLED, LCD와 같은 디스플레이를 이용하는 경우, 실험장치의 배선이 복잡해짐</li>\n<li>단, OLED나 LCD를 활용하는 경우 흥미 유발에 도움을 줌</li>\n</ul>\n</li>\n</ul>\n<br>\n<p>위 사항을 고려할 때 ESP32를 통해 여러 가지 실험을 하고 결과를 도출하는 환경의 다양성을 수용하기 위하여, AP mode가 가장 적합하다고 판단하여 이를 사용해보고자 합니다.</p>\n<br>\n<br>\n<h3 id=\"ap-mode-설정\">AP mode 설정<a class=\"anchor\" href=\"#ap-mode-%ec%84%a4%ec%a0%95\">#</a></h3>\r\n<p>참고: <a href=\"https://randomnerdtutorials.com/esp32-access-point-ap-web-server/\">https://randomnerdtutorials.com/esp32-access-point-ap-web-server/</a></p>\n<ul>\n<li>\n<p>ssid, password 설정</p>\n<ul>\n<li>과학실에서 모둠별로 별도의 ESP32를 이용한다면, 각 모둠에서 사용하는 ESP32를 구분할 수 있도록 ssid에 각 모둠의 번호를 적어두는 것이 좋을 것입니다. 동일한 ssid가 설정되면 다른 모둠의 데이터 값을 받을 수 있으므로, 반드시 구분짓도록 안내해야 합니다.</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> ssid <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;ESP32-AP-x&#34;</span>;      <span style=\"color:#75715e\">// max 63 characters, x is team number\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> password <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;123456789&#34;</span>;   <span style=\"color:#75715e\">// min 8 characters \n</span></span></span></code></pre></div></li>\n<li>\n<p>AP mode 실행: 위의 설정에 의해 다음의 라인을 통해 AP mode를 실행합니다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>WiFi.<span style=\"color:#a6e22e\">softAP</span>(ssid, password);</span></span></code></pre></div></li>\n<li>\n<p>AP mode 실행 옵션: ssid, password 이외의 다양한 옵션을 추가할 경우에는 아래의 방법으로 설정하고 AP mode를 실행합니다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>WiFi.<span style=\"color:#a6e22e\">softAP</span>(<span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> ssid, <span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span><span style=\"color:#f92672\">*</span> password, <span style=\"color:#66d9ef\">int</span> channel, <span style=\"color:#66d9ef\">int</span> ssid_hidden, <span style=\"color:#66d9ef\">int</span> max_connection)</span></span></code></pre></div><ul>\n<li>channel: Wi-Fi channel number (1-13)</li>\n<li>ssid_hidden: (0 = broadcast SSID, 1 = hide SSID)</li>\n<li>max_connection: maximum simultaneous connected clients (1-4)</li>\n</ul>\n</li>\n<li>\n<p>AP mode 실행시 ESP32에 부여된 IP는 다음의 방법으로 확인할 수 있습니다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>IPAddress IP <span style=\"color:#f92672\">=</span> WiFi.<span style=\"color:#a6e22e\">softAPIP</span>();\n</span></span><span style=\"display:flex;\"><span>Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;AP IP address: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>Serial.<span style=\"color:#a6e22e\">println</span>(IP);</span></span></code></pre></div><ul>\n<li>AP mode를 사용할 경우, ESP32는 기본적으로 <strong>192.168.4.1</strong>의 주소를 부여 받습니다.</li>\n</ul>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"websocket\">Websocket<a class=\"anchor\" href=\"#websocket\">#</a></h3>\r\n<p>참고: <a href=\"http://www.martyncurrey.com/esp8266-and-the-arduino-ide-part-10a-iot-website-temperature-and-humidity-monitor/\">Martyn Currey Blog</a></p>\n<br>\n<h4 id=\"왜-웹소켓을-사용하는가\">왜 웹소켓을 사용하는가?<a class=\"anchor\" href=\"#%ec%99%9c-%ec%9b%b9%ec%86%8c%ec%bc%93%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%eb%8a%94%ea%b0%80\">#</a></h4>\r\n<p>이 문서는 학생들의 스마트폰을 클라이언트로 활용하여 과학실험을 하는 상황을 전제로,  ESP32에 웹브라우저를 통해 접속하여 실험결과 값을 모니터링하려고 합니다. 실험의 성격에 따라 웹페이지를 refresh하면서 모니터링하는 것이 좋을 수도 있고, refresh하지 않아도 결과값이 update되는 것이 더 좋을 수도 있겠지만, 여기서는 후자의 방법을 택하여 결과값을 나타내보도록 하겠습니다. 이때 필요한 기술이 웹소켓입니다.</p>\n<br>\n<h4 id=\"웹소켓\">웹소켓<a class=\"anchor\" href=\"#%ec%9b%b9%ec%86%8c%ec%bc%93\">#</a></h4>\r\n<p>WebSocket은 TCP 연결을 사용하여 서버와 클라이언트 사이의 지속적인 양방향 통신을 허용하는 방법입니다. 이를 통해 클라이언트에서 서버로, 서버에서 클라이언트로 데이터를 언제든지 보낼 수 있습니다.</p>\n<p>WebSocket을 활용하기 이전에는, 일반적인 HTML 방식이나 AJAX(Asynchronous Javascript And XML)와 같은 비동기식 방법을 사용하여 센서값을 클라이언트에게 전송하는 방식을 사용했습니다. 단, 이 방법은 새로운 센서값이 발생하더라도 동시에 여러 개의 탭 (동일하거나 다른 장치에 있음)이 열려있다면 상태가 모두 업데이트되지 않는 다는 단점이 있습니다. 그렇기 때문에 웹페이지 전체를 refresh하거나 웹페이지의 일부분만이라도 새롭게 로드해야만 변경사항이 반영시켜야만 했습니다.</p>\n<p>이를 보완하기 위해 WebSocket 프로토콜을 사용할 수 있습니다. WebSocket은 변경 사항이 발생하면 모든 클라이언트에 알림을 보내고 그에 따라 웹 페이지를 업데이트 합니다.</p>\n<p>클라이언트는 WebSocket 핸드 셰이크라는 프로세스를 통해 서버와 WebSocket 연결을 설정합니다. 핸드 셰이크는 HTTP request와 response로 시작하여 서버가 동일한 포트에서 WebSocket 연결뿐만 아니라 HTTP 연결을 처리 할 수 있도록 합니다. 연결이 설정되면 클라이언트와 서버는 WebSocket 데이터를 full duplex 모드로 보낼 수 있습니다. 즉, WebSockets 프로토콜을 사용하여 서버 (ESP32 보드)는 요청없이 클라이언트 또는 모든 클라이언트에 정보를 보낼 수 있습니다. 이를 통해 변경 사항이 발생할 때 웹 브라우저에 정보를 보낼 수도 있습니다.</p>\n<br>\n<h4 id=\"라이브러리\">라이브러리<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac\">#</a></h4>\r\n<p>ESP32에서는 Markus Sattler가 만든 <a href=\"https://github.com/Links2004/arduinoWebSockets\">Websockets</a>라는 라이브러리를 통해 구현합니다.</p>\n<p><img src=\"/image/websocket01.png\" alt=\"\" /></p>\n<br>\n<br>\n<h4 id=\"sketch-전체\">sketch: 전체<a class=\"anchor\" href=\"#sketch-%ec%a0%84%ec%b2%b4\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// HTTP headers always start with a response code (e.g. HTTP/1.1 200 OK)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// and a content-type so the client knows what&#39;s coming, then a blank line:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>String html_header <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;HTTP/1.1 200 OK</span><span style=\"color:#ae81ff\">\\r\\n</span><span style=\"color:#e6db74\">Content-Type: text/html</span><span style=\"color:#ae81ff\">\\r\\n\\r\\n</span><span style=\"color:#e6db74\">&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// HTTP main page\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>String html_main <span style=\"color:#f92672\">=</span> R<span style=\"color:#e6db74\">&#34;=====(</span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;!</span>DOCTYPE html<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;</span>html<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;</span>head<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;</span>meta name<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>viewport<span style=\"color:#960050;background-color:#1e0010\">&#39;</span> content<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>width<span style=\"color:#f92672\">=</span>device<span style=\"color:#f92672\">-</span>width, initial<span style=\"color:#f92672\">-</span>scale<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1.0</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">/&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;</span>meta charset<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>utf<span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">8</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;</span>style<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>    body     { font<span style=\"color:#f92672\">-</span>size:<span style=\"color:#ae81ff\">100</span><span style=\"color:#f92672\">%</span>;} \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#960050;background-color:#1e0010\">#</span>main    { display: table; width: <span style=\"color:#ae81ff\">300</span>px; margin: <span style=\"color:#66d9ef\">auto</span>;  padding: <span style=\"color:#ae81ff\">10</span>px <span style=\"color:#ae81ff\">10</span>px <span style=\"color:#ae81ff\">10</span>px <span style=\"color:#ae81ff\">10</span>px; border: <span style=\"color:#ae81ff\">3</span>px solid blue; border<span style=\"color:#f92672\">-</span>radius: <span style=\"color:#ae81ff\">10</span>px; text<span style=\"color:#f92672\">-</span>align:center;} \n</span></span><span style=\"display:flex;\"><span>    p        { font<span style=\"color:#f92672\">-</span>size: <span style=\"color:#ae81ff\">100</span><span style=\"color:#f92672\">%</span>; }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;/</span>style<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;</span>title<span style=\"color:#f92672\">&gt;</span>ESP32 Websockets Sensor Monitor<span style=\"color:#f92672\">&lt;/</span>title<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;/</span>head<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;</span>body<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;</span>div id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>main<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#f92672\">&lt;</span>h3<span style=\"color:#f92672\">&gt;</span>ESP32 Websockets Monitor<span style=\"color:#f92672\">&lt;/</span>h3<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#f92672\">&lt;</span>div id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>content<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#f92672\">&lt;</span>p<span style=\"color:#f92672\">&gt;</span>Potentiometer1 <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">&lt;</span>span id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>potentiometer1<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span><span style=\"color:#ae81ff\">00</span><span style=\"color:#f92672\">&lt;/</span>span<span style=\"color:#f92672\">&gt;</span> Ohm<span style=\"color:#f92672\">&lt;/</span>p<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#f92672\">&lt;</span>p<span style=\"color:#f92672\">&gt;</span>Potentiometer2 <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">&lt;</span>span id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>potentiometer2<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span><span style=\"color:#ae81ff\">00</span><span style=\"color:#f92672\">&lt;/</span>span<span style=\"color:#f92672\">&gt;</span> Ohm<span style=\"color:#f92672\">&lt;/</span>p<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#f92672\">&lt;</span>p<span style=\"color:#f92672\">&gt;</span>Touch Sensor   <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">&lt;</span>span id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>touch<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span><span style=\"color:#ae81ff\">00</span><span style=\"color:#f92672\">&lt;/</span>span<span style=\"color:#f92672\">&gt;</span> Value<span style=\"color:#f92672\">&lt;/</span>p<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#f92672\">&lt;</span>p<span style=\"color:#f92672\">&gt;</span>Brightness     <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">&lt;</span>span id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>brightness<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span><span style=\"color:#ae81ff\">00</span><span style=\"color:#f92672\">&lt;/</span>span<span style=\"color:#f92672\">&gt;</span> Value<span style=\"color:#f92672\">&lt;/</span>p<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#f92672\">&lt;</span>p<span style=\"color:#f92672\">&gt;</span>Data <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">&lt;</span>span id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>recData<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span><span style=\"color:#ae81ff\">00</span><span style=\"color:#f92672\">&lt;/</span>span<span style=\"color:#f92672\">&gt;&lt;/</span>p<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#f92672\">&lt;/</span>div<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#f92672\">&lt;</span>br <span style=\"color:#f92672\">/&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;/</span>div<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;/</span>body<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;</span>script<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  var Socket;\n</span></span><span style=\"display:flex;\"><span>    function <span style=\"color:#a6e22e\">init</span>() {\n</span></span><span style=\"display:flex;\"><span>      Socket <span style=\"color:#f92672\">=</span> new <span style=\"color:#a6e22e\">WebSocket</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>ws:<span style=\"color:#75715e\">//&#39; + window.location.hostname + &#39;:81/&#39;);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      Socket.onmessage <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">function</span>(event) { <span style=\"color:#a6e22e\">processReceivedCommand</span>(event); };\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  function <span style=\"color:#a6e22e\">processReceivedCommand</span>(evt) {\n</span></span><span style=\"display:flex;\"><span>    var data <span style=\"color:#f92672\">=</span> evt.data;\n</span></span><span style=\"display:flex;\"><span>    document.<span style=\"color:#a6e22e\">getElementById</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>recData<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>).innerHTML <span style=\"color:#f92672\">=</span> data;\n</span></span><span style=\"display:flex;\"><span>    var tmp <span style=\"color:#f92672\">=</span> data.<span style=\"color:#a6e22e\">split</span>(<span style=\"color:#e6db74\">&#39;|&#39;</span>);\n</span></span><span style=\"display:flex;\"><span>    document.<span style=\"color:#a6e22e\">getElementById</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>potentiometer1<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>).innerHTML <span style=\"color:#f92672\">=</span> tmp[<span style=\"color:#ae81ff\">0</span>];  \n</span></span><span style=\"display:flex;\"><span>    document.<span style=\"color:#a6e22e\">getElementById</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>potentiometer2<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>).innerHTML <span style=\"color:#f92672\">=</span> tmp[<span style=\"color:#ae81ff\">1</span>];\n</span></span><span style=\"display:flex;\"><span>    document.<span style=\"color:#a6e22e\">getElementById</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>touch<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>).innerHTML <span style=\"color:#f92672\">=</span> tmp[<span style=\"color:#ae81ff\">2</span>];\n</span></span><span style=\"display:flex;\"><span>    document.<span style=\"color:#a6e22e\">getElementById</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>brightness<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>).innerHTML <span style=\"color:#f92672\">=</span> tmp[<span style=\"color:#ae81ff\">3</span>];\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//consol.log(evt.data);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  function <span style=\"color:#a6e22e\">sendText</span>(data) { Socket.<span style=\"color:#a6e22e\">send</span>(data); }\n</span></span><span style=\"display:flex;\"><span>  window.onload <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">function</span>(e) { <span style=\"color:#a6e22e\">init</span>(); }\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;/</span>script<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;/</span>html<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>)<span style=\"color:#f92672\">=====</span><span style=\"color:#e6db74\">&#34;;</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;WiFi.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;WiFiClient.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;WiFiAP.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;WebSocketsServer.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Sensors are connected to GPIO 32~35\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> potPin1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">34</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> potPin2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">33</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> touPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">35</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> briPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">32</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// variable for storing the potentiometer value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> potentiometer1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> potentiometer2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> touch <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> brightness <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Set these to your desired credentials.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span> <span style=\"color:#f92672\">*</span>ssid <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;ESP32-AP&#34;</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">char</span> <span style=\"color:#f92672\">*</span>password <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;123456789&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>WiFiServer <span style=\"color:#a6e22e\">server</span>(<span style=\"color:#ae81ff\">80</span>);\n</span></span><span style=\"display:flex;\"><span>WebSocketsServer webSocket <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">WebSocketsServer</span>(<span style=\"color:#ae81ff\">81</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Configuring access point...&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// You can remove the password parameter if you want the AP to be open.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  WiFi.<span style=\"color:#a6e22e\">softAP</span>(ssid, password);\n</span></span><span style=\"display:flex;\"><span>  IPAddress myIP <span style=\"color:#f92672\">=</span> WiFi.<span style=\"color:#a6e22e\">softAPIP</span>();\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;AP IP address: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(myIP);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// start a server\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  server.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Server started&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// start the websocket\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  webSocket.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;websocket started&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// webSocketEvent is the function to call when there is a websocket event\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  webSocket.<span style=\"color:#a6e22e\">onEvent</span>(webSocketEvent);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// check the websocket status.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  webSocket.<span style=\"color:#a6e22e\">loop</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// listen for incoming clients\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  WiFiClient client <span style=\"color:#f92672\">=</span> server.<span style=\"color:#a6e22e\">available</span>();   \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// if you get a client,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span> (client) {\n</span></span><span style=\"display:flex;\"><span>    client.<span style=\"color:#a6e22e\">flush</span>();\n</span></span><span style=\"display:flex;\"><span>    client.<span style=\"color:#a6e22e\">print</span>( html_header );\n</span></span><span style=\"display:flex;\"><span>    client.<span style=\"color:#a6e22e\">print</span>( html_main ); \n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;New page served&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">updateSensors</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">updateSensors</span>(){\n</span></span><span style=\"display:flex;\"><span>  potentiometer1 <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(potPin1);\n</span></span><span style=\"display:flex;\"><span>  potentiometer2 <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(potPin2);\n</span></span><span style=\"display:flex;\"><span>  touch <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(touPin);\n</span></span><span style=\"display:flex;\"><span>  brightness <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(briPin);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  String data <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> potentiometer1); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;|&#34;</span>); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> potentiometer2); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;|&#34;</span>); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> touch); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;|&#34;</span>); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> brightness); \n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  webSocket.<span style=\"color:#a6e22e\">broadcastTXT</span>(data); <span style=\"color:#75715e\">// send the data\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">println</span>(data);         <span style=\"color:#75715e\">// display the data in the serial monitor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">webSocketEvent</span>(byte num, WStype_t type, <span style=\"color:#66d9ef\">uint8_t</span> <span style=\"color:#f92672\">*</span> payload, <span style=\"color:#66d9ef\">size_t</span> length){\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;WStype = &#34;</span>);   Serial.<span style=\"color:#a6e22e\">println</span>(type);  \n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;WS payload = &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; i <span style=\"color:#f92672\">&lt;</span> length; i<span style=\"color:#f92672\">++</span>) { Serial.<span style=\"color:#a6e22e\">print</span>((<span style=\"color:#66d9ef\">char</span>) payload[i]); }\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h4 id=\"part1-웹페이지\">Part1: 웹페이지<a class=\"anchor\" href=\"#part1-%ec%9b%b9%ed%8e%98%ec%9d%b4%ec%a7%80\">#</a></h4>\r\n<h5 id=\"header\">header<a class=\"anchor\" href=\"#header\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// HTTP headers always start with a response code (e.g. HTTP/1.1 200 OK)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// and a content-type so the client knows what&#39;s coming, then a blank line:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>String html_header <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;HTTP/1.1 200 OK</span><span style=\"color:#ae81ff\">\\r\\n</span><span style=\"color:#e6db74\">Content-Type: text/html</span><span style=\"color:#ae81ff\">\\r\\n\\r\\n</span><span style=\"color:#e6db74\">&#34;</span>;</span></span></code></pre></div><br>\n<h5 id=\"main_head\">main_head<a class=\"anchor\" href=\"#main_head\">#</a></h5>\r\n<ul>\n<li>style을 지정합니다.</li>\n<li>웹브라우저의 탭에 표기될 title을 지정합니다.</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// HTTP main page\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>String html_main <span style=\"color:#f92672\">=</span> R<span style=\"color:#e6db74\">&#34;=====(</span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;!</span>DOCTYPE html<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;</span>html<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;</span>head<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;</span>meta name<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>viewport<span style=\"color:#960050;background-color:#1e0010\">&#39;</span> content<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>width<span style=\"color:#f92672\">=</span>device<span style=\"color:#f92672\">-</span>width, initial<span style=\"color:#f92672\">-</span>scale<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1.0</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">/&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;</span>meta charset<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>utf<span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">8</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;</span>style<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>    body     { font<span style=\"color:#f92672\">-</span>size:<span style=\"color:#ae81ff\">100</span><span style=\"color:#f92672\">%</span>;} \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#960050;background-color:#1e0010\">#</span>main    { display: table; width: <span style=\"color:#ae81ff\">300</span>px; margin: <span style=\"color:#66d9ef\">auto</span>;  padding: <span style=\"color:#ae81ff\">10</span>px <span style=\"color:#ae81ff\">10</span>px <span style=\"color:#ae81ff\">10</span>px <span style=\"color:#ae81ff\">10</span>px; border: <span style=\"color:#ae81ff\">3</span>px solid blue; border<span style=\"color:#f92672\">-</span>radius: <span style=\"color:#ae81ff\">10</span>px; text<span style=\"color:#f92672\">-</span>align:center;} \n</span></span><span style=\"display:flex;\"><span>    p        { font<span style=\"color:#f92672\">-</span>size: <span style=\"color:#ae81ff\">100</span><span style=\"color:#f92672\">%</span>; }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;/</span>style<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;</span>title<span style=\"color:#f92672\">&gt;</span>ESP32 Websockets Sensor Monitor<span style=\"color:#f92672\">&lt;/</span>title<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;/</span>head<span style=\"color:#f92672\">&gt;</span></span></span></code></pre></div><ul>\n<li>R은 <strong>이러한 구분 기호 사이의 모든 것을 원시 문자열로 처리</strong>하라는 것을 의미합니다. 즉, &ldquo;===== (     ) =====&ldquo;사이의 모든 것을 문자열로 처리합니다.\n<ul>\n<li>여기서 사용한 &lsquo;&rsquo;=====&lsquo;&lsquo;는 특정 범위 내에서 다른 형태로 바꿔서 사용하는 것이 가능합니다.\n<ul>\n<li>예를들어, This is &ldquo;text&quot;를 문자열로 할당하기 위해 R &ldquo;-= (This is&quot;text &ldquo;) =-&ldquo;를 사용할 수 있습니다.</li>\n</ul>\n</li>\n<li>문자열 길고 다양한 형태의 기호나 특수문자를 포함하는 경우,  이러한 방식을 사용하는 것이 좋습니다.\n<ul>\n<li>This is &ldquo;text&quot;를 문자열로 처리하려면, &quot; 앞에 각각 \\를 덧붙여야 합니다. 즉 This is \\&ldquo;로 작성되어야합니다.</li>\n</ul>\n</li>\n<li>주의할 점은 ===== 가 텍스트 어디에도 표시되지 않아야합니다.</li>\n</ul>\n</li>\n</ul>\n<br>\n<h5 id=\"main_body\">main_body<a class=\"anchor\" href=\"#main_body\">#</a></h5>\r\n<ul>\n<li>웹브라우저에 표기될 내용을 만듭니다.</li>\n<li>span id는 아두이노코드에서 사용하는 센서값 변수를 사용합니다.</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;</span>body<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;</span>div id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>main<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#f92672\">&lt;</span>h3<span style=\"color:#f92672\">&gt;</span>ESP32 Websockets Monitor<span style=\"color:#f92672\">&lt;/</span>h3<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#f92672\">&lt;</span>div id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>content<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#f92672\">&lt;</span>p<span style=\"color:#f92672\">&gt;</span>Potentiometer1 <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">&lt;</span>span id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>potentiometer1<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span><span style=\"color:#ae81ff\">00</span><span style=\"color:#f92672\">&lt;/</span>span<span style=\"color:#f92672\">&gt;</span> Ohm<span style=\"color:#f92672\">&lt;/</span>p<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#f92672\">&lt;</span>p<span style=\"color:#f92672\">&gt;</span>Potentiometer2 <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">&lt;</span>span id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>potentiometer2<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span><span style=\"color:#ae81ff\">00</span><span style=\"color:#f92672\">&lt;/</span>span<span style=\"color:#f92672\">&gt;</span> Ohm<span style=\"color:#f92672\">&lt;/</span>p<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#f92672\">&lt;</span>p<span style=\"color:#f92672\">&gt;</span>Touch Sensor   <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">&lt;</span>span id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>touch<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span><span style=\"color:#ae81ff\">00</span><span style=\"color:#f92672\">&lt;/</span>span<span style=\"color:#f92672\">&gt;</span> Value<span style=\"color:#f92672\">&lt;/</span>p<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#f92672\">&lt;</span>p<span style=\"color:#f92672\">&gt;</span>Brightness     <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">&lt;</span>span id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>brightness<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span><span style=\"color:#ae81ff\">00</span><span style=\"color:#f92672\">&lt;/</span>span<span style=\"color:#f92672\">&gt;</span> Value<span style=\"color:#f92672\">&lt;/</span>p<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#f92672\">&lt;</span>p<span style=\"color:#f92672\">&gt;</span>Data <span style=\"color:#f92672\">=</span> <span style=\"color:#f92672\">&lt;</span>span id<span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">&#39;</span>recData<span style=\"color:#960050;background-color:#1e0010\">&#39;</span><span style=\"color:#f92672\">&gt;</span><span style=\"color:#ae81ff\">00</span><span style=\"color:#f92672\">&lt;/</span>span<span style=\"color:#f92672\">&gt;&lt;/</span>p<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#f92672\">&lt;/</span>div<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#f92672\">&lt;</span>br <span style=\"color:#f92672\">/&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#f92672\">&lt;/</span>div<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;/</span>body<span style=\"color:#f92672\">&gt;</span></span></span></code></pre></div><br>\n<h5 id=\"javascript\">JavaScript<a class=\"anchor\" href=\"#javascript\">#</a></h5>\r\n<ul>\n<li>데이터가 수신되어 Websocket 이벤트가 생기면 웹사이트의 자바스크립트를 통해 <strong>processReceivedCommand()</strong> 함수가 호출 됩니다. 이 함수는 수신된 데이터를 <strong>배열</strong> <strong>tmp</strong>로 분해한 다음 개별 배열 요소를 웹사이트의 각 부분에 복사합니다.</li>\n<li>데이터가 <strong>potentiometer1|potentiometer2|touch|brightness</strong> 형식으로 수신되면, 막대 문자를 기준으로 데이터를 tmp[] 배열로 분할하여 저장합니다. 분할 기준인 막대문자는 <strong>var tmp = data.split (‘|’)</strong> 문을 통해 지정합니다.</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;</span>script<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>  var Socket;\n</span></span><span style=\"display:flex;\"><span>    function <span style=\"color:#a6e22e\">init</span>() {\n</span></span><span style=\"display:flex;\"><span>      Socket <span style=\"color:#f92672\">=</span> new <span style=\"color:#a6e22e\">WebSocket</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>ws:<span style=\"color:#75715e\">//&#39; + window.location.hostname + &#39;:81/&#39;);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      Socket.onmessage <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">function</span>(event) { <span style=\"color:#a6e22e\">processReceivedCommand</span>(event); };\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  function <span style=\"color:#a6e22e\">processReceivedCommand</span>(evt) {\n</span></span><span style=\"display:flex;\"><span>    var data <span style=\"color:#f92672\">=</span> evt.data;\n</span></span><span style=\"display:flex;\"><span>    document.<span style=\"color:#a6e22e\">getElementById</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>recData<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>).innerHTML <span style=\"color:#f92672\">=</span> data;\n</span></span><span style=\"display:flex;\"><span>    var tmp <span style=\"color:#f92672\">=</span> data.<span style=\"color:#a6e22e\">split</span>(<span style=\"color:#e6db74\">&#39;|&#39;</span>);\n</span></span><span style=\"display:flex;\"><span>    document.<span style=\"color:#a6e22e\">getElementById</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>potentiometer1<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>).innerHTML <span style=\"color:#f92672\">=</span> tmp[<span style=\"color:#ae81ff\">0</span>];  \n</span></span><span style=\"display:flex;\"><span>    document.<span style=\"color:#a6e22e\">getElementById</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>potentiometer2<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>).innerHTML <span style=\"color:#f92672\">=</span> tmp[<span style=\"color:#ae81ff\">1</span>];\n</span></span><span style=\"display:flex;\"><span>    document.<span style=\"color:#a6e22e\">getElementById</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>touch<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>).innerHTML <span style=\"color:#f92672\">=</span> tmp[<span style=\"color:#ae81ff\">2</span>];\n</span></span><span style=\"display:flex;\"><span>    document.<span style=\"color:#a6e22e\">getElementById</span>(<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>brightness<span style=\"color:#960050;background-color:#1e0010\">&#39;</span>).innerHTML <span style=\"color:#f92672\">=</span> tmp[<span style=\"color:#ae81ff\">3</span>];\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">//consol.log(evt.data);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  function <span style=\"color:#a6e22e\">sendText</span>(data) { Socket.<span style=\"color:#a6e22e\">send</span>(data); }\n</span></span><span style=\"display:flex;\"><span>  window.onload <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">function</span>(e) { <span style=\"color:#a6e22e\">init</span>(); }\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;/</span>script<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">&lt;/</span>html<span style=\"color:#f92672\">&gt;</span>\n</span></span><span style=\"display:flex;\"><span>)<span style=\"color:#f92672\">=====</span><span style=\"color:#e6db74\">&#34;;</span></span></span></code></pre></div><br>\n<h5 id=\"html-분리-선택사항\">html 분리 (선택사항)<a class=\"anchor\" href=\"#html-%eb%b6%84%eb%a6%ac-%ec%84%a0%ed%83%9d%ec%82%ac%ed%95%ad\">#</a></h5>\r\n<p>String형태로 지정된 자바스크립트를 포함하는 html 페이지를 표현하는 코드의 전체 길이로 인해 스케치가 복잡해보이므로, 전체 스케치의 상단에 있는 html 부분을 분리해도 됩니다. 파일은 분리되지만 컴파일 될때마다 메인 스케치에 포함될 것입니다. (혹은 ESP32의 SPIFFS를 사용하여 별도의 파일 형태로 업로드해도 됩니다.)</p>\n<ul>\n<li>\n<p>Arduino IDE의 오른쪽 상단에 있는 작은 아래방향 화살표 클릭한 뒤 <strong>New Tab</strong> 선택</p>\n<p><img src=\"/image/websocket02.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>콘솔의 텍스트 상자에 분리하여 저장할 html 파일이름을 입력한 뒤 확인 클릭</p>\n<ul>\n<li>확장자는 .h로 사용 (※ 단, <strong>.html</strong> 확장자는 사용할 수 없음)</li>\n</ul>\n<p><img src=\"/image/websocket03.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>Arduino IDE에 새로운 탭이 열리면, html_header와 html_main을 포함한 두개의 String 문을 복사하여 mainpage.h 탭에 붙여넣기 한 뒤 저장 (스케치가 위치한 폴더에 별도로 저장됨)</p>\n<p><img src=\"/image/websocket04.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>분리된 html 파일을 메인 스케치에 include문을 사용하여 삽입한 뒤 저장</p>\n<p><img src=\"/image/websocket05.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>Arduino IDE에서 메인 스케치를 열면, 별도의 탭에 분리된 html 파일도 함께 열림</p>\n</li>\n</ul>\n<br>\n<br>\n<h4 id=\"part2-메인-스케치\">Part2: 메인 스케치<a class=\"anchor\" href=\"#part2-%eb%a9%94%ec%9d%b8-%ec%8a%a4%ec%bc%80%ec%b9%98\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">updateSensors</span>(){\n</span></span><span style=\"display:flex;\"><span>  potentiometer1 <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(potPin1);\n</span></span><span style=\"display:flex;\"><span>  potentiometer2 <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(potPin2);\n</span></span><span style=\"display:flex;\"><span>  touch <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(touPin);\n</span></span><span style=\"display:flex;\"><span>  brightness <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(briPin);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  String data <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> potentiometer1); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;|&#34;</span>); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> potentiometer2); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;|&#34;</span>); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> touch); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> <span style=\"color:#e6db74\">&#34;|&#34;</span>); \n</span></span><span style=\"display:flex;\"><span>  data <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">String</span>(data <span style=\"color:#f92672\">+</span> brightness); \n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  webSocket.<span style=\"color:#a6e22e\">broadcastTXT</span>(data); <span style=\"color:#75715e\">// send the data\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">println</span>(data);         <span style=\"color:#75715e\">// display the data in the serial monitor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><ul>\n<li>센서값은 updateSensor() 함수를 통해 불러옵니다.</li>\n<li>4종류의 센서값을 막대 문자(&quot;|&quot;)를 사용하여 연결한 뒤, <strong>String</strong> 형식의 data 변수에 모두 저장한 뒤, **webSocket.broadcastTXT(data)**을 사용하여 html로 보냅니다. String 형식은 메모리를 많이 사용하는 단점이 있지만, chars에 비해 데이터 처리가 간단해지므로 유용하게 사용할 수 있다. 더구나 ESP32의 내장 메모리는 일반적인 경우 충분히 큰 편에 속한다.</li>\n</ul>\n<br>\n<br>\n<h3 id=\"결과\">결과<a class=\"anchor\" href=\"#%ea%b2%b0%ea%b3%bc\">#</a></h3>\r\n<ul>\n<li>\n<p>ESP32를 AP모드로 동작하도록 하였으므로, 클라이언트에서 ESP32의 SSID를 찾아 접속한다. 예를들면,</p>\n<ul>\n<li>SSID : ESP32-AP-1</li>\n<li>PASS : 123456789</li>\n</ul>\n</li>\n<li>\n<p>클라이언트의 웹브라우저를 통해, ESP32에 접속한다.</p>\n<ul>\n<li>(주소창에) 192.168.4.1</li>\n</ul>\n</li>\n<li>\n<p>결과 확인</p>\n<p><img src=\"../image/websocket06.png\" alt=\"\" /></p>\n<p>실시간으로 센서값이 변경되는 것을 확인할 수 있습니다.</p>\n</li>\n</ul>\n"}{"uri":"http://localhost:1313/posts/%EC%97%91%EC%85%80-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9C%A0%ED%9A%A8%EC%84%B1%EA%B2%80%EC%82%AC-%EB%8F%99%EC%A0%81%EB%B2%94%EC%9C%84%EC%84%A4%EC%A0%95/","title":"엑셀, 데이터 유효성 검사의 목록 구성시 동적 범위 설정","content":"<p>데이터 유효성 검사를 할 때, 상황에 따라서 목록 구성이 다르게 표시되는 방법을 알아보겠습니다. 일단 다음의 경우를 예로 들면,</p>\n<p><img src=\"/image/dynamic01.png\" alt=\"\" /></p>\n<p>학교급(초등, 중등, 고등 등)을 선택하였을 때, 초등을 선택하면 학년을 선택하는 셀에서 1<del>6학년까지 6개의 목록을 선택할 수 있도록 표시되고, 중등을 선택하면 7</del>9학년,  고등을 선택하면 10~12학년을 선택할 수 있는 목록이 표시되도록 하는 것을 의미합니다. 또 학년마다 학급수가 다르기 때문에 각 학년을 선택하였을 때, 그 학년의 학급수만큼 학급 목록이 뜨도록 하면 더 좋겠죠. 이렇게 상황에 따라 목록이 유동적으로 표시되도록 하면, 데이터를 취합하는 입장에서 오류를 줄일 수 있는 상황을 기대할 수 있습니다.</p>\n<br>\n<br>\n<h3 id=\"목록-구성-설정\">목록 구성 설정<a class=\"anchor\" href=\"#%eb%aa%a9%eb%a1%9d-%ea%b5%ac%ec%84%b1-%ec%84%a4%ec%a0%95\">#</a></h3>\r\n<p>먼저 <strong>설정</strong> 시트를 만들고 조건으로 사용할 목록을 구성해보겠습니다. 여기서는 두가지가 필요한데</p>\n<ul>\n<li>학교급에 따른 학년범위 설정 :  초등은 1<del>6학년, 중등은 7</del>9학년, 고등은 10~12학년, 국제와 유치는 학년개념이 없으므로 그대로 국제와 유치로 설정</li>\n<li>학년에 따른 학급범위 설정 : 국제는 국제반, 유치는 토끼/사슴/기린반으로 나뉘고 그밖의 1~12학년까지 각 학년별 학급수를 나타냅니다.</li>\n</ul>\n<p><img src=\"/image/dynamic02.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"이름-만들기\">이름 만들기<a class=\"anchor\" href=\"#%ec%9d%b4%eb%a6%84-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h3>\r\n<p>예를 들어서 설명하는 것이 가장 좋을 것 같네요. <strong>수식</strong>&gt; <strong>이름 관리자</strong>를 클릭한 후 <strong>새로 만들기</strong>를 클릭</p>\n<p><img src=\"/image/dynamic03.png\" alt=\"\" /></p>\n<ul>\n<li>이름 : <strong>학교급_초등</strong></li>\n<li>참조 대상 : <strong>설정!$C$3:$C$8</strong></li>\n</ul>\n<p>즉, C2셀을 이름으로 하고, 학년의 범위를 나타내는 C3~C8셀까지를 참조 대상으로 하는 이름을 만드는 것이죠.</p>\n<br>\n<h4 id=\"반복하여-이름-만들기\">반복하여 이름 만들기<a class=\"anchor\" href=\"#%eb%b0%98%eb%b3%b5%ed%95%98%ec%97%ac-%ec%9d%b4%eb%a6%84-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h4>\r\n<p>이제 같은 방법으로, A2, B2, D2, E2, A11~N11 셀을 이름으로 반복하여 새 이름을 만듭니다.</p>\n<br>\n<h4 id=\"-이름-만들기-할-때-고려할-점\">※ 이름 만들기 할 때 고려할 점<a class=\"anchor\" href=\"#-%ec%9d%b4%eb%a6%84-%eb%a7%8c%eb%93%a4%ea%b8%b0-%ed%95%a0-%eb%95%8c-%ea%b3%a0%eb%a0%a4%ed%95%a0-%ec%a0%90\">#</a></h4>\r\n<p>예를 들어 6학년의 경우 1~4반까지 있지만, 차기 학년도에 학급수가 6개반으로 증가하게 되면 참조 대상을 다시 수정해주어야 하는 불편한 점이 생길 수 있습니다. 그러므로 학급수 같이 유동적인 데이터는 참조 대상을 여유있게 지정해두는 것이 좋습니다.</p>\n<ul>\n<li>이름 : <strong>학년6_반</strong></li>\n<li>참조 대상 : <strong>설정!$H$12:$H$22</strong>   (<strong>설정!$H$12:$H$15</strong> 로 지정하지말고 여유있게 지정하는 것을 추천)</li>\n</ul>\n<br>\n<br>\n<h3 id=\"적용\">적용<a class=\"anchor\" href=\"#%ec%a0%81%ec%9a%a9\">#</a></h3>\r\n<p>실제 적용될 부분을 만듭니다. 여기서는 J4~L6 부분이 되겠네요.</p>\n<p><img src=\"/image/dynamic04.png\" alt=\"\" /></p>\n<br>\n<h3 id=\"데이터-유효성-검사\">데이터 유효성 검사<a class=\"anchor\" href=\"#%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%9c%a0%ed%9a%a8%ec%84%b1-%ea%b2%80%ec%82%ac\">#</a></h3>\r\n<h4 id=\"학교급\">학교급<a class=\"anchor\" href=\"#%ed%95%99%ea%b5%90%ea%b8%89\">#</a></h4>\r\n<ol>\n<li>J4셀 : <strong>학교급</strong>이라는 제목을 쓰고</li>\n<li>J5셀 : <strong>데이터</strong>&gt; <strong>데이터 유효성 검사</strong>를 클릭한 뒤</li>\n</ol>\n<p><img src=\"/image/dynamic05.png\" alt=\"\" /></p>\n<ul>\n<li>제한 대상 : <strong>목록</strong></li>\n<li>원본 : <strong>국제,유치,초등,중등,고등</strong></li>\n</ul>\n<ol start=\"3\">\n<li>J6셀 : <strong>=&ldquo;학교급_&rdquo;&amp;$J$5</strong>  (J5셀이 초등으로 선택이 되면, <strong>학교급_초등</strong> 으로 바꿔주는 수식입니다.)</li>\n</ol>\n<br>\n<h4 id=\"학년\">학년<a class=\"anchor\" href=\"#%ed%95%99%eb%85%84\">#</a></h4>\r\n<ol>\n<li>K4셀 : <strong>학년</strong>이라는 제목을 쓰고</li>\n<li>K5셀 : <strong>데이터</strong>&gt; <strong>데이터 유효성 검사</strong>를 클릭한 뒤</li>\n</ol>\n<p><img src=\"/image/dynamic06.png\" alt=\"\" /></p>\n<ul>\n<li>제한 대상 : <strong>목록</strong></li>\n<li>원본 : <strong>=INDIRECT($J$6)</strong>\n- J5셀이 <strong>초등</strong>으로 선택되면 J6셀이 <strong>학교급_초등</strong>으로 바뀌는데, J6셀을 목록 원본으로 지정하므로 이름 지정시 <strong>학교급_초등</strong>의 참조범위인 C3~C8 부분을 목록으로 불러옵니다.\n<ul>\n<li>그러므로, 아래와 같은 형태로 목록이 뜨게 됩니다.</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/image/dynamic07.png\" alt=\"\" /></p>\n<ol start=\"3\">\n<li>K6셀 : <strong>=&ldquo;학교급_&rdquo;&amp;$K$5</strong> (K5셀이 <strong>6</strong>으로 선택이 되면, <strong>학년6_반</strong> 으로 바꿔주는 수식입니다.)</li>\n</ol>\n<br>\n<h4 id=\"반\">반<a class=\"anchor\" href=\"#%eb%b0%98\">#</a></h4>\r\n<ol>\n<li>L4셀 : <strong>반</strong>이라는 제목을 쓰고</li>\n<li>L5셀 : <strong>데이터</strong>&gt; <strong>데이터 유효성 검사</strong>를 클릭한 뒤</li>\n</ol>\n<p><img src=\"/image/dynamic08.png\" alt=\"\" /></p>\n<ul>\n<li>제한 대상 : <strong>목록</strong></li>\n<li>원본 : <strong>=INDIRECT($K$6)</strong>\n<ul>\n<li>K5셀이 <strong>6</strong>으로 선택되면 K6셀이 <strong>학년6_반</strong>으로 바뀌는데, K6셀을 목록 원본으로 지정하므로 이름 지정시 <strong>학년_반</strong>의 참조범위인 H12~H22 부분을 목록으로 불러옵니다.</li>\n<li>그러므로, 아래와 같은 형태로 목록이 뜨게 됩니다.</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/image/dynamic09.png\" alt=\"\" /></p>\n<ol start=\"3\">\n<li>(선택사항) L6셀 : <strong>=K6&amp;L5</strong> (K6셀이 <strong>6</strong>, L5셀이 <strong>1</strong>로 선택이 되면, <strong>학년6_반1</strong> 과 같이 바꿔주는 수식입니다.)</li>\n</ol>\n<br>\n<br>\n<h3 id=\"예시파일-첨부\">예시파일 첨부<a class=\"anchor\" href=\"#%ec%98%88%ec%8b%9c%ed%8c%8c%ec%9d%bc-%ec%b2%a8%eb%b6%80\">#</a></h3>\r\n<p><a href=\"/image/%eb%8d%b0%ec%9d%b4%ed%84%b0%ec%9c%a0%ed%9a%a8%ec%84%b1%ea%b2%80%ec%82%ac-%eb%8f%99%ec%a0%81%eb%b2%94%ec%9c%84%ec%84%a4%ec%a0%95.xls\">데이터유효성검사 동적범위설정.xls</a></p>\n"}{"uri":"http://localhost:1313/posts/4wd-bluetooth/","title":"4WD Bluetooth","content":"<h3 id=\"4wd-bluetooth\">4WD Bluetooth<a class=\"anchor\" href=\"#4wd-bluetooth\">#</a></h3>\r\n<p>지금까지 배운 RC카, 블루투스 모듈 사용법, 컨트롤러 사용법을 종합하여 Bluetooth로 조종하는 4WD를 만들어 보겠습니다. IR리모트를 사용한 RC카를 베이스로 하여 IR수신부를 빼고, 블루투스 모듈인 HC-06만 연결하면 됩니다.</p>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/4wd-bt-17.png\" alt=\"\" /></p>\n<br>\n<h3 id=\"bluetooth-serial-controller-설정\">Bluetooth Serial Controller 설정<a class=\"anchor\" href=\"#bluetooth-serial-controller-%ec%84%a4%ec%a0%95\">#</a></h3>\r\n<p>여기서는 4WD를 블루투스로 조종하기 위한 콘트롤러를 만들어 봅니다.</p>\n<br>\n<ol>\n<li>먼저 Bluetooth Serial Controller를 실행시키세요. (블루투스 페어링이나 앱 설치방법은 이전의 글을 참고하세요.)  아래화면은 TERMINAL Mode인 상태입니다. 여기서 스페너 모양 아이콘을 눌러 PREFERCE로 진입하세요.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-01.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"2\">\n<li>PREFERENCE 화면에서 아무곳이나 누른 뒤, 위로 스크롤하여</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-02.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"3\">\n<li>9 BUTTON MODE를 활성화 시키고, TERMINAL MODE를 꺼주세요.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-03.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"4\">\n<li>그러면 이런 화면이 나타납니다. 이제 각각의 버튼을 정의해보겠습니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-04.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"5\">\n<li>다시 스페너 모양 아이콘을 눌러 PREFERENCE로 들어간 뒤, BUTTON-Name을 선택합니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-05.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"6\">\n<li>button2, button4, button5, button6, button8을 각각 누른 뒤, 각 버튼 별로 &lsquo;전진&rsquo;, &lsquo;왼쪽&rsquo;, &lsquo;정지&rsquo;, &lsquo;오른쪽&rsquo;, &lsquo;후진&rsquo;이라고 이름을 붙여줍니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-06.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"7\">\n<li>다시 PREFERENCE에서 Command를 누르세요.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-07.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"8\">\n<li>Command에서 정의해주는 값이 제일 중요한데요. 각 버튼을 누를때, 아두이노로 전달되는 값을 정의해주는 것이기 때문입니다. button2, button4, button5, button6, button8을 각각 누른 뒤, 각 버튼 별로 &lsquo;F&rsquo;, &lsquo;L&rsquo;, &lsquo;O&rsquo;, &lsquo;R&rsquo;, &lsquo;B&rsquo;이라고 입력값을 넣어주세요. 이 값은 스케치 작성시 사용해야 하므로 꼭 기억해두어야 합니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-08.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"9\">\n<li>이제 Visibility로 갑니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-09.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"10\">\n<li>여기서는 필요없는 버튼을 지워줄 수 있어요. 실제 사용되는 버튼에만 체크하고, 나머지 버튼은 체크 해제합니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-10.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"11\">\n<li>그러면, 아래와 같은 멋진 블루투스 컨트롤러가 나타납니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-11.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"12\">\n<li>이 상태에서 돋보기 모양 아이콘을 눌러 HC-06에 접속해 봅니다. 여기서부터는 블루투스 페어링 과정에서 설명했던 부분과 똑같습니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-12.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"13\">\n<li>모듈ID인 SKS100을 누르면 페어링을 시도하고요.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-13.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"14\">\n<li>만일 페어링할 모듈이 나타나지 않으면, Scan for devices로 모듈을 찾아 페어링을 해봅니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-14.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"15\">\n<li>페어링을 시도하는 중이네요.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-15.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"16\">\n<li>페어링 완료! 이제 컨트롤러 사용을 위한 모든 준비과정이 완료되었습니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/4wd-bt-16.png\" width=\"33%\">\n</figure>\n\n<br>\n<br>\n<h3 id=\"4wd-블루투스-초음파센서-자동차\">4WD 블루투스 초음파센서 자동차<a class=\"anchor\" href=\"#4wd-%eb%b8%94%eb%a3%a8%ed%88%ac%ec%8a%a4-%ec%b4%88%ec%9d%8c%ed%8c%8c%ec%84%bc%ec%84%9c-%ec%9e%90%eb%8f%99%ec%b0%a8\">#</a></h3>\r\n<p>위 회로에 초음파 센서 하나만 덧붙여봅니다. 50cm 이내에 물체가 접근하면 후진했다가 정지하도록 되어있습니다. (실제로는 50cm보다 훨씬 짧은 거리내에서 후진을 시작하네요.)</p>\n<br>\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/4wd-bt-18.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Initialize Bluetooth\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SoftwareSerial.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>SoftwareSerial <span style=\"color:#a6e22e\">BTSerial</span>(<span style=\"color:#ae81ff\">7</span>, <span style=\"color:#ae81ff\">3</span>);  <span style=\"color:#75715e\">// HC-06 TX,RX\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Initialize TB6612FNG Motor drive\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> STBY <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;  <span style=\"color:#75715e\">// STBY pin on TB6612FNG. Must be HIGH to enable motor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_PWM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5</span>;  <span style=\"color:#75715e\">// Left motor speed control using analogWrite() function. Value between 0 - 255\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>;  <span style=\"color:#75715e\">// Left motor - LOW should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;  <span style=\"color:#75715e\">// Left motor - HIGH should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> B_PWM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">6</span>;  <span style=\"color:#75715e\">// Right motor speed control using analogWrite() function. Value between 0 - 255\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> B_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>; <span style=\"color:#75715e\">// Right motor - LOW should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> B_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">12</span>; <span style=\"color:#75715e\">// Right motor - HIGH should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> L_MaxSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span>;   <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> R_MaxSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span>;   <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> L_TurnSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">128</span>;  <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> R_TurnSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">128</span>;  <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> LR_Direct <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;      <span style=\"color:#75715e\">//for Direction (0:clockwise, 1:count-clockwise)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Initialize Ultrasonic Sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define TRIG 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define ECHO 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">char</span> val;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">long</span> val_distance;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(A_PWM, OUTPUT);                        <span style=\"color:#75715e\">// Motor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">pinMode</span>(A_IN1, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(A_IN2, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(B_PWM, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(B_IN1, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(B_IN2, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(STBY, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(TRIG, OUTPUT);                         <span style=\"color:#75715e\">// Ultrasonic Sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">pinMode</span>(ECHO, INPUT);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>  BTSerial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);                          <span style=\"color:#75715e\">// Start Bluetooth\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span> (<span style=\"color:#f92672\">!</span>BTSerial.<span style=\"color:#a6e22e\">available</span>()) {                <span style=\"color:#75715e\">// 처음 입력이 있을때까지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">stop</span>();                                        <span style=\"color:#75715e\">// 정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">distance</span>();                                    <span style=\"color:#75715e\">// 거리 측정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">println</span>(val_distance);                 <span style=\"color:#75715e\">// 거리 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (BTSerial.<span style=\"color:#a6e22e\">available</span>()) {                    <span style=\"color:#75715e\">// Check for Bluetooth input\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    val <span style=\"color:#f92672\">=</span> BTSerial.<span style=\"color:#a6e22e\">read</span>();                       <span style=\"color:#75715e\">// 입력값 val에 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    Serial.<span style=\"color:#a6e22e\">println</span>(val);                        <span style=\"color:#75715e\">// 입력값 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (val_distance <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">50</span>) {  <span style=\"color:#75715e\">// 거리가 50cm 이상이면 입력값 실행\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">parseCommand</span>(val);                           <span style=\"color:#75715e\">// parse the input\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  } <span style=\"color:#66d9ef\">else</span> {                                       <span style=\"color:#75715e\">// 거리가 50cm 이내이면 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">stop</span>();\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">20</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">b_stop</span>();                                    <span style=\"color:#75715e\">// 거리가 50cm 이상이 될 때까지 후진 후, 정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">50</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">parseCommand</span>(<span style=\"color:#66d9ef\">char</span> input) {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">switch</span> (input) {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;F&#39;</span><span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">go_forward</span>();\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;B&#39;</span><span style=\"color:#f92672\">:</span>  \n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">go_backward</span>();\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;L&#39;</span><span style=\"color:#f92672\">:</span>  \n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">go_f_left</span>();\n</span></span><span style=\"display:flex;\"><span>      } <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">1</span>) {\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">go_b_left</span>();\n</span></span><span style=\"display:flex;\"><span>      }     \n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;R&#39;</span><span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">go_f_right</span>();\n</span></span><span style=\"display:flex;\"><span>      } <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">1</span>) {\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">go_b_right</span>();\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;O&#39;</span><span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">stop</span>();\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>  }  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">50</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">distance</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(TRIG, LOW);                       <span style=\"color:#75715e\">// Start Ultrasonic sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(TRIG, HIGH);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(TRIG, LOW);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  val_distance <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">pulseIn</span>(ECHO, HIGH) <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">58.2</span>;     <span style=\"color:#75715e\">// 거리 측정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}       \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Move specific motor at speed and direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// motor: A(Left) -&gt; 0, B(Right) -&gt; 1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// speed: 0 is off, and 255 is full speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// direction: 0 clockwise, 1 counter-clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#66d9ef\">int</span> motorLR, <span style=\"color:#66d9ef\">int</span> speed, boolean inPin1, boolean inPin2) {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(STBY, HIGH);        <span style=\"color:#75715e\">// Disable Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (motorLR <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">analogWrite</span>(A_PWM, speed);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(A_IN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(A_IN2, inPin2);   \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (motorLR <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">analogWrite</span>(B_PWM, speed);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(B_IN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(B_IN2, inPin2);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_forward</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;F&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">0</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">1</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  LR_Direct <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;              <span style=\"color:#75715e\">// Forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_backward</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;B&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">0</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">1</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  LR_Direct <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>;              <span style=\"color:#75715e\">// Backward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_f_left</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;F_L&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">0</span>, L_TurnSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>); <span style=\"color:#75715e\">// Left motor, Left Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">1</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_b_left</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;B_R&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">0</span>, L_TurnSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>); <span style=\"color:#75715e\">// Left motor, Left Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">1</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_f_right</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;F_R&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">0</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">1</span>, R_TurnSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>); <span style=\"color:#75715e\">// Right motor, Right Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_b_right</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;B_R&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">0</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">1</span>, R_TurnSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>); <span style=\"color:#75715e\">// Right motor, Right Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">b_stop</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;B_STOP&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span> (val_distance <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">50</span>) {                    <span style=\"color:#75715e\">// 거리가 50cm 이내인 경우 반복\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">go_backward</span>();                               <span style=\"color:#75715e\">// 후진\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">distance</span>();                                  <span style=\"color:#75715e\">// 거리를 다시 측정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span> (<span style=\"color:#f92672\">!</span>BTSerial.<span style=\"color:#a6e22e\">available</span>()) {                <span style=\"color:#75715e\">// 입력이 없으면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">stop</span>();                                      <span style=\"color:#75715e\">// 정지상태 유지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>  LR_Direct <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;                                 <span style=\"color:#75715e\">// 앞으로 갈 준비\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">stop</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;STOP&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(STBY, LOW);                       <span style=\"color:#75715e\">// Enable Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/dc%EB%AA%A8%ED%84%B0-4wd-%EC%9E%90%EB%8F%99%EC%B0%A8-%EB%A7%8C%EB%93%A4%EA%B8%B0/","title":"DC모터 + 4WD 자동차 만들기 (TB6612FNG)","content":"<h3 id=\"dc모터-사용하기\">DC모터 사용하기<a class=\"anchor\" href=\"#dc%eb%aa%a8%ed%84%b0-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>아두이노의 5V, 3.3V핀으로는 모터에 필요한 충분한 전압과 전류를 공급하기 어렵다. 그러므로 사용하려는 모터에 맞는 전압과 전류의 공급을 위한 모터드라이버를 사용해야 한다. 아두이노에서 주로 사용하는 모듈은 L293D, L298N와 TB6612FNG 등이 있으며, 여기서는 TB6612FNG 모터드라이버와 함께, 모터 및 아두이노 단독사용을 위하여 별도의 외부전원을 사용한다. <del>외부 전원으로는 모터를 위한 1.5V AA*4개와 함께 아두이노 단독사용을 위한 9V 사각전지(6F22)를 추가로 연결하였다.</del></p>\n<blockquote class='book-hint '>\r\n<p>1.5V AA 6개 혹은 3.7V 18650 2개를 직렬로 연결하여 사용하면, 9V 사각전지(6F22)가 필요하지 않으므로 이 방법을 추천한다. 또한 AA 건전지를 사용하는 경우 4WD기준 연속사용시간은 10분 정도뿐일 정도로 전지 소모가 매우 빠르므로, 충전이 가능한 18650 사용을 추천한다.</p></blockquote><br>\n<h4 id=\"tb6612fng\">TB6612FNG<a class=\"anchor\" href=\"#tb6612fng\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th style=\"text-align: center\">VM<br/>VCC<br/>GND(*)<br/>AOUT1<br/>AOUT2<br/>BOUT2<br/>BOUT1<br/>GND</th>\n          <th style=\"text-align: center\"><img src=\"/image/t/tb6612fng-01.png\" alt=\"\" /></th>\n          <th style=\"text-align: center\">PWMA<br/>AIN2<br/>AIN1<br/>STBY<br/>BIN1<br/>BIN2<br/>PWMB<br/>GND</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td style=\"text-align: center\"></td>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/t/tb6612fng-02.png\" width=\"80%\">\n</figure>\n</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n  </tbody>\n</table>\n<ul>\n<li>VM (모터 전압) = 15V max</li>\n<li>VCC (로직 전압) = 2.7 ~ 5.5V</li>\n<li><strong>GND</strong>\n<ul>\n<li>TB6612fng 모듈을 여러개 테스트한 결과, <strong>3번핀 GND</strong>에 연결할 경우 <strong>작동이 안되는</strong> 몇몇 제품이 있었음</li>\n<li>그러므로 <strong>8번핀, 9번핀의 GND 사용을 권장</strong>함</li>\n</ul>\n</li>\n<li>출력전류: 정전류 1.2A (3.2A peak)까지 (모터 2개 사용시 합산 전류임)</li>\n<li>모터 제어모드: CW, CCW, short-brake, STOP, stand-by</li>\n<li>두개의 모터 출력을 개별 제어하며, <strong>100kHz</strong>의 PWM으로 속도 제어</li>\n<li>써멀 셧다운 및 저전압 감지회로 내장</li>\n</ul>\n<br>\n<h5 id=\"pin의-사용\">Pin의 사용<a class=\"anchor\" href=\"#pin%ec%9d%98-%ec%82%ac%ec%9a%a9\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th>핀번호</th>\n          <th>모터드라이브1</th>\n          <th>아두이노</th>\n          <th>외부전원</th>\n          <th>모터 / 역할</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>1</td>\n          <td>VM</td>\n          <td></td>\n          <td>(+) (DC모터에 사용하는 전압 사용)</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>2</td>\n          <td>VCC</td>\n          <td>+5V</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>3</td>\n          <td>GND (사용 비추천)</td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>4</td>\n          <td>A_OUT1</td>\n          <td></td>\n          <td></td>\n          <td>모터A</td>\n      </tr>\n      <tr>\n          <td>5</td>\n          <td>A_OUT2</td>\n          <td></td>\n          <td></td>\n          <td>모터A</td>\n      </tr>\n      <tr>\n          <td>6</td>\n          <td>B_OUT2</td>\n          <td></td>\n          <td></td>\n          <td>모터B</td>\n      </tr>\n      <tr>\n          <td>7</td>\n          <td>B_OUT1</td>\n          <td></td>\n          <td></td>\n          <td>모터B</td>\n      </tr>\n      <tr>\n          <td>8</td>\n          <td>GND</td>\n          <td></td>\n          <td>(-)</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>9</td>\n          <td>GND</td>\n          <td>GND</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>10</td>\n          <td>B_PWM</td>\n          <td>6</td>\n          <td></td>\n          <td>모터B 속도제어</td>\n      </tr>\n      <tr>\n          <td>11</td>\n          <td>B_IN2</td>\n          <td>12</td>\n          <td></td>\n          <td>모터B 방향제어</td>\n      </tr>\n      <tr>\n          <td>12</td>\n          <td>B_IN1</td>\n          <td>11</td>\n          <td></td>\n          <td>모터B 방향제어</td>\n      </tr>\n      <tr>\n          <td>13</td>\n          <td>STBY</td>\n          <td>10</td>\n          <td></td>\n          <td>모터 상태신호</td>\n      </tr>\n      <tr>\n          <td>14</td>\n          <td>A_IN1</td>\n          <td>9</td>\n          <td></td>\n          <td>모터A 방향제어</td>\n      </tr>\n      <tr>\n          <td>15</td>\n          <td>A_IN2</td>\n          <td>8</td>\n          <td></td>\n          <td>모터A 방향제어</td>\n      </tr>\n      <tr>\n          <td>16</td>\n          <td>A_PWM</td>\n          <td>5</td>\n          <td></td>\n          <td>모터A 속도제어</td>\n      </tr>\n  </tbody>\n</table>\n<ul>\n<li>속도제어에 사용하는 A_PWM, B_PWM은 아두이노의 PWM이 가능한 핀에 연결하여야 합니다. 여기서는 ~5, ~6번 핀 사용.</li>\n</ul>\n<br>\n<h5 id=\"주의-pin-map이-다른-모듈의-경우\">주의: Pin Map이 다른 모듈의 경우<a class=\"anchor\" href=\"#%ec%a3%bc%ec%9d%98-pin-map%ec%9d%b4-%eb%8b%a4%eb%a5%b8-%eb%aa%a8%eb%93%88%ec%9d%98-%ea%b2%bd%ec%9a%b0\">#</a></h5>\r\n<p>TB6612FNG를 여러 개 구입하여 사용해본 결과, 위의 핀맵과 조금 다른 모듈도 있었다.</p>\n<table>\n  <thead>\n      <tr>\n          <th>핀번호</th>\n          <th>모터드라이브1</th>\n          <th>아두이노</th>\n          <th>외부전원</th>\n          <th>모터 / 역할</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>1</td>\n          <td>GND</td>\n          <td>GND</td>\n          <td>(-)</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>2</td>\n          <td>VCC (2.7~5.5V)</td>\n          <td>+5V</td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>3</td>\n          <td>A_OUT1</td>\n          <td></td>\n          <td></td>\n          <td>모터A</td>\n      </tr>\n      <tr>\n          <td>4</td>\n          <td>A_OUT2</td>\n          <td></td>\n          <td></td>\n          <td>모터A</td>\n      </tr>\n      <tr>\n          <td>5</td>\n          <td>B_OUT2</td>\n          <td></td>\n          <td></td>\n          <td>모터B</td>\n      </tr>\n      <tr>\n          <td>6</td>\n          <td>B_OUT1</td>\n          <td></td>\n          <td></td>\n          <td>모터B</td>\n      </tr>\n      <tr>\n          <td>7</td>\n          <td>VM (15V max)</td>\n          <td></td>\n          <td>(+) (DC모터 요구 전압 사용)</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>8</td>\n          <td>GND</td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>9</td>\n          <td>GND</td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>10</td>\n          <td>B_PWM</td>\n          <td>6</td>\n          <td></td>\n          <td>모터B 속도제어</td>\n      </tr>\n      <tr>\n          <td>11</td>\n          <td>B_IN2</td>\n          <td>12</td>\n          <td></td>\n          <td>모터B 방향제어</td>\n      </tr>\n      <tr>\n          <td>12</td>\n          <td>B_IN1</td>\n          <td>11</td>\n          <td></td>\n          <td>모터B 방향제어</td>\n      </tr>\n      <tr>\n          <td>13</td>\n          <td>NC(STBY)</td>\n          <td>10</td>\n          <td></td>\n          <td>모터 상태신호</td>\n      </tr>\n      <tr>\n          <td>14</td>\n          <td>A_IN1</td>\n          <td>9</td>\n          <td></td>\n          <td>모터A 방향제어</td>\n      </tr>\n      <tr>\n          <td>15</td>\n          <td>A_IN2</td>\n          <td>8</td>\n          <td></td>\n          <td>모터A 방향제어</td>\n      </tr>\n      <tr>\n          <td>16</td>\n          <td>A_PWM</td>\n          <td>5</td>\n          <td></td>\n          <td>모터A 속도제어</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"tb6612fng와-dc모터의-연결\">TB6612FNG와 DC모터의 연결<a class=\"anchor\" href=\"#tb6612fng%ec%99%80-dc%eb%aa%a8%ed%84%b0%ec%9d%98-%ec%97%b0%ea%b2%b0\">#</a></h4>\r\n<h5 id=\"pin-map\">Pin Map<a class=\"anchor\" href=\"#pin-map\">#</a></h5>\r\n<p>TB6612FNG 모터드라이브는 2채널 형태이며, 만일 2WD 자동차를 만든다면 디지털핀 7개가 필요하다. 4개의 DC모터를 사용하여 4WD 자동차를 만드는 방법은 3가지로 나눠 생각해볼 수 있는데, 모든 바퀴를 각각 컨트롤 하는 방법, 왼쪽 바퀴와 오른쪽 바퀴로 나누어 컨트롤 하는 방법, 앞 바퀴와 뒷 바퀴로 나누어 컨트롤 하는 방법 등이 있다.</p>\n<ul>\n<li>모든 바퀴를 각각 컨트롤 하는 경우 : 모터드라이브 2개와 디지털핀 14개 사용\n<ul>\n<li>그런데, 아두이노에서 실제 사용할 수 있는 디지털핀의 개수가 12개(2~13번)이므로, 2개의 디지털핀이 부족하다.\n<ul>\n<li>아날로그핀을 디지털핀과 동일하게 사용할 수 있으므로, 2개의 아날로그핀을 추가로 사용한다.</li>\n<li>또는 스케치 업로드시에만 0,1번 핀을 빼두었다가, 스케치 업로드가 끝나면 0,1번 핀을 사용한다. 이렇게 사용하면 0~13번까지 총 14개의 디지털핀을 확보할 수 있다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>왼쪽과 오른쪽 바퀴로 나누어 컨트롤</strong> 하는 방법 : 디지털핀 7개 사용 (아래 본문에서 사용한 방법)</li>\n<li>앞과 뒷 바퀴로 나누어 컨트롤 하는 방법 : 디지털핀 7개 사용. (단, 조향을 위한 추가적인 방법을 고려해야 함.)</li>\n</ul>\n<br>\n<h4 id=\"h-sw-control-function\">H-SW Control Function<a class=\"anchor\" href=\"#h-sw-control-function\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>Input</th>\n          <th></th>\n          <th></th>\n          <th></th>\n          <th>Output</th>\n          <th></th>\n          <th></th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>IN1</td>\n          <td>IN2</td>\n          <td>PWM</td>\n          <td>STBY</td>\n          <td>OUT1</td>\n          <td>OUT2</td>\n          <td>Mode</td>\n      </tr>\n      <tr>\n          <td>H</td>\n          <td>H</td>\n          <td>H/L</td>\n          <td>H</td>\n          <td>L</td>\n          <td>L</td>\n          <td>Short Brake</td>\n      </tr>\n      <tr>\n          <td>L</td>\n          <td>H</td>\n          <td>H</td>\n          <td>H</td>\n          <td>L</td>\n          <td>H</td>\n          <td>Count-Clockwise</td>\n      </tr>\n      <tr>\n          <td>L</td>\n          <td>H</td>\n          <td>L</td>\n          <td>H</td>\n          <td>L</td>\n          <td>L</td>\n          <td>Short Brake</td>\n      </tr>\n      <tr>\n          <td>H</td>\n          <td>L</td>\n          <td>H</td>\n          <td>H</td>\n          <td>H</td>\n          <td>L</td>\n          <td>Clockwise</td>\n      </tr>\n      <tr>\n          <td>H</td>\n          <td>L</td>\n          <td>L</td>\n          <td>H</td>\n          <td>L</td>\n          <td>L</td>\n          <td>Short Brake</td>\n      </tr>\n      <tr>\n          <td>L</td>\n          <td>L</td>\n          <td>H</td>\n          <td>H</td>\n          <td>OFF(High impedance)</td>\n          <td>OFF(High impedance)</td>\n          <td>Stop</td>\n      </tr>\n      <tr>\n          <td>H/L</td>\n          <td>H/L</td>\n          <td>H/L</td>\n          <td>L</td>\n          <td>OFF(High impedance)</td>\n          <td>OFF(High impedance)</td>\n          <td>Standby</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<p>출력 결과는 아래와 같으며,</p>\n<ul>\n<li>IN1이 LOW, IN2가 HIGH, PWM으로 신호를 출력할 경우 시계 반대 방향(CCW)으로 회전</li>\n<li>IN1이 HIGH, IN2가 LOW, PWM으로 신호를 출력할 경우 시계 방향(CW)으로 회전</li>\n<li>그 밖의 경우는 모두 stop 상태로 해석하면 된다.</li>\n</ul>\n<br>\n<h3 id=\"모터-1개-컨트롤하기\">모터 1개 컨트롤하기<a class=\"anchor\" href=\"#%eb%aa%a8%ed%84%b0-1%ea%b0%9c-%ec%bb%a8%ed%8a%b8%eb%a1%a4%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>여기서 사용하는 DC모터는 아래의 형태를 가진 기어드모터이며, 아두이노를 사용하여 자동차를 만드는데 많이 사용되는 저렴이 모터이다.</p>\n<p><img src=\"/image/4wd-01.jpg\" alt=\"\" /></p>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<h5 id=\"uno보드와-컴퓨터를-usb선으로-연결하여-사용할-경우\">UNO보드와 컴퓨터를 USB선으로 연결하여 사용할 경우<a class=\"anchor\" href=\"#uno%eb%b3%b4%eb%93%9c%ec%99%80-%ec%bb%b4%ed%93%a8%ed%84%b0%eb%a5%bc-usb%ec%84%a0%ec%9c%bc%eb%a1%9c-%ec%97%b0%ea%b2%b0%ed%95%98%ec%97%ac-%ec%82%ac%ec%9a%a9%ed%95%a0-%ea%b2%bd%ec%9a%b0\">#</a></h5>\r\n<p><img src=\"/image/4wd-02.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"uno보드와-컴퓨터의-연결없이-vin핀을-사용하여-단독으로-사용할-경우\">UNO보드와 컴퓨터의 연결없이 Vin핀을 사용하여 단독으로 사용할 경우<a class=\"anchor\" href=\"#uno%eb%b3%b4%eb%93%9c%ec%99%80-%ec%bb%b4%ed%93%a8%ed%84%b0%ec%9d%98-%ec%97%b0%ea%b2%b0%ec%97%86%ec%9d%b4-vin%ed%95%80%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-%eb%8b%a8%eb%8f%85%ec%9c%bc%eb%a1%9c-%ec%82%ac%ec%9a%a9%ed%95%a0-%ea%b2%bd%ec%9a%b0\">#</a></h5>\r\n<ul>\n<li>UNO 보드의 Vin에 외부전원(7.4V) (+)에 연결: 6.6V~12V 범위의 전원 연결 가능 (7.2V 이상 추천)</li>\n<li>UNO 보드의 GND를 TB6612fng 모듈의 GND에 연결</li>\n</ul>\n<p><img src=\"/image/4wd-03.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> STBY <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;            <span style=\"color:#75715e\">// Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Motor A\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_PWM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5</span>;            <span style=\"color:#75715e\">// Speed Control\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> A_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(STBY, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(A_PWM, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(A_IN1, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(A_IN2, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">128</span>, <span style=\"color:#ae81ff\">0</span>);          <span style=\"color:#75715e\">// motor A(right wheels), half speed, moving forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);              <span style=\"color:#75715e\">// go for 1 second\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">stop</span>();                   <span style=\"color:#75715e\">// stop\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">250</span>);               <span style=\"color:#75715e\">// hold for 250ms until move again\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">128</span>, <span style=\"color:#ae81ff\">1</span>);          <span style=\"color:#75715e\">// motor A(right wheels), half speed, moving backward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">stop</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">250</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#66d9ef\">int</span> motor, <span style=\"color:#66d9ef\">int</span> speed, <span style=\"color:#66d9ef\">int</span> direction) {\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">- Move specific motor at speed and direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">- motor: A -&gt; 1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">- speed: 0 is off, and 255 is full speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">= direction: 0 clockwise, 1 counter-clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(STBY, HIGH);        <span style=\"color:#75715e\">// Disable Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  boolean inPin1 <span style=\"color:#f92672\">=</span> LOW;            <span style=\"color:#75715e\">// Defalut(direction=0) - Clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  boolean inPin2 <span style=\"color:#f92672\">=</span> HIGH;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(direction <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>) {             <span style=\"color:#75715e\">// Count-clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    inPin1 <span style=\"color:#f92672\">=</span> HIGH;\n</span></span><span style=\"display:flex;\"><span>    inPin2 <span style=\"color:#f92672\">=</span> LOW;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(motor <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>){                  <span style=\"color:#75715e\">// if motor == 1, right wheel\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">digitalWrite</span>(A_IN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(A_IN2, inPin2);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">analogWrite</span>(A_PWM, speed);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> {                           <span style=\"color:#75715e\">// if motor is not 1, left wheel\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">stop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(STBY, LOW);         <span style=\"color:#75715e\">// Enable Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><br>\n<h5 id=\"회전-방향이-생각했던-방향과-반대로-회전하는-경우\">회전 방향이 (생각했던 방향과) 반대로 회전하는 경우<a class=\"anchor\" href=\"#%ed%9a%8c%ec%a0%84-%eb%b0%a9%ed%96%a5%ec%9d%b4-%ec%83%9d%ea%b0%81%ed%96%88%eb%8d%98-%eb%b0%a9%ed%96%a5%ea%b3%bc-%eb%b0%98%eb%8c%80%eb%a1%9c-%ed%9a%8c%ec%a0%84%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h5>\r\n<p>A_IN1핀과 A_IN2 핀의 번호를 바꿔준다. 즉, 위 스케치에서</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> A_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> A_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>;</span></span></code></pre></div><p>부분을</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> A_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> A_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;</span></span></code></pre></div><p>로 바꿔준다.</p>\n<br>\n<h3 id=\"4wd-자동차-만들기\">4WD 자동차 만들기<a class=\"anchor\" href=\"#4wd-%ec%9e%90%eb%8f%99%ec%b0%a8-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<h5 id=\"uno보드와-컴퓨터를-usb선으로-연결하여-사용할-경우-1\">UNO보드와 컴퓨터를 USB선으로 연결하여 사용할 경우<a class=\"anchor\" href=\"#uno%eb%b3%b4%eb%93%9c%ec%99%80-%ec%bb%b4%ed%93%a8%ed%84%b0%eb%a5%bc-usb%ec%84%a0%ec%9c%bc%eb%a1%9c-%ec%97%b0%ea%b2%b0%ed%95%98%ec%97%ac-%ec%82%ac%ec%9a%a9%ed%95%a0-%ea%b2%bd%ec%9a%b0-1\">#</a></h5>\r\n<p><img src=\"/image/4wd-04.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"uno보드와-컴퓨터의-연결없이-vin핀을-사용하여-단독으로-사용할-경우-1\">UNO보드와 컴퓨터의 연결없이 Vin핀을 사용하여 단독으로 사용할 경우<a class=\"anchor\" href=\"#uno%eb%b3%b4%eb%93%9c%ec%99%80-%ec%bb%b4%ed%93%a8%ed%84%b0%ec%9d%98-%ec%97%b0%ea%b2%b0%ec%97%86%ec%9d%b4-vin%ed%95%80%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-%eb%8b%a8%eb%8f%85%ec%9c%bc%eb%a1%9c-%ec%82%ac%ec%9a%a9%ed%95%a0-%ea%b2%bd%ec%9a%b0-1\">#</a></h5>\r\n<ul>\n<li>UNO 보드의 Vin에 외부전원(7.4V) (+)에 연결: 6.6V~12V 범위의 전원 연결 가능 (7.2V 이상 추천)</li>\n<li>UNO 보드의 GND를 TB6612fng 모듈의 GND에 연결</li>\n</ul>\n<p><img src=\"/image/4wd-05.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// front wheel : B1 - A1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// rear  wheel : B2 - A2 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> STBY <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;            <span style=\"color:#75715e\">// Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Motor A 1 &amp; 2(Right)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_PWM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5</span>;             <span style=\"color:#75715e\">// Speed Control\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> A_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Motor B 1 &amp; 2(Left)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> B_PWM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">6</span>;             <span style=\"color:#75715e\">// Speed Control\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> B_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> B_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">12</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  pinMode(STBY, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(A_PWM, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(A_IN1, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(A_IN2, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(B_PWM, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(B_IN1, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(B_IN2, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">128</span>, <span style=\"color:#ae81ff\">0</span>);                  <span style=\"color:#75715e\">// motor A(right wheels), half speed, moving forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">128</span>, <span style=\"color:#ae81ff\">0</span>);                  <span style=\"color:#75715e\">// motor B(left wheels), half speed, moving forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">1000</span>);                      <span style=\"color:#75715e\">// go for 1 second\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  stop();                           <span style=\"color:#75715e\">// stop\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">250</span>);                       <span style=\"color:#75715e\">// hold for 250ms until move again\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">128</span>, <span style=\"color:#ae81ff\">1</span>);                  <span style=\"color:#75715e\">// motor A(right wheels), half speed, moving backward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">128</span>, <span style=\"color:#ae81ff\">1</span>);                  <span style=\"color:#75715e\">// motor B(left wheels), half speed, moving backward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>  stop();\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">250</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#66d9ef\">int</span> motor, <span style=\"color:#66d9ef\">int</span> speed, <span style=\"color:#66d9ef\">int</span> direction) {   <span style=\"color:#75715e\">//Move specific motor at speed and direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//motor: A(Right) -&gt; 1, B(Left) -&gt; 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//speed: 0 is off, and 255 is full speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//direction: 0 clockwise, 1 counter-clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(STBY, HIGH);        <span style=\"color:#75715e\">// Disable Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  boolean inPin1 <span style=\"color:#f92672\">=</span> LOW;            <span style=\"color:#75715e\">// Defalut(direction=0) - Clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  boolean inPin2 <span style=\"color:#f92672\">=</span> HIGH;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(direction <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>) {             <span style=\"color:#75715e\">// Count-clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    inPin1 <span style=\"color:#f92672\">=</span> HIGH;\n</span></span><span style=\"display:flex;\"><span>    inPin2 <span style=\"color:#f92672\">=</span> LOW;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(motor <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>){                  <span style=\"color:#75715e\">// if motor == 1, right wheel\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    digitalWrite(A_IN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(A_IN2, inPin2);\n</span></span><span style=\"display:flex;\"><span>    analogWrite(A_PWM, speed);\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">else</span> {                         <span style=\"color:#75715e\">// if motor is not 1, left wheel\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    digitalWrite(B_IN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(B_IN2, inPin2);\n</span></span><span style=\"display:flex;\"><span>    analogWrite(B_PWM, speed);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">stop</span>() {\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(STBY, LOW);        <span style=\"color:#75715e\">// Enable Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"ir-리모컨으로-4wd-컨트롤하기\">IR 리모컨으로 4WD 컨트롤하기<a class=\"anchor\" href=\"#ir-%eb%a6%ac%eb%aa%a8%ec%bb%a8%ec%9c%bc%eb%a1%9c-4wd-%ec%bb%a8%ed%8a%b8%eb%a1%a4%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>IR리모컨을 사용하여 RC카를 컨트롤 하기 위해서는 모터와 회로에서 발생하는 노이즈를 제거하기 위한 104 케패시터(0.1uF)를 사용하는 것이 원칙입니다. 반드시 사용해야 하는 것은 아니지만, 회로보호를 위해 캐패시터가 있는 경우에는 IR 수신부의 (+)와 (-)에 병렬연결하세요. 이에 더하여 후진시 방향전환도 가능하도록 수정해 봅니다.</p>\n<br>\n<h4 id=\"schematic-2\">schematic<a class=\"anchor\" href=\"#schematic-2\">#</a></h4>\r\n<h5 id=\"uno보드와-컴퓨터를-usb선으로-연결하여-사용할-경우-2\">UNO보드와 컴퓨터를 USB선으로 연결하여 사용할 경우<a class=\"anchor\" href=\"#uno%eb%b3%b4%eb%93%9c%ec%99%80-%ec%bb%b4%ed%93%a8%ed%84%b0%eb%a5%bc-usb%ec%84%a0%ec%9c%bc%eb%a1%9c-%ec%97%b0%ea%b2%b0%ed%95%98%ec%97%ac-%ec%82%ac%ec%9a%a9%ed%95%a0-%ea%b2%bd%ec%9a%b0-2\">#</a></h5>\r\n<p><img src=\"/image/4wd-06.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"uno보드와-컴퓨터의-연결없이-vin핀을-사용하여-단독으로-사용할-경우-2\">UNO보드와 컴퓨터의 연결없이 Vin핀을 사용하여 단독으로 사용할 경우<a class=\"anchor\" href=\"#uno%eb%b3%b4%eb%93%9c%ec%99%80-%ec%bb%b4%ed%93%a8%ed%84%b0%ec%9d%98-%ec%97%b0%ea%b2%b0%ec%97%86%ec%9d%b4-vin%ed%95%80%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-%eb%8b%a8%eb%8f%85%ec%9c%bc%eb%a1%9c-%ec%82%ac%ec%9a%a9%ed%95%a0-%ea%b2%bd%ec%9a%b0-2\">#</a></h5>\r\n<p><img src=\"/image/4wd-07.png\" alt=\"\" /></p>\n<br>\n<br>\n<h4 id=\"irremote-라이브러리-추가하기\">IRremote 라이브러리 추가하기<a class=\"anchor\" href=\"#irremote-%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%b6%94%ea%b0%80%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;boarddefs.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;IRremote.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;IRremoteInt.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;ir_Lego_PF_BitStreamEncoder.h&gt;</span></span></span></code></pre></div><br>\n<h4 id=\"사용할-리모컨-버튼-hex값\">사용할 리모컨 버튼 HEX값<a class=\"anchor\" href=\"#%ec%82%ac%ec%9a%a9%ed%95%a0-%eb%a6%ac%eb%aa%a8%ec%bb%a8-%eb%b2%84%ed%8a%bc-hex%ea%b0%92\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>Remote Button</th>\n          <th>unsigned int data</th>\n          <th>define</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>▲ (전진 / 속도 증가)</td>\n          <td>0XFF18E7</td>\n          <td>BTN_U</td>\n      </tr>\n      <tr>\n          <td>▼ (후진 / 속도 감소)</td>\n          <td>0XFFA4B5</td>\n          <td>BTN_D</td>\n      </tr>\n      <tr>\n          <td>◀ (좌회전 / 좌회전각 증가)</td>\n          <td>0XFF10EF</td>\n          <td>BTN_L</td>\n      </tr>\n      <tr>\n          <td>▶ (우회전 / 우회전각 증가)</td>\n          <td>0XFF5AA5</td>\n          <td>BTN_R</td>\n      </tr>\n      <tr>\n          <td>OK (정지)</td>\n          <td>0XFF38C7</td>\n          <td>BTN_O</td>\n      </tr>\n  </tbody>\n</table>\n<p>보유하고 있는 리모컨의 종류마다 HEX값이 다르므로, HEX값은 다를 수 있습니다. HEX값을 알아내는 방법은 IR Remote를 다루는 페이지를 참고하세요.</p>\n<br>\n<h4 id=\"sketch-2\">sketch<a class=\"anchor\" href=\"#sketch-2\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Initialize IR remote\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;boarddefs.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;IRremote.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;IRremoteInt.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;ir_Lego_PF_BitStreamEncoder.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> RECV_PIN <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">13</span>;              <span style=\"color:#75715e\">// IR Signal pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>IRrecv <span style=\"color:#a6e22e\">irrecv</span>(RECV_PIN);\n</span></span><span style=\"display:flex;\"><span>decode_results results;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_F 0xFF18E7  </span><span style=\"color:#75715e\">// Forward Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_B 0xFF4AB5  </span><span style=\"color:#75715e\">// Backward Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_L 0xFF10EF  </span><span style=\"color:#75715e\">// Left Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_R 0xFF5AA5  </span><span style=\"color:#75715e\">// Right Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_O 0xFF38C7  </span><span style=\"color:#75715e\">// OK Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Initialize TB6612FNG Motor drive\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> STBY <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;  <span style=\"color:#75715e\">// STBY pin on TB6612FNG. Must be HIGH to enable motor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_PWM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5</span>;  <span style=\"color:#75715e\">// Right motor speed control using analogWrite() function. Value between 0 - 255\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>;  <span style=\"color:#75715e\">// Right motor - LOW should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;  <span style=\"color:#75715e\">// Right motor - HIGH should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> B_PWM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">6</span>;  <span style=\"color:#75715e\">// Left motor speed control using analogWrite() function. Value between 0 - 255\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> B_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>; <span style=\"color:#75715e\">// Left motor - LOW should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> B_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">12</span>; <span style=\"color:#75715e\">// Left motor - HIGH should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> R_MaxSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span>;   <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> L_MaxSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span>;   <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> R_TurnSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">128</span>;  <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> L_TurnSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">128</span>;  <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> LR_Direct <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;      <span style=\"color:#75715e\">//for Direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  pinMode(A_PWM, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(A_IN1, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(A_IN2, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(B_PWM, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(B_IN1, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(B_IN2, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(STBY, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>  irrecv.enableIRIn();                           <span style=\"color:#75715e\">// Start the receiver\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (irrecv.decode(<span style=\"color:#f92672\">&amp;</span>results)) {                 <span style=\"color:#75715e\">// Read IR remote control\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#75715e\">//Serial.println(results.value, HEX);        // for debug\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    irrecv.resume();                             <span style=\"color:#75715e\">// Receive the next value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">switch</span>(results.value) {\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> BTN_F:\n</span></span><span style=\"display:flex;\"><span>      go_forward();\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> BTN_B:  \n</span></span><span style=\"display:flex;\"><span>      go_backward();\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> BTN_L:  \n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>        go_f_left();\n</span></span><span style=\"display:flex;\"><span>      } <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">1</span>) {\n</span></span><span style=\"display:flex;\"><span>        go_b_left();\n</span></span><span style=\"display:flex;\"><span>      }     \n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> BTN_R:\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>        go_f_right();\n</span></span><span style=\"display:flex;\"><span>      } <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">1</span>) {\n</span></span><span style=\"display:flex;\"><span>        go_b_right();\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> BTN_O:\n</span></span><span style=\"display:flex;\"><span>      stop();\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>  }  \n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">50</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Move specific motor at speed and direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// motor: A(Right) -&gt; 0, B(Left) -&gt; 1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// speed: 0 is off, and 255 is full speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// direction: 0 clockwise, 1 counter-clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">move</span>(<span style=\"color:#66d9ef\">int</span> motorLR, <span style=\"color:#66d9ef\">int</span> speed, boolean inPin1, boolean inPin2) {\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(STBY, HIGH);        <span style=\"color:#75715e\">// Disable Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (motorLR <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>    analogWrite(A_PWM, speed);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(A_IN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(A_IN2, inPin2);   \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (motorLR <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>) {\n</span></span><span style=\"display:flex;\"><span>    analogWrite(B_PWM, speed);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(B_IN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(B_IN2, inPin2);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_forward</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;F&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  LR_Direct <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;              <span style=\"color:#75715e\">// Forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_backward</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;B&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  LR_Direct <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>;              <span style=\"color:#75715e\">// Backward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_f_left</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;F_L&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_TurnSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>); <span style=\"color:#75715e\">// Left motor, Left Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_b_left</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;F_R&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_TurnSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>); <span style=\"color:#75715e\">// Left motor, Left Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_f_right</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;F_R&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_TurnSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>); <span style=\"color:#75715e\">// Right motor, Right Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go_b_right</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;B_R&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_TurnSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>); <span style=\"color:#75715e\">// Right motor, Right Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">stop</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;STOP&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(STBY, LOW);    <span style=\"color:#75715e\">// Enable Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"초음파-센서-장착\">초음파 센서 장착<a class=\"anchor\" href=\"#%ec%b4%88%ec%9d%8c%ed%8c%8c-%ec%84%bc%ec%84%9c-%ec%9e%a5%ec%b0%a9\">#</a></h3>\r\n<p>초음파 센서를 장착하여 전진시 일정한 거리 내에  장애물이 있으면 자동차를 멈춰보도록 하겠습니다. Trig는 아두이노 2번핀, Echo는 4번핀에 연결하였습니다.</p>\n<br>\n<h4 id=\"schematic-3\">schematic<a class=\"anchor\" href=\"#schematic-3\">#</a></h4>\r\n<h5 id=\"uno보드와-컴퓨터를-usb선으로-연결하여-사용할-경우-3\">UNO보드와 컴퓨터를 USB선으로 연결하여 사용할 경우<a class=\"anchor\" href=\"#uno%eb%b3%b4%eb%93%9c%ec%99%80-%ec%bb%b4%ed%93%a8%ed%84%b0%eb%a5%bc-usb%ec%84%a0%ec%9c%bc%eb%a1%9c-%ec%97%b0%ea%b2%b0%ed%95%98%ec%97%ac-%ec%82%ac%ec%9a%a9%ed%95%a0-%ea%b2%bd%ec%9a%b0-3\">#</a></h5>\r\n<p><img src=\"/image/4wd-08.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"uno보드와-컴퓨터의-연결없이-vin핀을-사용하여-단독으로-사용할-경우-3\">UNO보드와 컴퓨터의 연결없이 Vin핀을 사용하여 단독으로 사용할 경우<a class=\"anchor\" href=\"#uno%eb%b3%b4%eb%93%9c%ec%99%80-%ec%bb%b4%ed%93%a8%ed%84%b0%ec%9d%98-%ec%97%b0%ea%b2%b0%ec%97%86%ec%9d%b4-vin%ed%95%80%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-%eb%8b%a8%eb%8f%85%ec%9c%bc%eb%a1%9c-%ec%82%ac%ec%9a%a9%ed%95%a0-%ea%b2%bd%ec%9a%b0-3\">#</a></h5>\r\n<p><img src=\"/image/4wd-09.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-3\">sketch<a class=\"anchor\" href=\"#sketch-3\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Initialize IR remote\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;boarddefs.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;IRremote.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;IRremoteInt.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;ir_Lego_PF_BitStreamEncoder.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> RECV_PIN <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">13</span>;       <span style=\"color:#75715e\">// IR Signal pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>IRrecv <span style=\"color:#a6e22e\">irrecv</span>(RECV_PIN);\n</span></span><span style=\"display:flex;\"><span>decode_results results;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_F 0xFF18E7  </span><span style=\"color:#75715e\">// Forward Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_B 0xFF4AB5  </span><span style=\"color:#75715e\">// Backward Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_L 0xFF10EF  </span><span style=\"color:#75715e\">// Left Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_R 0xFF5AA5  </span><span style=\"color:#75715e\">// Right Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_O 0xFF38C7  </span><span style=\"color:#75715e\">// OK Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Initialize TB6612FNG Motor drive\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> STBY <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;  <span style=\"color:#75715e\">// STBY pin on TB6612FNG. Must be HIGH to enable motor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_PWM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5</span>;  <span style=\"color:#75715e\">// Right motor speed control using analogWrite() function. Value between 0 - 255\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>;  <span style=\"color:#75715e\">// Right motor - LOW should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> A_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;  <span style=\"color:#75715e\">// Right motor - HIGH should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> B_PWM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">6</span>;  <span style=\"color:#75715e\">// Left motor speed control using analogWrite() function. Value between 0 - 255\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> B_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>; <span style=\"color:#75715e\">// Left motor - LOW should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> B_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">12</span>; <span style=\"color:#75715e\">// Left motor - HIGH should go forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> R_MaxSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span>;   <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> L_MaxSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span>;   <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> R_TurnSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">128</span>;  <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> L_TurnSpeed <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">128</span>;  <span style=\"color:#75715e\">//set motor speed to max speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> LR_Direct <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;      <span style=\"color:#75715e\">//for Direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Initialize Ultrasonic Sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define TRIG 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define ECHO 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  pinMode(A_PWM, OUTPUT);                        <span style=\"color:#75715e\">// Motor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  pinMode(A_IN1, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(A_IN2, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(B_PWM, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(B_IN1, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(B_IN2, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  pinMode(STBY, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  pinMode(TRIG, OUTPUT);                         <span style=\"color:#75715e\">// Ultrasonic Sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  pinMode(ECHO, INPUT);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>  irrecv.enableIRIn();                           <span style=\"color:#75715e\">// Start the receiver\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(TRIG, LOW);                       <span style=\"color:#75715e\">// Start Ultrasonic sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delayMicroseconds(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(TRIG, HIGH);\n</span></span><span style=\"display:flex;\"><span>  delayMicroseconds(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(TRIG, LOW);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">long</span> distance <span style=\"color:#f92672\">=</span> pulseIn(ECHO, HIGH) <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">58.2</span>;    <span style=\"color:#75715e\">// 거리 측정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (irrecv.decode(<span style=\"color:#f92672\">&amp;</span>results)) {                 <span style=\"color:#75715e\">// Read IR remote control\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#75715e\">//Serial.println(results.value, HEX);        // for debug\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    irrecv.resume(); <span style=\"color:#75715e\">// Receive the next value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (distance <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">10</span>) {                            <span style=\"color:#75715e\">// 거리가 10cm 이내이면 정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    stop();\n</span></span><span style=\"display:flex;\"><span>    delay(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> {                                          <span style=\"color:#75715e\">// 거리가 10cm 이상이면,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \t<span style=\"color:#66d9ef\">switch</span>(results.value) {\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> BTN_F:\n</span></span><span style=\"display:flex;\"><span>      go_forward();\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> BTN_B:  \n</span></span><span style=\"display:flex;\"><span>      go_backward();\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> BTN_L:  \n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>        go_f_left();\n</span></span><span style=\"display:flex;\"><span>      } <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">1</span>) {\n</span></span><span style=\"display:flex;\"><span>        go_b_left();\n</span></span><span style=\"display:flex;\"><span>      }     \n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> BTN_R:\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>        go_f_right();\n</span></span><span style=\"display:flex;\"><span>      } <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(LR_Direct<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">1</span>) {\n</span></span><span style=\"display:flex;\"><span>        go_b_right();\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">case</span> BTN_O:\n</span></span><span style=\"display:flex;\"><span>      stop();\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>  }  \n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">50</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Move specific motor at speed and direction\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// motor: A(Right) -&gt; 0, B(Left) -&gt; 1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// speed: 0 is off, and 255 is full speed\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// direction: 0 clockwise, 1 counter-clockwise\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> move(<span style=\"color:#66d9ef\">int</span> motorLR, <span style=\"color:#66d9ef\">int</span> speed, boolean inPin1, boolean inPin2) {\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(STBY, HIGH);        <span style=\"color:#75715e\">// Disable Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (motorLR <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>    analogWrite(A_PWM, speed);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(A_IN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(A_IN2, inPin2);   \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (motorLR <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">1</span>) {\n</span></span><span style=\"display:flex;\"><span>    analogWrite(B_PWM, speed);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(B_IN1, inPin1);\n</span></span><span style=\"display:flex;\"><span>    digitalWrite(B_IN2, inPin2);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> go_forward() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;F&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  LR_Direct <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;              <span style=\"color:#75715e\">// Forward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> go_backward() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;B&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  LR_Direct <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1</span>;              <span style=\"color:#75715e\">// Backward\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> go_f_left() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;F_L&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_TurnSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>); <span style=\"color:#75715e\">// Left motor, Left Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> go_b_left() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;F_R&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Right motor, Right Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_TurnSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>); <span style=\"color:#75715e\">// Left motor, Left Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> go_f_right() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;F_R&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_TurnSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>); <span style=\"color:#75715e\">// Right motor, Right Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, forward(0,1)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> go_b_right() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;B_R&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  move(<span style=\"color:#ae81ff\">0</span>, R_TurnSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>); <span style=\"color:#75715e\">// Right motor, Right Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  move(<span style=\"color:#ae81ff\">1</span>, L_MaxSpeed, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">0</span>);  <span style=\"color:#75715e\">// Left motor, Left Speed, backward(1,0)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  delay(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> stop() {\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;STOP&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  digitalWrite(STBY, LOW);    <span style=\"color:#75715e\">// Enable Standby\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/arduino-%EB%9D%BC%EC%9D%B8%ED%8A%B8%EB%A0%88%EC%9D%B4%EC%84%9C-l298n/","title":"Arduino, 라인트레이서, L298N","content":"<p>아두이노를 사용하여 검은색 라인을 따라 움직이는 라인트레이서 자동차를 만들어보자.</p>\n<br>\n<h3 id=\"tcrt5000-ir-reflective-sensor\">TCRT5000 IR reflective sensor<a class=\"anchor\" href=\"#tcrt5000-ir-reflective-sensor\">#</a></h3>\r\n<p>라인트레이서 제작시 가장 널리 사용되는 IR 센서이다. 감지하는 부분이 검은색으로 되어 있는 부분이라면 IR이 모두 흡수되고, 흰색으로 되어 있는 부분에서는 모두 반사되는 원리를 이용한다.</p>\n<p><img src=\"/image/LT-03.png\" alt=\"\" /></p>\n<ul>\n<li>장애물이 없는 경우: 1 반환</li>\n<li>센서와 12mm이내의 거리에 밝은색이 위치하는 경우: 0 반환</li>\n<li>센서와 12mm이내의 거리에 검은색이 위치하는 경우: 1 반환</li>\n<li>검은색의 경우도 아주 가까이 가져가면 적외선 수신량이 증가하여 0의 값을 반환할 수 있으므로, 라인트레이서 구성시 감지하는 적당한 거리를 찾는 것이 중요합니다.</li>\n<li>10~12mm 정도의 거리에서 측정하는 것을 추천</li>\n<li>AO 단자를 이용할 경우 아날로그 신호로 처리도 가능</li>\n</ul>\n<blockquote class='book-hint '>\r\n<p>(위 스펙과는 별도로) 라인트레이서 제작시에는 경험상 센서가 바닥면으로부터 2cm정도 떨어지도록 설치하는 것을 추천함</p></blockquote><br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/tcrt5000.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_sensor <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>  pinMode(pin_sensor, INPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\ti <span style=\"color:#f92672\">=</span> digitalRead(pin_sensor)\n</span></span><span style=\"display:flex;\"><span>    Serial.println(i);                 <span style=\"color:#75715e\">// 검은색(1), 밝은색(0) 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    delay(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"모터드라이버-l298n\">모터드라이버 L298N<a class=\"anchor\" href=\"#%eb%aa%a8%ed%84%b0%eb%93%9c%eb%9d%bc%ec%9d%b4%eb%b2%84-l298n\">#</a></h3>\r\n<p>대부분의 모터는 구동에 필요한 전력 소모량 커서 아두이노의 자체 출력으로는 구동이 불가능하다. 그러므로 건전지, SMPS 등의 외부 전원을 사용하여 모터에 충분한 전력을 공급하고, 이를 제어하기위한 모터드라이버를 반드시 사용해야 한다.</p>\n<p>아두이노에서 사용하는 대표적인 모터드라이브는 L298N, TB6612FNG 등이 있으며, 여기서는 2CH의 2A출력이 가능한 L298N을 사용하여 간단한 라인트레이서를 제작한다.</p>\n<p><img src=\"/image/LT-01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"pinout\">Pinout<a class=\"anchor\" href=\"#pinout\">#</a></h4>\r\n<ul>\n<li>\n<p>모터A 출력 : 왼쪽 모터를 연결한다.</p>\n</li>\n<li>\n<p>모터B 출력 : 오른쪽 모터를 연결한다.</p>\n</li>\n<li>\n<p>12V (입력) : 외부전원을 입력한다. (5~35V)</p>\n<ul>\n<li>12V 이상의 외부전원을 입력하는 경우, 레귤레이터 보호를 위해 5V 점퍼선을 제거해야 함</li>\n</ul>\n</li>\n<li>\n<p>5V (입력/출력)</p>\n<ul>\n<li>점퍼핀이 연결되어 있는 경우 5V 출력 (단, 5V출력으로 사용하려면 외부전원을 12V이하로 주어야 하며, 그 이상의 전압을 인가하는 경우 레귤레이터가 손상됨)</li>\n<li>점퍼핀 없는 경우 5V 입력을 통해 L298N에 전원 인가</li>\n</ul>\n</li>\n<li>\n<p>Enable 모터A : 왼쪽 모터 PWM (점퍼를 제거하고, INPUT핀 양옆의 핀에 PWM신호 입력)</p>\n</li>\n<li>\n<p>Enable 모터B : 오른쪽 모터 PWM (점퍼를 제거하고, INPUT핀 양옆의 핀에 PWM신호 입력)</p>\n</li>\n<li>\n<p>PWM을 사용하는 경우 모터에 인가하는 전원이 6V(AA*4개)인 경우 PWM값이 낮으면 모터가 회전하지 않으므로 코딩시 주의한다.</p>\n</li>\n<li>\n<p>INPUT : IN1, IN2, IN3, IN4</p>\n<table>\n  <thead>\n      <tr>\n          <th>Direction</th>\n          <th>IN1</th>\n          <th>IN2</th>\n          <th>IN3</th>\n          <th>IN4</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>Go</td>\n          <td>HIGH</td>\n          <td>HIGH</td>\n          <td>LOW</td>\n          <td>LOW</td>\n      </tr>\n      <tr>\n          <td>Back</td>\n          <td>LOW</td>\n          <td>LOW</td>\n          <td>HIGH</td>\n          <td>HIGH</td>\n      </tr>\n      <tr>\n          <td>Brake</td>\n          <td>LOW</td>\n          <td>LOW</td>\n          <td>LOW</td>\n          <td>LOW</td>\n      </tr>\n      <tr>\n          <td>Left_Turn</td>\n          <td>HIGH</td>\n          <td>LOW</td>\n          <td>LOW</td>\n          <td>LOW</td>\n      </tr>\n      <tr>\n          <td>Right_Turn</td>\n          <td>LOW</td>\n          <td>HIGH</td>\n          <td>LOW</td>\n          <td>LOW</td>\n      </tr>\n      <tr>\n          <td>Left_Back_Turn</td>\n          <td>LOW</td>\n          <td>LOW</td>\n          <td>HIGH</td>\n          <td>LOW</td>\n      </tr>\n      <tr>\n          <td>Right_Back_Turm</td>\n          <td>LOW</td>\n          <td>LOW</td>\n          <td>LOW</td>\n          <td>HIGH</td>\n      </tr>\n  </tbody>\n</table>\n</li>\n</ul>\n<br>\n<h4 id=\"jumper\">Jumper<a class=\"anchor\" href=\"#jumper\">#</a></h4>\r\n<ul>\n<li>Enable 모터A\n<ul>\n<li>점퍼를 연결시키지 않으면 PWM사용</li>\n<li>점퍼 연결시 왼쪽 모터에 5V (즉, PWM을 사용하지 않는 경우에만 연결)</li>\n</ul>\n</li>\n<li>Enable 모터B\n<ul>\n<li>점퍼를 연결시키지 않으면 PWM사용</li>\n<li>점퍼 연결시 오른쪽 모터 5V (즉, PWM을 사용하지 않는 경우에만 연결)</li>\n</ul>\n</li>\n<li>5V (※ Pinout의 5V 부분 참고)</li>\n</ul>\n<br>\n<br>\n<h3 id=\"전원\">전원<a class=\"anchor\" href=\"#%ec%a0%84%ec%9b%90\">#</a></h3>\r\n<ul>\n<li>대부분의 초보자를 위한 4WD 제작 키트는 AA건전지 4개를 직렬연결할 수 있는 전지소켓을 포함하여 판매하는 경우가 많지만</li>\n<li>But, 제작 경험으로 볼 때 AA건전지 4개로 얻을 수 있는 전력만으로는 원활한 구동이 되지 않는 경우가 많다.</li>\n<li>AA건전지 6개를 직렬로 연결하여 9V정도를 공급하거나 (사용시간 10~15분정도 가능)</li>\n<li>18650 리튬이온전지 2개를 연결하여 7.4V를 공급하는 것을 추천한다.</li>\n</ul>\n<br>\n<br>\n<h3 id=\"모터\">모터<a class=\"anchor\" href=\"#%eb%aa%a8%ed%84%b0\">#</a></h3>\r\n<p>아두이노 기초 실습용으로 많이 쓰이는 이름없는 중국산 모터이다.</p>\n<p><img src=\"/image/LT-02.jpg\" alt=\"\" /></p>\n<table>\n  <thead>\n      <tr>\n          <th>기어비 48:1</th>\n          <th>RPM(무부하)</th>\n          <th>전류 mA (무부하)</th>\n          <th>토크(kg·cm)</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>3V</td>\n          <td>120</td>\n          <td>40</td>\n          <td>3.2</td>\n      </tr>\n      <tr>\n          <td>6V</td>\n          <td>240</td>\n          <td>70</td>\n          <td>5.5</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<br>\n<h3 id=\"프레임-조립\">프레임 조립<a class=\"anchor\" href=\"#%ed%94%84%eb%a0%88%ec%9e%84-%ec%a1%b0%eb%a6%bd\">#</a></h3>\r\n<h4 id=\"준비물\">준비물<a class=\"anchor\" href=\"#%ec%a4%80%eb%b9%84%eb%ac%bc\">#</a></h4>\r\n<p><img src=\"/image/LT-04.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"조립과정\">조립과정<a class=\"anchor\" href=\"#%ec%a1%b0%eb%a6%bd%ea%b3%bc%ec%a0%95\">#</a></h4>\r\n<ol>\n<li>모터 4개와 M-F형태의 8가닥 리드선을 준비하고 모터에 리드선을 납땜할 준비를 합니다.</li>\n</ol>\n<p><img src=\"/image/LT-05.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"2\">\n<li>DC모터를 보면 양쪽에 (+)(-)극을 연결하는 단자가 있습니다.</li>\n</ol>\n<p><img src=\"/image/LT-06.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"3\">\n<li>준비한 8가닥의 M-F리드선을 2가닥씩 묶어 4갈래로 전체 길이의 1/2의 길이만큼 나누어 준비한뒤,</li>\n</ol>\n<p><img src=\"/image/LT-07.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"4\">\n<li>2개의 가닥 중 한 부분을 모터의 (+)(-)단자에 끼우고,</li>\n</ol>\n<p><img src=\"/image/LT-08.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"5\">\n<li>각각을 납땜합니다. 총 4개의 모터를 납땜하여 아래 모습처럼 만듭니다.</li>\n</ol>\n<p><img src=\"/image/LT-09.jpg\" alt=\"\" /></p>\n<br>\n<p>※ (주의) 납땜시, 아래 그림처럼 리드선이 모터의 본체에 닿으면 안됩니다.</p>\n<p><img src=\"/image/LT-10.jpg\" alt=\"\" /></p>\n<br>\n<p>\u200b     처음 납땜할 때부터 닿지 않도록 하는 것이 좋지만, 납땜을 이미 진행한 후에 리드선이 본체에 닿아 있다면 아래의 그림처럼 끝 부분을 살짝 휘어두거나, 니퍼로 잘라내도록 합니다.</p>\n<p><img src=\"/image/LT-11.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"6\">\n<li>외부 전원으로 사용할 건전지소켓을 준비합니다. (사진상에는 1.5V AA건전지 4개가 직렬로 연결되는 건전지소켓을 사용하였지만, 4개의 모터를 구동하기 위해서는 1.5V AA건전지를 6개 직렬로 연결하여 9V 전압을 사용하는 것을 추천합니다. 단, 9V사각전지(6F22) 1개로 사용하는 것은 전류가 약하므로 사용불가!)</li>\n</ol>\n<p><img src=\"/image/LT-12.jpg\" alt=\"\" /></p>\n<br>\n<p>\u200b    건전지소켓에 나와있는 리드선의 끝부분을 스트리퍼를 사용하여 피복을 조금더 벗겨냅니다. 또한 빨간색과 검은색 점퍼선 2개를 별로로 준비한뒤, 한쪽 단자를 잘라내고, 스트리퍼로 피복을 벗겨냅니다.</p>\n<br>\n<ol start=\"7\">\n<li>건전지소켓의 리드선과 점퍼선을 붙여 떨어지지 않도록 단단히 납땜한 후,</li>\n</ol>\n<p><img src=\"/image/LT-13.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"8\">\n<li>합선되지 않도록 절연테이프나 열수축튜브로 각각을 잘 감싸둡니다.</li>\n</ol>\n<p><img src=\"/image/LT-14.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"9\">\n<li>이제 아크릴판을 준비합니다.</li>\n</ol>\n<p><img src=\"/image/LT-15.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"10\">\n<li>아래 그림의 Step1~2과정과 같이 모터를 고정할 아크릴 조각을 끼울 것입니다.</li>\n</ol>\n<p><img src=\"/image/LT-16.png\" alt=\"\" /></p>\n<br>\n<p>\u200b    우선, 모터를 고정할 아크릴 조각 2개를 고정할 위치를 확인합니다. 총 4개의 모터를 고정할 것이므로 아크릴 조각 8개가 필요합니다.</p>\n<p><img src=\"/image/LT-17.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"11\">\n<li>모터고정 아크릴 조각을 아래 사진처럼 끼웁니다. 하나는 구멍에 집어 넣고, 나머지 하나는 측면의 홈에 살짝 걸쳐둡니다.</li>\n</ol>\n<p><img src=\"/image/LT-18.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"12\">\n<li>이제 모터를 설치하겠습니다.</li>\n</ol>\n<p><img src=\"/image/LT-19.png\" alt=\"\" /></p>\n<br>\n<p><img src=\"/image/LT-20.png\" alt=\"\" /></p>\n<br>\n<p>\u200b    나사와 너트를 2개씩 준비한 후</p>\n<p><img src=\"/image/LT-21.jpg\" alt=\"\" /></p>\n<br>\n<p>\u200b    아크릴 조각 2개 사이에 모터를 위치시킨 후, 모터 몸체이 있는 나사 구멍에 나사 2개를 통과시켜</p>\n<p><img src=\"/image/LT-22.jpg\" alt=\"\" /></p>\n<br>\n<p>\u200b    아래 사진 같이 고정합니다.</p>\n<p><img src=\"/image/LT-23.jpg\" alt=\"\" /></p>\n<br>\n<p>13. 모터를 고정한 후, 바퀴축의 안쪽 부분에 바퀴의 균형을 잡아줄 동그란 아크릴 조각을 끼워줍니다.</p>\n<p><img src=\"/image/LT-24.jpg\" alt=\"\" /></p>\n<br>\n<p>\u200b     4개의 모터를 같은 방법으로 고정시켜 아래와 같은 형태를 만듭니다. 주의할 것은 모터의 단자가 위치한 은색부분의 모터본체 부분이 서로 맞닿는 형태로 조립을 해야 합니다.</p>\n<p><img src=\"/image/LT-25.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"14\">\n<li>바퀴를 끼웁니다.</li>\n</ol>\n<p><img src=\"/image/LT-26.png\" alt=\"\" /></p>\n<br>\n<ol start=\"15\">\n<li>금속기둥을 세우고 상판을 덮습니다. (아크릴상판이 없는 경우는 생략 가능)</li>\n</ol>\n<p><img src=\"/image/LT-27.png\" alt=\"\" /></p>\n<br>\n<p><img src=\"/image/LT-28.png\" alt=\"\" /></p>\n<br>\n<ol start=\"16\">\n<li>기판 아래면에 모터가 위치하도록 위아래를 뒤집은 후에, 기판 윗면에 TCRT5000 IR Reflective Sensor, 아두이노, 브레드보드, L298N 모터드라이브, 9V 전지소켓을 차례대로 올리고 나사볼트와 절연테이프 등으로 고정합니다. 대략 아래 사진과 비슷하게 고정하면 됩니다.</li>\n</ol>\n<p><img src=\"/image/LT-29.jpg\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"아두이노-연결하기\">아두이노 연결하기<a class=\"anchor\" href=\"#%ec%95%84%eb%91%90%ec%9d%b4%eb%85%b8-%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/LT-30.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"회로-연결\">회로 연결<a class=\"anchor\" href=\"#%ed%9a%8c%eb%a1%9c-%ec%97%b0%ea%b2%b0\">#</a></h4>\r\n<h5 id=\"모터--모터드라이버\">모터 ↔ 모터드라이버<a class=\"anchor\" href=\"#%eb%aa%a8%ed%84%b0--%eb%aa%a8%ed%84%b0%eb%93%9c%eb%9d%bc%ec%9d%b4%eb%b2%84\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th></th>\n          <th>L/F 모터 U단자</th>\n          <th>L/F 모터 D단자</th>\n          <th>L/R 모터 U단자</th>\n          <th>L/R 모터 D단자</th>\n          <th>R/F 모터 U단자</th>\n          <th>R/F 모터 D단자</th>\n          <th>R/R 모터 U단자</th>\n          <th>R/R모터 D단자</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>L298N OUT1</td>\n          <td></td>\n          <td>○</td>\n          <td></td>\n          <td>○</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>L298N OUT2</td>\n          <td>○</td>\n          <td></td>\n          <td>○</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>L298N OUT3</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td>○</td>\n          <td></td>\n          <td>○</td>\n      </tr>\n      <tr>\n          <td>L298N OUT4</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td>○</td>\n          <td></td>\n          <td>○</td>\n          <td></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h5 id=\"모터드라이버--전지소켓--아두이노\">모터드라이버 ↔ 전지소켓 ↔ 아두이노<a class=\"anchor\" href=\"#%eb%aa%a8%ed%84%b0%eb%93%9c%eb%9d%bc%ec%9d%b4%eb%b2%84--%ec%a0%84%ec%a7%80%ec%86%8c%ec%bc%93--%ec%95%84%eb%91%90%ec%9d%b4%eb%85%b8\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th></th>\n          <th>전지소켓 (+)</th>\n          <th>전지소켓(-)</th>\n          <th>아두이노</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>L298N 12V</td>\n          <td>○</td>\n          <td></td>\n          <td>Vin</td>\n      </tr>\n      <tr>\n          <td>L298N GND</td>\n          <td></td>\n          <td>GND (아두이노)</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>L298N 5V</td>\n          <td></td>\n          <td></td>\n          <td>5V</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h5 id=\"모터드라이브-enable--input--아두이노\">모터드라이브 ENABLE &amp; INPUT ↔ 아두이노<a class=\"anchor\" href=\"#%eb%aa%a8%ed%84%b0%eb%93%9c%eb%9d%bc%ec%9d%b4%eb%b8%8c-enable--input--%ec%95%84%eb%91%90%ec%9d%b4%eb%85%b8\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th></th>\n          <th>아두이노</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>L298N EN(A)</td>\n          <td>5</td>\n      </tr>\n      <tr>\n          <td>L298N IN1</td>\n          <td>8</td>\n      </tr>\n      <tr>\n          <td>L298N IN2</td>\n          <td>9</td>\n      </tr>\n      <tr>\n          <td>L298N IN3</td>\n          <td>10</td>\n      </tr>\n      <tr>\n          <td>L298N IN4</td>\n          <td>11</td>\n      </tr>\n      <tr>\n          <td>L298N EN(B)</td>\n          <td>6</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h5 id=\"tcrt5000-sensor--아두이노\">TCRT5000 Sensor ↔ 아두이노<a class=\"anchor\" href=\"#tcrt5000-sensor--%ec%95%84%eb%91%90%ec%9d%b4%eb%85%b8\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th></th>\n          <th>아두이노</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>#1 TCRT5000 VCC</td>\n          <td>5V</td>\n      </tr>\n      <tr>\n          <td>#1 TCRT5000 GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>#1 TCRT5000 DO</td>\n          <td>2</td>\n      </tr>\n      <tr>\n          <td>#1 TCRT5000 AO</td>\n          <td>–</td>\n      </tr>\n      <tr>\n          <td>#2 TCRT5000 VCC</td>\n          <td>5V</td>\n      </tr>\n      <tr>\n          <td>#2 TCRT5000 GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>#2 TCRT5000 DO</td>\n          <td>3</td>\n      </tr>\n      <tr>\n          <td>#2 TCRT5000 AO</td>\n          <td>–</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/* L298N - 2CH Motor Driver\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">Direction         IN1    IN2    IN3    IN4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">-------------------------------------------\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">GO                HIGH   HIGH   LOW    LOW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">BACK              LOW    LOW    HIGH   HIGH\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">BRAKE             LOW    LOW    LOW    LOW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">LEFT_TURN         HIGH   LOW    LOW    LOW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">RIGHT_TURN        LOW    HIGH   LOW    LOW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">LEFT_BACK_TURN    LOW    LOW    HIGH   LOW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">RIGHT_BACK_TURN   LOW    LOW    LOW    HIGH\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">PWM: 6V시 최소값 200이상은 되야 바퀴회전 가능 (너무 낮은 전압에서 회전 안됨)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 모터_전진컨트롤\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> Left_motor_IN1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;       <span style=\"color:#75715e\">// IN1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> Right_motor_IN2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>;      <span style=\"color:#75715e\">// IN2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 모터_후진컨트롤\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> Left_motor_IN3 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;      <span style=\"color:#75715e\">// IN3\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> Right_motor_IN4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>;     <span style=\"color:#75715e\">// IN4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 모터_속도컨트롤\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> Left_PWM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5</span>;               <span style=\"color:#75715e\">// 왼쪽모터 속도\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> Right_PWM <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">6</span>;              <span style=\"color:#75715e\">// 오른쪽모터 속도\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// IR Sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Left_Sensor <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;    <span style=\"color:#75715e\">// 왼쪽센서\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> Right_Sensor <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">3</span>;   <span style=\"color:#75715e\">// 오른쪽센서\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> Left_Sensor_Value;        <span style=\"color:#75715e\">// 검은색:1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> Right_Sensor_Value;       <span style=\"color:#75715e\">// 흰색:0\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(Left_motor_IN1, OUTPUT);      <span style=\"color:#75715e\">// PIN 8\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">pinMode</span>(Right_motor_IN2, OUTPUT);     <span style=\"color:#75715e\">// PIN 9\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(Left_motor_IN3, OUTPUT);      <span style=\"color:#75715e\">// PIN 10\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">pinMode</span>(Right_motor_IN4, OUTPUT);     <span style=\"color:#75715e\">// PIN 11\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(Left_PWM, OUTPUT);            <span style=\"color:#75715e\">// PIN 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">pinMode</span>(Right_PWM, OUTPUT);           <span style=\"color:#75715e\">// PIN 6\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(Left_Sensor, INPUT);          <span style=\"color:#75715e\">// 왼쪽센서\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">pinMode</span>(Right_Sensor, INPUT);         <span style=\"color:#75715e\">// 오른쪽센서\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 전진\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">go</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Left_motor_IN1, HIGH);   <span style=\"color:#75715e\">// 왼쪽모터   전진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Right_motor_IN2, HIGH);  <span style=\"color:#75715e\">// 오론쪽모터 전진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Left_motor_IN3, LOW);    <span style=\"color:#75715e\">// 왼쪽모터   후진_회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Right_motor_IN4, LOW);   <span style=\"color:#75715e\">// 오른쪽모터 후진_회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">analogWrite</span>(Left_PWM, <span style=\"color:#ae81ff\">255</span>);           <span style=\"color:#75715e\">// PWM값(0~255), 모터 회전속도 조절\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">analogWrite</span>(Right_PWM, <span style=\"color:#ae81ff\">255</span>);          <span style=\"color:#75715e\">// PWM값(0~255), 모터 회전속도 조절\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 후진\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">back</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Left_motor_IN1, LOW);    <span style=\"color:#75715e\">// 왼쪽모터   전진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Right_motor_IN2, LOW);   <span style=\"color:#75715e\">// 오론쪽모터 전진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Left_motor_IN3, HIGH);   <span style=\"color:#75715e\">// 왼쪽모터   후진_회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Right_motor_IN4, HIGH);  <span style=\"color:#75715e\">// 오른쪽모터 후진_회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">analogWrite</span>(Left_PWM, <span style=\"color:#ae81ff\">255</span>);           <span style=\"color:#75715e\">// PWM값(0~255), 모터 회전속도 조절\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">analogWrite</span>(Right_PWM, <span style=\"color:#ae81ff\">255</span>);          <span style=\"color:#75715e\">// PWM값(0~255), 모터 회전속도 조절\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">brake</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Left_motor_IN1, LOW);    <span style=\"color:#75715e\">// 왼쪽모터   전진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Right_motor_IN2, LOW);   <span style=\"color:#75715e\">// 오론쪽모터 전진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Left_motor_IN3, LOW);    <span style=\"color:#75715e\">// 왼쪽모터   후진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Right_motor_IN4, LOW);   <span style=\"color:#75715e\">// 오른쪽모터 후진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5</span>);  \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 좌회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">turn_left</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Left_motor_IN1, LOW);    <span style=\"color:#75715e\">// 왼쪽모터   전진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Right_motor_IN2, HIGH);  <span style=\"color:#75715e\">// 오론쪽모터 전진_회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Left_motor_IN3, LOW);    <span style=\"color:#75715e\">// 왼쪽모터   후진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Right_motor_IN4, LOW);   <span style=\"color:#75715e\">// 오른쪽모터 후진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">analogWrite</span>(Right_PWM, <span style=\"color:#ae81ff\">255</span>);           <span style=\"color:#75715e\">// PWM값(0~255), 모터 회전속도 조절\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 우회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">turn_right</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Left_motor_IN1, HIGH);   <span style=\"color:#75715e\">// 왼쪽모터   전진_회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Right_motor_IN2, LOW);   <span style=\"color:#75715e\">// 오론쪽모터 전진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Left_motor_IN3, LOW);    <span style=\"color:#75715e\">// 왼쪽모터   후진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(Right_motor_IN4, LOW);   <span style=\"color:#75715e\">// 오른쪽모터 후진_정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">analogWrite</span>(Left_PWM, <span style=\"color:#ae81ff\">255</span>);           <span style=\"color:#75715e\">// PWM값(0~255), 모터 회전속도 조절\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>(<span style=\"color:#ae81ff\">1</span>)\n</span></span><span style=\"display:flex;\"><span>  {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//신호가 있으면(흰색) LOW,  신호가 없으면(검은색) HIGH\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Right_Sensor_Value <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">digitalRead</span>(Right_Sensor);\n</span></span><span style=\"display:flex;\"><span>  Left_Sensor_Value <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">digitalRead</span>(Left_Sensor);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 전진: 왼쪽센서 검은색, 오른쪽센서 검은색\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span> (Left_Sensor_Value <span style=\"color:#f92672\">==</span> HIGH <span style=\"color:#f92672\">&amp;&amp;</span> Right_Sensor_Value <span style=\"color:#f92672\">==</span> HIGH)\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">go</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 좌회전: 왼쪽센서 검은색, 오른쪽센서 흰색\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span> (Left_Sensor_Value <span style=\"color:#f92672\">==</span> HIGH <span style=\"color:#f92672\">&amp;</span> Right_Sensor_Value <span style=\"color:#f92672\">==</span> LOW)\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">turn_left</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 우회전: 왼쪽센서 흰색, 오른쪽센서 검은색\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span> (Left_Sensor_Value <span style=\"color:#f92672\">==</span> LOW <span style=\"color:#f92672\">&amp;</span> Right_Sensor_Value <span style=\"color:#f92672\">==</span> HIGH) \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">turn_right</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 정지: 왼쪽센서 흰색, 오른쪽센서 흰색\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">else</span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">brake</span>();\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"센서-감도-조정\">센서 감도 조정<a class=\"anchor\" href=\"#%ec%84%bc%ec%84%9c-%ea%b0%90%eb%8f%84-%ec%a1%b0%ec%a0%95\">#</a></h5>\r\n<ul>\n<li>센서 반응을 살피면서 TCRT5000 모듈에 붙어 있는 감도조절기를 십자드라이버로 돌려 라인트레이싱에 가장 최적인 감도를 찾아야 한다.</li>\n</ul>\n"}{"uri":"http://localhost:1313/posts/arduino-bluetooth-%ED%8E%98%EC%96%B4%EB%A7%81/","title":"Arduino, Bluetooth 페어링","content":"<p>아두이노에서 블루투스를 이용하는 방법을 알아보겠습니다.</p>\n<br>\n<h3 id=\"bluetooth-module-선택\">Bluetooth module 선택<a class=\"anchor\" href=\"#bluetooth-module-%ec%84%a0%ed%83%9d\">#</a></h3>\r\n<ul>\n<li>\n<p><strong>아이폰</strong> : MLT-BT05(AT-09) BLE 모듈 사용 (이 모듈은 안드로이도에서도 사용 가능)</p>\n<p>HC-06, HC-05는 아이폰에서 SPP(Serial Port Profile) 통신이 지원하지 않는 이유로 사용할 수 없습니다. 그러므로 아이폰으로 블루투스 통신을 하기 위해서는 MLT-BT-BT05, AT-09, CC2541, HM-10, HC-02, RN-42 같은 BLE(Bluetooth Low Energy) 모듈을 사용합니다. 연결방법이나 AT명령어 세트는 HC-06과 비슷해요. 주의 할 점은, 시리얼 모니터에서 <strong>Both NL &amp; CR</strong> 모드를 선택해주어야 하는 것입니다.</p>\n</li>\n</ul>\n<p><img src=\"/image/BT-01.jpg\" alt=\"\" /></p>\n<ul>\n<li><strong>안드로이드</strong> : HC-06(or HC-05) 블루투스 모듈 사용 (이 모듈은 아이폰에서 사용 불가)</li>\n</ul>\n<p><img src=\"/image/BT-02.jpg\" alt=\"\" /></p>\n<blockquote class='book-hint '>\r\n<p>※ 요즘은 잘 사용하지 않지만, HC-05를 사용하기도 합니다. 생김새가 거의 비슷하지만, 몇가지 차이점이 있는데요. 보통 HC-06과 구별하기 위하여, HC-05에는 칩 위에 V형태로 체크를 해두거나, 화이트로 하얀색 점을 찍어두는 경우가 많습니다. 그리고, 가장 큰 차이점은 HC-05의 경우 6개의 핀이 모두 존재해요.</p>\n<p><img src=\"/image/BT-05.jpg\" alt=\"\" /></p></blockquote><blockquote class='book-hint '>\r\n<p>※ 예전에는 HC-05는 Master, HC-06은 Slave로 나누어 쓰는 경우가 많았지만, HC-06의 버전이 1.7이상인 경우 Master, Slave를 선택하여 사용할 수 있게 되면서 HC-05는 잘 사용하지 않게 되었습니다.</p></blockquote><br>\n<h4 id=\"mlt-bt05-hc-06을-사용하는-경우\">MLT-BT05, HC-06을 사용하는 경우<a class=\"anchor\" href=\"#mlt-bt05-hc-06%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h4>\r\n<h5 id=\"pin-map\">Pin Map<a class=\"anchor\" href=\"#pin-map\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th></th>\n          <th></th>\n          <th style=\"text-align: center\"></th>\n          <th>Arduino Uno</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>1</td>\n          <td>STATE</td>\n          <td style=\"text-align: center\">(실제 핀 없거나 미사용)</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>2</td>\n          <td>RXD</td>\n          <td style=\"text-align: center\">Receive Data (수신)</td>\n          <td>3</td>\n      </tr>\n      <tr>\n          <td>3</td>\n          <td>TXD</td>\n          <td style=\"text-align: center\">Transmit Data (송신)</td>\n          <td>2</td>\n      </tr>\n      <tr>\n          <td>4</td>\n          <td>GND</td>\n          <td style=\"text-align: center\">GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>5</td>\n          <td>VCC</td>\n          <td style=\"text-align: center\">+5V</td>\n          <td>+5V</td>\n      </tr>\n      <tr>\n          <td>6</td>\n          <td>KEY</td>\n          <td style=\"text-align: center\">(실제 핀 없거나 미사용)</td>\n          <td></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h5 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h5>\r\n<p><img src=\"/image/BT-03.jpg\" alt=\"\" /></p>\n<br>\n<h5 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SoftwareSerial.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>SoftwareSerial <span style=\"color:#a6e22e\">BTSerial</span>(<span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">3</span>); <span style=\"color:#75715e\">//Connect MLT-BT05 or HC-06 TX,RX \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()  \n</span></span><span style=\"display:flex;\"><span> {\n</span></span><span style=\"display:flex;\"><span>   Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>   Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Hello!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// set the data rate for the BT port\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>   BTSerial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span> }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (BTSerial.<span style=\"color:#a6e22e\">available</span>())\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">write</span>(BTSerial.<span style=\"color:#a6e22e\">read</span>());\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (Serial.<span style=\"color:#a6e22e\">available</span>())\n</span></span><span style=\"display:flex;\"><span>    BTSerial.<span style=\"color:#a6e22e\">write</span>(Serial.<span style=\"color:#a6e22e\">read</span>());\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"hc-05를-사용하는-경우\">HC-05를 사용하는 경우<a class=\"anchor\" href=\"#hc-05%eb%a5%bc-%ec%82%ac%ec%9a%a9%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h4>\r\n<h5 id=\"pin-map-1\">Pin Map<a class=\"anchor\" href=\"#pin-map-1\">#</a></h5>\r\n<table>\n  <thead>\n      <tr>\n          <th>HC-05 Pin</th>\n          <th></th>\n          <th style=\"text-align: center\"></th>\n          <th>Arduino Uno</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>1</td>\n          <td>STATE</td>\n          <td style=\"text-align: center\"></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>2</td>\n          <td>RXD</td>\n          <td style=\"text-align: center\">Receive Data</td>\n          <td>3</td>\n      </tr>\n      <tr>\n          <td>3</td>\n          <td>TXD</td>\n          <td style=\"text-align: center\">Transmit Date</td>\n          <td>7</td>\n      </tr>\n      <tr>\n          <td>4</td>\n          <td>GND</td>\n          <td style=\"text-align: center\">GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>5</td>\n          <td>VCC</td>\n          <td style=\"text-align: center\">+5V</td>\n          <td>+5V</td>\n      </tr>\n      <tr>\n          <td>6</td>\n          <td>KEY (ENABLE)</td>\n          <td style=\"text-align: center\">AT command 진입을 위한 핀</td>\n          <td>8</td>\n      </tr>\n  </tbody>\n</table>\n<blockquote class='book-hint '>\r\n<p>※ TXD로 UNO의 7번핀을 사용했으나, HC-06처럼 2번핀을 사용해도 됩니다. 단, schematic과 sketch도 2번 핀에 맞추어 수정해주세요.</p></blockquote><br>\n<h5 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h5>\r\n<p><img src=\"/image/BT-04.jpg\" alt=\"\" /></p>\n<br>\n<h5 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SoftwareSerial.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#75715e\">#define KEY 8\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    SoftwareSerial <span style=\"color:#a6e22e\">BTSerial</span>(<span style=\"color:#ae81ff\">7</span>, <span style=\"color:#ae81ff\">3</span>); <span style=\"color:#75715e\">//Connect HC-05 TX,RX \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()  \n</span></span><span style=\"display:flex;\"><span>     {\n</span></span><span style=\"display:flex;\"><span>       <span style=\"color:#a6e22e\">pinMode</span>(KEY, OUTPUT);       <span style=\"color:#75715e\">//for HC-05\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>       <span style=\"color:#a6e22e\">digitalWrite</span>(KEY, HIGH);\n</span></span><span style=\"display:flex;\"><span>       Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>       Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Hello!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">// set the data rate for the BT port\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>       BTSerial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">38400</span>);\n</span></span><span style=\"display:flex;\"><span>     }\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>     {\n</span></span><span style=\"display:flex;\"><span>       <span style=\"color:#66d9ef\">if</span> (BTSerial.<span style=\"color:#a6e22e\">available</span>())\n</span></span><span style=\"display:flex;\"><span>         Serial.<span style=\"color:#a6e22e\">write</span>(BTSerial.<span style=\"color:#a6e22e\">read</span>());\n</span></span><span style=\"display:flex;\"><span>       <span style=\"color:#66d9ef\">if</span> (Serial.<span style=\"color:#a6e22e\">available</span>())\n</span></span><span style=\"display:flex;\"><span>         BTSerial.<span style=\"color:#a6e22e\">write</span>(Serial.<span style=\"color:#a6e22e\">read</span>());\n</span></span><span style=\"display:flex;\"><span>     }</span></span></code></pre></div><br>\n<br>\n<h3 id=\"블루투스-모듈을-처음-사용하는-경우\">블루투스 모듈을 처음 사용하는 경우<a class=\"anchor\" href=\"#%eb%b8%94%eb%a3%a8%ed%88%ac%ec%8a%a4-%eb%aa%a8%eb%93%88%ec%9d%84-%ec%b2%98%ec%9d%8c-%ec%82%ac%ec%9a%a9%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h3>\r\n<p>모듈을 처음 사용한다면, AT 명령어 세트를 사용하여 세팅을 해주어야 합니다. 또한 이전에 사용한 경험이 있더라도 블루투스 모듈ID, 페어링 암호 등을 새롭게 세팅할 필요가 있는 경우에도 동일합니다.</p>\n<br>\n<h4 id=\"mlt-bt05at-09의-at-command\">MLT-BT05(AT-09)의 AT Command<a class=\"anchor\" href=\"#mlt-bt05at-09%ec%9d%98-at-command\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>명령어</th>\n          <th style=\"text-align: center\">Serial Monitor 출력 결과</th>\n          <th>의미</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>AT</td>\n          <td style=\"text-align: center\">OK</td>\n          <td>접속상태 확인</td>\n      </tr>\n      <tr>\n          <td>AT+NAMESKS100</td>\n          <td style=\"text-align: center\">OKsetname</td>\n          <td>블루투스 모듈ID 지정 (default MLT-BT05)</td>\n      </tr>\n      <tr>\n          <td>AT+PIN</td>\n          <td style=\"text-align: center\">PASSWORD 출력</td>\n          <td>패스워드 확인</td>\n      </tr>\n      <tr>\n          <td>AT+PIN1234</td>\n          <td style=\"text-align: center\">OKsetPIN</td>\n          <td>페어링 암호 설정 (default: <strong>123456</strong>)</td>\n      </tr>\n      <tr>\n          <td>AT+BAUD4</td>\n          <td style=\"text-align: center\">OK9600</td>\n          <td>통신속도 설정 (4 → 9600bps) (default: 0 → 115200bps)</td>\n      </tr>\n      <tr>\n          <td>AT+VERSION</td>\n          <td style=\"text-align: center\">OKVERSION=4.0</td>\n          <td>MLT-BT05 버전 확인</td>\n      </tr>\n      <tr>\n          <td>AT+LADDR</td>\n          <td style=\"text-align: center\">+LADDR=(MAC Address)</td>\n          <td>MAC Address 확인</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE=0</td>\n          <td style=\"text-align: center\">OK+ROLE:0</td>\n          <td>SLAVE mode (default)</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE=1</td>\n          <td style=\"text-align: center\">OK+ROLE:1</td>\n          <td>MASTER mode</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE=2</td>\n          <td style=\"text-align: center\">OK+ROLE:2</td>\n          <td>sensor mode</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE=3</td>\n          <td style=\"text-align: center\">OK+ROLE:3</td>\n          <td>iBeacon mode</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE=4</td>\n          <td style=\"text-align: center\">OK+ROLE:4</td>\n          <td>WeChat mode</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE</td>\n          <td style=\"text-align: center\">OK+ROLE:</td>\n          <td>Role 확인</td>\n      </tr>\n  </tbody>\n</table>\n<p>※ <a href=\"/attach/MLT-BT05.pdf\">AT Command set 다운로드</a></p>\n<br>\n<h4 id=\"hc-06의-at-command\">HC-06의 AT Command<a class=\"anchor\" href=\"#hc-06%ec%9d%98-at-command\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>명령어</th>\n          <th style=\"text-align: center\">Serial Monitor 출력 결과</th>\n          <th>의미</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>AT</td>\n          <td style=\"text-align: center\">OK</td>\n          <td>접속상태 확인</td>\n      </tr>\n      <tr>\n          <td>AT+NAMESKS100</td>\n          <td style=\"text-align: center\">OKsetname</td>\n          <td>블루투스 모듈ID 지정 (SKS100)</td>\n      </tr>\n      <tr>\n          <td>AT+PIN</td>\n          <td style=\"text-align: center\">PASSWORD출력</td>\n          <td>패스워드 확인</td>\n      </tr>\n      <tr>\n          <td>AT+PIN1234</td>\n          <td style=\"text-align: center\">OKsetPIN</td>\n          <td>페어링 암호 설정 (default: <strong>1234</strong>)</td>\n      </tr>\n      <tr>\n          <td>AT+BAUD4</td>\n          <td style=\"text-align: center\">OK9600</td>\n          <td>통신속도 설정 (4 → 9600bps) (default: 4 → 9600bps)</td>\n      </tr>\n      <tr>\n          <td>AT+VERSION</td>\n          <td style=\"text-align: center\">OKlinvorV1.8</td>\n          <td>HC-06 버전 확인</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE=S</td>\n          <td style=\"text-align: center\">OK+ROLE:S</td>\n          <td>SLAVE 역할</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE=M</td>\n          <td style=\"text-align: center\">OK+ROLE:M</td>\n          <td>MASTER 역할 (v1.7 이상만 가능)</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE</td>\n          <td style=\"text-align: center\">OK+ROLE:</td>\n          <td>MASTER/SLAVE 확인</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"hc-05의-at-command\">HC-05의 AT Command<a class=\"anchor\" href=\"#hc-05%ec%9d%98-at-command\">#</a></h4>\r\n<blockquote class='book-hint '>\r\n<p>※ HC-05는 AT Command를 사용하는 경우, KEY(Enable) 핀을 연결해주어야 합니다. (schematic 참고)</p></blockquote><table>\n  <thead>\n      <tr>\n          <th>명령어</th>\n          <th style=\"text-align: center\">Serial Monitor 출력 결과</th>\n          <th>의미</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>AT</td>\n          <td style=\"text-align: center\">OK</td>\n          <td>접속상태 확인</td>\n      </tr>\n      <tr>\n          <td>AT+NAMESKS100</td>\n          <td style=\"text-align: center\">OKsetname</td>\n          <td>블루투스 모듈ID 지정 (SKS100)</td>\n      </tr>\n      <tr>\n          <td>AT+PSWD=0000</td>\n          <td style=\"text-align: center\">OKsetPIN</td>\n          <td>페어링 암호 설정 (0000)</td>\n      </tr>\n      <tr>\n          <td>AT+BAUD6</td>\n          <td style=\"text-align: center\">OK9600</td>\n          <td>통신속도 설정 (6 → 38400bps)</td>\n      </tr>\n      <tr>\n          <td>AT+VERSION</td>\n          <td style=\"text-align: center\">OKlinvorV1.8</td>\n          <td>HC-06 버전 확인</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE=0</td>\n          <td style=\"text-align: center\">OK+ROLE:0</td>\n          <td>SLAVE 역할</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE=1</td>\n          <td style=\"text-align: center\">OK+ROLE:1</td>\n          <td>MASTER 역할</td>\n      </tr>\n      <tr>\n          <td>AT+ROLE=?</td>\n          <td style=\"text-align: center\">OK+ROLE:</td>\n          <td>MASTER/SLAVE 확인</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<br>\n<h3 id=\"스마트폰과의-페어링-과정\">스마트폰과의 페어링 과정<a class=\"anchor\" href=\"#%ec%8a%a4%eb%a7%88%ed%8a%b8%ed%8f%b0%ea%b3%bc%ec%9d%98-%ed%8e%98%ec%96%b4%eb%a7%81-%ea%b3%bc%ec%a0%95\">#</a></h3>\r\n<h4 id=\"시리얼모니터에서\">시리얼모니터에서<a class=\"anchor\" href=\"#%ec%8b%9c%eb%a6%ac%ec%96%bc%eb%aa%a8%eb%8b%88%ed%84%b0%ec%97%90%ec%84%9c\">#</a></h4>\r\n<p>HC-06과의 페어링 과정을 보도록 하겠습니다. (다른 블루투스 모듈도 유사하게 진행하면 됩니다.)</p>\n<br>\n<ol>\n<li>먼저 아두이노IDE의 시리얼 모니터를 엽니다.</li>\n</ol>\n<blockquote class='book-hint '>\r\n<p>※ 이때, 주의할 점이 있는데요. <strong>시리얼 모니터를 열기 전에 스마트폰과 HC-06의 블루투스 연결은 해제된 상태</strong>여야 합니다. 기존에 HC-06과 스마트폰을 연결한 적이 있다면, 자기도 모르게 블루투스 연결이 자동으로 되어 있을 수 있는데요. 이런 경우에는 시리얼 모니터가 열리지 않아요.</p></blockquote><ul>\n<li><strong>MLT-BT05</strong>: 시리얼모니터의 하단에 “<strong>Both NL &amp; CR</strong>”, “9600 보드레이트” 선택</li>\n<li><strong>HC-06</strong>: 시리얼창의 하단에 “<strong>line ending 없음</strong>”, “9600 보드레이트 선택</li>\n<li><strong>HC-05</strong>: 시리얼창의 하단에 “<strong>Both NL &amp; CR</strong>”, “9600 보드레이트” 선택</li>\n</ul>\n<br>\n<ol start=\"2\">\n<li>위 스케치를 <strong>사용하는 모듈에 맞게 선택하여</strong> 아두이노에 업로드 한 상태에서 시리얼 모니터를 열면, Hello! 라는 글자가 뜹니다. (업로드한 스케치에 따라 Hello!는 안나올 수도 있음)\n<img src=\"/image/BT-06.jpg\" alt=\"\" /></li>\n</ol>\n<br>\n<ol start=\"3\">\n<li>AT를 입력하고,\n<img src=\"/image/BT-07.jpg\" alt=\"\" /></li>\n</ol>\n<br>\n<ol start=\"4\">\n<li>전송을 누르면 OK가 뜹니다. 이것은 아두이노IDE를 통해 블루투스 모듈과 연결이 정상적으로 되었음을 의미해요.\n<img src=\"/image/BT-08.jpg\" alt=\"\" /></li>\n</ol>\n<br>\n<ol start=\"5\">\n<li>블루투스 모듈ID를 설정해보겠습니다. SKS100이라는 ID로 지정하기 위해 <strong>AT+NAMESKS100</strong>이라고 입력한 뒤, 전송을 누릅니다. (모듈ID는 본인이 사용할 이름으로 바꾸어 지정합니다.)\n<img src=\"/image/BT-09.jpg\" alt=\"\" /></li>\n</ol>\n<br>\n<ol start=\"6\">\n<li>그러면 OKsetname이라고 출력이 되면서, 블루투스 모듈ID가 SKS100으로 셋팅이 됩니다.\n<img src=\"/image/BT-09-1.jpg\" alt=\"\" /></li>\n</ol>\n<br>\n<ol start=\"7\">\n<li>이번에는 페어링 암호 설정입니다. AT+PIN0000을 입력하고 전송을 누르면\n<img src=\"/image/BT-10.jpg\" alt=\"\" /></li>\n</ol>\n<br>\n<ol start=\"8\">\n<li>OKsetPIN이 출력되면서 페어링 암호가 0000으로 설정됩니다.\n<img src=\"/image/BT-11.jpg\" alt=\"\" /></li>\n</ol>\n<br>\n<ol start=\"9\">\n<li>통신속도 설정입니다. HC-06은 주로 9600bps를 사용하며, 이를 위해 AT+BAUD4를 입력한 뒤 전송을 누릅니다. (HC-06의 경우 default 속도가 9600bps이므로 이 과정은 생략 가능하며, 다른 모듈을 사용하는 경우에는 각 모듈의 AT Command를 확인하여 통신속도를 변경해주어야 합니다.)\n<img src=\"/image/BT-12.jpg\" alt=\"\" /></li>\n</ol>\n<br>\n<ol start=\"10\">\n<li>OK9600이 출력되요.\n<img src=\"/image/BT-13.jpg\" alt=\"\" /></li>\n</ol>\n<br>\n<p>여기까지 진행하면 대체적으로 HC-06을 사용할 준비가 된 것입니다.</p>\n<br>\n<h4 id=\"스마트폰에서\">스마트폰에서<a class=\"anchor\" href=\"#%ec%8a%a4%eb%a7%88%ed%8a%b8%ed%8f%b0%ec%97%90%ec%84%9c\">#</a></h4>\r\n<ol>\n<li>이제 스마트폰에서 블루투스 모드를 켜세요. (아래 화면은 스마트폰 기종마다 조금은 다를 수 있습니다. 화면이 다르더라도 거의 비슷할 거에요.) 그리고 새로고침을 통해 블루투스 기기를 찾습니다.\n<figure class=\"center\"><img src=\"/image/BT-14.png\" width=\"33%\">\n</figure>\n</li>\n</ol>\n<br>\n<ol start=\"2\">\n<li>‘거의 이용하지 않는 기기’ 하나를 찾았네요. 그곳을 누르면 조금전에 설정한 블루투스 모듈ID인 SKS100이 보입니다. 여기를 누르세요.\n<figure class=\"center\"><img src=\"/image/BT-15.png\" width=\"33%\">\n</figure>\n</li>\n</ol>\n<br>\n<ol start=\"3\">\n<li>블루투스 모듈과 페어링을 하기 위한 암호 입력화면이 나오고, 여기에 AT명령어를 통해 입력한 암호를 넣어줍니다.\n<figure class=\"center\"><img src=\"/image/BT-14-1.png\" width=\"33%\">\n</figure>\n</li>\n</ol>\n<br>\n<ol start=\"4\">\n<li>그러면 스마트폰이 SKS100 모듈에 페어링을 시도합니다.\n<figure class=\"center\"><img src=\"/image/BT-16.png\" width=\"33%\">\n</figure>\n</li>\n</ol>\n<br>\n<ol start=\"5\">\n<li>거의 이용하지 않는 블루투스 기기 부분을 누르면\n<figure class=\"center\"><img src=\"/image/BT-17.png\" width=\"33%\">\n</figure>\n</li>\n</ol>\n<br>\n<ol start=\"6\">\n<li>페어링된 기기 목록에 SKS100이 뜹니다. 여기까지 진행하면, 스마트폰과 블루투스 모듈이 페어링 완료된 거에요.\n<figure class=\"center\"><img src=\"/image/BT-18.png\" width=\"33%\">\n</figure>\n</li>\n</ol>\n"}{"uri":"http://localhost:1313/posts/esp32-ble-blynk-gauge/","title":"esp32 BLE, Blynk Gauge","content":"<h3 id=\"esp32에서-blynk로-센서값-보내기\">ESP32에서 Blynk로 센서값 보내기<a class=\"anchor\" href=\"#esp32%ec%97%90%ec%84%9c-blynk%eb%a1%9c-%ec%84%bc%ec%84%9c%ea%b0%92-%eb%b3%b4%eb%82%b4%ea%b8%b0\">#</a></h3>\r\n<p>Blynk App의 GAUGE 위젯을 사용하여 ESP32에 연결된 Potentiometer의 저항값을 읽어 Blynk App에 전압(V), 저항(㏀) 값을 표시해본다. (ESP32 → Blynk App)</p>\n<ul>\n<li>ESP32의 Potentiometer 값을 읽기 위해 BLYNK_READ(Vpin)을 사용한다.</li>\n<li>새로운 프로젝트를 만드는 경우, 새로운 auth token을 받아서 사용해야 한다.</li>\n</ul>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/blynk-adc-01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BLYNK_PRINT Serial\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BLYNK_USE_DIRECT_CONNECT\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;BlynkSimpleEsp32_BLE.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;BLEDevice.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;BLEServer.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// You should get Auth Token in the Blynk App.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Go to the Project Settings (nut icon).\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">char</span> auth[] <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;WUAeS6P57T3XNaIGyLK1-OUv........&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Potentiometer Pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define PIN_POTENTIOMETER A0                       </span><span style=\"color:#75715e\">// Potentiometer GPIO 36\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Resist, Voltage\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> value_Potentiometer; \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> value_R;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">float</span> value_V;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Debug console\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Waiting for connections...&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// for Blynk \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Blynk.<span style=\"color:#a6e22e\">setDeviceName</span>(<span style=\"color:#e6db74\">&#34;Blynk-t&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Blynk.<span style=\"color:#a6e22e\">begin</span>(auth);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  value_Potentiometer <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(PIN_POTENTIOMETER);  <span style=\"color:#75715e\">// 12bit ADC (0~4095)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  value_V <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(value_Potentiometer, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">4095</span>, <span style=\"color:#ae81ff\">3300</span>, <span style=\"color:#ae81ff\">0</span>); <span style=\"color:#75715e\">// 0~3300mV\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  value_R <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(value_V, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">3300</span>, <span style=\"color:#ae81ff\">10000</span>, <span style=\"color:#ae81ff\">0</span>);            <span style=\"color:#75715e\">// 0~10kΩ\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  Blynk.<span style=\"color:#a6e22e\">run</span>();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Resist : &#34;</span>); Serial.<span style=\"color:#a6e22e\">print</span>(value_R); Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Ω&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Voltage: &#34;</span>); Serial.<span style=\"color:#a6e22e\">print</span>(value_V); Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;mV&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">BLYNK_READ</span>(V1)           <span style=\"color:#75715e\">// ESP32 -&gt; widget virtual pin1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>{\n</span></span><span style=\"display:flex;\"><span>  Blynk.<span style=\"color:#a6e22e\">virtualWrite</span>(V1, value_R);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">BLYNK_READ</span>(V2)           <span style=\"color:#75715e\">// ESP32 -&gt; widget virtual pin1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>{\n</span></span><span style=\"display:flex;\"><span>  Blynk.<span style=\"color:#a6e22e\">virtualWrite</span>(V2, value_V);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><ul>\n<li>Blynk에서 2개의 Gauge를 사용하기 위해 BLYNK)READ(Vpin)을 2번 사용한다.</li>\n<li>Blynk.virtualWrite(Vpin, value)를 통해 Blynk App의 Gauge 위젯에서 지정한 virtual pin에 value값을 표시한다.</li>\n</ul>\n<br>\n<br>\n<h3 id=\"blynk-설정\">Blynk 설정<a class=\"anchor\" href=\"#blynk-%ec%84%a4%ec%a0%95\">#</a></h3>\r\n<ol>\n<li>새로운 프로젝트를 생성한다.\n<ul>\n<li>NAME : ESP32_Potentiometer</li>\n<li>CHOOSE DEVICE : ESP32 Dev Board</li>\n<li>CONNECTION TYPE : BLE</li>\n</ul>\n</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-02.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"2\">\n<li>이메일로 발송된 토큰을 복사한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-03.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"3\">\n<li>+버튼을 눌러 위젯을 추가할 수 있는 화면으로 진입한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-04.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"4\">\n<li>먼저 BLE 위젯을 선택하여 ESP32와 Blynk간의 통신 방법을 지정한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-05.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"5\">\n<li>블루투스 모양의 위젯 버튼을 눌러 Blynk와의 통신을 준비한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-06.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"6\">\n<li>Connect BLE device</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-07.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"7\">\n<li>연결하고자 하는 BLE 장비를 선택하면,</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-08.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"8\">\n<li>연결 확인!</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-09.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"9\">\n<li>+버튼을 눌러 출력 위젯 2개를 추가한다. (Gauge, Labeled value)</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-10.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"10\">\n<li>먼저 Gauge 위젯을 선택한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-11.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"11\">\n<li>Gauge 위젯이 추가되면 육각형 모양의 아이콘을 눌러 GAUGE Setting 화면으로 진입한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-12.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-adc-13.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"12\">\n<li>설정화면에서 다음 4가지를 설정한다.\n<ul>\n<li>NAME : 저항</li>\n<li>INPUT : V1, 0~1000</li>\n<li>LABEL : (단위를 표시하기 위해) x10 Ohm 을 적는다.</li>\n<li>READING RATE : 1sec (PUSH 위젯은 실행되지 않음)</li>\n</ul>\n</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-14.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"13\">\n<li>Labeled Value 위젯을 추가하고, 다음과 같이 설정한다.\n<ul>\n<li>NAME : 저항</li>\n<li>INPUT : V2, 0~3300</li>\n<li>LABEL : (단위를 표시하기 위해) mV 를 적는다.</li>\n<li>READING RATE : 1sec (PUSH 위젯은 실행되지 않음)</li>\n</ul>\n</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-15.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"14\">\n<li>상단의 뒤로가기 화살표를 눌러 프로젝트 바탕화면으로 돌아간다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-16.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"15\">\n<li>여기서 플레이버튼을 누르면,</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-17.png\" width=\"33%\">\n</figure>\n\n<br>\n<p>저항과 전압의 측정이 시작된다. (시리얼 모니터에서도 관찰 가능)</p>\n<figure class=\"center\"><img src=\"/image/blynk-adc-18.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-adc-19.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"16\">\n<li>가변 저항을 돌릴 때마다 저항과 전압이 바뀐다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-adc-20.png\" width=\"33%\">\n</figure>\n\n"}{"uri":"http://localhost:1313/posts/esp32-ble-blynk-slider-pwm/","title":"esp32 BLE, Blynk Slider (PWM)","content":"<h3 id=\"esp32와-blynk에서의-pwm-사용\">ESP32와 Blynk에서의 PWM 사용<a class=\"anchor\" href=\"#esp32%ec%99%80-blynk%ec%97%90%ec%84%9c%ec%9d%98-pwm-%ec%82%ac%ec%9a%a9\">#</a></h3>\r\n<p>Blynk app에서 Slider 위젯을 사용하여 App → ESP32로 PWM 신호를 보내 LED의 밝기를 조절해본다.</p>\n<ul>\n<li>Blynk에서 Slider는 Virtual pin을 사용해야한다. (Digital핀을 선택하는 것이 불가능)</li>\n<li>Virtual pin을 사용하기 위해 BLYNK_WRITE(Vpin)을 사용한다.</li>\n<li>ESP32에서 PWM을 사용하기 위한 절차에 따라 코딩을 진행한다.</li>\n</ul>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/blynk-pwm-01.png\" alt=\"\" /></p>\n<p>※ LED모듈을 사용하는 경우 저항이 필요없다.</p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BLYNK_PRINT Serial\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BLYNK_USE_DIRECT_CONNECT\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;BlynkSimpleEsp32_BLE.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;BLEDevice.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;BLEServer.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// You should get Auth Token in the Blynk App.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Go to the Project Settings (nut icon).\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">char</span> auth[] <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;rc77E7UrbQHhoLE-LV1Ajxz20k8eLBrk&#34;</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// setting PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define LEDC_FREQ        5000 </span><span style=\"color:#75715e\">// Hz\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define LEDC_CHANNEL_0   0\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define LEDC_RESOLUTION  12   </span><span style=\"color:#75715e\">// 10bit (0~1023) 12bit(0~4095) 16bit(0~65535)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// led Pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> pin_ledR <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">19</span>;\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">BLYNK_WRITE</span>(V5)           <span style=\"color:#75715e\">// widget virtual pin5 -&gt; ESP32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">int</span> value_V5 <span style=\"color:#f92672\">=</span> param.<span style=\"color:#a6e22e\">asInt</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">ledcWrite</span>(LEDC_CHANNEL_0, value_V5);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;V5 value: &#34;</span>); Serial.<span style=\"color:#a6e22e\">println</span>(value_V5);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Debug console\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Waiting for connections...&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// configure LED PWM functionalitites\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcSetup</span>(LEDC_CHANNEL_0, LEDC_FREQ, LEDC_RESOLUTION);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// attach the same channel to the GPIO to be controlled\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(pin_ledR, LEDC_CHANNEL_0);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// for Blynk \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Blynk.<span style=\"color:#a6e22e\">setDeviceName</span>(<span style=\"color:#e6db74\">&#34;Blynk-t&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Blynk.<span style=\"color:#a6e22e\">begin</span>(auth);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  Blynk.<span style=\"color:#a6e22e\">run</span>();\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"sketch-분석\">sketch 분석<a class=\"anchor\" href=\"#sketch-%eb%b6%84%ec%84%9d\">#</a></h4>\r\n<p>Button 위젯 사용을 위해 사용하였던 예제 sketch에 다음의 라인을 추가하여야 한다.</p>\n<br>\n<ol>\n<li>LED가 연결되어 있는 ESP32 핀</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> pin_ledR <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">19</span>;</span></span></code></pre></div><br>\n<ol start=\"2\">\n<li>Blynk App에서 ESP32로 신호를 보내는 Virtual 핀</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">BLYNK_WRITE</span>(V5) {                          <span style=\"color:#75715e\">// widget virtual pin(V5) -&gt; ESP32\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">int</span> value_V5 <span style=\"color:#f92672\">=</span> param.<span style=\"color:#a6e22e\">asInt</span>();            <span style=\"color:#75715e\">// V5로 지정된 위젯의 값을 읽고\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcWrite</span>(LEDC_CHANNEL_0, value_V5);     <span style=\"color:#75715e\">// PWM 채널0으로 보냄\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;V5 value: &#34;</span>); Serial.<span style=\"color:#a6e22e\">println</span>(value_V5);     <span style=\"color:#75715e\">// 시리얼모니터에 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><br>\n<ol start=\"3\">\n<li>LED에 PWM 신호 출력 (밝기 조절)</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// configure LED PWM functionalitites\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcSetup</span>(LEDC_CHANNEL_0, LEDC_FREQ, LEDC_RESOLUTION);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// attach the same channel to the GPIO to be controlled\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(pin_ledR, LEDC_CHANNEL_0);</span></span></code></pre></div><br>\n<h3 id=\"blynk-app-설정\">Blynk App 설정<a class=\"anchor\" href=\"#blynk-app-%ec%84%a4%ec%a0%95\">#</a></h3>\r\n<ol>\n<li>Button 위젯을 삭제한다. (그냥 두어도 관계없음)</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-02.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-03.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-04.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"2\">\n<li>프로젝트 바탕화면에서 ⊕버튼을 누른 후, Slider 위젯을 추가한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-05.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"3\">\n<li>프로젝트 바탕화면의 Slider 위젯을 누른다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-06.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"4\">\n<li>Slider 설정화면이 나오면,</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-07.png\" width=\"33%\">\n</figure>\n\n<br>\n<p>PIN을 누르고 사용할 Virual 핀을 선택한 뒤 OK버튼을 누른다. (여기서는 V5선택)</p>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-08.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-09.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"5\">\n<li>다음 3가지를 추가로 설정한다.\n<ul>\n<li>OUTPUT 범위 : 0 ~ 4095 (12bit 사용시)</li>\n<li>SEND ON RELEASE : OFF (OFF 선택시 Slide를 조절하는 즉시 실시간으로 출력값 반영되며, ON 선택시 Slide에서 손가락을 떼면 출력값이 반영된다.)</li>\n<li>WRITE INTERVAL : SEND ON RELEASE를 OFF로 선택시 나타나며, 100ms가 가장 작은 값이다.</li>\n</ul>\n</li>\n</ol>\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-10.png\" width=\"33%\">\n</figure>\n\n<br>\n<p>설정을 모두 마치면 상단의 뒤로가기 화살표를 눌러 프로젝트 바탕화면으로 돌아간다.</p>\n<br>\n<ol start=\"6\">\n<li>Slider 위젯을 1초이상 누르고 있으면 위젯의 위치와 크기를 조절할 수 있다. 위젯의 위치를 아래로 내리고 가로폭의 크기를 늘려본다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-11.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-12.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"7\">\n<li>이제 플레이(▷) 버튼을 누르고 Slide를 조절해본다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-13.png\" width=\"33%\">\n</figure>\n\n<br>\n<p>Slide값에 따라 LED의 밝기가 조절된다.</p>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-14.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-pwm-15.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"8\">\n<li>Slider를 조절하는 동안 Arduino IDE의 시리얼 모니터값을 확인해볼 수 있다.</li>\n</ol>\n<p><img src=\"/image/blynk-pwm-16.png\" alt=\"\" /></p>\n"}{"uri":"http://localhost:1313/posts/esp32-ble-blynk-button/","title":"esp32 BLE, Blynk Button","content":"<h3 id=\"blynk를-처음-사용하는-경우\">Blynk를 처음 사용하는 경우<a class=\"anchor\" href=\"#blynk%eb%a5%bc-%ec%b2%98%ec%9d%8c-%ec%82%ac%ec%9a%a9%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h3>\r\n<h4 id=\"blynk-라이브러리-설치하기\">Blynk 라이브러리 설치하기<a class=\"anchor\" href=\"#blynk-%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%84%a4%ec%b9%98%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>docs.blynk.cc 접속 – Downloads – Blynk Library</li>\n<li><a href=\"https://github.com/blynkkk/blynk-library/releases/tag/v0.6.1\">https://github.com/blynkkk/blynk-library/releases/tag/v0.6.1</a>\n<ul>\n<li>Blynk_Release_v0.6.1.zip 다운로드</li>\n</ul>\n</li>\n<li>압축을 풀면 libraries, tools 폴더가 보임</li>\n<li>이 두 폴더를 아두이노IDE의 기본 스케치북 위치로 복사하여 붙여넣기 함\n<ul>\n<li>기존의 libraries 폴더와 합쳐짐</li>\n<li>기본 스케치북 위치 확인 방법\n<ul>\n<li>아두이노IDE – 파일 – 환경설정 – 설정탭 – 스케치북 위치</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n<h4 id=\"스마트폰에-blynk-app-설치하기\">스마트폰에 Blynk App 설치하기<a class=\"anchor\" href=\"#%ec%8a%a4%eb%a7%88%ed%8a%b8%ed%8f%b0%ec%97%90-blynk-app-%ec%84%a4%ec%b9%98%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ul>\n<li>아이폰 : 애플 앱스토어</li>\n<li>안드로이드 : 구글 플레이스토어</li>\n</ul>\n<br>\n<br>\n<h3 id=\"버튼-위젯을-이용한-led-onoff-하기\">버튼 위젯을 이용한 LED On/Off 하기<a class=\"anchor\" href=\"#%eb%b2%84%ed%8a%bc-%ec%9c%84%ec%a0%af%ec%9d%84-%ec%9d%b4%ec%9a%a9%ed%95%9c-led-onoff-%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/blynk-01.png\" alt=\"\" /></p>\n<p>※ RGB LED 모듈을 사용하는 경우에는 저항을 연결하지 않는다.</p>\n<br>\n<h4 id=\"blynk-설정\">Blynk 설정<a class=\"anchor\" href=\"#blynk-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<ol>\n<li>Blynk App 실행</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-02.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"2\">\n<li>Create New Account : 주로 사용하는 e-mail을 사용하여 계정 생성 (계정이 이미 생성되어 있는 경우에는 Log In)</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-03.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-04.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"3\">\n<li>New Project 생성 : ESP32_LED</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-05.png\" width=\"33%\">\n</figure>\n\n<br>\n<ul>\n<li>프로젝트명 : ESP32_LED</li>\n<li>CHOOSE DEVICE : ESP32 Dev Board</li>\n<li>CONNECTION TYPE : BLE</li>\n</ul>\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-06.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"4\">\n<li>Create를 누르면 Blynk 가입시 계정으로 사용한 이메일로 Auth Token 발송된다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-07.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"5\">\n<li>OK버튼을 누르면 프로젝트가 생성된다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-08.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"6\">\n<li>컴퓨터를 사용하여 이메일 계정에 로그인 한 후, Auth Token을 복사한다. (복잡한 형태의 토큰을 코딩시 사용할 것이므로, 스마트폰인 아닌 컴퓨터에서 확인하여 복사하는 것이 좋다.)</li>\n</ol>\n<p><img src=\"/image/blynk-09.png\" alt=\"\" /></p>\n<br>\n<ol start=\"7\">\n<li>Blynk 위젯 설정 : 생성된 프로젝트(ESP32_LED) 바탕화면으로 진입하면 Blynk App 상단의 초록색 메뉴바의 이름이 &ldquo;ESP32_LED&quot;로 바뀐다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-10.png\" width=\"33%\">\n</figure>\n\n<br>\n<p>만약, 아래와 같이 초록색 메뉴바의 이름이 &ldquo;Blynk&quot;로 되어있다면, 프로젝트 바탕화면으로 진입하지 못한 것이다. 이때에는 검은색 바탕화면의 &ldquo;ESP32_LED&quot;프로젝트명을 확인한 후 터치하면 해당프로젝트로 진입할 수 있다. 기존에 다른 프로젝트를 만들어 둔 적이 있다면 검은색 바탕화면의 프로젝트명이 &ldquo;ESP32_LED&quot;가 아닐 수도 있다. 이런 경우에는 스마트폰 화면을 좌우로 스크롤하여 프로젝트명을 변경한 후 진입한다.</p>\n<figure class=\"center\"><img src=\"/image/blynk-11.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"8\">\n<li>프로젝트 바탕화면에서 ⊕버튼을 누른 후, Button 위젯과 BLE 위젯을 눌러 추가한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-12.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-13.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-14.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"9\">\n<li>프로젝트 바탕화면에 두개의 위젯이 표시된다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-15.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"10\">\n<li>BUTTON 위젯을 누르면 Buttom Settings 화면이 나타난다. 여기서 PIN부분을 누른다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-16.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"11\">\n<li>LED를 연결한 PIN을 선택한다. 여기서는 Digital GP19를 선택하였다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-17.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"12\">\n<li>OK버튼을 누르면 OUTPUT 버튼이 GP19로 설정된다. Mode는 SWITCH로 설정한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-18.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"13\">\n<li>Blynk App 상단의 뒤로가기 버튼을 누른뒤 프로젝트 바탕화면으로 간다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-19.png\" width=\"33%\">\n</figure>\n\n<br>\n<h4 id=\"blynk-연결하기\">Blynk 연결하기<a class=\"anchor\" href=\"#blynk-%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>Arduino IDE에서 예제를 로드한다. <strong>파일</strong>&gt; <strong>예제</strong>&gt; <strong>Blynk</strong>&gt; <strong>Boards_Bluetooth</strong>&gt; <strong>ESP32_BLE</strong></li>\n</ol>\n<p><img src=\"/image/blynk-20.png\" alt=\"\" /></p>\n<br>\n<ol start=\"2\">\n<li>예제의 char auth[] = “YourAuthToken”; 부분을 찾아서 쌍따옴표 사이의 YourAuthToken을 지운 뒤, 이메일에서 복사한 AuthToken 붙여넣은 뒤, 다른 이름으로 저장한다.</li>\n</ol>\n<p><img src=\"/image/blynk-21.png\" alt=\"\" /></p>\n<br>\n<p><img src=\"/image/blynk-22.png\" alt=\"\" /></p>\n<br>\n<ol start=\"3\">\n<li>예제의 <strong>Blynk.setDeviceName(&ldquo;Blynk&rdquo;);</strong> 부분을 찾아 따옴표 안의 BLE Device 이름을 적당한 이름으로 바꿔준다. (※이름을 바꿔주지 않으면 주변의 다른 기기와 중복되어 오작동할 소지가 있으므로 반드시 다른 이름으로 바꿔주어야 한다.)</li>\n</ol>\n<p><img src=\"/image/blynk-23.png\" alt=\"\" /></p>\n<br>\n<p>Device Name을 &ldquo;Blynk-t&quot;로 수정하였다.</p>\n<p><img src=\"/image/blynk-24.png\" alt=\"\" /></p>\n<br>\n<ol start=\"4\">\n<li>ESP32에 스케치를 업로드한다. (업로드 시간이 Arduino에 비해 오래 걸림)</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BLYNK_PRINT Serial\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BLYNK_USE_DIRECT_CONNECT\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;BlynkSimpleEsp32_BLE.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;BLEDevice.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;BLEServer.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// You should get Auth Token in the Blynk App.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Go to the Project Settings (nut icon).\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">char</span> auth[] <span style=\"color:#f92672\">=</span> <span style=\"color:#e6db74\">&#34;rc77E7UrbQHhoLE-LV1Ajxz.........&#34;</span>;    <span style=\"color:#75715e\">// Edit Your Auth Token!!\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Debug console\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Waiting for connections...&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  Blynk.<span style=\"color:#a6e22e\">setDeviceName</span>(<span style=\"color:#e6db74\">&#34;Blynk-t&#34;</span>);                     <span style=\"color:#75715e\">// Edit Your ESP32 Name!!!\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Blynk.<span style=\"color:#a6e22e\">begin</span>(auth);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  Blynk.<span style=\"color:#a6e22e\">run</span>();\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<p><img src=\"/image/blynk-25.png\" alt=\"\" /></p>\n<br>\n<ol start=\"5\">\n<li>이제 스마트폰의 Bluetooth기능을 키고, 위의 코드에서 수정한 Device Name을 찾아 연결한다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-26.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-27.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"6\">\n<li>Blynk App에서 BLE버튼(블루투스 아이콘 모양)을 누른다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-28.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"7\">\n<li>Connect BLE device 버튼을 누른다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-29.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"8\">\n<li>연결할 Device(여기서는 Blynk-t)를 선택하고 OK를 누른다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-30.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"9\">\n<li>Connected 메세지가 나오면 연결 설정이 완료된 것이다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-31.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"10\">\n<li>Blynk App 상단의 뒤로 돌아가기 버튼을 눌러 프로젝트 바탕화면으로 돌아간다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-32.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"11\">\n<li>App 오른쪽 상단의 ▷(플레이버튼)버튼을 누른다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-33.png\" width=\"33%\">\n</figure>\n\n<br>\n<p>플레이버튼을 눌렀을 때, App상단에 빨간색 숫자1이 보이면 아직 연결이 되지 않았다는 것을 의미한다. 잠시 기다리면 빨간색 숫자1이 사라지고, 이 상태가 작동 준비가 완료된다.</p>\n<figure class=\"center\"><img src=\"/image/blynk-34.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"12\">\n<li>현재 Button은 OFF 되어 있으며, 이에 따라 GPIO 19에 연결되어 있는 LED도 OFF되어 있다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-35.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"13\">\n<li>Button을 누르면 ON 상태로 바뀌면서, LED가 ON 상태로 점등된다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-36.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"14\">\n<li>다시 Button을 누르면 OFF 상태로 바뀌면서, LED가 OFF 상태로 소등된다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-37.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"15\">\n<li>정지버튼을 누르면 플레이상태가 정지상태로 바뀌면서 프로젝트 바탕화면으로 돌아간다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/blynk-38.png\" width=\"33%\">\n</figure>\n\n<br>\n<figure class=\"center\"><img src=\"/image/blynk-39.png\" width=\"33%\">\n</figure>\n\n"}{"uri":"http://localhost:1313/posts/arduino-bluetooth-blynk/","title":"Arduino, Bluetooth, Blynk","content":"<h3 id=\"blynk-설정\">Blynk 설정<a class=\"anchor\" href=\"#blynk-%ec%84%a4%ec%a0%95\">#</a></h3>\r\n<h4 id=\"blynk-라이브러리-설치\">Blynk 라이브러리 설치<a class=\"anchor\" href=\"#blynk-%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%84%a4%ec%b9%98\">#</a></h4>\r\n<ol>\n<li>docs.blynk.cc 접속 – Downloads – Blynk Library</li>\n<li><a href=\"https://github.com/blynkkk/blynk-library/releases/tag/v0.6.1\">https://github.com/blynkkk/blynk-library/releases/tag/v0.6.1</a>\n<ul>\n<li>Blynk_Release_v0.6.1.zip 다운로드</li>\n</ul>\n</li>\n<li>압축을 풀면 libraries, tools 폴더가 보임</li>\n<li>이 두 폴더를 아두이노IDE의 기본 스케치북 위치로 복사하여 붙여넣기 함\n<ul>\n<li>기존의 libraries 폴더와 합쳐짐</li>\n<li>기본 스케치북 위치 확인 방법\n<ul>\n<li>아두이노IDE – 파일 – 환경설정 – 설정탭 – 스케치북 위치</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n<h4 id=\"스마트폰에-blynk-app-다운로드-하여-설치하기\">스마트폰에 Blynk App 다운로드 하여 설치하기<a class=\"anchor\" href=\"#%ec%8a%a4%eb%a7%88%ed%8a%b8%ed%8f%b0%ec%97%90-blynk-app-%eb%8b%a4%ec%9a%b4%eb%a1%9c%eb%93%9c-%ed%95%98%ec%97%ac-%ec%84%a4%ec%b9%98%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ul>\n<li>아이폰 : 애플 앱스토어</li>\n<li>안드로이드 : 구글 플레이스토어</li>\n</ul>\n<br>\n<br>\n<h3 id=\"버튼-위젯을-이용한-led-onoff-하기\">버튼 위젯을 이용한 LED On/Off 하기<a class=\"anchor\" href=\"#%eb%b2%84%ed%8a%bc-%ec%9c%84%ec%a0%af%ec%9d%84-%ec%9d%b4%ec%9a%a9%ed%95%9c-led-onoff-%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"blynk-계정생성-및-auth-token-받기\">Blynk 계정생성 및 Auth Token 받기<a class=\"anchor\" href=\"#blynk-%ea%b3%84%ec%a0%95%ec%83%9d%ec%84%b1-%eb%b0%8f-auth-token-%eb%b0%9b%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>Blynk App 실행</li>\n<li>Create New Account : 주로 사용하는 e-mail을 사용하여 계정 생성</li>\n<li>Blynk에서 New Project 생성\n<ul>\n<li>아이폰용 MLT-BT05의 경우\n<ul>\n<li>Project Name 설정: BLE Test</li>\n<li>CHOOSE DEVICE: Arduino UNO</li>\n<li>CONNECTION TYPE: BLE</li>\n<li>설정 후 Create 버튼</li>\n</ul>\n</li>\n<li>안드로이드용 HC-06의 경우\n<ul>\n<li>Project Name 설정: HC-06 Test</li>\n<li>CHOOSE DEVICE: Arduino UNO</li>\n<li>CONNECTION TYPE: Bluetooth</li>\n<li>설정 후 Create 버튼</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Auth Token 확인\n<ul>\n<li>가입시 지정한 이메일로 로그인하여 토큰 확인</li>\n<li>(매우 복잡한 형태의) 토큰을 복사하여 코딩시 사용할 것이므로, 컴퓨터로 확인!</li>\n<li>스마트폰으로 확인하는 것은 무의미함</li>\n</ul>\n</li>\n</ol>\n<br>\n<h4 id=\"blynk-위젯-설정\">Blynk 위젯 설정<a class=\"anchor\" href=\"#blynk-%ec%9c%84%ec%a0%af-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<ol>\n<li>아이폰용 MLT-BT05를 사용할 경우\n<ul>\n<li>생성된 프로젝트(BLE Test) 바탕화면으로 진입하면 Blynk App 상단의 초록색 메뉴바의 이름이 BLE Test로 바뀜</li>\n<li>여기서 ⊕버튼 터치한 후 Button위젯과 BLE위젯 추가</li>\n<li>추가된 BUTTON 위젯 선택 후 설정\n<ul>\n<li>OUTPUT: Select pin: Digital D13 / MODE: SWITCH</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>안드로이드용 HC-06를 사용할 경우\n<ul>\n<li>생성된 프로젝트(HC-06 Test) 바탕화면으로 진입하면 Blynk App 상단의 초록색 메뉴바의 이름이 HC-06 Test로 바뀜</li>\n<li>여기서 ⊕버튼 터치한 후 Button위젯과 Bluetooth위젯 추가</li>\n<li>추가된 BUTTON 위젯 선택 후 설정\n<ul>\n<li>OUTPUT: Select pin: Digital D13 / MODE: SWITCH</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n<h4 id=\"blynk-연결하기\">Blynk 연결하기<a class=\"anchor\" href=\"#blynk-%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>아두이노 스케치 예제 불러오기\n<ul>\n<li>파일 – 예제 – Blynk – Boards_USB_Serial – Arduino_SoftwareSerial 선택</li>\n<li>예제의 char auth[] = &ldquo;YourAuthToken&rdquo;; 부분을 찾아서 쌍따옴표 사이의 YourAuthToken을 지운 뒤, 이메일에서 복사한 AuthToken 붙여넣기</li>\n</ul>\n</li>\n<li>아두이노 UNO에 스케치 업로드</li>\n<li>스마트폰의 블루투스 기능을 키고,\n<ul>\n<li>아이폰용 MLT-BT05의 경우\n<ul>\n<li>Bluetooth 모듈 설정에서 설정한 모듈ID 디바이스를 연결(예를 들어 MLT-BT05-<strong>T</strong>) (디폴트 연결PIN 123456)</li>\n<li>Blynk App에서 BLE버튼(블루투스 아이콘 모양) 터치 후 Connect BLE device 버튼을 누른 뒤,</li>\n<li>연결할 디바이스 MLT-BT05-T를 찾은 후 OK버튼 누름</li>\n<li>MLT-BT05-T connected 메시지가 나오면 연결 완료된 것임</li>\n</ul>\n</li>\n<li>안드로이드용 HC-06의 경우\n<ul>\n<li>Bluetooth 모듈 설정에서 설정한 모듈ID 디바이스를 연결(예를 들어 HC-06-<strong>T</strong> 디바이스를 연결 (디폴트 연결PIN 1234)</li>\n<li>Blynk App에서 Bluetooth버튼(블루투스 아이콘 모양) 터치 후 Connect Bluetooth device 버튼을 누른 뒤,</li>\n<li>연결할 디바이스 HC-06-T를 찾은 후 OK버튼 누름</li>\n<li>HC-06-T connected 메시지가 나오면 연결 완료된 것임</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Blynk App 상단의 뒤로 돌아가기 버튼을 누른 뒤, App 오른쪽 상단의 ▷(플레이버튼)버튼을 누름\n<ul>\n<li>App상단에 빨간색 숫자1이 보이면 아직 연결이 되지 않았다는 것을 의미함</li>\n<li>잠시 기다리면 빨간색 숫자1이 사라지고, 이 상태가 작동 준비가 완료된 것을 의미함</li>\n</ul>\n</li>\n<li>BUTTON 아이콘을 눌러 ON/OFF → 아두이노 Built-in LED ON/OFF</li>\n<li>Blynk App 오른쪽 상단의 □(정지버튼)을 누른 뒤, ⊕버튼 터치한 후 Text Input 위젯 추가</li>\n</ol>\n<br>\n<br>\n<h3 id=\"슬라이더-위젯을-이용한-led-밝기-제어\">슬라이더 위젯을 이용한 LED 밝기 제어<a class=\"anchor\" href=\"#%ec%8a%ac%eb%9d%bc%ec%9d%b4%eb%8d%94-%ec%9c%84%ec%a0%af%ec%9d%84-%ec%9d%b4%ec%9a%a9%ed%95%9c-led-%eb%b0%9d%ea%b8%b0-%ec%a0%9c%ec%96%b4\">#</a></h3>\r\n<p>Built-in LED가 사용하는 13번핀은 PWM이 지원되지 않으므로, 11번핀을 사용한다.</p>\n<p><img src=\"/image/BT-19.jpg\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<p>아두이노 스케치는 그대로 사용 (위의 &ldquo;Blynk 연결하기&rdquo; 부분 스케치 참고)</p>\n<br>\n<h4 id=\"blynk-앱-설정\">Blynk 앱 설정<a class=\"anchor\" href=\"#blynk-%ec%95%b1-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<ol>\n<li>버튼 위젯을 삭제: 버튼 위젯을 누르고 맨아래쪽으로 내려가서 Delete</li>\n<li>Slider 위젯 추가: OUTPUT D11</li>\n<li>Slider 위젯의 위치/크기 조절: Slider 위젯 아이콘을 1초이상 누르면 위치/크기를 조절할 수 있음 (가로 크기를 최대로 늘림)</li>\n<li>App 오른쪽 상단의 ▷(플레이버튼)버튼을 누름</li>\n<li>슬라이드를 조절하여 LED의 밝기 조절 확인</li>\n</ol>\n<br>\n<br>\n<h3 id=\"과제\">과제<a class=\"anchor\" href=\"#%ea%b3%bc%ec%a0%9c\">#</a></h3>\r\n<p>3색 RGB LED를 zeRGBa 위젯으로 조정하여 여러 가지 색깔 만들어보기 (스케치는 위의 스케치를 그대로 사용)</p>\n"}{"uri":"http://localhost:1313/posts/esp32-adc/","title":"esp32 ADC","content":"<h3 id=\"esp32-adc\">ESP32 ADC<a class=\"anchor\" href=\"#esp32-adc\">#</a></h3>\r\n<ul>\n<li>ESP32는 18개의 12bit ADC 입력핀을 사용할 수 있다. (0~4095)</li>\n<li>아두이노의 경우 10bit를 사용한다. (0~1023)</li>\n<li>0V ~ 3.3V의 전압을 0~4095(0xFFF)까지의 디지털값으로 AD 변환한다.</li>\n<li>Arduino IDE 환경에서는 ESP32의 ADC 관련 레지스터를 조작하지 않고 analogRead() 함수를 사용하여 ESP32의 ADC 입력핀의 전압값을 가져올 수 있다.\u00a0</li>\n</ul>\n<br>\n<br>\n<h3 id=\"potentiometer-저항값-출력하기\">Potentiometer 저항값 출력하기<a class=\"anchor\" href=\"#potentiometer-%ec%a0%80%ed%95%ad%ea%b0%92-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/esp32-adc-01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<p>가변저항의 저항을 A0(ADC1_CH0, GPIO36)로 읽고 전압값으로 변환한 뒤 시리얼 모니터로 출력한다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// ESP32 ADC test\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define analogPin A0\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>} \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// read the input on analog pin GPIO36 (ADC1_CH0):\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">int</span> sensorValue <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(analogPin);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Convert the analog (12bit ADC :  0 - 4095) to a voltage (0 - 3.3V):\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">float</span> voltage <span style=\"color:#f92672\">=</span> (sensorValue <span style=\"color:#f92672\">/</span><span style=\"color:#ae81ff\">4095.0</span>) <span style=\"color:#f92672\">*</span> <span style=\"color:#ae81ff\">3.3</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// print out the value you read:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">println</span>(voltage);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">200</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"potentiometer로-led-밝기-조절하기\">Potentiometer로 LED 밝기 조절하기<a class=\"anchor\" href=\"#potentiometer%eb%a1%9c-led-%eb%b0%9d%ea%b8%b0-%ec%a1%b0%ec%a0%88%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/esp32-adc-02.png\" alt=\"\" /></p>\n<br>\n<ul>\n<li>LED : R → GPIO19 / G → GPIO18 / B → GPIO17 / GND</li>\n<li>저항 : R → 150Ω / G → 100Ω / B → 100Ω</li>\n<li>Potentiometer: Left 5V, Center AO(IO36), Right GND</li>\n</ul>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define RED_LED 19       </span><span style=\"color:#75715e\">// GPIO 19\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define analogPin A0     </span><span style=\"color:#75715e\">// Sensor VP, GPIO 36\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> freq <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5000</span>;         <span style=\"color:#75715e\">// 주파수\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> ledChannel <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;      <span style=\"color:#75715e\">// 채널 (0 ~ 15 선택)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> resolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;     <span style=\"color:#75715e\">// 해상도 (1 ~ 16bit resolution 선택)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> R <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">ledcSetup</span>(ledChannel, freq, resolution);    <span style=\"color:#75715e\">// 지정된 채널, 주파수 및 해상도 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(RED_LED, ledChannel);         <span style=\"color:#75715e\">// LED 핀과 채널 연결\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">float</span> raw <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(analogPin);\n</span></span><span style=\"display:flex;\"><span>  R <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(raw, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">4095</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1023</span>);             <span style=\"color:#75715e\">// 12bit -&gt; 10bit\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(R); Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34; ohm&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">ledcWrite</span>(ledChannel, R);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">7</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/esp32-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0/","title":"esp32 시작하기","content":"<h3 id=\"esp32-시작하기\">ESP32 시작하기<a class=\"anchor\" href=\"#esp32-%ec%8b%9c%ec%9e%91%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"driver-설치-처음-설치하는-경우\">Driver 설치: 처음 설치하는 경우<a class=\"anchor\" href=\"#driver-%ec%84%a4%ec%b9%98-%ec%b2%98%ec%9d%8c-%ec%84%a4%ec%b9%98%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h4>\r\n<p>ESP32는 USB-to-Serial bridge로 Silicon Labs의 CP210x를 사용한다. <a href=\"https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers\">제조사 홈페이지</a>에서 자신이 사용하는 OS에 알맞는 CP210x 드라이버를 다운받아 설치한다.</p>\n<pre tabindex=\"0\"><code>https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers</code></pre><br>\n<h4 id=\"arduino-ide-설치\">Arduino IDE 설치<a class=\"anchor\" href=\"#arduino-ide-%ec%84%a4%ec%b9%98\">#</a></h4>\r\n<p><a href=\"https://www.arduino.cc/en/software\">Arduino IDE Download</a></p>\n<pre tabindex=\"0\"><code>https://www.arduino.cc/en/software</code></pre><br>\n<h4 id=\"arduino-ide-설정\">Arduino IDE 설정<a class=\"anchor\" href=\"#arduino-ide-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<ol>\n<li>Arduino IDE에서 <strong>파일</strong>&gt; <strong>환경설정</strong>&gt; <strong>설정</strong> (<strong>File</strong>&gt; <strong>Preferences</strong>&gt; <strong>Settings</strong>)</li>\n</ol>\n<p><img src=\"/image/esp32-ide-01.jpg\" alt=\"\" /></p>\n<br>\n<ul>\n<li>추가적인 보드 매니저 URLs에 아래 내용을 추가한다.</li>\n</ul>\n<pre tabindex=\"0\"><code>https://dl.espressif.com/dl/package_esp32_index.json</code></pre><br>\n<ul>\n<li>ESP8266에 대한 URLs를 사용하고 있었다면, comma를 사용하여 구분하면 두가지를 모두 사용할 수 있다.</li>\n</ul>\n<pre tabindex=\"0\"><code>https://dl.espressif.com/dl/package_esp32_index.json, http://arduino.esp8266.com/stable/package_esp8266com_index.json</code></pre><br>\n<ol start=\"2\">\n<li><strong>툴</strong>&gt; <strong>보드</strong>&gt; <strong>보드 매니저</strong>&hellip; <strong>Tools</strong>&gt; <strong>Board</strong>&gt; <strong>Board Manager</strong>&hellip;</li>\n</ol>\n<p><img src=\"/image/esp32-ide-02.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"3\">\n<li>보드 매니저에서 &ldquo;ESP32&quot;를 검색하여 <strong>INSTALL</strong> (혹은 업데이트)</li>\n</ol>\n<p><img src=\"/image/esp32-ide-03.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"4\">\n<li>ESP32를 컴퓨터에 연결한 뒤, <strong>툴</strong>&gt; <strong>보드</strong> 에서 ESP32 Dev Module 선택</li>\n</ol>\n<p><img src=\"/image/esp32-ide-04.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"5\">\n<li><strong>툴</strong>&gt; <strong>포트</strong> 에서 포트 선택 (단, ESP32용 포트가 선택이 되지 않으면 \u00a0<a href=\"https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers\">CP210x USB to UART Bridge VCP Drivers</a>를 설치하여야 한다. Windows, Mac 등 사용하고 있는 OS에 적합한 드라이버를 클릭하여 설치한다.</li>\n</ol>\n<br>\n<h4 id=\"testing-installation\">Testing Installation<a class=\"anchor\" href=\"#testing-installation\">#</a></h4>\r\n<h5 id=\"example-1-led-blink\">Example 1. LED Blink<a class=\"anchor\" href=\"#example-1-led-blink\">#</a></h5>\r\n<pre tabindex=\"0\"><code>#include &lt;Arduino.h&gt;\n\nconst int R_ledPin = 19;\n\nvoid setup() {\n  // put your setup code here, to run once:\n  Serial.begin(115200);\n  pinMode(R_ledPin, OUTPUT);\n}\n\nvoid loop() {\n  // put your main code here, to run repeatedly:\n  digitalWrite(R_ledPin, HIGH);\n  Serial.println(&#34;LED is on&#34;);\n  delay(1000);\n  digitalWrite(R_ledPin, LOW);\n  Serial.println(&#34;LED is off&#34;);\n  delay(1000);\n}</code></pre><br>\n<table>\n  <thead>\n      <tr>\n          <th>ESP32 GPIO</th>\n          <th>19</th>\n          <th>GND</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>저항</td>\n          <td>150Ω</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>LED</td>\n          <td>(+)극</td>\n          <td>(-)극</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<p><img src=\"/image/esp32-example-01.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"upload\">Upload<a class=\"anchor\" href=\"#upload\">#</a></h5>\r\n<p>스케치 업로드는 아래 3가지 방법 중 하나로 진행할 수 있다.</p>\n<ol>\n<li>단축키: Ctrl-U</li>\n<li>Sketch&gt; Upload</li>\n<li>업로드 아이콘 클릭</li>\n</ol>\n<br>\n<p>※ 아두이노에 비해 컴파일 및 업로드 시간이 오래걸림</p>\n<br>\n<p><img src=\"/image/upload-code-esp32-arduino-2-1.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"serial-monitor\">Serial Monitor<a class=\"anchor\" href=\"#serial-monitor\">#</a></h5>\r\n<p><img src=\"/image/Arduino-2-0-Serial-Monitor-ESP32.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"example-2-wifiscan\">Example 2. WiFiScan<a class=\"anchor\" href=\"#example-2-wifiscan\">#</a></h4>\r\n<p>예제 선택: <strong>파일</strong> &gt; <strong>예제</strong> &gt; <strong>WiFi (ESP32)</strong> &gt; <strong>WiFiScan</strong></p>\n<p><img src=\"/image/esp32-ide-05.png\" alt=\"\" /></p>\n<p>※ 주의: ESP32보드를 연결한 상태에서만 위 예제를 선택할 수 있다.</p>\n<br>\n<h5 id=\"upload-1\">Upload<a class=\"anchor\" href=\"#upload-1\">#</a></h5>\r\n<p>아두이노에 비하여 업로드 시간이 많이 걸린다. &ldquo;업로드 완료&quot;라는 메세지가 나타날때까지 잠시 기다린다.</p>\n<p><img src=\"/image/esp32-ide-06.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"serial-monitor-1\">Serial Monitor<a class=\"anchor\" href=\"#serial-monitor-1\">#</a></h5>\r\n<p>아두이노 IDE의 시리얼 모니터를 열고 Baud rate를 115200으로 설정하면 주변의 접속 가능한 WiFi의 SSID가 표시된다. 여기까지 진행이 되면 ESP32가 잘 설치된 것이다.</p>\n<p><img src=\"/image/esp32-ide-07.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"troubleshooting\">Troubleshooting<a class=\"anchor\" href=\"#troubleshooting\">#</a></h3>\r\n<ol>\n<li>업로드시, &ldquo;A fatal error occurred: Failed to connect to ESP32: Timed out… Connecting…&ldquo;이라는 메세지가 나오면서 업로드가 진행되지 않는다면, 우선 IDE의 보드와 포트가 알맞게 선택되어 있는지 확인해본다. 그럼에도 문제가 해결되지 않는다면 아래의 방법을 따른다. (※상기 문제가 해결되어 나온 보드의 경우에는 관계없음)</li>\n</ol>\n<ul>\n<li>ESP32 보드에 있는 Boot버튼을 누른채로 업로드 버튼을 클릭하고, <strong>Connecting….</strong> 이라는 메세지가 나오면 Boot버튼에서 손가락을 뗀다.</li>\n<li>일부 ESP32 보드의 경우 새로운 스케치를 업로드 할 때마다 “<strong>ENABLE</strong>”버튼을 눌러 ESP32를 다시 시작해야 하는 경우도 있는데, 이런 문제가 발생하는 보드의 경우 새 스케치를 업로드 할 때마다 해당 버튼 순서(BOOT-EN)를 반복해야합니다.</li>\n<li>이러한 문제를 해결하기 위해서는 ESP32보드의 <strong>EN핀</strong>과 <strong>GND</strong>를 10uF 컨덴서를 사용하여 연결해주면 된다.</li>\n</ul>\n<p><img src=\"/image/esp32-ide-08.png\" alt=\"\" /></p>\n<ol start=\"2\">\n<li><strong>Mac OS X &amp; Linux</strong></li>\n</ol>\n<p>\u200b\t\t전체적인 설치방법은 Windows와 동일하다. 단, 첫번째 설치가 아닌 재설치 과정을 수행하는한 경우에는 다음</p>\n<p>\u200b        과정을 통해 espressif폴더를 지운 후 설치과정을 시작하여야 한다.</p>\n<ul>\n<li><strong>Arduino</strong>&gt; <strong>Preferences</strong>&gt; <strong>Sketchbook Location</strong>에 표기되어 있는 폴더를 복사하여 해당 디렉토리로 진입한 후,</li>\n</ul>\n<p><img src=\"/image/esp32-ide-09.png\" alt=\"\" /></p>\n<ul>\n<li>\n<p><strong>Hardware</strong> 폴더 안에 있는 <strong>espressif</strong> 폴더를 삭제한다.</p>\n</li>\n<li>\n<p>이후 Windows 설치과정과 유사한 과정을 통해 ESP32를 설치한다.</p>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"pwm-제어-방법\">PWM 제어 방법<a class=\"anchor\" href=\"#pwm-%ec%a0%9c%ec%96%b4-%eb%b0%a9%eb%b2%95\">#</a></h3>\r\n<p>원문: <a href=\"https://randomnerdtutorials.com/esp32-pwm-arduino-ide/\">https://randomnerdtutorials.com/esp32-pwm-arduino-ide/</a></p>\n<br>\n<p>PWM(Pulse Width Modulation) 그림과 같은 주기적인 펄스 신호를 생성하고 1로 되어있는 시간과 0으로되어있는 시간의 비율 (듀티 비)를 바꿈으로써 전송 전력을 변화시킨다.</p>\n<p><img src=\"/image/esp32-pwm-01.png\" alt=\"\" /></p>\n<br>\n<p>duty 값은 한 주기 내에서 ON 시간과 OFF 시간의 &lsquo;비율&rsquo;을 결정하는 값이다. PWM 주파수가 다르면 같은 duty 값이라도 ON 되어 있는 시간이 달라진다. 다만 전체적으로 ON 시간의 합과 OFF 시간의 합의 비율은 동일하다.</p>\n<p><img src=\"/image/esp32-pwm-02.png\" alt=\"\" /></p>\n<br>\n<p>이런 방법을 LED의 점등에 적용하면, 1의 값을 갖는 시간이 짧을 수록 사람 눈에는 LED가 어둡게 보이고, 1의 값을 갖는 시간이 길 수록 밝아 보이게 된다.</p>\n<p><img src=\"/image/esp32-pwm-03.png\" alt=\"\" /></p>\n<br>\n<br>\n<h4 id=\"esp32에서-pwm의-설정\">ESP32에서 PWM의 설정<a class=\"anchor\" href=\"#esp32%ec%97%90%ec%84%9c-pwm%ec%9d%98-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<p>ESP32에는 16 개의 독립적인 채널을 가진 LED PWM 컨트롤러가 있으며 다른 속성으로도 PWM 신호를 생성하도록 구성할 수 있다. Arduino IDE를 사용하여 PWM으로 LED의 밝기를 조절해보도록 한다. 우선 PWM을 사용하기 위해 다음의 4가지를 설정해야 한다.</p>\n<br>\n<h5 id=\"channel\">Channel<a class=\"anchor\" href=\"#channel\">#</a></h5>\r\n<p>0~15까지 16 개의 채널 중 적당한 PWM 채널을 선택한다.</p>\n<br>\n<h5 id=\"frequency\">Frequency<a class=\"anchor\" href=\"#frequency\">#</a></h5>\r\n<p>PWM 신호 주파수를 설정한다. (LED의 경우 5000Hz의 주파수를 사용)</p>\n<br>\n<h5 id=\"resolution\">Resolution<a class=\"anchor\" href=\"#resolution\">#</a></h5>\r\n<p>해상도는 output을 위한 값의 범위를 지정하는데 사용하며, 1~16비트 범위에서 선택한다.</p>\n<ul>\n<li>만약 <strong>8비트 해상도</strong>를 사용한다면 <strong>0~255</strong> 사이의 dutyCycle 값을 사용하여 LED 밝기를 제어할 수 있다.</li>\n<li><strong>10비트</strong>를 사용하면 <strong>0~1023</strong>범위,</li>\n<li><strong>16비트</strong>로 사용한다면 <strong>0~65535</strong> 범위에서 세밀한 제어를 할 수 있도록 지정된다.</li>\n<li>참고: 아두이노 우노의 경우, analogWrite()의 해상도는 8비트, 즉 0~255로 고정되어 있다.</li>\n</ul>\n<br>\n<h5 id=\"gpio\">GPIO<a class=\"anchor\" href=\"#gpio\">#</a></h5>\r\n<p>신호가 표시 될 GPIO를 지정한다.</p>\n<br>\n<h5 id=\"코드-적용\">코드 적용<a class=\"anchor\" href=\"#%ec%bd%94%eb%93%9c-%ec%a0%81%ec%9a%a9\">#</a></h5>\r\n<p>이러한 설정은 void setup()에서 다음의 코드로 지정한다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">ledcSetup</span>(ledChannel, freq, resolution);    <span style=\"color:#75715e\">// 출력 채널에서 사용할 주파수와 해상도 지정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(ledPin, ledChannel);          <span style=\"color:#75715e\">// 위에서 설정한 출력 채널을, 지정된 GPIO핀에 매칭\n</span></span></span></code></pre></div><br>\n<h5 id=\"출력-강도는-resolution과-dutycycle-값으로-결정한다\">출력 강도는 resolution과 dutyCycle 값으로 결정한다!<a class=\"anchor\" href=\"#%ec%b6%9c%eb%a0%a5-%ea%b0%95%eb%8f%84%eb%8a%94-resolution%ea%b3%bc-dutycycle-%ea%b0%92%ec%9c%bc%eb%a1%9c-%ea%b2%b0%ec%a0%95%ed%95%9c%eb%8b%a4\">#</a></h5>\r\n<ul>\n<li>resolution이 8bit이면, 0~255 범위 내에서 dutyCycle을 지정하여 출력강도를 설정하면 됨.</li>\n<li>resolution이 10bit이면, 0~1023 범위 내에서 dutyCycle을 지정하여 출력강도를 설정하면 됨.</li>\n<li>resolution이 16bit이면, 0~65535 범위 내에서 dutyCycle을 지정하여 출력강도를 설정하면 됨.</li>\n</ul>\n<br>\n<br>\n<h3 id=\"led-dimming\">LED Dimming<a class=\"anchor\" href=\"#led-dimming\">#</a></h3>\r\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/esp32-example-01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// the number of the Red LED pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> R_ledPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">19</span>;     <span style=\"color:#75715e\">// corresponds to GPIO 19\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// setting PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledChannel <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> freq <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5000</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> resolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;   <span style=\"color:#75715e\">// 8bit 0~255\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// configure LED PWM functionalitites\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcSetup</span>(ledChannel, freq, resolution);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// attach the channel to the GPIO to be controlled\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(R_ledPin, ledChannel);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// increase the LED brightness (8bit 0~255)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> dutyCycle <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; dutyCycle <span style=\"color:#f92672\">&lt;=</span> <span style=\"color:#ae81ff\">255</span>; dutyCycle<span style=\"color:#f92672\">++</span>){   \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// changing the LED brightness with PWM\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">ledcWrite</span>(ledChannel, dutyCycle);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// decrease the LED brightness\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> dutyCycle <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span>; dutyCycle <span style=\"color:#f92672\">&gt;=</span> <span style=\"color:#ae81ff\">0</span>; dutyCycle<span style=\"color:#f92672\">--</span>){\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// changing the LED brightness with PWM\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">ledcWrite</span>(ledChannel, dutyCycle);   \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"rgb-led-dimming\">RGB LED Dimming<a class=\"anchor\" href=\"#rgb-led-dimming\">#</a></h3>\r\n<p>같은 channel에 있는 3개의 서로 다른 GPIO에는 같은 값의 signal을 줄 수 있다.</p>\n<br>\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/esp32-example-02.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// the number of the 3 LED pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> R_ledPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;      <span style=\"color:#75715e\">// corresponds to GPIO 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> G_ledPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">4</span>;      <span style=\"color:#75715e\">// corresponds to GPIO 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> B_ledPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">17</span>;     <span style=\"color:#75715e\">// corresponds to GPIO 17\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// setting PWM properties\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> freq <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5000</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> ledChannel <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> resolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;    <span style=\"color:#75715e\">// 8bit 0~255\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// configure LED PWM functionalitites\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcSetup</span>(ledChannel, freq, resolution);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// attach the same channel to the 3 GPIO to be controlled\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(R_ledPin, ledChannel);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(G_ledPin, ledChannel);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">ledcAttachPin</span>(B_ledPin, ledChannel);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>     \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// increase the LED brightness\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> dutyCycle <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; dutyCycle <span style=\"color:#f92672\">&lt;=</span> <span style=\"color:#ae81ff\">255</span>; dutyCycle<span style=\"color:#f92672\">++</span>){   \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// changing the LED brightness with PWM\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">ledcWrite</span>(ledChannel, dutyCycle);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// decrease the LED brightness\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> dutyCycle <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span>; dutyCycle <span style=\"color:#f92672\">&gt;=</span> <span style=\"color:#ae81ff\">0</span>; dutyCycle<span style=\"color:#f92672\">--</span>){\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// changing the LED brightness with PWM\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">ledcWrite</span>(ledChannel, dutyCycle);   \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/esp-wroom-32d-devkitc-v4/","title":"esp32-WROOM-32D DevkitC V4","content":"<h3 id=\"esp32-wroom-32d-devkitc-v4\">ESP32-WROOM-32D DevkitC V4<a class=\"anchor\" href=\"#esp32-wroom-32d-devkitc-v4\">#</a></h3>\r\n<p><img src=\"/image/esp32-pinout.png\" alt=\"\" /></p>\n<p><a href=\"/attach/ESP32-Pinout.hwp\">핀아웃 다운로드</a></p>\n<br>\n<ul>\n<li>녹색핀: 사용에 적합한 핀</li>\n<li>노란색: 사용은 가능하나 부팅시 예기치 않은 동작이 발생할 수 있으므로 주의해야 하는 핀 (GPIO34~39는 Input only!)</li>\n<li>빨간색: 입력 또는 출력으로 사용할 수 없는 핀을 의미한다. (사용이 가능하더라도 사용하지 않음!)</li>\n<li>보라색: Wifi사용시 사용불가한 analog핀</li>\n<li>GPIO에서 Output이 가능한 모든 핀은 PWM으로 사용 가능</li>\n<li>ADC: 0<del>3.3V (0</del>4095) (0<del>0.15V구간과 3.1</del>3.3V의 값은 리니어하지 않으므로 구별이 거의 불가능함</li>\n<li>I2C: 아두이노IDE에서 사용하는 디폴트 핀</li>\n<li>RTC GPIO: Ultra Low Power(Deep Sleep)모드의 ESP32를 Wake up</li>\n<li>Strapping Pins: Bootloader나 Flashing시에 사용되며, 코드 업로드시 문제될 수 있음</li>\n<li>High at Boot, Low at Boot, BOOT, PWM at Boot: Boot시 신호가 나오며, Output으로 사용하면 reset이나 booting시에 문제가 될 수 있는 핀</li>\n</ul>\n<br>\n<br>\n<h3 id=\"peripheral\">Peripheral<a class=\"anchor\" href=\"#peripheral\">#</a></h3>\r\n<p>ADC와 DAC 기능은 특정 핀에 고정되어 있다. 하지만 UART, I2C, SPI, PWM등의 기능은 어느 핀에 사용할지 결정해서 코드에서 지정해 줘야 한다. 소프트웨어에서 핀의 속성을 정의해 줄 수 있지만, 각 핀들은 디폴트로 지정되어 있는 기능들이 있다. (Pinout 참고)</p>\n<table>\n  <thead>\n      <tr>\n          <th>Pheripheral</th>\n          <th>ADC Channel</th>\n          <th>SP</th>\n          <th>UART</th>\n          <th>I2C</th>\n          <th>PWM</th>\n          <th>DAC</th>\n          <th>I2S</th>\n          <th>Capacitive touch GPIO</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>개수</td>\n          <td>18</td>\n          <td>3</td>\n          <td>3</td>\n          <td>2</td>\n          <td>16</td>\n          <td>2</td>\n          <td>2</td>\n          <td>10</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"pwmpulse-width-modulation\">PWM(Pulse Width Modulation)<a class=\"anchor\" href=\"#pwmpulse-width-modulation\">#</a></h4>\r\n<p>ESP32는 16개의 독립적인 채널을 통해 각각 다른 속성의 PWM 신호를 만들 수 있다. 출력으로 사용할 수 있는 모든 핀은 PWM으로 사용할 수 있으며, GPIO 34~39는 Input only핀이므로 PWM으로 사용할 수 없다. PWM신호를 만들기 위해 코드상에 4개의 파라미터를 정해주어야 한다.</p>\n<ul>\n<li>Signal Frequency</li>\n<li>Duty Cycle</li>\n<li>PWM Channel</li>\n<li>신호를 출력할 GPIO핀</li>\n</ul>\n<br>\n<h4 id=\"i2c\">I2C<a class=\"anchor\" href=\"#i2c\">#</a></h4>\r\n<p>I2C를 디폴트가 아닌 다른 핀을 사용할 경우, 아래와 같은 코드를 통해 지정한다. (디폴트 SDA 21, SCL 22)</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>Wire.<span style=\"color:#a6e22e\">begin</span>(SDA, SCL);</span></span></code></pre></div><br>\n<h4 id=\"interrupts\">Interrupts<a class=\"anchor\" href=\"#interrupts\">#</a></h4>\r\n<p>모든 GPIO핀은 인터럽트로 사용할 수 있다.</p>\n<br>\n<h4 id=\"en-enable\">EN (Enable)<a class=\"anchor\" href=\"#en-enable\">#</a></h4>\r\n<p>풀업되어 있는 3.3V 레귤레이터의 enable 핀이다. GND에 연결하면 3.3V 레귤레이터가 비활성화된다. 이 핀을 푸쉬버튼에 연결하면 ESP32를 재시동하는데 사용할 수 있다.</p>\n<br>\n<h4 id=\"gpio-current-draw\">GPIO Current draw<a class=\"anchor\" href=\"#gpio-current-draw\">#</a></h4>\r\n<p>권장 동작 조건에 따라 GPIO마다 최대 40mA의 전류를 흘릴 수 있다.</p>\n<br>\n<br>\n<h3 id=\"vin\">Vin<a class=\"anchor\" href=\"#vin\">#</a></h3>\r\n<p>ESP32 보드에 전원을 공급하는 방법은 3가지가 있다.</p>\n<ul>\n<li>USB 포트를 통한 공급</li>\n<li>5V/GND 핀을 통한 공급\n<ul>\n<li>5V핀을 통해서 전원을 공급할 경우, 전압은 5~12V 정도 사용하면 된다.</li>\n<li>최적 공급 전압은 <strong>6~7V</strong> 정도이며, 이보다 높은 전압을 공급할 경우 과열될 수 있다.</li>\n<li>5V 공급시 소비전류는 128mA이며, 10V 공급시 99.9mA 정도를 유지한다.</li>\n</ul>\n</li>\n<li>3.3V/GND핀을 통한 공급\n<ul>\n<li>3.3V핀을 통해서 전원을 공급할 경우에는, 공급 전압을 <strong>(정확하게) 3.3V</strong>로 유지해야 한다.</li>\n</ul>\n</li>\n</ul>\n<p>위 3가지 중 1가지 방법만으로 전원을 공급해야하며, 동시에 2~3가지 방법을 사용하면 ESP32 보드 자체가 고장날 수 있음에 유의한다.</p>\n<br>\n<br>\n<h3 id=\"troubleshooting\">Troubleshooting<a class=\"anchor\" href=\"#troubleshooting\">#</a></h3>\r\n<h4 id=\"1-업로드시-error-메세지\">1) 업로드시 error 메세지<a class=\"anchor\" href=\"#1-%ec%97%85%eb%a1%9c%eb%93%9c%ec%8b%9c-error-%eb%a9%94%ec%84%b8%ec%a7%80\">#</a></h4>\r\n<pre tabindex=\"0\"><code>Warning: Could not auto-detect Flash size (FlashID=0xffffff, SizeID=0xff), defaulting to 4MB\nCompressed 8192 bytes to 47...\n\nA fatal error occurred: Timed out waiting for packet content\nA fatal error occurred: Timed out waiting for packet content</code></pre><p>GPIO12에 풀업을 넣을 경우 플래시 인식 오류가 발생한다. GPIO12 핀은 사용하지 않는 것이 좋다.</p>\n<br>\n<br>\n<h3 id=\"그밖의-보드\">그밖의 보드<a class=\"anchor\" href=\"#%ea%b7%b8%eb%b0%96%ec%9d%98-%eb%b3%b4%eb%93%9c\">#</a></h3>\r\n<h4 id=\"ttgo-t-energy\">TTGO T-Energy<a class=\"anchor\" href=\"#ttgo-t-energy\">#</a></h4>\r\n<p><img src=\"/image/TTGO-T-Energy01.jpg\" alt=\"TTGO T-Energy\" /></p>\n<p><img src=\"/image/TTGO-T-Energy02.jpg\" alt=\"TTGO T-Energy\" /></p>\n<br>\n<h4 id=\"ttgo-t-beam\">TTGO T-BEAM<a class=\"anchor\" href=\"#ttgo-t-beam\">#</a></h4>\r\n<p><img src=\"/image/TTGO-T-BEAM01.jpg\" alt=\"TTGO T-BEAM\" /></p>\n<p><img src=\"/image/TTGO-T-BEAM02.jpg\" alt=\"TTGO T-BEAM\" /></p>\n"}{"uri":"http://localhost:1313/posts/blynk%EC%97%90-%EC%84%BC%EC%84%9C%EA%B0%92-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0/","title":"Blynk에 센서값 출력하기","content":"<p>원문: <a href=\"http://help.blynk.cc/en/articles/512056-how-to-display-any-sensor-data-in-blynk-app\">http://help.blynk.cc/en/articles/512056-how-to-display-any-sensor-data-in-blynk-app</a></p>\n<br>\n<p>센서값을 Blynk로 출력하기 위해서는 Blynk가 연결되지 않은 상태에서 시리얼모니터에 센서값들을 출력할 수 있어야 한다. \u200b센서값을 출력하는 코드가 완성되면, 그 다음으로 Blynk에 센서값을 보내는 작업을 시작하는 것이 좋다.</p>\n<p>Blynk앱에 센서값을 표시하는 방법에는 크게 두가지 방법이 있으며, 진행중인 프로젝트에 따라 적절한 방법을 선택하면 된다.</p>\n<br>\n<h3 id=\"pull\">PULL<a class=\"anchor\" href=\"#pull\">#</a></h3>\r\n<ul>\n<li>이 경우에 블링크는 앱이 열려있는 동안에만 Blynk에서 값을 받는다.</li>\n<li>앱에서 센서값을 표시하는 가장 간단한 방법이며, Blynk 앱의 Virtual Pins이 구동중일때 센서값을 가져온다. (Blynk를 닫거나 백그라운드에서 실행될때 데이타는 요청되지 않는다.) 타이머를 사용할 필요가 없으므로 코딩이 단순한 편이지만, 데이터가 서버에 저장되지 않으므로 히스토리 그래프를 볼 수 없다는 단점이 있다.</li>\n</ul>\n<br>\n<h4 id=\"blynk-앱-설정\">Blynk 앱 설정<a class=\"anchor\" href=\"#blynk-%ec%95%b1-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<ol>\n<li>새 프로젝트를 만든다. (새로운 Auth Token값이 당신의 이메일에 전송된다)</li>\n<li>Value Display 위젯을 추가한다.</li>\n<li>위젯 세팅으로 가서 PIN 항목을 Virtual Pin V5로 설정한다.</li>\n<li>Reading Rate를 3초로 설정한다.</li>\n</ol>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<ol>\n<li>Analog Pin에서 값을 (간단하게) 읽어들이는 경우에는 코드를 쓸 필요가 없다. 단지 예제파일을 오픈하여 하드웨어와 커넥션만 변경한다.</li>\n<li>e-mail을 체크하여 Auth Token을 확인하고, 스케치에 Auth Token을 수정입력한다.</li>\n<li>하드웨어에 코드를 업로드한다.</li>\n<li>Blynk에서 플레이버튼을 누른다.</li>\n<li>값이 표시되는 것을 볼 수 있다.</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">BLYNK_READ</span>(V5) { <span style=\"color:#75715e\">//Blynk app has something on V5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  sensorData <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(A0); <span style=\"color:#75715e\">//reading the sensor on A0\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Blynk.<span style=\"color:#a6e22e\">virtualWrite</span>(V5, sensorData); <span style=\"color:#75715e\">//sending to Blynk\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><p>이 코드는 매시간마다 Blynk가 <code>_READ</code> 요청을 Virtual Pin V5에 보내도록 한다. A0핀에서 센서값을 읽은 후, Blynk에서 Virtual Pin V5에 되돌려 준다.</p>\n<br>\n<br>\n<h3 id=\"push\">PUSH<a class=\"anchor\" href=\"#push\">#</a></h3>\r\n<ul>\n<li>\n<p>이 경우 하드웨어(아두이노 or ESP32 등)는 Blynk가 오프라인 상태일때도 센서값을 Blynk 서버에 저장하고, 앱을 열어 온라인 상태가 되면 앱으로 전송하여 센서값을 보여준다.</p>\n</li>\n<li>\n<p>Virtual Pin을 통하여 일정 주기로 하드웨어로부터 센서값을 전송하고, 이때마다 Blynk가 값을 받아들인다.</p>\n</li>\n</ul>\n<p><img src=\"/image/blynk-sensor.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"주의할-점\">주의할 점<a class=\"anchor\" href=\"#%ec%a3%bc%ec%9d%98%ed%95%a0-%ec%a0%90\">#</a></h4>\r\n<p>void loop() 에서는 센서 값을 보낼 수 없다!!!</p>\n<p>만약 void loop()문 내에 어떤 값을 넣게 되면 MCU가 아주 짧은 시간 간격으로 무한 반복하여 실행하게 되는데, Blynk는 인터넷을 통하여 값을 전송할 것이므로 Blynk 클라우드가 하드웨어로부터 오는 계속적인 데이터를 받게 될 것이다. Blynk 클라우드가 이러한 상황을 감지하면 자동적으로 접속을 끊게 된다.</p>\n<p>그러므로 데이타를 일정 간격으로 보내야하며, 이를 위해 타이머를 사용하는 방법을 취한다. 일정간격으로 데이타를 보내는 방법에는 여러가지가 있지만, 가장 간단한 방법으로 BlynkTimer의 사용을 권장한다. BlynkTimer는 Blynk 라이브러리 패키지안에 포함되어 있으므로, Blynk 라이브러리만 제대로 설치되었다면 별도의 라이브러리를 설치하지 않아도 된다.</p>\n<br>\n<h4 id=\"blynk-앱-설정-1\">Blynk 앱 설정<a class=\"anchor\" href=\"#blynk-%ec%95%b1-%ec%84%a4%ec%a0%95-1\">#</a></h4>\r\n<ol>\n<li>새 프로젝트를 만든다. (새로운 Auth Token값이 당신의 이메일에 전송된다)</li>\n<li>Value Display 위젯을 추가한다.</li>\n<li>위젯 세팅으로 가서 PIN 항목을 Virtual Pin V5로 설정한다.</li>\n<li>Frequency를 PUSH로 설정한다.</li>\n</ol>\n<br>\n<h4 id=\"example\">Example<a class=\"anchor\" href=\"#example\">#</a></h4>\r\n<ol>\n<li>timer라고 하는 BlynkTimer 오브젝트를 만든다.</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>BlynkTimer timer; <span style=\"color:#75715e\">// Announcing the timer\n</span></span></span></code></pre></div><br>\n<ol start=\"2\">\n<li>그 다음으로 일정 간격으로 실행하게 될 함수를 만든다. 이 함수는 A0에 연결된 센서로부터 값을 Virtual Pin V5를 통하여 전송한다.</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">myTimerEvent</span>() {\n</span></span><span style=\"display:flex;\"><span>  sensorData <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(A0);\n</span></span><span style=\"display:flex;\"><span>  Blynk.<span style=\"color:#a6e22e\">virtualWrite</span>(V5, sensorData);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<ol start=\"3\">\n<li>setup()문에서, 서브함수 myTimerEvent()가 매 1000ms, 즉 1초 간격으로 실행되도록 선언할 것이다.</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  ...\n</span></span><span style=\"display:flex;\"><span>  ...\n</span></span><span style=\"display:flex;\"><span>  ...\n</span></span><span style=\"display:flex;\"><span>  timer.<span style=\"color:#a6e22e\">setInterval</span>(<span style=\"color:#ae81ff\">1000L</span>, myTimerEvent);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<ol start=\"4\">\n<li>loop문은 다음과 같이 설정한다.</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  Blynk.<span style=\"color:#a6e22e\">run</span>();\n</span></span><span style=\"display:flex;\"><span>  timer.<span style=\"color:#a6e22e\">run</span>(); <span style=\"color:#75715e\">// running timer every second\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/bluetooth-%EC%8B%9C%EB%A6%AC%EC%96%BC-%ED%86%B5%EC%8B%A0/","title":"Bluetooth Serial Controller 앱","content":"<h3 id=\"bluetooth-시리얼-통신\">Bluetooth 시리얼 통신<a class=\"anchor\" href=\"#bluetooth-%ec%8b%9c%eb%a6%ac%ec%96%bc-%ed%86%b5%ec%8b%a0\">#</a></h3>\r\n<p>Bluetooth Serial Controller 앱을 통하여 아두이노와 스마트폰 간의 간단한 시리얼 통신을 해보겠습니다. 이를 위해서는 먼저 <a href=\"2018/10/09/Arduino-Bluetooth-%ed%8e%98%ec%96%b4%eb%a7%81\">Bluetooth 페어링</a> 문서를 참고하여 블루투스 모듈과 스마트폰을 페어링 해두어야 합니다. 페어링이 완료된 후 시리얼 통신을 진행합니다.</p>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/BT-03.jpg\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;SoftwareSerial.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>SoftwareSerial <span style=\"color:#a6e22e\">BTSerial</span>(<span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">3</span>); <span style=\"color:#75715e\">//Connect HC-06 TX,RX \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()  \n</span></span><span style=\"display:flex;\"><span> {\n</span></span><span style=\"display:flex;\"><span>   Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>   Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Hello!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// set the data rate for the BT port\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>   BTSerial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span> }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span> {\n</span></span><span style=\"display:flex;\"><span>   <span style=\"color:#66d9ef\">if</span> (BTSerial.<span style=\"color:#a6e22e\">available</span>())\n</span></span><span style=\"display:flex;\"><span>     Serial.<span style=\"color:#a6e22e\">write</span>(BTSerial.<span style=\"color:#a6e22e\">read</span>());\n</span></span><span style=\"display:flex;\"><span>   <span style=\"color:#66d9ef\">if</span> (Serial.<span style=\"color:#a6e22e\">available</span>())\n</span></span><span style=\"display:flex;\"><span>     BTSerial.<span style=\"color:#a6e22e\">write</span>(Serial.<span style=\"color:#a6e22e\">read</span>());\n</span></span><span style=\"display:flex;\"><span> }</span></span></code></pre></div><br>\n<br>\n<h3 id=\"스마트폰에-bluetooth-serial-controller-앱-설치하기\">스마트폰에 Bluetooth Serial Controller 앱 설치하기<a class=\"anchor\" href=\"#%ec%8a%a4%eb%a7%88%ed%8a%b8%ed%8f%b0%ec%97%90-bluetooth-serial-controller-%ec%95%b1-%ec%84%a4%ec%b9%98%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<ol>\n<li>이제 Google Playstore를 통해서 스마트폰에 Bluetooth Serial Controller 앱을 설치합니다. (iOS는 유사한 프로그램으로 설치)</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-01.png\">\n</figure>\n\n<p>\u200b    비슷한 역할을 하는 수많은 앱들이 있는데, 여러 앱을 설치하고 사용해본 결과, 이 앱이 사용하기에 유연함을 갖고 있는 것 같더군요.</p>\n<br>\n<p>\u200b    설치되었습니다.</p>\n<figure class=\"center\"><img src=\"/image/BTserialapp-02.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"2\">\n<li>설치 후 처음 실행을 하면, LANDSCAPE 모드(가로모드)로 실행이 되는데요. 그대로 사용해도 무방하지만 PORTRAIT 모드(세로 모드)로 바꿔보겠습니다. 먼저 PREFERENCE를 누르세요.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-03.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"3\">\n<li>그러면 아래 화면이 뜹니다. 아무곳이나 누르고 위로 스크롤을 하면 아래에 숨겨져 있는 메뉴가 나타나게 되는데요.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-04.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"4\">\n<li>OPTION - Orientation을 선택한 뒤,</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-05.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"5\">\n<li>PORTRAIT를 누릅니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-06.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"6\">\n<li>이제 세로모드로 나타나요. 이제 HC-06모듈과 스마트폰과의 Serial 통신을 해보도록 하겠습니다. 다시 PREFERENCE를 누르고, TERMINAL MODE를 활성화 시키세요.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-07.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"7\">\n<li>아래 화면이 TERMINAL Mode 화면입니다. 여기서 돋보기 모양을 누르고,</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-08.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"8\">\n<li>Paired Devices 목록에서 SKS100을 선택하세요. 그러면 TERMINAL이 HC-06에 접속하여, 서로간 통신할 수 있는 상태가 됩니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-09.png\" width=\"33%\">\n</figure>\n\n<br>\n<p>\u200b    만일, 아래와 같이 Paired Devices 목록이 없으면, Scan for devices를 눌러 HC-06을 찾아보세요.</p>\n<figure class=\"center\"><img src=\"/image/BTserialapp-10.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"9\">\n<li>TERMINAL이 SKS100에 접속을 시도합니다.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-11.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"10\">\n<li>접속 완료!</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-12.png\" width=\"33%\">\n</figure>\n\n<br>\n<br>\n<h3 id=\"터미널과-serial-통신하기\">터미널과 Serial 통신하기<a class=\"anchor\" href=\"#%ed%84%b0%eb%af%b8%eb%84%90%ea%b3%bc-serial-%ed%86%b5%ec%8b%a0%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<ol>\n<li>이제 터미널 창에 Test를 입력하고 SEND를 눌러보세요.</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-13.png\" width=\"33%\">\n</figure>\n\n<br>\n<ol start=\"2\">\n<li>그러면 화면에 Test가 출력됨과 동시에,</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-14.png\" width=\"33%\">\n</figure>\n\n<br>\n<p>\u200b     시리얼 모니터에 Test가 출력됩니다. 즉, TERMINAL에서 입력한 Test라는 글자가 HC-06을 통해, 아두이노와 연결되어 있는 컴퓨터의 시리얼 모니터에 출력된 것이에요.</p>\n<p><img src=\"/image/BTserialapp-15.jpg\" alt=\"\" /></p>\n<br>\n<ol start=\"3\">\n<li>이번에는 반대로 시리얼 모니터에 Good morning! 을 입력하고 전송을 누르면</li>\n</ol>\n<figure class=\"center\"><img src=\"/image/BTserialapp-16.png\" width=\"33%\">\n</figure>\n\n<br>\n<p>\u200b    스마트폰의 TERMINAL에 Good morning! 이 출력됩니다.</p>\n<p><img src=\"/image/BTserialapp-17.jpg\" alt=\"\" /></p>\n"}{"uri":"http://localhost:1313/posts/hexo-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0/","title":"hexo icarus 테마로 Github 블로그 만들기","content":"<h3 id=\"필수-요소\">필수 요소<a class=\"anchor\" href=\"#%ed%95%84%ec%88%98-%ec%9a%94%ec%86%8c\">#</a></h3>\r\n<p>Hexo를 이용하여 블로그를 만들기에 앞서 아래 요소를 먼저 설치</p>\n<ul>\n<li>git</li>\n<li>github.com에 repository 2개 생성하기\n<ul>\n<li>사용자ID-archives</li>\n<li>사용자ID.github.io</li>\n</ul>\n</li>\n<li>node.js</li>\n<li>npm</li>\n</ul>\n<p><a href=\"https://hexo.io\">hexo.io</a> 사이트에는 이를 위한 설치 방법이 간단하게 요약이 되어 있지만, 이것만으로 자신이 원하는 형태의 블로그를 운영하기는 쉽지 않다. 이 글은 아무것도 설치 되어있지 않은 상태의 윈도우 사용 컴퓨터 사용자를 기준으로, d드라이브에 hexo 블로그를 생성하고 운영하는 방법을 차례대로 따라할 수 있도록 정리한 것이다.</p>\n<br>\n<h4 id=\"git-설치\">Git 설치<a class=\"anchor\" href=\"#git-%ec%84%a4%ec%b9%98\">#</a></h4>\r\n<ol>\n<li><a href=\"https://git-scm.com/download/win\">https://git-scm.com/download/win</a> 에서 <strong>64-bit Git for Windows Setup</strong> 다운로드</li>\n<li>설치 (설치 경로는 바꾸지 않음)</li>\n<li>exe 파일은 삭제</li>\n</ol>\n<br>\n<h4 id=\"nodejs-설치\">nodejs 설치<a class=\"anchor\" href=\"#nodejs-%ec%84%a4%ec%b9%98\">#</a></h4>\r\n<ol>\n<li>\n<p><a href=\"https://nodejs.org/en/download/\">https://nodejs.org/en/download/</a> 에서 Windows Installer (.msi) 64-bit 다운로드</p>\n</li>\n<li>\n<p>설치 (설치 경로는 바꾸지 않음)</p>\n</li>\n<li>\n<p>(선택사항) 설치 중 Tools for Native Modules 에서 Automatically install the necessary tools에 체크</p>\n<ul>\n<li>chocolately, python, visualstudio 등 여러가지 패키지가 설치됨</li>\n<li>설치 후, 리부팅 필요</li>\n</ul>\n</li>\n<li>\n<p>환경 변수 구성: <strong>제어판&gt; 고급 시스템 설정 보기&gt; 고급&gt; 환경 변수</strong>를 열고, <strong>사용자 변수와 시스템 변수</strong>에 다음을 새로만들기 혹은 추가</p>\n<ul>\n<li>PATH 변수에 아래의 변수값 지정되어 있는지 확인 (없으면 새로 만들기)\n<ul>\n<li>변수값: C:\\Program Files\\nodejs</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n<h4 id=\"git-bash-실행-후-hexo-및-icarus-테마-설치\">git-bash 실행 후, hexo 및 icarus 테마 설치<a class=\"anchor\" href=\"#git-bash-%ec%8b%a4%ed%96%89-%ed%9b%84-hexo-%eb%b0%8f-icarus-%ed%85%8c%eb%a7%88-%ec%84%a4%ec%b9%98\">#</a></h4>\r\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">cd d:/dev\nnpm install -g hexo-cli </code></pre><pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">mkdir myblog\nhexo init myblog               // myblog 폴더가 비어 있어야 함.\ncd myblog\ngit clone --depth 1 https://github.com/ppoffice/hexo-theme-icarus.git themes/icarus\nhexo config theme icarus</code></pre><br>\n<ul>\n<li>아래와 같은 error 메세지가 나오면,</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">ERROR Package bulma-stylus is not installed.\nERROR Package hexo-renderer-inferno is not installed.\nERROR Package hexo-component-inferno is not installed.\nERROR Package inferno is not installed.\nERROR Package inferno-create-element is not installed.\nERROR Please install the missing dependencies your Hexo site root directory:\nERROR npm install --save bulma-stylus@0.8.0 hexo-renderer-inferno@^0.1.3 hexo-component-inferno@^0.13.0 inferno@^7.3.3 inferno-create-element@^7.3.3\nERROR or:\nERROR yarn add bulma-stylus@0.8.0 hexo-renderer-inferno@^0.1.3 hexo-component-inferno@^0.13.0 inferno@^7.3.3 inferno-create-element@^7.3.3</code></pre><br>\n<ul>\n<li>패키지를 추가 설치한 후</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">npm install --save bulma-stylus@0.8.0 hexo-renderer-inferno@^0.1.3 hexo-component-inferno@^0.13.0 inferno@^7.3.3 inferno-create-element@^7.3.3</code></pre><br>\n<ul>\n<li>다시 실행</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">hexo config theme icarus</code></pre><br>\n<ul>\n<li>이후에 아래와 같은 메세지가 나오면  _config.icarus.yml이 생성되면서 완료된다.</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">INFO  Validating config\nInferno is in development mode.\nINFO  =======================================\n ██╗ ██████╗ █████╗ ██████╗ ██╗   ██╗███████╗\n ██║██╔════╝██╔══██╗██╔══██╗██║   ██║██╔════╝\n ██║██║     ███████║██████╔╝██║   ██║███████╗\n ██║██║     ██╔══██║██╔══██╗██║   ██║╚════██║\n ██║╚██████╗██║  ██║██║  ██║╚██████╔╝███████║\n ╚═╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝ ╚══════╝\n=============================================\nINFO  === Checking package dependencies ===\nINFO  === Checking theme configurations ===\nWARN  None of the following configuration files is found:\nWARN  - D:\\dev\\stemwith\\_config.icarus.yml\nWARN  - D:\\dev\\stemwith\\themes\\icarus\\_config.yml\nINFO  Generating theme configuration file...\nINFO  D:\\dev\\stemwith\\_config.icarus.yml created successfully.\nINFO  To skip configuration generation, use &#34;--icarus-dont-generate-config&#34;.\nINFO  === Registering Hexo extensions ===</code></pre><br>\n<ul>\n<li>이제 블로그 저장소 주소를 설정 파일(_config.yml)에 적어준다.</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">theme: icarus\ndeploy:\n  type: git\n  repo: https://github.com/myblog/myblog.github.io\n  branch: master</code></pre><br>\n<ul>\n<li>로컬에서 확인</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">hexo server --debug</code></pre><p>이후, 브라우저에서</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">http://localhost:4000</code></pre><br>\n<ul>\n<li>배포를 위한 hexo-deployer-git 설치</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">npm i hexo-deployer-git --save</code></pre><p>이제 hexo generate와 hexo deploy를 사용할 수 있다.</p>\n<br>\n<br>\n<h3 id=\"icarus-테마-설정\">icarus 테마 설정<a class=\"anchor\" href=\"#icarus-%ed%85%8c%eb%a7%88-%ec%84%a4%ec%a0%95\">#</a></h3>\r\n<h4 id=\"category-list-order-설정-선택사항\">Category list order 설정 (선택사항)<a class=\"anchor\" href=\"#category-list-order-%ec%84%a4%ec%a0%95-%ec%84%a0%ed%83%9d%ec%82%ac%ed%95%ad\">#</a></h4>\r\n<ul>\n<li>d:/dev/myblog/node-modules/hexo-generator-category/lib/generator.js 수정</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">module.exports = function(locals) {\n  const config = this.config;\n  const perPage = config.category_generator.per_page;\n  const paginationDir = config.pagination_dir || &#39;page&#39;;\n  const orderBy = config.category_generator.order_by || &#39;+date&#39;;</code></pre><ul>\n<li>orderBy 부분\n<ul>\n<li>-date : 최근 글 순 (default)</li>\n<li>+date : 오래된 글 순</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"기본-설정\">기본 설정<a class=\"anchor\" href=\"#%ea%b8%b0%eb%b3%b8-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<ul>\n<li>Site Configuration: _config.yml 수정</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\"># Site\ntitle: myblog\nsubtitle: &#39;my first blog&#39;\ndescription: &#39;life diary&#39;\nkeywords:\nauthor: anonymous\nlanguage: ko\ntimezone: Asia/Seoul\n\n# URL\n## Set your site url here. For example, if you use GitHub Page, set url as &#39;https://username.github.io/project&#39;\nurl: http://[githubID].github.io</code></pre><ul>\n<li>Localization re-testing</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">hexo clean &amp;&amp; hexo s</code></pre><br>\n<h4 id=\"alternative-configuration\">Alternative Configuration<a class=\"anchor\" href=\"#alternative-configuration\">#</a></h4>\r\n<p>_config.yml 에서는 가장 기본적인 셋팅과 테마 설정만 하고. 나머지 설정은 _config.[테마명].yml 에서 수행한다.</p>\n<br>\n<h5 id=\"사용-예시\">사용 예시<a class=\"anchor\" href=\"#%ec%82%ac%ec%9a%a9-%ec%98%88%ec%8b%9c\">#</a></h5>\r\n<p>동일한 설정항목에 대하여 두가지 이상의 설정파일에서 동시에 정의하는 경우, 우선순위에 의해 설정값이 결정된다. 만약 _config.yml, _config.[테마명].yml, themes/[테마명]/ _config.yml 세가지 설정파일이 동시에 존재하는 경우, 각 파일을 아래와 같이 설정했다면,</p>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\"># _config.yml\ntheme: &#34;my-theme&#34;</code></pre><pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\"># _config.icarus.yml\nbio: &#34;My awesome bio&#34;\nfoo:\n  bar: &#39;a&#39;</code></pre><pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\"># themes/icarus/_config.yml\nbio: &#34;Some generic bio&#34;\nlogo: &#34;a-cool-image.png&#34;\n  foo:\n    baz: &#39;b&#39;</code></pre><p>최종적으로 설정되는 값은 각각 다음과 같다.</p>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">bio: &#34;My awesome bio&#34;,\nlogo: &#34;a-cool-image.png&#34;,\nfoo: {\n  bar: &#34;a&#34;,\n  baz: &#34;b&#34;</code></pre><br>\n<br>\n<h3 id=\"icarus-테마-셋팅\">icarus 테마 셋팅<a class=\"anchor\" href=\"#icarus-%ed%85%8c%eb%a7%88-%ec%85%8b%ed%8c%85\">#</a></h3>\r\n<ul>\n<li>출처: <a href=\"https://chinsun9.github.io/2020/11/20/github-hexo-blog-web-font-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0/\">친성의 블로그</a> github hexo blog web font 적용하기, hexo icarus 테마에 커스텀 레이아웃, 스타일(css) 적용하기</li>\n</ul>\n<br>\n<h4 id=\"폰트-수정\">폰트 수정<a class=\"anchor\" href=\"#%ed%8f%b0%ed%8a%b8-%ec%88%98%ec%a0%95\">#</a></h4>\r\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">// 51 line\nconst fontCssUrl = {\n  default: fontcdn(&#34;Ubuntu:wght@400;600&amp;family=Source+Code+Pro&#34;, &#34;css2&#34;),\n  cyberpunk: fontcdn(&#34;Oxanium:wght@300;400;600&amp;family=Roboto+Mono&#34;, &#34;css2&#34;),\n  nanumgothic: fontcdn(&#34;Nanum+Gothic:wght@400&amp;family=Roboto&#34;, &#34;css2&#34;),\n};</code></pre><pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">// 151 line\n&lt;link rel=&#34;preconnect&#34; href=&#34;https://fonts.gstatic.com&#34; /&gt;\n&lt;link href={fontCssUrl[&#39;nanumgothic&#39;]} rel=&#34;stylesheet&#34; /&gt;</code></pre><pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">$family-sans-serif ?= &#39;Gowun Dodum&#39;, &#39;Nanum Gothic&#39;, Ubuntu, Roboto, &#39;Open Sans&#39;, &#39;Microsoft YaHei&#39;, sans-serif\n// $family-sans-serif ?= Ubuntu, Roboto,&#39;Nanum Gothic Coding&#39;, &#39;Open Sans&#39;, &#39;Microsoft YaHei&#39;, sans-serif</code></pre><pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">$article-font-size ?= 1.2rem</code></pre><ul>\n<li><a href=\"https://fonts.google.com/?subset=korean\">Google Fonts</a>에서 사용가능한 몇가지 폰트들을 검색해볼 수 있다.</li>\n</ul>\n<ul>\n<li>\n<p>이 사이트는 Google Fonts에서 지원하는 Gowun Dodum 폰트를 사용하도록 설정하였다. 이 경우 새로운 폰트 cdn을 import할 필요는 없으나, 특별한 폰트를 원하는 경우에는 아래와 같은 방법으로 새로운 cdn을 import하여야 한다.</p>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">@import url(https://cdn.rawgit.com/innks/NanumSquareRound/master/nanumsquareround.css)</code></pre></li>\n</ul>\n<br>\n<h4 id=\"가독성-향상\">가독성 향상<a class=\"anchor\" href=\"#%ea%b0%80%eb%8f%85%ec%84%b1-%ed%96%a5%ec%83%81\">#</a></h4>\r\n<p>icarus 테마의 포스트 글자 크기나 기본 줄간격이 좋지 않아 가독성이 떨어지는 경향이 있어 아래와 같이 수정한다.</p>\n<ol>\n<li>\n<p>포스트 제목 폰트 변경: &amp;.article 을 검색한 후, .title 추가</p>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">&amp;.article\n    .title\n        font-size: 2.0em\n        font-weight: 700\n        letter-spacing: -1.4px;</code></pre></li>\n<li>\n<p>포스트 컨텐트 폰트 변경: .content를 검색한 후, 수정</p>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">.content\n    font-size: $article-font-size\n    line-height: 1.75em;\n    letter-spacing: -0.3px;\n    color: #5d686f;\n    margin-top: 20px;</code></pre></li>\n<li>\n<p>heading 폰트 변경: h1과 h2만 수정</p>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">    h1\n            font-size: 1.95em\n            font-weight: 600\n            margin-top: 50px;\n\n    h2\n            font-size: 1.5em\n            margin-top: 35px;</code></pre></li>\n</ol>\n<br>\n<h4 id=\"컬럼-비율-조정하기\">컬럼 비율 조정하기<a class=\"anchor\" href=\"#%ec%bb%ac%eb%9f%bc-%eb%b9%84%ec%9c%a8-%ec%a1%b0%ec%a0%95%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>\n<p><em>layout/common/widgets.jsx</em> 로 가보면 <code>getColumnSizeClass</code>라는 함수가 있다</p>\n<p>여기에 자신의 <em>columnCount</em> 에 맞게 수정한다</p>\n<p>columnCount* 의 기본값은 2라서 case 2인 경우를 <code>is-3</code>으로 수정</p>\n</li>\n</ol>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">function getColumnSizeClass(columnCount) {\n  switch (columnCount) {\n    case 2:\n      return &#39;is-3-tablet is-3-desktop is-3-widescreen&#39;; // 여기 수정\n    case 3:\n      return &#39;is-4-tablet is-4-desktop is-3-widescreen&#39;;\n  }\n  return &#39;&#39;;\n}</code></pre><ol start=\"2\">\n<li>\n<p><em>layout/layout.jsx</em> 아래쪽에서 <code>is-9</code>로 수정해주었다</p>\n<ul>\n<li>\n<p>전체 12에서 기본값은 프로필이 들어있는 영역이 4, 게시글 영역이 8이였다</p>\n</li>\n<li>\n<p>위처럼 수정하게되면 우선 그 비율을 3, 9로 변경해준 것이다</p>\n</li>\n<li>\n<p>프로필 영역을 좁게, 게시글 영역은 크게 바뀐 것이다</p>\n</li>\n<li>\n<p>이 12라는 것은 칼럼들의 상위에 있는 <code>container</code>의 크기를 기준으로 12등분한 것이다.</p>\n</li>\n</ul>\n</li>\n</ol>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">&lt;div\n  class={classname({\n    column: true,\n    &#39;order-2&#39;: true,\n    &#39;column-main&#39;: true,\n    &#39;is-12&#39;: columnCount === 1,\n    &#39;is-9-tablet is-9-desktop is-9-widescreen&#39;: columnCount === 2, // 여기 수정\n    &#39;is-9-tablet is-9-desktop is-6-widescreen&#39;: columnCount === 3,\n  })}\n  dangerouslySetInnerHTML={{ __html: body }}\n&gt;&lt;/div&gt;</code></pre><ol start=\"3\">\n<li>\n<p>container 크기 늘리기</p>\n<p><em>include/style/base.styl</em> 로 가서 23라인 정도에 보이는 아래 코드 중에서 <code>$widescreen</code>, <code>$fullhd</code>의 값을 각각 200px 씩 늘려준다.</p>\n</li>\n</ol>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">$gap ?= 16px\n$tablet ?= 769px\n$desktop ?= 1288px\n$widescreen ?= 1480px\n$fullhd ?= 1672px</code></pre><br>\n<h4 id=\"커스텀-css-적용\">커스텀 css 적용<a class=\"anchor\" href=\"#%ec%bb%a4%ec%8a%a4%ed%85%80-css-%ec%a0%81%ec%9a%a9\">#</a></h4>\r\n<h5 id=\"이미지-margin-변경\">이미지 margin 변경<a class=\"anchor\" href=\"#%ec%9d%b4%eb%af%b8%ec%a7%80-margin-%eb%b3%80%ea%b2%bd\">#</a></h5>\r\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">&amp;.article\n    .article-meta, .article-tags\n        color: $text-light\n\n    .article-meta\n        overflow-x: auto\n        margin-bottom: .5rem\n\n    .article-more\n        @extend .button.is-light\n\n    .content\n        word-wrap: break-word\n        font-size: $article-font-size\n\n        img                     // 여기 추가\n            margin-top: 30px    // 여기 추가</code></pre><br>\n<h4 id=\"변경된-css의-배포-및-적용\">변경된 css의 배포 및 적용<a class=\"anchor\" href=\"#%eb%b3%80%ea%b2%bd%eb%90%9c-css%ec%9d%98-%eb%b0%b0%ed%8f%ac-%eb%b0%8f-%ec%a0%81%ec%9a%a9\">#</a></h4>\r\n<ul>\n<li>hexo server에서는 최신 css 상태를 반영하는데, 그런데 실제로 배포될 때는 css파일이 갱신이 안된다.</li>\n<li>그러므로 public/css/default.css 파일을 삭제하고, 다시 <code>hexo generate</code>로 생성한 후 배포한다.</li>\n</ul>\n<br>\n<h4 id=\"link-hover-컬러-변경\">link, hover 컬러 변경<a class=\"anchor\" href=\"#link-hover-%ec%bb%ac%eb%9f%ac-%eb%b3%80%ea%b2%bd\">#</a></h4>\r\n<ul>\n<li>link, link-visited 컬러가 blue와 purple로 지정되어 있는 것이 어울리는것 같지 않아 grey-darker와 grey-light로 변경</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">// Link colors\n\n$link ?= $grey-darker\n$link-invert ?= findColorInvert($link)\n$link-light ?= findLightColor($link)\n$link-dark ?= findDarkColor($link)\n$link-visited ?= $grey-dark\n\n$link-hover ?= $grey-darker\n$link-hover-border ?= $grey-light\n\n$link-focus ?= $grey-darker\n$link-focus-border ?= $blue\n\n$link-active ?= $grey-darker\n$link-active-border ?= $grey-dark</code></pre><br>\n<br>\n<h3 id=\"troubleshooting\">Troubleshooting<a class=\"anchor\" href=\"#troubleshooting\">#</a></h3>\r\n<h4 id=\"경로의-대소문자-구분-설정\">경로의 대소문자 구분 설정<a class=\"anchor\" href=\"#%ea%b2%bd%eb%a1%9c%ec%9d%98-%eb%8c%80%ec%86%8c%eb%ac%b8%ec%9e%90-%ea%b5%ac%eb%b6%84-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<p>경로에서 사용하는 폴더나 파일이름의 대소문자 구분 문제로 인해, 파일 인식이 안되는 경우가 발생한다. 특히, generate 시에 아래와 같은 메세지가 여러개 나오면, 대부분 파일이름의 대소문자 구분 문제라고 생각하면 된다.</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">Markdown Image Path does not exists!</code></pre><p>이런 경우, 다음과 같은 방법으로 문제를 해결해야 한다.</p>\n<ul>\n<li>\n<p>_config.yml의 filename_case 수정</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\"># Writing\nfilename_case: 1</code></pre><ul>\n<li>0: 대소문자 구분</li>\n<li>1: 경로를 이루는 문자를 모두 소문자로 변경하여 관리</li>\n<li>2: 경로를 이루는 문자를 모두 대문자로 변경하여 관리</li>\n</ul>\n</li>\n<li>\n<p>github.com에 로그인하여 repository의 categories 폴더 삭제</p>\n</li>\n<li>\n<p>d:\\dev\\myblog\\ 폴더의 .deploy_git 폴더 삭제</p>\n</li>\n<li>\n<p>hexo clean 후 재배포</p>\n</li>\n<li>\n<p>재배포시에 다음과 같은 에러가 생길 수 있다.</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">fatal: not a git repository (or any of the parent directories): .git</code></pre><p>.deploy_git 폴더의 삭제에 따라, git에 대한 정보를 담은 파일이 없기 때문에 발생하는 에러이며, d:\\dev\\myblog 폴더에서 다음을 실행한 후,</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">git init\ngit remote add</code></pre></li>\n</ul>\n<br>\n<p>이렇게 해도 경로가 인식이 안되는 경우는, Git에서 대소문자를 구분하게 설정하고, 폴더명 및 파일이름의 대소문자를 하나하나 맞춰주어서 해결할 수도 있다.</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">git config --global core.ignorecase=false</code></pre><br>\n<h4 id=\"기존-블로그를-복구하는-경우\">기존 블로그를 복구하는 경우<a class=\"anchor\" href=\"#%ea%b8%b0%ec%a1%b4-%eb%b8%94%eb%a1%9c%ea%b7%b8%eb%a5%bc-%eb%b3%b5%ea%b5%ac%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h4>\r\n<ul>\n<li>기존에 사용하던 블로그 디렉토리가 d:\\dev\\myblog 인 경우, d:\\dev 폴더 전체를 다른 폴더에 복사하여 백업해두고 아래의 과정을 진행한다.</li>\n<li>백업 완료 후, 기존에 사용하던 d:\\dev\\ 폴더 자체를 삭제한 후, 아래의 과정을 수행하여 모든 설치를 마친 뒤, 백업해둔 myblog 폴더에서 필요한 부분을 복구함.</li>\n</ul>\n<br>\n<h4 id=\"favicon이-안나오는-경우\">favicon이 안나오는 경우<a class=\"anchor\" href=\"#favicon%ec%9d%b4-%ec%95%88%eb%82%98%ec%98%a4%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h4>\r\n<p>로컬 테스트시 favicon이 출력되지만, github 배포시 출력되지 않는다면</p>\n<pre tabindex=\"0\"><code class=\"language-[markdown]\" data-lang=\"[markdown]\">head:\n  # URL or path to the website&#39;s icon\n  favicon: /img/favicon.png?\n  # Open Graph metadata</code></pre><p>_<em>config.icarus.yml</em> 에서 상단에 favicon을 설정하는 부분에서 favicon.png 끝에 <code>?</code>를 추가한 후, 재배포 한다.</p>\n<h4 id=\"generate할-때-에러가-뜨는-경우\">generate할 때 에러가 뜨는 경우<a class=\"anchor\" href=\"#generate%ed%95%a0-%eb%95%8c-%ec%97%90%eb%9f%ac%ea%b0%80-%eb%9c%a8%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h4>\r\n<pre tabindex=\"0\"><code>$ hexo g\nINFO  Validating config\nInferno is in development mode.\nERROR {\n  err: TypeError: Cannot read properties of undefined (reading &#39;split&#39;)</code></pre><p>해결방법</p>\n<pre tabindex=\"0\"><code>cd d:\\dev\\myblog\nnpm install hexo-html-syncer --save\nnpm audit fix --force\nnpm fund</code></pre><p><br>이후에 다시 generate 한다.</p>\n<br>\n<br>\n<h3 id=\"블로그-포스트-생성\">블로그 포스트 생성<a class=\"anchor\" href=\"#%eb%b8%94%eb%a1%9c%ea%b7%b8-%ed%8f%ac%ec%8a%a4%ed%8a%b8-%ec%83%9d%ec%84%b1\">#</a></h3>\r\n<ol>\n<li>\n<p>test.md 파일을 만든 뒤, d:/dev/stemwith/source/_post/ 폴더에 복사</p>\n<p>test.md 파일의 가장 앞부분에 들어가는 post front-matter는 다음과 같이 구성한다.</p>\n<pre tabindex=\"0\"><code class=\"language-[markdown]\" data-lang=\"[markdown]\">---\ntitle: test 블로그 페이지\ndate: 2019-09-17 01:32:35\nupdated: \ncategory:\n  - blog\ntags:\n  - hexo\n  - blog\ntoc: true\nthumbnail: /images/preview.jpg\n---</code></pre><ul>\n<li>toc: true를 추가하면 헤딩 태그(h1~h6)를 통해 목차를 만들어 준다. (icarus 테마의 경우)</li>\n</ul>\n</li>\n<li>\n<p>로컬에서 페이지 확인</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">hexo serve\nhttp://localhost:4000</code></pre></li>\n<li>\n<p>로컬 작업 내용을 github 도메인으로 배포 (push)</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">hexo generate\nhexo deploy</code></pre><p>or</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">hexo g -d</code></pre></li>\n<li>\n<p>deploy 후에도 오랜시간 업데이트가 안된다면, 페이지 clean 후 재배포</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">hexo clean\nhexo deploy --generate</code></pre></li>\n</ol>\n<br>\n<br>\n<h3 id=\"code-fence\">Code fence<a class=\"anchor\" href=\"#code-fence\">#</a></h3>\r\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\">``` [language] [title] [url] [link text] [additional options]\ncode snippet</code></pre><p>{% codeblock [title] [lang:language] [url] [link text] [additional options] %}\ncode snippet\n{% endcodeblock %}</p>\n<p>{% code [title] [lang:language] [url] [link text] [additional options] %}\ncode snippet\n{% endcode %}</p>\n<pre tabindex=\"0\"><code>* 첫번째 라인에\n\n```[markdown]\n``` [C++] 파일이름</code></pre><p>과 같이 적어주면 코드박스 상단에 파일이름이 표시된다.</p>\n<ul>\n<li>파일이름은 [ ]로 감싸게 되면, [ ]까지 출력된다.</li>\n<li>typora에서는 `````를 먼저 입력한 뒤, 코드박스가 나타나면, 코드박스 하단의 language 입력란에 입력한다.</li>\n</ul>\n<br>\n<br>\n<h3 id=\"about-페이지-만들기\">about 페이지 만들기<a class=\"anchor\" href=\"#about-%ed%8e%98%ec%9d%b4%ec%a7%80-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h3>\r\n<p>아래 명령을 통해 source/about/index.md을 생성한 후, 파일을 수정하여 사용한다.</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">hexo new page &#34;about&#34;</code></pre><br>\n<br>\n<h3 id=\"사진-첨부-방법\">사진 첨부 방법<a class=\"anchor\" href=\"#%ec%82%ac%ec%a7%84-%ec%b2%a8%eb%b6%80-%eb%b0%a9%eb%b2%95\">#</a></h3>\r\n<ol>\n<li>\n<p>첨부할 사진 파일 위치 : 사진 파일을 d:/dev/stemwith/source/image/ 폴더에 복사</p>\n</li>\n<li>\n<p>마크다운 파일에서 파일 위치를 다음과 같이 지정함 지정함</p>\n<pre tabindex=\"0\"><code class=\"language-[markdown]\" data-lang=\"[markdown]\">![사진첨부파일설명](/image/~~~.jpg)</code></pre></li>\n<li>\n<p>사진 출력시 사이즈 조정</p>\n<ul>\n<li>icarus, next 테마 사용시에는 사진 사이즈 조정이 필요한 경우, img 태그를 사용하여 zoom 수치로 조정하여야 함</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\"><figure class=\"center\"><img src=\"/image/test.png\" width=\"80%\">\n   </figure>\n</code></pre><ul>\n<li>book 테마 사용시에는 아래와 같이 하면 화면에 출력되는 크기를 조정할 수 있다. (단, icarus, Next 테마와 같은 방법을 사용해도 된다.)</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[markdown]\" data-lang=\"[markdown]\">![사진첨부파일설명](/image/~~~.png =432x768)</code></pre></li>\n<li>\n<p>주의 사항</p>\n<ul>\n<li>필요한 경우, hexo-image-link-with-display-size 설치</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">npm i hexo-image-link-with-display-size</code></pre><ul>\n<li>\n<p>사진이 위치한 폴더를 지정할 때, /image/ 폴더 앞에 점(.) 같은 것을 추가하면 안됨</p>\n</li>\n<li>\n<p>파일이름에 언더바(_)가 포함되면 안됨. 대시(-)는 가능</p>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n<br>\n<h3 id=\"github-블로그-구글-검색-노출\">Github 블로그 구글 검색 노출<a class=\"anchor\" href=\"#github-%eb%b8%94%eb%a1%9c%ea%b7%b8-%ea%b5%ac%ea%b8%80-%ea%b2%80%ec%83%89-%eb%85%b8%ec%b6%9c\">#</a></h3>\r\n<p>※ 출처: <a href=\"https://chinsun9.github.io/2020/09/23/%EB%82%B4-github-blog-%EA%B8%80%EC%9D%B4-%EA%B5%AC%EA%B8%80-%EA%B2%80%EC%83%89%EC%97%90-%EB%82%98%EC%98%A4%EB%8A%94-%EB%B2%95/\">내 github blog 글이 구글 검색에 나오는 법(친성의 블로그)</a></p>\n<br>\n<h4 id=\"blog-설정\">blog 설정<a class=\"anchor\" href=\"#blog-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<h5 id=\"seo-search-engine-optimization-설정\">SEO (search engine optimization) 설정<a class=\"anchor\" href=\"#seo-search-engine-optimization-%ec%84%a4%ec%a0%95\">#</a></h5>\r\n<p>블로그 설치 폴더가 d:\\dev\\myblog 인 경우, d:\\dev\\myblog 폴더에서</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">npm i hexo-autonofollow\nnpm i hexo-generator-feed\nnpm i hexo-generator-seo-friendly-sitemap\nnpm i hexo-generator-robotstxt</code></pre><p>필요한 경우 hexo-auto-canonical과 hexo-component-inferno을 추가로 설치한다.</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">npm i hexo-auto-canonical\nnpm i hexo-component-inferno</code></pre><p>설치 후</p>\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">npm audit fix</code></pre><br>\n<p>※ 표준링크 확인 방법</p>\n<ol>\n<li>\n<p>본인 블로그로 접속</p>\n</li>\n<li>\n<p>F12로 개발자도구를 열고</p>\n</li>\n<li>\n<p>개발자도구 상단의 <strong>요소</strong>를 클릭한 뒤,</p>\n</li>\n<li>\n<p>Ctrl-F를 눌러 <strong>canonical</strong>를 검색했을 때, 아래 형태의 링크 태그가 검색이 되면, 이미 표준링크가 생성되고 있는 것임. 이런 경우에는 hexo-auto-canonical은 설치하지 않아도 됨!</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-html\" data-lang=\"html\"><span style=\"display:flex;\"><span>&lt;<span style=\"color:#f92672\">link</span> <span style=\"color:#a6e22e\">rel</span><span style=\"color:#f92672\">=</span><span style=\"color:#e6db74\">&#34;canonical&#34;</span> <span style=\"color:#a6e22e\">href</span><span style=\"color:#f92672\">=</span><span style=\"color:#e6db74\">&#34;http://블로그 글 주소/&#34;</span></span></span></code></pre></div></li>\n<li>\n<p>NEXT 테마의 경우, (이미 표준링크를 생성하고 있으므로) hexo-auto-canonical은 설치하지 않아도 됨</p>\n</li>\n</ol>\n<br>\n<h5 id=\"_configyml-설정\">_config.yml 설정<a class=\"anchor\" href=\"#_configyml-%ec%84%a4%ec%a0%95\">#</a></h5>\r\n<p>_config.yml 최하단 deploy 설정 아래에 다음을 추가</p>\n<pre tabindex=\"0\"><code class=\"language-[markdown]\" data-lang=\"[markdown]\">nofollow:\n  enable: true\n  exclude:\n    - exclude1.com\n    - exclude2.com\nfeed:\n  type: rss2\n  path: rss2.xml\n  limit: 20\nsitemap:\n  path: sitemap.xml\n  tag: false\n  category: false\nrobotstxt:\n  useragent: &#39;*&#39;\n  allow:\n    - /\n  sitemap: https://깃허브유저네임.github.io/sitemap.xml</code></pre><br>\n<h5 id=\"배포\">배포<a class=\"anchor\" href=\"#%eb%b0%b0%ed%8f%ac\">#</a></h5>\r\n<pre tabindex=\"0\"><code class=\"language-[bash]\" data-lang=\"[bash]\">hexo g -d</code></pre><br>\n<h5 id=\"생성된-파일-확인하기\">생성된 파일 확인하기<a class=\"anchor\" href=\"#%ec%83%9d%ec%84%b1%eb%90%9c-%ed%8c%8c%ec%9d%bc-%ed%99%95%ec%9d%b8%ed%95%98%ea%b8%b0\">#</a></h5>\r\n<p>d:\\dev\\myblog\\public\\ 디렉터리 하단에 rss2.xml, sitemap.xml, robots.txt 이 3개의 파일이 보이는지 확인한다.</p>\n<br>\n<br>\n<h4 id=\"검색-노출\">검색 노출<a class=\"anchor\" href=\"#%ea%b2%80%ec%83%89-%eb%85%b8%ec%b6%9c\">#</a></h4>\r\n<h5 id=\"구글-검색-엔진-등록\">구글 검색 엔진 등록<a class=\"anchor\" href=\"#%ea%b5%ac%ea%b8%80-%ea%b2%80%ec%83%89-%ec%97%94%ec%a7%84-%eb%93%b1%eb%a1%9d\">#</a></h5>\r\n<ol>\n<li>\n<p><a href=\"https://search.google.com/search-console/about\">Google Search Console</a> 에 접속후 시작하기 클릭</p>\n</li>\n<li>\n<p><strong>URL 접두어</strong>를 선택하고, <strong>자신의 깃헙 주소</strong> (예, <a href=\"https://testblog.github.io\">https://testblog.github.io</a>)를 입력한 뒤 <strong>계속</strong> 클릭</p>\n</li>\n<li>\n<p>소유권 확인</p>\n<ol>\n<li>html 파일 다운로드</li>\n<li>(_config.yml 이 위치한) d:\\dev\\myblog\\public\\ 디렉토리에 다운 받은 파일을 넣고</li>\n<li>hexo d 로 배포</li>\n<li>잠시 대기 후, 소유권 확인 과정 창의 <strong>확인</strong> 클릭 (확인이 안된다고 나오는 경우에는 잠시 후에 다시 시도 해야 함)</li>\n<li>소유권이 확인되면, <strong>속성으로 이동</strong> 클릭</li>\n</ol>\n</li>\n<li>\n<p>Google Search Console에서</p>\n<ol>\n<li>왼쪽 메뉴의 <strong>sitemaps</strong> 클릭</li>\n<li>새 사이트맵 추가에서 <strong>sitemap.xml</strong> 입력 후 <strong>제출</strong> 클릭</li>\n<li>새 사이트맵 추가에서 <strong>rss2.xml</strong> 입력 후 <strong>제출</strong> 클릭</li>\n<li>두 파일의 제출 상태가 <strong>성공</strong>으로 표시되어야 함 (<strong>가져올 수 없음</strong> 이라고 나오면 잠시 후에 페이지 새로고침을 해보고, 성공으로 표시되는지 확인이 필요함)</li>\n</ol>\n</li>\n<li>\n<p>실제 검색은 하루 정도 지나면 가능</p>\n</li>\n</ol>\n<br>\n<h5 id=\"naver-검색-노출\">Naver 검색 노출<a class=\"anchor\" href=\"#naver-%ea%b2%80%ec%83%89-%eb%85%b8%ec%b6%9c\">#</a></h5>\r\n<ol>\n<li>구글과 유사하며, 네이버 웹마스터 도구 (Naver Search Advisor)를 사용하여 등록함</li>\n<li>RSS 제출 메뉴와 사이트맵 제출 메뉴가 분리되어 있으므로, sitemap.xml 및 rss2.xml 등록시 유의</li>\n</ol>\n<br>\n<h5 id=\"daum-검색-노출\">Daum 검색 노출<a class=\"anchor\" href=\"#daum-%ea%b2%80%ec%83%89-%eb%85%b8%ec%b6%9c\">#</a></h5>\r\n<ol>\n<li><a href=\"https://register.search.daum.net/index.daum\">Daum 검색등록</a>으로 들어가서</li>\n<li>신규 등록에 블로그 URL을 등록한 뒤 <strong>확인</strong>을 클릭하여 제출하면, 심사 후 이메일로 등록 결과를 알려줌</li>\n</ol>\n<br>\n<br>\n<h4 id=\"mathjax--katex-설정\">Mathjax &amp; KaTeX 설정<a class=\"anchor\" href=\"#mathjax--katex-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<ul>\n<li>_config.[테마].yml 설정</li>\n</ul>\n<pre tabindex=\"0\"><code class=\"language-[markdown]\" data-lang=\"[markdown]\">math:\n    enable: false\n  ...\n  katex:\n    enable: true\n    # See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex\n    copy_tex: true</code></pre><p>\u200b        math: enable: false 상태에서는 필요한 렌더링이 필요한 페이지의 front matter에 <strong>mathjax: true</strong>를 넣어주어야 한다.</p>\n<pre tabindex=\"0\"><code class=\"language-[markdown]\" data-lang=\"[markdown]\">---\ntitle: Will Render Math\nmathjax: true\n---</code></pre><br>\n<h4 id=\"google-analytics-설정\">Google Analytics 설정<a class=\"anchor\" href=\"#google-analytics-%ec%84%a4%ec%a0%95\">#</a></h4>\r\n<pre tabindex=\"0\"><code class=\"language-[html]\" data-lang=\"[html]\"># Google Analytics\n# See: https://analytics.google.com\ngoogle_analytics:\n  tracking_id: UA-*********-1          // google analytics 계정 s○○○○○○○@○○○○○○○.com</code></pre>"}{"uri":"http://localhost:1313/posts/processing-%EA%B8%B0%EC%B4%88/","title":"Processing 기초","content":"<ul>\n<li>processing.org 에서 다운로드 (<a href=\"https://processing.org/download/\">다운로드 페이지</a>)</li>\n<li>arduino sketch는 C++기반이고, processing sketch는 java기반입니다.</li>\n</ul>\n<br>\n<h3 id=\"processing-sketch-예제\">processing sketch 예제<a class=\"anchor\" href=\"#processing-sketch-%ec%98%88%ec%a0%9c\">#</a></h3>\r\n<ol>\n<li>예제1 : 프로세싱 윈도우 크기, 배경색, 점, 선, 사각형, 원, 텍스트, 폰트, 사진 입력</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-java\" data-lang=\"java\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  size(400,400);\n</span></span><span style=\"display:flex;\"><span>  background(100);        <span style=\"color:#75715e\">// background(0,255,0);</span>\n</span></span><span style=\"display:flex;\"><span>  strokeWeight(10);       <span style=\"color:#75715e\">// dot/line width</span>\n</span></span><span style=\"display:flex;\"><span>  stroke(0,255,0,100);    <span style=\"color:#75715e\">// dot/line color and transparency, noStroke();</span>\n</span></span><span style=\"display:flex;\"><span>  point(200,200);         <span style=\"color:#75715e\">// draw dot</span>\n</span></span><span style=\"display:flex;\"><span>  line(0,0,200,150);      <span style=\"color:#75715e\">// draw line</span>\n</span></span><span style=\"display:flex;\"><span>  ellipse(300,300,50,80); <span style=\"color:#75715e\">// draw circle(x,y,xr,yr)</span>\n</span></span><span style=\"display:flex;\"><span>  fill(0);                <span style=\"color:#75715e\">// rect/text color, nofill();</span>\n</span></span><span style=\"display:flex;\"><span>  rect(100,250,150,300);  <span style=\"color:#75715e\">// draw rectangle(x1,y1,x2,y2)</span>\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  textSize(20);\n</span></span><span style=\"display:flex;\"><span>  PFont font <span style=\"color:#f92672\">=</span> createFont(<span style=\"color:#e6db74\">&#34;NanumGothic&#34;</span>, 32);\n</span></span><span style=\"display:flex;\"><span>  textFont(font);\n</span></span><span style=\"display:flex;\"><span>  text(<span style=\"color:#e6db74\">&#34;Hello World!&#34;</span>,200,100); <span style=\"color:#75715e\">// text(string,x1,y2)</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  PImage img <span style=\"color:#f92672\">=</span> loadImage(<span style=\"color:#e6db74\">&#34;sks.jpg&#34;</span>);  <span style=\"color:#75715e\">// file in &#39;/sketch_XXXXXXa/data/&#39; folder</span>\n</span></span><span style=\"display:flex;\"><span>  image(img,20,50);       <span style=\"color:#75715e\">// image(img,x,y,width,height);</span>\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">draw</span>() {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<ol start=\"2\">\n<li>예제2 : 마우스와 키보드 이벤트</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-java\" data-lang=\"java\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  size(400,400);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">draw</span>() {\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">mousePressed</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(mouseButton <span style=\"color:#f92672\">==</span> LEFT) {\n</span></span><span style=\"display:flex;\"><span>    println(<span style=\"color:#e6db74\">&#34;left button Pressed!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(mouseButton <span style=\"color:#f92672\">==</span> RIGHT) {\n</span></span><span style=\"display:flex;\"><span>    println(<span style=\"color:#e6db74\">&#34;right button Pressed!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(mouseButton <span style=\"color:#f92672\">==</span> CENTER) {\n</span></span><span style=\"display:flex;\"><span>    println(<span style=\"color:#e6db74\">&#34;center button Pressed!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">keyPressed</span>() {\n</span></span><span style=\"display:flex;\"><span>  println(<span style=\"color:#e6db74\">&#34;key Pressed!&#34;</span>);   <span style=\"color:#75715e\">// Key event</span>\n</span></span><span style=\"display:flex;\"><span>  println(key);              <span style=\"color:#75715e\">// Key String</span>\n</span></span><span style=\"display:flex;\"><span>  println(keyCode);          <span style=\"color:#75715e\">// ASCII Code</span>\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">mouseReleased</span>() {\n</span></span><span style=\"display:flex;\"><span>  println(<span style=\"color:#e6db74\">&#34;button Released!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">keyReleased</span>() {\n</span></span><span style=\"display:flex;\"><span>  println(<span style=\"color:#e6db74\">&#34;key Released!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">mouseClicked</span>() {\n</span></span><span style=\"display:flex;\"><span>  println(<span style=\"color:#e6db74\">&#34;button Clicked!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">mouseMoved</span>() {\n</span></span><span style=\"display:flex;\"><span>  println(<span style=\"color:#e6db74\">&#34;mouse Moved!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">mouseDragged</span>() {\n</span></span><span style=\"display:flex;\"><span>  println(<span style=\"color:#e6db74\">&#34;mouse Dragged!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">mouseWheel</span>() {\n</span></span><span style=\"display:flex;\"><span>  println(<span style=\"color:#e6db74\">&#34;mouse Wheel!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<ol start=\"3\">\n<li>예제3 : 마우스 움직이는 대로 원 그리기</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-java\" data-lang=\"java\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  size(400,400);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">draw</span>() {  \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">mouseMoved</span>() {\n</span></span><span style=\"display:flex;\"><span>  ellipse(mouseX,mouseY,50,50);  \n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<ol start=\"4\">\n<li>예제4 : 자유선 그리기</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-java\" data-lang=\"java\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  size(400,400);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">draw</span>() {  \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">mouseMoved</span>() {\n</span></span><span style=\"display:flex;\"><span>  line(pmouseX,pmouseY,mouseX,mouseY);  \n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"arduino와-processing을-통해-arduino-보드의-기본-led-blink-하기\">Arduino와 Processing을 통해 arduino 보드의 기본 led blink 하기<a class=\"anchor\" href=\"#arduino%ec%99%80-processing%ec%9d%84-%ed%86%b5%ed%95%b4-arduino-%eb%b3%b4%eb%93%9c%ec%9d%98-%ea%b8%b0%eb%b3%b8-led-blink-%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p>아두이노의 기본 LED를 사용할 것이므로 별도의 회로 연결없이 아두이노만 연결한다.</p>\n<br>\n<h4 id=\"library-등록\">library 등록<a class=\"anchor\" href=\"#library-%eb%93%b1%eb%a1%9d\">#</a></h4>\r\n<ol>\n<li>\n<p>아두이노 사이트에서 프로세싱 라이브러리를 다운받은 후</p>\n</li>\n<li>\n<p>압축을 풀었을 때 나오는 arduino폴더를 c:\\Users\\userID\\processing\\libraries\\ 폴더에 복사한다.</p>\n</li>\n<li>\n<p>프로세싱 프로그램에서 <code>스케치</code> → <code>내부라이브러리</code> → <code>Arduino (firmata)</code>를 선택하면,</p>\n</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>import cc.arduino.<span style=\"color:#f92672\">*</span>;\n</span></span><span style=\"display:flex;\"><span>import org.firmata.<span style=\"color:#f92672\">*</span>;\n</span></span><span style=\"display:flex;\"><span>import processing.serial.<span style=\"color:#f92672\">*</span>;</span></span></code></pre></div><p>가 등록된다.</p>\n<br>\n<h4 id=\"processing-sketch\">processing sketch<a class=\"anchor\" href=\"#processing-sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-java\" data-lang=\"java\"><span style=\"display:flex;\"><span><span style=\"color:#f92672\">import</span> cc.arduino.*;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">import</span> org.firmata.*;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">import</span> processing.serial.*;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Arduino arduino;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> ledPin <span style=\"color:#f92672\">=</span> 13;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  size(400,400);\n</span></span><span style=\"display:flex;\"><span>  println(Arduino.<span style=\"color:#a6e22e\">list</span>());\n</span></span><span style=\"display:flex;\"><span>  arduino <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">new</span> Arduino(<span style=\"color:#66d9ef\">this</span>, Arduino.<span style=\"color:#a6e22e\">list</span>()<span style=\"color:#f92672\">[</span>0<span style=\"color:#f92672\">]</span>, 57600); <span style=\"color:#75715e\">// Arduino.list()[0] or &#34;COM3&#34;</span>\n</span></span><span style=\"display:flex;\"><span>  arduino.<span style=\"color:#a6e22e\">pinMode</span>(ledPin, Arduino.<span style=\"color:#a6e22e\">OUTPUT</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">draw</span>() {\n</span></span><span style=\"display:flex;\"><span>  arduino.<span style=\"color:#a6e22e\">digitalWrite</span>(ledPin, Arduino.<span style=\"color:#a6e22e\">HIGH</span>);\n</span></span><span style=\"display:flex;\"><span>  delay(1000);\n</span></span><span style=\"display:flex;\"><span>  arduino.<span style=\"color:#a6e22e\">digitalWrite</span>(ledPin, Arduino.<span style=\"color:#a6e22e\">LOW</span>);\n</span></span><span style=\"display:flex;\"><span>  delay(1000);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"arduino-sketch\">arduino sketch<a class=\"anchor\" href=\"#arduino-sketch\">#</a></h4>\r\n<ol>\n<li>\n<p>arduino IDE에서 <code>파일</code> → <code>예제</code> → <code>firmata</code> → <code>standard firmata</code>를 불러들인 후</p>\n</li>\n<li>\n<p>컴파일하고 업로드한다.</p>\n</li>\n</ol>\n<br>\n<h4 id=\"processing에서-실행하기\">processing에서 실행하기<a class=\"anchor\" href=\"#processing%ec%97%90%ec%84%9c-%ec%8b%a4%ed%96%89%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>\n<p>processing에서 실행버튼을 눌러 실행해보기</p>\n</li>\n<li>\n<p><code>파일</code> → <code>어플리케이션으로 내보내기</code>를 선택하여 윈도우, Mac, Linux용 실행파일을 만들어보기</p>\n</li>\n</ol>\n<p>※ 어플리케이션으로 내보내기를 하기전에 processing sketch를 저장하여야 한다.</p>\n<br>\n<br>\n<h3 id=\"processing으로-led-제어하기\">Processing으로 led 제어하기<a class=\"anchor\" href=\"#processing%ec%9c%bc%eb%a1%9c-led-%ec%a0%9c%ec%96%b4%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"processing-sketch--사각형-스위치\">processing sketch : 사각형 스위치<a class=\"anchor\" href=\"#processing-sketch--%ec%82%ac%ea%b0%81%ed%98%95-%ec%8a%a4%ec%9c%84%ec%b9%98\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-java\" data-lang=\"java\"><span style=\"display:flex;\"><span><span style=\"color:#f92672\">import</span> cc.arduino.*;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">import</span> org.firmata.*;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">import</span> processing.serial.*;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Arduino arduino;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> ledPin <span style=\"color:#f92672\">=</span> 13;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  size(400,400);\n</span></span><span style=\"display:flex;\"><span>  background(0);\n</span></span><span style=\"display:flex;\"><span>  fill(255);\n</span></span><span style=\"display:flex;\"><span>  noStroke();\n</span></span><span style=\"display:flex;\"><span>  rect(width<span style=\"color:#f92672\">/</span>2, 0, width<span style=\"color:#f92672\">/</span>2, height);\n</span></span><span style=\"display:flex;\"><span>  text(<span style=\"color:#e6db74\">&#34;LED OFF&#34;</span>, 30, 30);\n</span></span><span style=\"display:flex;\"><span>  fill(0, 0, 0);\n</span></span><span style=\"display:flex;\"><span>  text(<span style=\"color:#e6db74\">&#34;LED ON&#34;</span>, 230, 30);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  println(Arduino.<span style=\"color:#a6e22e\">list</span>());\n</span></span><span style=\"display:flex;\"><span>  arduino <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">new</span> Arduino(<span style=\"color:#66d9ef\">this</span>, Arduino.<span style=\"color:#a6e22e\">list</span>()<span style=\"color:#f92672\">[</span>0<span style=\"color:#f92672\">]</span>, 57600);\n</span></span><span style=\"display:flex;\"><span>  arduino.<span style=\"color:#a6e22e\">pinMode</span>(ledPin, Arduino.<span style=\"color:#a6e22e\">OUTPUT</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">draw</span>() {\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">mouseMoved</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(mouseX <span style=\"color:#f92672\">&lt;</span> width<span style=\"color:#f92672\">/</span>2) {\n</span></span><span style=\"display:flex;\"><span>    arduino.<span style=\"color:#a6e22e\">digitalWrite</span>(ledPin, Arduino.<span style=\"color:#a6e22e\">LOW</span>);\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>    arduino.<span style=\"color:#a6e22e\">digitalWrite</span>(ledPin, Arduino.<span style=\"color:#a6e22e\">HIGH</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"processing-sketch--그라데이션-가변저항\">processing sketch : 그라데이션 가변저항<a class=\"anchor\" href=\"#processing-sketch--%ea%b7%b8%eb%9d%bc%eb%8d%b0%ec%9d%b4%ec%85%98-%ea%b0%80%eb%b3%80%ec%a0%80%ed%95%ad\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-java\" data-lang=\"java\"><span style=\"display:flex;\"><span><span style=\"color:#f92672\">import</span> cc.arduino.*;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">import</span> org.firmata.*;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#f92672\">import</span> processing.serial.*;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Arduino arduino;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> ledPin <span style=\"color:#f92672\">=</span> 13;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  size(400,400);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> i<span style=\"color:#f92672\">=</span>0; i<span style=\"color:#f92672\">&lt;</span>width; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    stroke(map(i, 0, width<span style=\"color:#f92672\">-</span>1, 0, 255)); <span style=\"color:#75715e\">// 색깔을 점차 변화시키면서</span>\n</span></span><span style=\"display:flex;\"><span>    line(i, 0, i, height);              <span style=\"color:#75715e\">// 선을 그려, 그라데이션 효과를 만들어 냄</span>\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  println(Arduino.<span style=\"color:#a6e22e\">list</span>());\n</span></span><span style=\"display:flex;\"><span>  arduino <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">new</span> Arduino(<span style=\"color:#66d9ef\">this</span>, Arduino.<span style=\"color:#a6e22e\">list</span>()<span style=\"color:#f92672\">[</span>0<span style=\"color:#f92672\">]</span>, 57600);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">draw</span>() {\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">mouseMoved</span>() {\n</span></span><span style=\"display:flex;\"><span>  arduino.<span style=\"color:#a6e22e\">analogWrite</span>(ledPin, <span style=\"color:#66d9ef\">int</span>(map(mouseX, 0, width<span style=\"color:#f92672\">-</span>1, 0, 255)));\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/%EB%93%9C%EB%A1%A0%EC%9D%98-%EB%B9%84%ED%96%89-%EC%9B%90%EB%A6%AC/","title":"드론의 비행 원리","content":"<p>드론의 비행 원리를 이해하기 이전에, 먼저 헬리콥터의 비행원리를 알아보는 것이 좋습니다.</p>\n<br>\n<h3 id=\"헬리콥터의-비행-원리\">헬리콥터의 비행 원리<a class=\"anchor\" href=\"#%ed%97%ac%eb%a6%ac%ec%bd%a5%ed%84%b0%ec%9d%98-%eb%b9%84%ed%96%89-%ec%9b%90%eb%a6%ac\">#</a></h3>\r\n<p>헬리콥터의 비행과 관련된 4가지 힘은 그림과 같습니다.</p>\n<ul>\n<li>양력: 로터의 회전에 의해 발생하는 힘으로, 이를 조절하여 상승, 하강, 호버링을 할 수 있습니다.</li>\n<li>추력: 로터 회전면의 기울기를 조절하여 전진하려는 힘인 추력을 발생시키고, 이를 조절하여 가속 또는 감속을 조절합니다.</li>\n<li>항력</li>\n<li>중력</li>\n</ul>\n<p><img src=\"/image/Drone-01.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"헬리콥터의-토크와-반토크\">헬리콥터의 토크와 반토크<a class=\"anchor\" href=\"#%ed%97%ac%eb%a6%ac%ec%bd%a5%ed%84%b0%ec%9d%98-%ed%86%a0%ed%81%ac%ec%99%80-%eb%b0%98%ed%86%a0%ed%81%ac\">#</a></h3>\r\n<h4 id=\"헬리콥터-블레이드의-회전\">헬리콥터 블레이드의 회전<a class=\"anchor\" href=\"#%ed%97%ac%eb%a6%ac%ec%bd%a5%ed%84%b0-%eb%b8%94%eb%a0%88%ec%9d%b4%eb%93%9c%ec%9d%98-%ed%9a%8c%ec%a0%84\">#</a></h4>\r\n<p><strong>반시계</strong> 방향으로 회전하는 블레이드가 있다고 가정합니다. 이 블레이드가 빠른 속도로 회전하면 양력이 발생하여 상승하게 됩니다.</p>\n<p><img src=\"/image/Drone-02.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"헬리콥터의-토크\">헬리콥터의 토크<a class=\"anchor\" href=\"#%ed%97%ac%eb%a6%ac%ec%bd%a5%ed%84%b0%ec%9d%98-%ed%86%a0%ed%81%ac\">#</a></h4>\r\n<p>그런데 블레이드 회전에 의해 생기는 토크(회전체에 매달려 있는 물체가 회전체의 반대방향으로 회전하려는 힘)도 함께 발생하죠. 즉, 블레이드가 (반시계방향으로) 빠른속도로 회전하면 양력이 발생하여 상승하게 되는데요. 이때 발생하는 토크(회전체에 매달려 있는 물체가 회전체의 반대방향으로 회전하려는 힘)로 인해 (양력에 의해 상승함과 동시에) 동체는 시계방향으로 회전하며 빙글빙글 돌게 됩니다.</p>\n<p><img src=\"/image/Drone-03.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"토크에-대한-반토크\">토크에 대한 반토크<a class=\"anchor\" href=\"#%ed%86%a0%ed%81%ac%ec%97%90-%eb%8c%80%ed%95%9c-%eb%b0%98%ed%86%a0%ed%81%ac\">#</a></h4>\r\n<p>그러므로 동체가 회전하지 않도록 토크를 상쇄할 수 있는 반토크(anti-torque)를 만들어 주어야 합니다. 이를 위해 일반적으로 꼬리쪽에 작은 블레이드를 추가합니다. 꼬리블레이드가 회전하면 반토크를 만들 추진력이 생기고 이 힘으로 반토크를 만들어 낼 수 있습니다. 이렇게 되면 동체가 회전하지 않고 안정적으로 상승이 가능해지게 되는 것입니다.</p>\n<p><img src=\"/image/Drone-04.png\" alt=\"\" /></p>\n<p>모든 헬리콥터는 토크와 반토크를 조절하여 동체가 회전하지 않고 안정적으로 운용될 수 있도록 하는 것이 가장 중요합니다.</p>\n<br>\n<h4 id=\"동축반전식-헬기\">동축반전식 헬기<a class=\"anchor\" href=\"#%eb%8f%99%ec%b6%95%eb%b0%98%ec%a0%84%ec%8b%9d-%ed%97%ac%ea%b8%b0\">#</a></h4>\r\n<p>반토크를 만들어내는 또 다른 방식은 동축반전식 헬기입니다. 두 개의 블레이드를 위아래로 배치하고 서로 반대방향으로 회전시켜 양력을 얻음과 동시에 서로간의 토크를 상쇄하는 방식입니다.</p>\n<p><img src=\"/image/Drone-05.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"텐덤날개회전식-헬기\">텐덤날개회전식 헬기<a class=\"anchor\" href=\"#%ed%85%90%eb%8d%a4%eb%82%a0%ea%b0%9c%ed%9a%8c%ec%a0%84%ec%8b%9d-%ed%97%ac%ea%b8%b0\">#</a></h4>\r\n<p>대형 헬리콥터에서는 동체 앞뒤로 2개의 로터로 회전방향을 반대로 하여 서로의 토크를 반토크로 이용하는 텐덤날개회전방식을 이용하기도 합니다.</p>\n<p><img src=\"/image/Drone-06.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"텐덤날개회전식-헬기의-원리\">텐덤날개회전식 헬기의 원리<a class=\"anchor\" href=\"#%ed%85%90%eb%8d%a4%eb%82%a0%ea%b0%9c%ed%9a%8c%ec%a0%84%ec%8b%9d-%ed%97%ac%ea%b8%b0%ec%9d%98-%ec%9b%90%eb%a6%ac\">#</a></h5>\r\n<p>이것을 Top View로 나타내면 다음과 같습니다. 두개의 블레이드가 서로 반대방향으로 회전하면서 서로의 토크를 상쇄시켜주게 되는 것이죠.</p>\n<p><img src=\"/image/Drone-07.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"드론\">드론<a class=\"anchor\" href=\"#%eb%93%9c%eb%a1%a0\">#</a></h3>\r\n<p>드론의 경우도 마찬가지 입니다. 쿼드콥터 드론은 4개의 프롭를 사용하여 토크-반토크의 균형이 이루어집니다. 이 상태에서 프롭의 회전속도를 빠르게 증가시키면 양력이 발생하여 수직 상승이 이뤄지고 회전속도를 느리게 하면 양력과 중력이 균형을 이루는 호버링 상태를 만들 수 있습니다. 물론 회전속도를 보다 더 느리게 만들면 양력보다 중력이 커지게 되어 수직 하강하게 됩니다.</p>\n<p><img src=\"/image/Drone-08.png\" alt=\"\" /></p>\n<br>\n<p>여기서 한가지 유의할 점은 프롭의 회전방향은 실제 모터의 SPEC에 표기된 회전방향과는 반대라는 것입니다. 즉, 위 그림에서 1,2번 프롭의 회전방향은 CCW이지만 실제로는 CW규격의 모터를 사용해야 합니다. 이것은 모터의 실제 회전방향과 모터에 끼워져있는 프롭의 회전방향을 외부에서 관측하는 방향이 서로 반대이기 때문입니다.</p>\n<br>\n<p>옛날에 사용한 단발프롭 비행기를 생각해보세요. 비행기 조종사가 조종석에 앉아 앞쪽의 프롭을 바라볼 때 관측되는 프롭의 회전방향이 실제 모터의 SPEC상 회전방향이며, 이 방향이 CCW라고 가정합니다. 이 상황을 프롭을 비행기에 끼우는 정비사가 (조종석을 마주보며 정면에서) 관측해보면 프롭 회전방향이 CW가 되겠지요. 조종사는 프롭이 CCW로 돈다고 이야기하고(실제 모터의 SPEC상 회전 방향), 프롭을 끼운 사람은 CW로 돌아가는 상태로 보고있으니 같은 상황을 서로 반대가 되는 것입니다.</p>\n<br>\n<p>또 다른 이유는 모터를 판매할 때에는 모터캡(프롭너트)이 나사산을 따라 조여지는 방향으로 표기하기 때문입니다. 그러므로 1,2번 모터에 모터캡(프롭너트)을 돌려 끼울때에는 CW방향으로 돌려서 끼워야 하고, 3,4번 모터에 돌려 끼울때에는 CCW방향으로 돌려서 끼워야 합니다. 1,2번 모터가 실제로 CCW방향으로 회전하고, 프롭 나사산은 CW방향으로 돌려서 끼워지기 때문에, 프롭이 회전할 때 절대로 풀릴 위험이 없습니다. 만약 두 방향이 똑같다면 프롭이 고속으로 회전하면서 빠질 위험이 있으므로 주의해야 합니다. 만약 보유하고 있는 4개 모터의 나사산 방향이 모두 똑같다면 두 가지 방법으로 문제를 해결할 수 있습니다. 첫째, 나사산 방향이 반대인 프롭어댑터를 2개 구입하거나, 둘째, 나이록(niloc, nilon)너트 혹은 나이록후렌지 너트를 사용하여 조여주어야 합니다.</p>\n<br>\n<p>모터의 한글표기도 주의해야 하는데요. 예를 들어 1,2번 모터에 표기된 SPEC이 CW인데, 이 모터를 한글로 표기하거나 지칭할 때에는 SPEC에 표기된 방향이 아니라 (위에서 내려다 볼 때 보이는) 프롭의 회전방향에 맞춰 ‘역방향모터’라고 부릅니다. 마찬가지로 3,4번 모터를 ‘정방향모터’라고 합니다. 표기방법이 혼란스러운 면이 있다보니 역방향, 정방향을 반대로 표기하는 경우도 많아요. 그러므로 모터 구입시에는 모터에 표기된 SPEC을 보고 구입하는 것이 좋습니다.</p>\n<br>\n<p>이와 더불어 드론 조립 시에는 각 모터별로 어떤 모양의 프롭을 사용해야 하는지 유의해야 합니다. 프롭을 모터축에 꼽은 상태에서 프롭면을 보면 프롭면이 위로 올라온 부분과 아래로 내려간 부분이 있는데 이 방향을 주의해서 보아야 합니다. 기본 원칙은 드론의 프롭회전을 위에서 내려다보는 입장에서 프롭면이 위로 올라온 부분으로 회전이 이루어져야 양력이 발생한다는 것입니다.</p>\n<p><img src=\"/image/Drone-09.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"드론의-운행-모드\">드론의 운행 모드<a class=\"anchor\" href=\"#%eb%93%9c%eb%a1%a0%ec%9d%98-%ec%9a%b4%ed%96%89-%eb%aa%a8%eb%93%9c\">#</a></h4>\r\n<p>이제 드론의 운행이 어떻게 이루어지는지 알아보겠습니다.</p>\n<ul>\n<li>\n<p>상승(Ascend) 모드: 4개의 모터가 고석으로 회전하면 수직으로 상승</p>\n</li>\n<li>\n<p>호버링(Hovering) : 4개의 모터가 중력과 평형인 양력을 만들어내는 정도의 속력으로 회전하며 상하고도를 안정적으로 유지</p>\n</li>\n<li>\n<p>하강(Descend) 모드: 4개의 모터가 저속으로 회전하면 수직으로 하강</p>\n</li>\n</ul>\n<p>상승, 하강과 같은 수직 운행은 조종기의 왼쪽 스틱인 Throttle을 사용합니다. (Mode2 기준)</p>\n<br>\n<h5 id=\"상승\">상승<a class=\"anchor\" href=\"#%ec%83%81%ec%8a%b9\">#</a></h5>\r\n<p><img src=\"/image/Drone-10.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"호버링\">호버링<a class=\"anchor\" href=\"#%ed%98%b8%eb%b2%84%eb%a7%81\">#</a></h5>\r\n<p><img src=\"/image/Drone-11.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"하강\">하강<a class=\"anchor\" href=\"#%ed%95%98%ea%b0%95\">#</a></h5>\r\n<p><img src=\"/image/Drone-12.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"전진\">전진<a class=\"anchor\" href=\"#%ec%a0%84%ec%a7%84\">#</a></h5>\r\n<p>전방의 1,3번 모터보다 후방의 2,4번 모터를 빠르게 회전시키면 토크가 상쇄된 상태에서 후방모터에서 생긴 추력에 의해 전방으로 날아가게 됩니다.</p>\n<p><img src=\"/image/Drone-13.png\" alt=\"\" /></p>\n<br>\n<p>이때 드론의 모습을 측면에서 보면 2,4번 후방모터가 고속으로 회전하며 드론의 동체가 전방으로 기울진 형태가 됩니다. 이렇게 드론면이 기울어지게 되면 드론이 수평을 이루고 있을 때보다 상승하려는 양력이 약해지는데, 이 양력이 중력과 평형을 이루게 되면서 일정한 고도를 유지하게 됩니다. 이때 앞으로 전진하려는 추진력이 남게 되므로 드론이 전방으로 전진하게 되는 것입니다.</p>\n<p><img src=\"/image/Drone-14.png\" alt=\"\" /></p>\n<p>기울어진 정도를 더 크게 하면 어떻게 될까요? 위로 떠오르려는 양력은 더 작아지고 전진하려는 추력은 커지므로, 하강하면서 더 빠르게 전진하는 형태가 될 것입니다.’ 만약 고도를 유지하며 더 빠른 전진형태를 만들려면 양력을 보충해야 하므로 기울기를 크게 하고 모터의 회전을 더 빠르게 해주면 됩니다.</p>\n<br>\n<h5 id=\"후진\">후진<a class=\"anchor\" href=\"#%ed%9b%84%ec%a7%84\">#</a></h5>\r\n<p><img src=\"/image/Drone-15.png\" alt=\"\" /></p>\n<p>전진, 후진 같은 수평 운행은 조종기의 오른쪽 스틱을 위아래로 움직이며, 이를 Pitch(=Elevator)라고 합니다. (Mode2 기준)</p>\n<br>\n<h5 id=\"왼쪽으로-이동roll-left\">왼쪽으로 이동(Roll Left)<a class=\"anchor\" href=\"#%ec%99%bc%ec%aa%bd%ec%9c%bc%eb%a1%9c-%ec%9d%b4%eb%8f%99roll-left\">#</a></h5>\r\n<p><img src=\"/image/Drone-16.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"오른쪽으로-이동roll-right\">오른쪽으로 이동(Roll Right)<a class=\"anchor\" href=\"#%ec%98%a4%eb%a5%b8%ec%aa%bd%ec%9c%bc%eb%a1%9c-%ec%9d%b4%eb%8f%99roll-right\">#</a></h5>\r\n<p><img src=\"/image/Drone-17.png\" alt=\"\" /></p>\n<p>왼쪽, 오른쪽 이동 같은 수평 운행은 조종기의 오른쪽 스틱을 좌우로 움직이며, 이를 Roll(=Aileron)이라고 합니다. (Mode2 기준)</p>\n<br>\n<h5 id=\"좌회전-비행\">좌회전 비행<a class=\"anchor\" href=\"#%ec%a2%8c%ed%9a%8c%ec%a0%84-%eb%b9%84%ed%96%89\">#</a></h5>\r\n<p>CCW로 회전하는 1,2번 모터가 저속으로 회전할 때, CW로 회전하는 3,4번 모터가 고속으로 회전하면 알짜회전이 CW가 되므로, CCW방향으로 토크가 발생하여 드론 동체가 CCW방향으로 회전한다.</p>\n<p><img src=\"/image/Drone-18.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"우회전-비행\">우회전 비행<a class=\"anchor\" href=\"#%ec%9a%b0%ed%9a%8c%ec%a0%84-%eb%b9%84%ed%96%89\">#</a></h5>\r\n<p>CW로 회전하는 3,4번 모터가 저속으로 회전할 때, CCW로 회전하는 1,2번 모터가 고속으로 회전하면 알짜회전이 CCW가 되므로, CW방향으로 토크가 발생하므로 드론 동체가 CW방향으로 회전한다.</p>\n<p><img src=\"/image/Drone-19.png\" alt=\"\" /></p>\n<p>이러한 제자리 회전은 조종기의 왼쪽 스틱을 좌우로 움직이며, 이를 Yaw(=Rudder)라고 합니다. (Mode2 기준)</p>\n<br>\n<br>\n<h4 id=\"조종기-mode\">조종기 MODE<a class=\"anchor\" href=\"#%ec%a1%b0%ec%a2%85%ea%b8%b0-mode\">#</a></h4>\r\n<p>MODE1은 MODE2와 Throttle과 Pitch가 서로 반대입니다. MODE1은 과거에 많이 사용되었으나 요즘은 MODE2를 주로 사용합니다. 어떤 것이 더 좋다기 보다는 각기 운용의 장단점이 있으므로 사용자가 판단하여 사용하면 됩니다.</p>\n<br>\n<p><img src=\"/image/Drone-20.png\" alt=\"\" /></p>\n<br>\n<p><img src=\"/image/Drone-21.png\" alt=\"\" /></p>\n"}{"uri":"http://localhost:1313/posts/1602-lcd-display/","title":"1602 LCD, 조도, 초음파, 온습도","content":"<p>1602 LCD 중에서 (I2C 모듈이 추가되어 있지 않은) 가장 기본적인 형태, 즉 1602 LCD만 있는 상태에서의 출력방법을 알아보겠습니다.</p>\n<br>\n<h3 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h3>\r\n<p><img src=\"/image/1602-01.jpg\" alt=\"\" /></p>\n<br>\n<h4 id=\"schematic--백라이트-밝기-조절-추가\">schematic : 백라이트 밝기 조절 추가<a class=\"anchor\" href=\"#schematic--%eb%b0%b1%eb%9d%bc%ec%9d%b4%ed%8a%b8-%eb%b0%9d%ea%b8%b0-%ec%a1%b0%ec%a0%88-%ec%b6%94%ea%b0%80\">#</a></h4>\r\n<p>백라이트를 사용하지 않으면 너무 어두워서 글자가 잘 보이지 않는다. 적당한 밝기의 백라이트 사용을 위해 <strong>LCD 3번핀을 3.3㏀ 거쳐서 GND로 연결</strong>(혹은 1㏀ 3개를 직렬연결) 하거나, 아래 회로와 같이 가변 저항을 사용하면 백라이트의 밝기를 적절히 조절할 수도 있다.</p>\n<p><img src=\"/image/1602-02.jpg\" alt=\"\" /></p>\n<h4 id=\"pin-map\">Pin Map<a class=\"anchor\" href=\"#pin-map\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>LCD Pin</th>\n          <th></th>\n          <th style=\"text-align: center\"></th>\n          <th>Arduino Uno</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>1</td>\n          <td>VSS</td>\n          <td style=\"text-align: center\">LCD GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>2</td>\n          <td>VDD</td>\n          <td style=\"text-align: center\">LCD 전원</td>\n          <td>+5V</td>\n      </tr>\n      <tr>\n          <td>3</td>\n          <td>VO</td>\n          <td style=\"text-align: center\">글자 대비값</td>\n          <td>(가변저항 추가/미사용시 3.3㏀ 거쳐서 GND)</td>\n      </tr>\n      <tr>\n          <td>4</td>\n          <td>RS</td>\n          <td style=\"text-align: center\">레지스터 설정</td>\n          <td>12</td>\n      </tr>\n      <tr>\n          <td>5</td>\n          <td>RW</td>\n          <td style=\"text-align: center\">읽기/쓰기모드 설정</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>6</td>\n          <td>E</td>\n          <td style=\"text-align: center\">쓰기모드 활성화</td>\n          <td>11</td>\n      </tr>\n      <tr>\n          <td>7</td>\n          <td>D0</td>\n          <td style=\"text-align: center\">데이터 핀</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>8</td>\n          <td>D1</td>\n          <td style=\"text-align: center\">″</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>9</td>\n          <td>D2</td>\n          <td style=\"text-align: center\">″</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>10</td>\n          <td>D3</td>\n          <td style=\"text-align: center\">″</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>11</td>\n          <td>D4</td>\n          <td style=\"text-align: center\">″</td>\n          <td>5</td>\n      </tr>\n      <tr>\n          <td>12</td>\n          <td>D5</td>\n          <td style=\"text-align: center\">″</td>\n          <td>4</td>\n      </tr>\n      <tr>\n          <td>13</td>\n          <td>D6</td>\n          <td style=\"text-align: center\">″</td>\n          <td>3</td>\n      </tr>\n      <tr>\n          <td>14</td>\n          <td>D7</td>\n          <td style=\"text-align: center\">″</td>\n          <td>2</td>\n      </tr>\n      <tr>\n          <td>15</td>\n          <td>A</td>\n          <td style=\"text-align: center\">배경밝기 전압입력</td>\n          <td>(가변저항 추가)</td>\n      </tr>\n      <tr>\n          <td>16</td>\n          <td>K</td>\n          <td style=\"text-align: center\">배경밝기 GND</td>\n          <td>(가변저항 추가)</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<br>\n<h3 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h3>\r\n<h4 id=\"라이브러리-설치하기\">라이브러리 설치하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%84%a4%ec%b9%98%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<p>이 경우에는 Arduino IDE에 기본적으로 포함되어 있는 LiquidCrystal 라이브러리를 이용한다.</p>\n<ul>\n<li><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>LiquidCrystal</strong></li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal.h&gt;</span></span></span></code></pre></div><br>\n<h4 id=\"function\">function<a class=\"anchor\" href=\"#function\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>function</th>\n          <th>기능</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>LiquidCrystal()</td>\n          <td>LCD 클래스 생성(LCD interface 설정)</td>\n      </tr>\n      <tr>\n          <td>begin()</td>\n          <td>LCD 화면 초기화(column과 row 설정)</td>\n      </tr>\n      <tr>\n          <td>clear()</td>\n          <td>LCD 화면을 지우고 커서를 (0,0) 위치로 옮김</td>\n      </tr>\n      <tr>\n          <td>home()</td>\n          <td>커서를 (0,0) 위치로 옮김</td>\n      </tr>\n      <tr>\n          <td>setCursor()</td>\n          <td>커서를 특정 위치로 옮김</td>\n      </tr>\n      <tr>\n          <td>write()</td>\n          <td>현재 커서에 한 문자를 출력</td>\n      </tr>\n      <tr>\n          <td>print()</td>\n          <td>현재 커서부터 출력 (Serial.print() 함수와 유사)</td>\n      </tr>\n      <tr>\n          <td>cursor(), nocursor()</td>\n          <td>커서 표시 O or X</td>\n      </tr>\n      <tr>\n          <td>display(), noDisplay()</td>\n          <td>LCD 화면에 정보 표시 O or X</td>\n      </tr>\n      <tr>\n          <td>scrollDisplayLeft(), scrollDisplayRight()</td>\n          <td>LCD 내용과 커서를 좌/우로 한 칸 스크롤</td>\n      </tr>\n      <tr>\n          <td>autoscroll(), noautoscroll()</td>\n          <td>문자 출력 시 이전 내용을 스크롤 할 지를 결정</td>\n      </tr>\n      <tr>\n          <td>leftToRight(), rightToLeft()</td>\n          <td>문자 출력 후 커서의 이동 위치 결정 (문자 출력 방향 결정)</td>\n      </tr>\n      <tr>\n          <td>createChar()</td>\n          <td>사용자 문자 등록, 총 8개까지 가능</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<br>\n<h3 id=\"예시\">예시<a class=\"anchor\" href=\"#%ec%98%88%ec%8b%9c\">#</a></h3>\r\n<h4 id=\"sketch--문자-2열-출력하기\">sketch : 문자 2열 출력하기<a class=\"anchor\" href=\"#sketch--%eb%ac%b8%ec%9e%90-2%ec%97%b4-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \n</span></span><span style=\"display:flex;\"><span>    LiquidCrystal <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">12</span>,<span style=\"color:#ae81ff\">11</span>,<span style=\"color:#ae81ff\">5</span>,<span style=\"color:#ae81ff\">4</span>,<span style=\"color:#ae81ff\">3</span>,<span style=\"color:#ae81ff\">2</span>);  <span style=\"color:#75715e\">// pin 연결에 대한 class 선언 (RS,E,D4,D5,D6,D7)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>    \tlcd.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">2</span>);             <span style=\"color:#75715e\">// LCD크기 지정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \tlcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;SKS Afterschool&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    \tlcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);          <span style=\"color:#75715e\">// 커서를 (0,1) 즉 두번째 줄(행)의 첫번째 칸(열)으로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \tlcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Let&#39;s Arduino!!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>    }</span></span></code></pre></div><br>\n<h4 id=\"sketch--문자열-좌우-스크롤하기\">sketch : 문자열 좌우 스크롤하기<a class=\"anchor\" href=\"#sketch--%eb%ac%b8%ec%9e%90%ec%97%b4-%ec%a2%8c%ec%9a%b0-%ec%8a%a4%ed%81%ac%eb%a1%a4%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>LiquidCrystal <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;SKS Afterschool&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Let&#39;s Arduino!!&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> left <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; left <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">15</span>; left<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">scrollDisplayLeft</span>();  <span style=\"color:#75715e\">// 15번 왼쪽으로 이동 (15글자)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">300</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> right <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; right <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">31</span>; right<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">scrollDisplayRight</span>();  <span style=\"color:#75715e\">// 31번 오른쪽으로 이동 (15글자+16칸)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">300</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> left <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; left <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">16</span>; left<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">scrollDisplayLeft</span>();  <span style=\"color:#75715e\">// 16번 왼쪽으로 이동 (16칸)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">300</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><p><br><br></p>\n<h3 id=\"문자열과-조도센서값을-출력하기\">문자열과 조도센서값을 출력하기<a class=\"anchor\" href=\"#%eb%ac%b8%ec%9e%90%ec%97%b4%ea%b3%bc-%ec%a1%b0%eb%8f%84%ec%84%bc%ec%84%9c%ea%b0%92%ec%9d%84-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/1602-03.jpg\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch--문자열과-조도센서를-읽은-조도값을-동시에-출력하기\">sketch : 문자열과 조도센서를 읽은 조도값을 동시에 출력하기<a class=\"anchor\" href=\"#sketch--%eb%ac%b8%ec%9e%90%ec%97%b4%ea%b3%bc-%ec%a1%b0%eb%8f%84%ec%84%bc%ec%84%9c%eb%a5%bc-%ec%9d%bd%ec%9d%80-%ec%a1%b0%eb%8f%84%ea%b0%92%ec%9d%84-%eb%8f%99%ec%8b%9c%ec%97%90-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>LiquidCrystal <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">12</span>,<span style=\"color:#ae81ff\">11</span>,<span style=\"color:#ae81ff\">5</span>,<span style=\"color:#ae81ff\">4</span>,<span style=\"color:#ae81ff\">3</span>,<span style=\"color:#ae81ff\">2</span>);  <span style=\"color:#75715e\">// pin 연결에 대한 class 선언 (RS,E,D4,D5,D6,D7)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>\tlcd.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">2</span>);             <span style=\"color:#75715e\">// LCD크기 지정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\tlcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Illumination:&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\tlcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);         <span style=\"color:#75715e\">// 커서를 (0,1) 즉 첫번째 줄의 두번째 칸으로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\tlcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#a6e22e\">analogRead</span>(A0));   <span style=\"color:#75715e\">// A0에서 읽은 조도값을 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">200</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"sketch--조도-센서값을-위로-스크롤시키기\">sketch : 조도 센서값을 위로 스크롤시키기<a class=\"anchor\" href=\"#sketch--%ec%a1%b0%eb%8f%84-%ec%84%bc%ec%84%9c%ea%b0%92%ec%9d%84-%ec%9c%84%eb%a1%9c-%ec%8a%a4%ed%81%ac%eb%a1%a4%ec%8b%9c%ed%82%a4%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> i, j, k<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1</span>;\n</span></span><span style=\"display:flex;\"><span>LiquidCrystal <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">12</span>,<span style=\"color:#ae81ff\">11</span>,<span style=\"color:#ae81ff\">5</span>,<span style=\"color:#ae81ff\">4</span>,<span style=\"color:#ae81ff\">3</span>,<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Illumination:&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);        <span style=\"color:#75715e\">// 두번째 줄에\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  i <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(A0);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Check#&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(k);               <span style=\"color:#75715e\">// 측정 횟수\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34; : &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(i);               <span style=\"color:#75715e\">// 첫번째 조도값 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">clear</span>();                <span style=\"color:#75715e\">// lcd 화면 지우고 (0,0)으로 커서 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  j <span style=\"color:#f92672\">=</span> i;                      <span style=\"color:#75715e\">// 이전 조도값을 j에 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Check#&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(k);               <span style=\"color:#75715e\">// 이전 조도값 측정 횟수\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34; : &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(j);               <span style=\"color:#75715e\">// 이전 조도값 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);        <span style=\"color:#75715e\">// 두번째 줄로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  i <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(A0);         <span style=\"color:#75715e\">// 새로운 조도값 측정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  k<span style=\"color:#f92672\">++</span>;                        <span style=\"color:#75715e\">// 측정 횟수 증가\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;check#&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(k);               <span style=\"color:#75715e\">// 새로운 측정 횟수\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34; : &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(i);               <span style=\"color:#75715e\">// 새로운 조도값 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"초음파-센서-거리값-출력하기\">초음파 센서 거리값 출력하기<a class=\"anchor\" href=\"#%ec%b4%88%ec%9d%8c%ed%8c%8c-%ec%84%bc%ec%84%9c-%ea%b1%b0%eb%a6%ac%ea%b0%92-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>초음파를 이용하여 사물간의 거리를 측정하는 센서입니다. 아두이노에서는 HC-SR04, US-100 제품을 많이 사용하며, 여기서는 HC-SR04를 사용해보겠습니다.</p>\n<br>\n<h4 id=\"schematic-2\">schematic<a class=\"anchor\" href=\"#schematic-2\">#</a></h4>\r\n<p><img src=\"/image/1602-04.jpg\" alt=\"\" /></p>\n<br>\n<h4 id=\"pin-map--hc-sr04\">Pin Map : HC-SR04<a class=\"anchor\" href=\"#pin-map--hc-sr04\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>DHT11</th>\n          <th>아두이노</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>VCC</td>\n          <td>5V</td>\n      </tr>\n      <tr>\n          <td>Trig (초음파 송신)</td>\n          <td>8 (pinMode 설정함)</td>\n      </tr>\n      <tr>\n          <td>Echo (초음파 수신)</td>\n          <td>9 (pinMode 설정함)</td>\n      </tr>\n      <tr>\n          <td>GND</td>\n          <td>GND</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define TRIG 8\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define ECHO 9\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>LiquidCrystal <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>   <span style=\"color:#a6e22e\">pinMode</span>(TRIG, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>   <span style=\"color:#a6e22e\">pinMode</span>(ECHO, INPUT);\n</span></span><span style=\"display:flex;\"><span>   lcd.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(TRIG, LOW);  <span style=\"color:#75715e\">// 초음파발사 정지(초기화)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(TRIG, HIGH); <span style=\"color:#75715e\">// 초음파발사\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(TRIG, LOW);  <span style=\"color:#75715e\">// 초음파발사 정지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">long</span> distance <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">pulseIn</span>(ECHO, HIGH)<span style=\"color:#f92672\">/</span><span style=\"color:#ae81ff\">58.2</span>;\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(distance);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34; cm&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">200</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"dht11-온습도센서-값-출력하기\">DHT11 온·습도센서 값 출력하기<a class=\"anchor\" href=\"#dht11-%ec%98%a8%ec%8a%b5%eb%8f%84%ec%84%bc%ec%84%9c-%ea%b0%92-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>DHT11 센서를 사용하면 온도와 습도를 동시에 측정할 수 있다. 여기서는 1602 LCD에 온도와 습도를 출력해본다.</p>\n<br>\n<h4 id=\"schematic-3\">schematic<a class=\"anchor\" href=\"#schematic-3\">#</a></h4>\r\n<p><img src=\"/image/1602-05.jpg\" alt=\"\" /></p>\n<br>\n<h4 id=\"pin-map-1\">Pin Map<a class=\"anchor\" href=\"#pin-map-1\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>DHT11</th>\n          <th>1</th>\n          <th>2</th>\n          <th>3</th>\n          <th>4</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>Arduino</td>\n          <td>5V</td>\n          <td></td>\n          <td>2, 10㏀ 저항 거쳐서 5V</td>\n          <td>GND</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"라이브러리-추가하기\">라이브러리 추가하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%b6%94%ea%b0%80%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ul>\n<li><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt; <strong>라이브러리 매니저</strong> 에서 &ldquo;DHT11&rdquo; 검색</li>\n<li>DHT sensor library by Adafruit 설치</li>\n</ul>\n<br>\n<h4 id=\"sketch-2\">sketch<a class=\"anchor\" href=\"#sketch-2\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;DHT.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>LiquidCrystal <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">2</span>);    <span style=\"color:#75715e\">// RS, E, D4, D5, D6, D7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define DHTPIN 10\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DHTTYPE DHT11\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>DHT <span style=\"color:#a6e22e\">dht</span>(DHTPIN, DHTTYPE);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  dht.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">float</span> t <span style=\"color:#f92672\">=</span> dht.<span style=\"color:#a6e22e\">readTemperature</span>();       <span style=\"color:#75715e\">// read temperature\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">float</span> h <span style=\"color:#f92672\">=</span> dht.<span style=\"color:#a6e22e\">readHumidity</span>();          <span style=\"color:#75715e\">// read humidity\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Temp.: &#34;</span>);                  <span style=\"color:#75715e\">// write temperature \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.<span style=\"color:#a6e22e\">print</span>(t);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34; C&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Humi.: &#34;</span>);                  <span style=\"color:#75715e\">// write humidity\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.<span style=\"color:#a6e22e\">print</span>(h);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;%&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"과제\">과제<a class=\"anchor\" href=\"#%ea%b3%bc%ec%a0%9c\">#</a></h3>\r\n<p>입력버튼을 만들과, 각 버튼을 누를때마다 A → B → C → D 등 출력하기</p>\n"}{"uri":"http://localhost:1313/posts/7-segment-fnd-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/","title":"7 Segment (FND) 사용하기","content":"<h2 id=\"fnd의-종류\">FND의 종류<a class=\"anchor\" href=\"#fnd%ec%9d%98-%ec%a2%85%eb%a5%98\">#</a></h2>\r\n<ul>\n<li>\n<p>FND는 Anode형과 Cathode형으로 분류되며, 이 중 Anode형이 주로 사용되고 있는데요. Anode형은 중앙핀이 VCC이며, Cathode형은 GND입니다. 우리가 사용하는 것은 5611BH로 Common Anode형입니다.</p>\n</li>\n<li>\n<p>7 Segment (FND)는 숫자나 문자를 표현하는 7개의 LED와 소수점을 표현하는 1개의 LED가 포함되어 있는 부품을 의미합니다. FND는 16X2 LCD와 비교할 때 표현할 수 있는 문자의 개수가 제한되고, 각 문자의 표현을 위하여 총 8개의 LED를 하나씩 조절해주어야 하는 등 사용이 복잡하다는 단점이 있습니다. 그렇지만, 전력소모가 적고 크기가 큰 Segment를 선택하면 비교적 큰 문자도 표현할 수 있다는 장점이 있어 다양한 용도로 사용되고 있습니다.</p>\n</li>\n</ul>\n<br>\r\n<h2 id=\"숫자표시-방법\">숫자표시 방법<a class=\"anchor\" href=\"#%ec%88%ab%ec%9e%90%ed%91%9c%ec%8b%9c-%eb%b0%a9%eb%b2%95\">#</a></h2>\r\n<p><figure class=\"center\"><img src=\"/image/7segment-01.jpg\" width=\"50%\">\n</figure>\n\n<img src=\"/image/7segment-02.jpg\" alt=\"\" /></p>\n<br>\r\n<table>\n  <thead>\n      <tr>\n          <th>Num</th>\n          <th>DP</th>\n          <th>G</th>\n          <th>F</th>\n          <th>E</th>\n          <th>D</th>\n          <th>C</th>\n          <th>B</th>\n          <th>A</th>\n          <th>2진수</th>\n          <th>16진수</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>0</td>\n          <td>1</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0b11000000</td>\n          <td>0xC0</td>\n      </tr>\n      <tr>\n          <td>1</td>\n          <td>1</td>\n          <td>1</td>\n          <td>1</td>\n          <td>1</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>1</td>\n          <td>0b11111001</td>\n          <td>0xF9</td>\n      </tr>\n      <tr>\n          <td>2</td>\n          <td>1</td>\n          <td>0</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0b10100100</td>\n          <td>0xA4</td>\n      </tr>\n      <tr>\n          <td>3</td>\n          <td>1</td>\n          <td>0</td>\n          <td>1</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0b10110000</td>\n          <td>0xB0</td>\n      </tr>\n      <tr>\n          <td>4</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>1</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>1</td>\n          <td>0b10011001</td>\n          <td>0x99</td>\n      </tr>\n      <tr>\n          <td>5</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0b10010010</td>\n          <td>0x92</td>\n      </tr>\n      <tr>\n          <td>6</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0b10000010</td>\n          <td>0x82</td>\n      </tr>\n      <tr>\n          <td>7</td>\n          <td>1</td>\n          <td>1</td>\n          <td>1</td>\n          <td>1</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0b11111000</td>\n          <td>0xF8</td>\n      </tr>\n      <tr>\n          <td>8</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0b10000000</td>\n          <td>0x80</td>\n      </tr>\n      <tr>\n          <td>9</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>1</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0</td>\n          <td>0b10010000</td>\n          <td>0x90</td>\n      </tr>\n  </tbody>\n</table>\n<blockquote class='book-hint '>\r\n<p>10진수 숫자와의 구분을 위해 2진수 앞에는 0b, 16진수 앞에는 0x를 표기하고\n16진수 표현에 있어서, 각 숫자에 소수점을 포함시키는 경우에는 80을 빼주면 됩니다. 예를 들어,</p></blockquote><ul>\n<li>0． → 0xC0 - 0x80 = 0x40</li>\n<li>1． → 0xF9 - 0x80 = 0x79</li>\n<li>2． → 0xA4 - 0x80 = 0x24</li>\n<li>3． → 0xB0 - 0x80 = 0x30</li>\n<li>4． → 0x99 - 0x80 = 0x19</li>\n<li>5． → 0x92 - 0x80 = 0x12</li>\n<li>6． → 0x82 - 0x80 = 0x12</li>\n<li>7． → 0xF8 - 0x80 = 0x78</li>\n<li>8． → 0x80 - 0x80 = 0x00</li>\n<li>9． → 0x90 - 0x80 = 0x10</li>\n</ul>\n<br>\r\n<h2 id=\"pin-map\">Pin Map<a class=\"anchor\" href=\"#pin-map\">#</a></h2>\r\n<table>\n  <thead>\n      <tr>\n          <th>7 Segment</th>\n          <th>Arduino</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>A</td>\n          <td>2</td>\n      </tr>\n      <tr>\n          <td>B</td>\n          <td>3</td>\n      </tr>\n      <tr>\n          <td>C</td>\n          <td>4</td>\n      </tr>\n      <tr>\n          <td>D</td>\n          <td>5</td>\n      </tr>\n      <tr>\n          <td>E</td>\n          <td>6</td>\n      </tr>\n      <tr>\n          <td>F</td>\n          <td>7</td>\n      </tr>\n      <tr>\n          <td>G</td>\n          <td>8</td>\n      </tr>\n      <tr>\n          <td>DP</td>\n          <td>9</td>\n      </tr>\n  </tbody>\n</table>\n<br>\r\n<h2 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h2>\r\n<p>아래 회로에서는 330Ω 저항 1개를 VCC에 직접 연결하여 사용하였습니다. 상단부와 하단부 중앙핀은 서로 연결이 되어 있으므로, 둘 중 하나만 +5V에 연결하여 사용합니다.\n<img src=\"/image/7segment-03.jpg\" alt=\"\" /></p>\n<br>\r\n<blockquote class='book-hint '>\r\n<p><strong>주의</strong> : 위 회로에서는 간단한 회로 구성을 위해 VCC에 저항을 직접 연결하여 사용하였으나, 이것이 좋은 방법은 아닙니다. FND의 각 LED가 직렬이 아닌 병렬로 연결되어 있는데, 이렇게 구성하는 경우 동일한 전류로 “1”를 표시할때는 2개의 Segment만 켜고, “8”을 표시할때는 7개의 Segment를 모두 키므로, 각 숫자마다 밝기의 차이가 생기길 수 있기 때문이죠. 실제 LED의 밝기에 미세한 변화가 생기는 것을 볼 수 있습니다.</p></blockquote><blockquote class='book-hint '>\r\n<p>이러한 문제를 해결하기 위해서는 각 LED마다 저항을 따로 사용하여야 합니다. 아래 그림과 같이 220~330Ω 저항 8개를 사용하는 것이 원칙이며, 이렇게 하면 밝기를 고르게 유지할 수 있습니다.</p></blockquote><p><img src=\"/image/7segment-04.jpg\" alt=\"\" /></p>\n<br>\r\n<h2 id=\"sketch--09까지-차례대로-표시하기\">sketch : 0~9까지 차례대로 표시하기<a class=\"anchor\" href=\"#sketch--09%ea%b9%8c%ec%a7%80-%ec%b0%a8%eb%a1%80%eb%8c%80%eb%a1%9c-%ed%91%9c%ec%8b%9c%ed%95%98%ea%b8%b0\">#</a></h2>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c\" data-lang=\"c\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> A <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> B <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">3</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> C <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">4</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> D <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> E <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">6</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> F <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">7</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> G <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">8</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> DP <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> dt <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1000</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">pinMode</span>(A, OUTPUT);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">pinMode</span>(B, OUTPUT);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">pinMode</span>(C, OUTPUT);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">pinMode</span>(D, OUTPUT);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">pinMode</span>(E, OUTPUT);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">pinMode</span>(F, OUTPUT);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">pinMode</span>(G, OUTPUT);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">pinMode</span>(DP, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 7 Segment Ready\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,HIGH);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// digit 0\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">delay</span>(dt);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// digit 1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">delay</span>(dt);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// digit 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">delay</span>(dt);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// digit 3\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">delay</span>(dt);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// digit 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">delay</span>(dt);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// digit 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">delay</span>(dt);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// digit 6\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">delay</span>(dt);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// digit 7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">delay</span>(dt);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// digit 8\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">delay</span>(dt);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// digit 9\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">delay</span>(dt);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// digit 0.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">digitalWrite</span> (A,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (B,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (C,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (D,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (E,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (F,LOW);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (G,HIGH);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">digitalWrite</span> (DP,LOW);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\r\n<h2 id=\"sketch--배열을-사용하여-숫자-출력하기\">sketch : 배열을 사용하여 숫자 출력하기<a class=\"anchor\" href=\"#sketch--%eb%b0%b0%ec%97%b4%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-%ec%88%ab%ec%9e%90-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h2>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c\" data-lang=\"c\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> numArray[<span style=\"color:#ae81ff\">11</span>][<span style=\"color:#ae81ff\">8</span>] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span>  {<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>}, <span style=\"color:#75715e\">// 0\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>}, <span style=\"color:#75715e\">// 1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>}, <span style=\"color:#75715e\">// 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>}, <span style=\"color:#75715e\">// 3\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>}, <span style=\"color:#75715e\">// 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>}, <span style=\"color:#75715e\">// 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>}, <span style=\"color:#75715e\">// 6\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>}, <span style=\"color:#75715e\">// 7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>}, <span style=\"color:#75715e\">// 8\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>}, <span style=\"color:#75715e\">// 9\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">0</span>,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">0</span>}  <span style=\"color:#75715e\">// 0.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>};\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pins[] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">6</span>, <span style=\"color:#ae81ff\">7</span>, <span style=\"color:#ae81ff\">8</span>, <span style=\"color:#ae81ff\">9</span>};\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> r <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; r <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">8</span>; r<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">pinMode</span>(pins[r], OUTPUT);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(pins[r], <span style=\"color:#ae81ff\">1</span>); <span style=\"color:#75715e\">// 7 Segment Ready\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 8 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> r <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; r <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">8</span>; r<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(pins[r], numArray[<span style=\"color:#ae81ff\">8</span>][r]); <span style=\"color:#75715e\">// numbers[8][r]이면 8을 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> num <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; num <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">11</span>; num<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> r <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; r <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">8</span>; r<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">digitalWrite</span>(pins[r], numbers[num][r]); <span style=\"color:#75715e\">// num의 값을 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\r\n<h2 id=\"sketch--2진수나-16진수를-이용하여-표시하기\">sketch : 2진수나 16진수를 이용하여 표시하기<a class=\"anchor\" href=\"#sketch--2%ec%a7%84%ec%88%98%eb%82%98-16%ec%a7%84%ec%88%98%eb%a5%bc-%ec%9d%b4%ec%9a%a9%ed%95%98%ec%97%ac-%ed%91%9c%ec%8b%9c%ed%95%98%ea%b8%b0\">#</a></h2>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c\" data-lang=\"c\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> numArray[<span style=\"color:#ae81ff\">10</span>] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>b11000000,   <span style=\"color:#75715e\">// 0\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b11111001,   <span style=\"color:#75715e\">// 1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b10100100,   <span style=\"color:#75715e\">// 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b10110000,   <span style=\"color:#75715e\">// 3\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b10011001,   <span style=\"color:#75715e\">// 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b10010010,   <span style=\"color:#75715e\">// 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b10000010,   <span style=\"color:#75715e\">// 6\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b11111000,   <span style=\"color:#75715e\">// 7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b10000000,   <span style=\"color:#75715e\">// 8\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b10010000    <span style=\"color:#75715e\">// 9\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>};\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// int numArray[10] = { 0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92, 0x82, 0xF8, 0x80, 0x90 };\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 16진수를 사용해도 됨\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 소수점 포함 int numArray[10] = { 0x40, 0x79, 0x24, 0x30, 0x19, 0x12, 0x02, 0x78, 0x00, 0x10 };\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> segPins[<span style=\"color:#ae81ff\">7</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">6</span>, <span style=\"color:#ae81ff\">7</span>, <span style=\"color:#ae81ff\">8</span>};\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> i, j;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {                \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; i <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">8</span>; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">pinMode</span>(segPins[i], OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; i <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">10</span>; i<span style=\"color:#f92672\">++</span>)\n</span></span><span style=\"display:flex;\"><span>  {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">segLED</span>(i);                         <span style=\"color:#75715e\">// i=1이면 1을 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">segLED</span>(<span style=\"color:#66d9ef\">int</span> num) {                 <span style=\"color:#75715e\">// num값을 넘겨받아\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">int</span> data <span style=\"color:#f92672\">=</span> numArray[num];            <span style=\"color:#75715e\">// num번째 배열값을 data로 지정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (j <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; j <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">8</span>; j<span style=\"color:#f92672\">++</span>)\n</span></span><span style=\"display:flex;\"><span>  {                                    <span style=\"color:#75715e\">// 2진수 배열 8비트를 &amp;연산자로 가장 오른쪽11 비트값부터 검사\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span>(data <span style=\"color:#f92672\">&amp;</span> <span style=\"color:#ae81ff\">0x01</span>) {                  <span style=\"color:#75715e\">// 1이면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#a6e22e\">digitalWrite</span>(segPins[j], HIGH);  <span style=\"color:#75715e\">// HIGH(끄고)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">digitalWrite</span>(segPins[j], LOW);   <span style=\"color:#75715e\">// 1이 아니면(0이면)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    }                                  <span style=\"color:#75715e\">// LOW(킨다)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  data <span style=\"color:#f92672\">&gt;&gt;=</span> <span style=\"color:#ae81ff\">1</span>;                          <span style=\"color:#75715e\">// data값을 1비트씩 오른쪽으로 쉬프트한 후\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }                                    <span style=\"color:#75715e\">// 7번 추가 실행 (총 8번 실행)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><br>\r\n<h2 id=\"sketch--시리얼모니터에서-값을-입력받아-출력하기\">sketch : 시리얼모니터에서 값을 입력받아 출력하기<a class=\"anchor\" href=\"#sketch--%ec%8b%9c%eb%a6%ac%ec%96%bc%eb%aa%a8%eb%8b%88%ed%84%b0%ec%97%90%ec%84%9c-%ea%b0%92%ec%9d%84-%ec%9e%85%eb%a0%a5%eb%b0%9b%ec%95%84-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h2>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c\" data-lang=\"c\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> numArray[<span style=\"color:#ae81ff\">10</span>] <span style=\"color:#f92672\">=</span> { <span style=\"color:#ae81ff\">0xC0</span>, <span style=\"color:#ae81ff\">0xF9</span>, <span style=\"color:#ae81ff\">0xA4</span>, <span style=\"color:#ae81ff\">0xB0</span>, <span style=\"color:#ae81ff\">0x99</span>, <span style=\"color:#ae81ff\">0x92</span>, <span style=\"color:#ae81ff\">0x82</span>, <span style=\"color:#ae81ff\">0xF8</span>, <span style=\"color:#ae81ff\">0x80</span>, <span style=\"color:#ae81ff\">0x90</span> };\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 소수점 포함 int numArray[10] = { 0x40, 0x79, 0x24, 0x30, 0x19, 0x12, 0x02, 0x78, 0x00, 0x10 };\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> segPins[<span style=\"color:#ae81ff\">7</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">6</span>, <span style=\"color:#ae81ff\">7</span>, <span style=\"color:#ae81ff\">8</span>};\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> i, j;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() { \n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>); \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; i <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">8</span>; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">pinMode</span>(segPins[i], OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Press any number!(0~9)&#34;</span>); \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>); \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (Serial.<span style=\"color:#a6e22e\">available</span>()) {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">int</span> number <span style=\"color:#f92672\">=</span> Serial.<span style=\"color:#a6e22e\">read</span>();\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(number <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">10</span>) {\n</span></span><span style=\"display:flex;\"><span>\t  Serial.<span style=\"color:#a6e22e\">println</span>(number<span style=\"color:#e6db74\">&#34;);  </span>\n</span></span><span style=\"display:flex;\"><span>\t  <span style=\"color:#a6e22e\">segLED</span>(number);                  <span style=\"color:#75715e\">// i=1이면 1을 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\t  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Please input a lower number than 10!&#34;</span>)\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">segLED</span>(<span style=\"color:#66d9ef\">int</span> num) {                 <span style=\"color:#75715e\">// num값을 넘겨받아\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">int</span> data <span style=\"color:#f92672\">=</span> numArray[num];            <span style=\"color:#75715e\">// num번째 배열값을 data로 지정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (j <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; j <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">8</span>; j<span style=\"color:#f92672\">++</span>)\n</span></span><span style=\"display:flex;\"><span>  {                                    <span style=\"color:#75715e\">// 2진수 배열 8비트를 &amp;연산자로 가장 오른쪽11 비트값부터 검사\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span>(data <span style=\"color:#f92672\">&amp;</span> <span style=\"color:#ae81ff\">0x01</span>) {                  <span style=\"color:#75715e\">// 1이면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#a6e22e\">digitalWrite</span>(segPins[j], HIGH);  <span style=\"color:#75715e\">// HIGH(끄고)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">digitalWrite</span>(segPins[j], LOW);   <span style=\"color:#75715e\">// 1이 아니면(0이면)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    }                                  <span style=\"color:#75715e\">// LOW(킨다)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  data <span style=\"color:#f92672\">&gt;&gt;=</span> <span style=\"color:#ae81ff\">1</span>;                          <span style=\"color:#75715e\">// data값을 1비트씩 오른쪽으로 쉬프트한 후\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }                                    <span style=\"color:#75715e\">// 7번 추가 실행 (총 8번 실행)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><p><br><br></p>\n<h1 id=\"2개의-7-segment를-사용하여-2자리-숫자-나타내기\">2개의 7 Segment를 사용하여 2자리 숫자 나타내기<a class=\"anchor\" href=\"#2%ea%b0%9c%ec%9d%98-7-segment%eb%a5%bc-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-2%ec%9e%90%eb%a6%ac-%ec%88%ab%ec%9e%90-%eb%82%98%ed%83%80%eb%82%b4%ea%b8%b0\">#</a></h1>\r\n<p>1개의 7 Segment를 사용하는데 8개의 Digital Pin이 필요하므로, 2개 이상의 7 Segment를 사용하려면 16개의 Digital Pin이 필요합니다. 핀의 개수로만 보면 Arduino Uno로는 표현할 수 없겠지요. 그러므로 2개의 7 Segment를 전원부 제어를 통해 빠른 시간동안 on/off를 반복함으로써 우리 눈에 나타나는 잔상효과를 이용하는 방법으로 여러개의 FND를 사용하는 Dynamic 구동 방식을 사용합니다.</p>\n<p>아래 회로를 예로들면 아두이노의 Digital 2~9번핀이 각각 두개의 FND로 병렬연결 되어 있고, 10번핀은 10의 자리를 나타내는 FND1에, 11번 핀은 1의 자리를 나타내는 FND2에 연결되어 있는 것을 볼 수 있습니다. 이 회로를 통해 10번핀을 LOW, 11번핀을 HIGH로 두면 FND1이 작동하고, 마찬가지로 10번핀을 HIGH, 11번핀을 LOW로 두면 FND2가 작동하게 되죠. 이러한 방식으로 2개의 FND를 10개의 핀으로 작동할 수 있게 되는 것입니다.</p>\n<p><img src=\"/image/7segment-05.jpg\" alt=\"\" /></p>\n<br>\r\n<h2 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h2>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> numArray[<span style=\"color:#ae81ff\">10</span>] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>b01000000,   <span style=\"color:#75715e\">// 0\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b01111001,   <span style=\"color:#75715e\">// 1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b00100100,   <span style=\"color:#75715e\">// 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b00110000,   <span style=\"color:#75715e\">// 3\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b00011001,   <span style=\"color:#75715e\">// 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b00010010,   <span style=\"color:#75715e\">// 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b00000010,   <span style=\"color:#75715e\">// 6\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b01111000,   <span style=\"color:#75715e\">// 7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b00000000,   <span style=\"color:#75715e\">// 8\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#ae81ff\">0</span>b00010000    <span style=\"color:#75715e\">// 9\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>};\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// int numArray[10] = { 0x40, 0x79, 0x24, 0x30, 0x19, 0x12, 0x02, 0x78, 0x00, 0x10 };\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 16진수를 사용해도 됨\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> segPins[] <span style=\"color:#f92672\">=</span> { <span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">6</span>, <span style=\"color:#ae81ff\">7</span>, <span style=\"color:#ae81ff\">8</span>, <span style=\"color:#ae81ff\">9</span> };  <span style=\"color:#75715e\">// Segment핀 번호\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> segNum <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;                              <span style=\"color:#75715e\">// Segment 개수 (숫자 자리수)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> vccPins[segNum] <span style=\"color:#f92672\">=</span> { <span style=\"color:#ae81ff\">10</span>, <span style=\"color:#ae81ff\">11</span> };            <span style=\"color:#75715e\">// 10, 11번 핀을 통해 seg#1, seg#2의 전원 인가\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; i <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">8</span>; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">pinMode</span>(segPins[i], OUTPUT);                   <span style=\"color:#75715e\">// Segment핀 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  } \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; i <span style=\"color:#f92672\">&lt;</span> segNum; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">pinMode</span>(vccPins[i], OUTPUT);                   <span style=\"color:#75715e\">// seg#0, seg#1의 전원인가 핀 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; i <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">100</span>; i<span style=\"color:#f92672\">++</span>) {                  <span style=\"color:#75715e\">// 0~99까지 숫자를 표시\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> n <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; n <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">10</span>; n<span style=\"color:#f92672\">++</span>) {                 <span style=\"color:#75715e\">// 빠르게 카운트할 경우 모든 LED가 켜져 있는 것처럼 보여 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#a6e22e\">showNumber</span>(i);                               <span style=\"color:#75715e\">// 숫자를 구분할 수 없으므로, 빠르게 10번씩 점멸시키면서 표시\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    }  \n</span></span><span style=\"display:flex;\"><span>  }                                  \n</span></span><span style=\"display:flex;\"><span>}                                    \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">showNumber</span>(<span style=\"color:#66d9ef\">int</span> number) {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (number <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">showDigit</span>(number, <span style=\"color:#ae81ff\">0</span>);                         <span style=\"color:#75715e\">// 0의 경우 (1의 자리수) Segment에만 0을 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> j <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; j <span style=\"color:#f92672\">&lt;</span> segNum; j<span style=\"color:#f92672\">++</span>) {            <span style=\"color:#75715e\">// 10의 자리, 1의 자리 출력을 위해 2번 실행\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">if</span> (number <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) {                           <span style=\"color:#75715e\">// 출력값이 0보다 큰 경우에만 실행\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">showDigit</span>(number <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>, j);                <span style=\"color:#75715e\">// 1의 자리 숫자(%10)를 seg#0(j=0)에 출력 (if 10의 자리 숫자 = (number % 100) / 10))\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        number <span style=\"color:#f92672\">=</span> number <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">10</span>;                     <span style=\"color:#75715e\">// ※ 숫자를 10으로 나눠 10의 자리 숫자를 1의 자리 숫자로 만듦\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      }                                           <span style=\"color:#75715e\">// if 처음에 주어진 숫자가 한 자리 수였으면,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5</span>);                                   <span style=\"color:#75715e\">//    → 10으로 나눈 후에는 1의 자리값이 0이 되어, 0보다 큰 값이 안되므로 10의 자리 출력하지 않음\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    }                                             <span style=\"color:#75715e\">// if 처음에 주어진 숫자가 두 자리 수였으면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }                                               <span style=\"color:#75715e\">//    → 10으로 나눈 후 10의 자리 숫자가 1의 자리 수가 되므로, 10이 자리수를 seg#1(j=1)에 출력 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">showDigit</span>(<span style=\"color:#66d9ef\">int</span> num, <span style=\"color:#66d9ef\">int</span> digit) {              <span style=\"color:#75715e\">// num값과 digit(0→1의 자리수에 표시, 1→10의 자리수에 표시)을 넘겨받아\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">int</span> data <span style=\"color:#f92672\">=</span> numArray[num];                       <span style=\"color:#75715e\">// num번째 배열값을 digit자리수에 표시할 data로 지정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(vccPins[<span style=\"color:#ae81ff\">0</span>], HIGH);                 <span style=\"color:#75715e\">// vcc핀에 전원 인가\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(vccPins[<span style=\"color:#ae81ff\">1</span>], HIGH);                 <span style=\"color:#75715e\">// [0] = Arduino Pin10, [1] = Arduino Pin11\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> segLED <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; segLED <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">7</span>; segLED<span style=\"color:#f92672\">++</span>)      <span style=\"color:#75715e\">// 숫자 2진수의 7세그먼트 ON, OFF\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span> (data <span style=\"color:#f92672\">&amp;</span> <span style=\"color:#ae81ff\">0x01</span>) {                            <span style=\"color:#75715e\">// 1이면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#a6e22e\">digitalWrite</span>(segPins[segLED], HIGH);        <span style=\"color:#75715e\">// HIGH(끄고)                  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {                                        <span style=\"color:#75715e\">// 1이 아니면(0이면)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#a6e22e\">digitalWrite</span>(segPins[segLED], LOW);         <span style=\"color:#75715e\">// LOW(끈다)               \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    }\n</span></span><span style=\"display:flex;\"><span>    data <span style=\"color:#f92672\">&gt;&gt;=</span> <span style=\"color:#ae81ff\">1</span>;                                   <span style=\"color:#75715e\">// data값을 1비트씩 오른쪽으로 쉬프트한 후\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(vccPins[digit], LOW);              <span style=\"color:#75715e\">// 숫자 LED 한 자리 ON\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><p><br><br></p>\n<h1 id=\"4-fnd\">4 FND<a class=\"anchor\" href=\"#4-fnd\">#</a></h1>\r\n<p>4개의 FND를 Dynamic 방식으로 구동하기 위해서는 8개의 데이터 핀과 4개의 전원부 핀이 필요합니다.\n<figure class=\"center\"><img src=\"/image/7segment-06.jpg\">\n</figure>\n</p>\n<br>\r\n<h2 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h2>\r\n<p><img src=\"/image/7segment-07.jpg\" alt=\"\" /></p>\n<br>\r\n<h2 id=\"pin-map-1\">Pin Map<a class=\"anchor\" href=\"#pin-map-1\">#</a></h2>\r\n<table>\n  <thead>\n      <tr>\n          <th>FND</th>\n          <th>Arduino</th>\n          <th>Segment</th>\n          <th>자리수</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>1</td>\n          <td>6</td>\n          <td>E</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>2</td>\n          <td>5</td>\n          <td>D</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>3</td>\n          <td>13</td>\n          <td>DP</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>4</td>\n          <td>4</td>\n          <td>C</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>5</td>\n          <td>8</td>\n          <td>G</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>6</td>\n          <td>9</td>\n          <td>S1</td>\n          <td>1의 자리 수</td>\n      </tr>\n      <tr>\n          <td>7</td>\n          <td>3</td>\n          <td>B</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>8</td>\n          <td>10</td>\n          <td>S2</td>\n          <td>10의 자리 수</td>\n      </tr>\n      <tr>\n          <td>9</td>\n          <td>11</td>\n          <td>S3</td>\n          <td>100의 자리 수</td>\n      </tr>\n      <tr>\n          <td>10</td>\n          <td>7</td>\n          <td>F</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>11</td>\n          <td>2</td>\n          <td>A</td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>12</td>\n          <td>12</td>\n          <td>S4</td>\n          <td>1000의 자리 수</td>\n      </tr>\n  </tbody>\n</table>\n<br>\r\n<h2 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h2>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Segment_X - Arduino Pin // FND Pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define SEG_A 2 </span><span style=\"color:#75715e\">// 11\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define SEG_B 3 </span><span style=\"color:#75715e\">// 7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define SEG_C 4 </span><span style=\"color:#75715e\">// 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define SEG_D 5 </span><span style=\"color:#75715e\">// 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define SEG_E 6 </span><span style=\"color:#75715e\">// 1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define SEG_F 7 </span><span style=\"color:#75715e\">// 10\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define SEG_G 8 </span><span style=\"color:#75715e\">// 5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// FND_num - Arduino Pin // FND Pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define FND1 9  </span><span style=\"color:#75715e\">// 6\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define FND2 10 </span><span style=\"color:#75715e\">// 8\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define FND3 11 </span><span style=\"color:#75715e\">// 9\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define FND4 12 </span><span style=\"color:#75715e\">// 12\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">seglight</span>(byte number);\n</span></span><span style=\"display:flex;\"><span>byte numbers[] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span>  B0111111,  <span style=\"color:#75715e\">// MSB   --  LSB\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  B0000110,\n</span></span><span style=\"display:flex;\"><span>  B1011011,\n</span></span><span style=\"display:flex;\"><span>  B1001111,\n</span></span><span style=\"display:flex;\"><span>  B1100110,\n</span></span><span style=\"display:flex;\"><span>  B1101101,\n</span></span><span style=\"display:flex;\"><span>  B1111101,\n</span></span><span style=\"display:flex;\"><span>  B0000111,\n</span></span><span style=\"display:flex;\"><span>  B1111111,\n</span></span><span style=\"display:flex;\"><span>  B1101111\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> FND[] <span style=\"color:#f92672\">=</span> {SEG_A, SEG_B, SEG_C, SEG_D, SEG_E, SEG_F, SEG_G };\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> FND_NO[] <span style=\"color:#f92672\">=</span> {FND1, FND2, FND3, FND4};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span> ; i <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">7</span>; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">pinMode</span>(FND[i], OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span> ; i <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">4</span>; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">pinMode</span>(FND_NO[i], OUTPUT);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(FND_NO[i], HIGH);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> ON <span style=\"color:#f92672\">=</span> OUTPUT;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> intCnt <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span> ;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(intCnt <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">10000</span>) {\n</span></span><span style=\"display:flex;\"><span>    intCnt<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>    intCnt <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> start <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> j <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span> ; j <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">10</span> ; j <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>() <span style=\"color:#f92672\">-</span> start) { <span style=\"color:#75715e\">// 600 밀리초 마다 실행\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// Dynamic 구동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">digitalWrite</span>(FND1, LOW);                 <span style=\"color:#75715e\">// 1의 자리 켜기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">seglight</span>(numbers[intCnt <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>]);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5</span>);                                <span style=\"color:#75715e\">// 5ms 유지 후\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">digitalWrite</span>(FND1, HIGH);                <span style=\"color:#75715e\">// 끄기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(FND2, LOW);                 <span style=\"color:#75715e\">// 10의 자리 켜기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">seglight</span>(numbers[(intCnt <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">10</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>]);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5</span>);                                <span style=\"color:#75715e\">// 5ms 유지 후\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">digitalWrite</span>(FND2, HIGH);                <span style=\"color:#75715e\">// 끄기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(FND3, LOW);                 <span style=\"color:#75715e\">// 100의 자리 켜기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">seglight</span>(numbers[(intCnt <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">100</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>]);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5</span>);                                <span style=\"color:#75715e\">// 5ms 유지 후 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">digitalWrite</span>(FND3, HIGH);                <span style=\"color:#75715e\">// 끄기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(FND4, LOW);                 <span style=\"color:#75715e\">// 1000의 자리 켜기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">seglight</span>(numbers[(intCnt <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">1000</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>]);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5</span>);                                <span style=\"color:#75715e\">// 5ms 유지 후\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">digitalWrite</span>(FND4, HIGH);                <span style=\"color:#75715e\">// 끄기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Bit값으로 FND 각 LED 점등\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">seglight</span>(byte number) {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span> ; i <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">7</span> ; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">int</span> bit <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">bitRead</span>(number, i) ;\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">digitalWrite</span>(FND[i], bit);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/arduino-%EC%8A%A4%ED%85%9D%EB%AA%A8%ED%84%B0/","title":"Arduino, 스텝모터","content":"<h3 id=\"스텝모터-step-motor\">스텝모터 (Step Motor)<a class=\"anchor\" href=\"#%ec%8a%a4%ed%85%9d%eb%aa%a8%ed%84%b0-step-motor\">#</a></h3>\r\n<ul>\n<li>펄스 모양의 전압에 의해 일정 각도(스텝 수) 만큼 회전하는 모터.</li>\n<li>회전 각도는 입력 펄스 신호의 수에 비례하고, 회전 속도는 입력 펄스 신호의 주파수에 비례한다.</li>\n</ul>\n<br>\n<h4 id=\"스텝모터-28byj-48\">스텝모터 28BYJ-48<a class=\"anchor\" href=\"#%ec%8a%a4%ed%85%9d%eb%aa%a8%ed%84%b0-28byj-48\">#</a></h4>\r\n<p><img src=\"/image/s/Step-Motor-02.png\" alt=\"\" /></p>\n<ul>\n<li>\n<p>정격전압: 5VDC</p>\n</li>\n<li>\n<p>기어비: 1/64\n$$\n\\frac {32}{9} \\times \\frac {22}{11} \\times \\frac {26}{9} \\times \\frac {31}{10} = 63.68395 \\fallingdotseq 64\n$$</p>\n</li>\n</ul>\n<figure class=\"center\"><img src=\"/image/s/Step-Motor-01.png\" width=\"80%\">\n</figure>\n\n<ul>\n<li>스트라이드 각도\n<ul>\n<li><strong>스펙상 5.625º / 64</strong> = 0.087890625\n<ul>\n<li>그러므로,  360º / 0.087890625 = 4096 스텝</li>\n</ul>\n</li>\n<li><strong>실제로는 11.25º / 64</strong> = 0.17578125\n<ul>\n<li>그러므로,  360º / 0.17578125 = <strong>2048 스텝으로 1회전</strong> (이 값이 중요함!)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Frequency: 100Hz</li>\n<li>토크: 34.3mN,m</li>\n</ul>\n<br>\n<h4 id=\"모터드라이브-uln2003\">모터드라이브 ULN2003<a class=\"anchor\" href=\"#%eb%aa%a8%ed%84%b0%eb%93%9c%eb%9d%bc%ec%9d%b4%eb%b8%8c-uln2003\">#</a></h4>\r\n<figure class=\"center\"><img src=\"/image/s/Step-Motor-03.png\" width=\"67%\">\n</figure>\n\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/s/UNO-step-01.png\" alt=\"\" /></p>\n<h4 id=\"pin-map\">Pin Map<a class=\"anchor\" href=\"#pin-map\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>모터드라이브</th>\n          <th>아두이노</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>INT1</td>\n          <td>11</td>\n      </tr>\n      <tr>\n          <td>INT2</td>\n          <td>10</td>\n      </tr>\n      <tr>\n          <td>INT3</td>\n          <td>9</td>\n      </tr>\n      <tr>\n          <td>INT4</td>\n          <td>8</td>\n      </tr>\n      <tr>\n          <td>GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>VCC</td>\n          <td>5V</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"sketch-예제1\">sketch: 예제1<a class=\"anchor\" href=\"#sketch-%ec%98%88%ec%a0%9c1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Stepper.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 2048:한바퀴(360도), 1024:반바퀴(180도)...\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// datasheet를 통해 스트라이드 각도를 계산한 값을 사용\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> stepsPerRevolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2048</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 모터 드라이브에 연결된 핀 IN1, IN3, IN2, IN4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>Stepper <span style=\"color:#a6e22e\">myStepper</span>(stepsPerRevolution, <span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">9</span>, <span style=\"color:#ae81ff\">10</span>, <span style=\"color:#ae81ff\">8</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  myStepper.<span style=\"color:#a6e22e\">setSpeed</span>(<span style=\"color:#ae81ff\">14</span>); \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 시계 반대 방향으로 한바퀴 회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  myStepper.<span style=\"color:#a6e22e\">step</span>(stepsPerRevolution);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 시계 방향으로 한바퀴 회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  myStepper.<span style=\"color:#a6e22e\">step</span>(<span style=\"color:#f92672\">-</span>stepsPerRevolution);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><ul>\n<li>Stepper myStepper(stepsPerRevolution, 11, 9, 10, 8);\n<ul>\n<li>모터 드라이브에 연결되는 순서에 유의한다! (<strong>IN1, IN3, IN2, IN4</strong> 순서임!)</li>\n</ul>\n</li>\n<li>myStepper.setSpeed(14);\n<ul>\n<li>아두이노 보드의 5V 전원 사용시 16이 최대값.</li>\n<li>16 이상은 안정적으로 회전이 안되며, 17을 넣으면 한바퀴 돌고 정지. 18을 넣으면 돌지 않음</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"sketch-예제2\">sketch: 예제2<a class=\"anchor\" href=\"#sketch-%ec%98%88%ec%a0%9c2\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Stepper.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 2048:한바퀴(360도), 1024:반바퀴(180도), 64:11.25도\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> stepsPerRevolution <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">64</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 모터 드라이브에 연결된 핀 IN1, IN3, IN2, IN4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>Stepper <span style=\"color:#a6e22e\">myStepper</span>(stepsPerRevolution, <span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">9</span>, <span style=\"color:#ae81ff\">10</span>, <span style=\"color:#ae81ff\">8</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  myStepper.<span style=\"color:#a6e22e\">setSpeed</span>(<span style=\"color:#ae81ff\">16</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 시계 반대 방향으로 한바퀴 회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// 64 * 32 = 2048 한바퀴 =&gt; 11.25도씩 32번 회전 (360도)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; i<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">32</span>; i<span style=\"color:#f92672\">++</span>) {  \n</span></span><span style=\"display:flex;\"><span>    myStepper.<span style=\"color:#a6e22e\">step</span>(stepsPerRevolution);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 시계 방향으로 한바퀴 회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// -64 * 32 = 2048 한바퀴 =&gt; -11.25도씩 32번 회전 (-360도)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; i<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">32</span>; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    myStepper.<span style=\"color:#a6e22e\">step</span>(<span style=\"color:#f92672\">-</span>stepsPerRevolution);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/arduino-%EC%84%9C%EB%B3%B4%EB%AA%A8%ED%84%B0/","title":"Arduino, 서보모터","content":"<h3 id=\"서보모터-sg-90\">서보모터 SG-90<a class=\"anchor\" href=\"#%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-sg-90\">#</a></h3>\r\n<figure class=\"center\"><img src=\"/image/servo-01.png\" width=\"67%\">\n</figure>\n\n<ul>\n<li>모터드라이버, 회전센서, 모터, 제어회로가 내장된 기어 박스를 포함하고 있는 형태의 모터로, 스텝모터보다 힘이 강함</li>\n<li>보통 선이 3가닥이며, 회전수와 각도 등의 움직임 제어가 가능</li>\n<li>아두이노에서 많이 다루는 SG90 제품의 경우 0~180˚ 제어가 가능</li>\n<li>아두이노UNO의 USB 전류량이 500mA 정도가 한계이므로 별도의 전원을 사용하지 않으면 1~2개의 서보모터만 사용 가능</li>\n</ul>\n<br>\n<h4 id=\"라이브러리-추가하기\">라이브러리 추가하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%b6%94%ea%b0%80%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<p>서보모터를 사용하기 위한 Servo 라이브러리는 아두이노 IDE에 기본으로 포함되어 있다.</p>\n<ul>\n<li>스케치&gt; 라이브러리 포함하기&gt; Servo 를 선택하면,</li>\n<li>#include &lt;servo.h&gt; 라이브러리가 스케치에 추가 된다.</li>\n</ul>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/servo-02.jpg\" alt=\"\" /></p>\n<table>\n  <thead>\n      <tr>\n          <th>SG90</th>\n          <th>Brown</th>\n          <th>Red</th>\n          <th>Orange</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>Arduino</td>\n          <td>GND</td>\n          <td>5V</td>\n          <td>10</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"sketch--서보모터-180º-회전-왕복하기\">sketch : 서보모터 180º 회전 왕복하기<a class=\"anchor\" href=\"#sketch--%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-180%c2%ba-%ed%9a%8c%ec%a0%84-%ec%99%95%eb%b3%b5%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Servo.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>Servo servomotor;                                <span style=\"color:#75715e\">// servomotor 선언\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> position <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  servomotor.<span style=\"color:#a6e22e\">attach</span>(<span style=\"color:#ae81ff\">10</span>);                         <span style=\"color:#75715e\">// servomotor 핀 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span>(position <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; position <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">180</span>; position<span style=\"color:#f92672\">++</span>)\n</span></span><span style=\"display:flex;\"><span>  {\n</span></span><span style=\"display:flex;\"><span>    servomotor.<span style=\"color:#a6e22e\">write</span>(position);                  <span style=\"color:#75715e\">// pos값의 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);                       \n</span></span><span style=\"display:flex;\"><span>  }                                 \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span>(position <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>; position <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>; position<span style=\"color:#f92672\">--</span>)  <span style=\"color:#75715e\">// 같은 방법으로 역회전\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {\n</span></span><span style=\"display:flex;\"><span>    servomotor.<span style=\"color:#a6e22e\">write</span>(position);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><ul>\n<li>servomotor.write(숫자)를 사용할때, 숫자는 현재 위치에서의 ‘회전각’을 의미하는 것이 아니다!</li>\n<li>초기 위치를 0º로 기준삼아, 표시된 숫자의 각도 위치로 이동하라는 의미이다. 예를들어서 servomotor.write(90)와 servomotor.write(30)을 연속으로 실행하면,\n<ul>\n<li>90도를 회전한 뒤, 추가로 30도를 회전하여 120도 위치에 있다 → ×</li>\n<li>90도의 위치로 회전한 뒤, 역회전하여 (처음위치를 기준으로) 30도의 위치로 이동한다. → ○</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>단, servo.h 라이브러리를 사용하면, 스케치 내에서 analogWrite를 사용할 수 없다는 단점도 있다.</li>\n</ul>\n<br>\n<h4 id=\"sketch-시리얼모니터에서-각도값을-입력받아-회전시키기\">sketch: 시리얼모니터에서 각도값을 입력받아 회전시키기<a class=\"anchor\" href=\"#sketch-%ec%8b%9c%eb%a6%ac%ec%96%bc%eb%aa%a8%eb%8b%88%ed%84%b0%ec%97%90%ec%84%9c-%ea%b0%81%eb%8f%84%ea%b0%92%ec%9d%84-%ec%9e%85%eb%a0%a5%eb%b0%9b%ec%95%84-%ed%9a%8c%ec%a0%84%ec%8b%9c%ed%82%a4%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Servo.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>Servo servomotor;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> a <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  servomotor.<span style=\"color:#a6e22e\">attach</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);                  <span style=\"color:#75715e\">// Serial 통신을 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">while</span>(<span style=\"color:#f92672\">!</span>Serial);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Servor Mortor&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(Serial.<span style=\"color:#a6e22e\">available</span>()){              <span style=\"color:#75715e\">// Serial 모니터창에 어떤 값이 들어오면 실행\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    a <span style=\"color:#f92672\">=</span> Serial.<span style=\"color:#a6e22e\">parseInt</span>();             <span style=\"color:#75715e\">// Serial 모니터창에서 받은 값을 a에 넘겨줌\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">if</span>(a<span style=\"color:#f92672\">&gt;=</span><span style=\"color:#ae81ff\">0</span> <span style=\"color:#f92672\">&amp;&amp;</span> a<span style=\"color:#f92672\">&lt;=</span><span style=\"color:#ae81ff\">180</span>)\n</span></span><span style=\"display:flex;\"><span>    {\n</span></span><span style=\"display:flex;\"><span>      Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;angle : &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>      Serial.<span style=\"color:#a6e22e\">println</span>(a);\n</span></span><span style=\"display:flex;\"><span>      servomotor.<span style=\"color:#a6e22e\">write</span>(a);             <span style=\"color:#75715e\">// a값에 해당하는 각도의 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"서보모터-sg-90-라이브러리-없이-사용하기\">서보모터 SG-90: 라이브러리 없이 사용하기<a class=\"anchor\" href=\"#%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-sg-90-%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%97%86%ec%9d%b4-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"for-sg90-with-arduino\">for SG90 with Arduino<a class=\"anchor\" href=\"#for-sg90-with-arduino\">#</a></h4>\r\n<ul>\n<li>Frequency of that signal should be 50hz.</li>\n<li>Its range is 544-2450 micro seconds for 0-180 degree angle.</li>\n<li>Again its a little complex.</li>\n<li>For example 0 degree signal will be something like 5 volts for 544 micro seconds and 0 volt for 19465.</li>\n<li>highDelay\n<ul>\n<li>the time in which we want to keep voltage high on pin 10 and this unit is in micro seconds.</li>\n</ul>\n</li>\n<li>lowDelay\n<ul>\n<li>the time in which want to keep voltage zero across pin 10 again this unit is going to be in micro seconds</li>\n</ul>\n</li>\n<li>only HIGH part of signal wont operate servo. we have to send complete HIGH and LOW signal to make servo work.</li>\n<li>deg_factor\n<ul>\n<li>signal range (2450 - 544) for SG90 divided by 180 which is equal to 10.6 something that we make 11 as an integer.</li>\n</ul>\n</li>\n<li>Loop = 20000;\n<ul>\n<li>20000 micro seconds or 20 milli seconds is signal cycle or u can say total signal should be equal to 20 milli seconds including HIGH and LOW input. (50Hz)</li>\n</ul>\n</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> servoPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;        <span style=\"color:#75715e\">// servo is connected to pin 10.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> initialDelay <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">544</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> highDelay, lowDelay;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> deg;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> deg_factor <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;      \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> Loop <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">20000</span>;         \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span> (servoPin, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;deg <span style=\"color:#f92672\">&lt;=</span> <span style=\"color:#ae81ff\">180</span>; deg<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">servoWrite</span>(servoPin, deg);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>;deg <span style=\"color:#f92672\">&gt;=</span> <span style=\"color:#ae81ff\">0</span>; deg<span style=\"color:#f92672\">--</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">servoWrite</span>(servoPin, deg);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">servoWrite</span>(<span style=\"color:#66d9ef\">int</span> servo, <span style=\"color:#66d9ef\">int</span> duty)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  highDelay <span style=\"color:#f92672\">=</span> initialDelay <span style=\"color:#f92672\">+</span> (duty <span style=\"color:#f92672\">*</span> deg_factor); <span style=\"color:#75715e\">// setting angle\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(servo, HIGH);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(highDelay);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  lowDelay <span style=\"color:#f92672\">=</span> Loop <span style=\"color:#f92672\">-</span> highDelay;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(servo, LOW);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(lowDelay);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"시리얼-모니터에-입력한-문자로-서보모터-회전시키기\">시리얼 모니터에 입력한 문자로 서보모터 회전시키기<a class=\"anchor\" href=\"#%ec%8b%9c%eb%a6%ac%ec%96%bc-%eb%aa%a8%eb%8b%88%ed%84%b0%ec%97%90-%ec%9e%85%eb%a0%a5%ed%95%9c-%eb%ac%b8%ec%9e%90%eb%a1%9c-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-%ed%9a%8c%ec%a0%84%ec%8b%9c%ed%82%a4%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> servoPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;        <span style=\"color:#75715e\">// servo is connected to pin 10.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> initialDelay <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">544</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> highDelay, lowDelay;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;             <span style=\"color:#75715e\">// servo initial degree\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> deg_factor <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;      \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> Loop <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">20000</span>;         \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span> (servoPin, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">servoWrite</span>(servoPin, deg);  \n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">while</span>(Serial.<span style=\"color:#a6e22e\">available</span>() <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">0</span>) \n</span></span><span style=\"display:flex;\"><span>  {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">char</span> flag<span style=\"color:#f92672\">=</span>Serial.<span style=\"color:#a6e22e\">read</span>();\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(flag<span style=\"color:#f92672\">==</span><span style=\"color:#e6db74\">&#39;l&#39;</span>) {\n</span></span><span style=\"display:flex;\"><span>        deg <span style=\"color:#f92672\">=</span> deg <span style=\"color:#f92672\">-</span> <span style=\"color:#ae81ff\">5</span>;\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">if</span>(deg <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>            deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>        }\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(flag<span style=\"color:#f92672\">==</span><span style=\"color:#e6db74\">&#39;r&#39;</span>) {\n</span></span><span style=\"display:flex;\"><span>        deg <span style=\"color:#f92672\">=</span> deg <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">5</span>;\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">if</span>(deg <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">180</span>) {\n</span></span><span style=\"display:flex;\"><span>            deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>;\n</span></span><span style=\"display:flex;\"><span>        }\n</span></span><span style=\"display:flex;\"><span>    }      \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">servoWrite</span>(<span style=\"color:#66d9ef\">int</span> servo, <span style=\"color:#66d9ef\">int</span> duty)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  highDelay <span style=\"color:#f92672\">=</span> initialDelay <span style=\"color:#f92672\">+</span> (duty <span style=\"color:#f92672\">*</span> deg_factor); <span style=\"color:#75715e\">// setting angle\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(servo, HIGH);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(highDelay);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  lowDelay <span style=\"color:#f92672\">=</span> Loop <span style=\"color:#f92672\">-</span> highDelay;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(servo, LOW);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(lowDelay);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><ul>\n<li>l 을 입력하면, 5도 좌회전하며, ll을 입력하면 10도 좌회전한다.</li>\n<li>r 을 입력하면, 5도 우회전하며, rr을 입력하면 10도 우회전한다.</li>\n</ul>\n<br>\n<br>\n<h3 id=\"서보모터와-인터럽트-동시에-사용하기\">서보모터와 인터럽트 동시에 사용하기<a class=\"anchor\" href=\"#%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0%ec%99%80-%ec%9d%b8%ed%84%b0%eb%9f%bd%ed%8a%b8-%eb%8f%99%ec%8b%9c%ec%97%90-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>서보모터가 180도 회전하는 동안, 스위치를 누르면 13번 LED가 토글되도록 만들어보자.</p>\n<br>\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/SG90_Interrupt01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> servoPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;        <span style=\"color:#75715e\">// servo is connected to pin 10.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> initialDelay <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">544</span>;   \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> highDelay, lowDelay;  \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> deg;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> deg_factor <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> Loop <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">20000</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define swPin 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define ledPin 13\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define debounceTime 500 </span><span style=\"color:#75715e\">// Set debounce Time (unit ms) 버튼을 누른 후 0.5sec 이내에는 버튼 체크하지 않음\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>boolean state <span style=\"color:#f92672\">=</span> false;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(servoPin, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(swPin, INPUT_PULLUP);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(ledPin, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">attachInterrupt</span>(<span style=\"color:#a6e22e\">digitalPinToInterrupt</span>(swPin), swInterrupt, FALLING);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;deg <span style=\"color:#f92672\">&lt;=</span> <span style=\"color:#ae81ff\">180</span>; deg<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">servoWrite</span>(servoPin, deg);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (deg <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>;deg <span style=\"color:#f92672\">&gt;=</span> <span style=\"color:#ae81ff\">0</span>; deg<span style=\"color:#f92672\">--</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">servoWrite</span>(servoPin, deg);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">servoWrite</span>(<span style=\"color:#66d9ef\">int</span> servo, <span style=\"color:#66d9ef\">int</span> duty)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  highDelay <span style=\"color:#f92672\">=</span> initialDelay <span style=\"color:#f92672\">+</span> (duty <span style=\"color:#f92672\">*</span> deg_factor); <span style=\"color:#75715e\">// setting angle\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(servo, HIGH);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(highDelay);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  lowDelay <span style=\"color:#f92672\">=</span> Loop <span style=\"color:#f92672\">-</span> highDelay;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(servo, LOW);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(lowDelay);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span> (<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">swInterrupt</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">static</span> <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> lastTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> now <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>((now<span style=\"color:#f92672\">-</span>lastTime) <span style=\"color:#f92672\">&gt;</span> debounceTime) {\n</span></span><span style=\"display:flex;\"><span>    state<span style=\"color:#f92672\">=!</span>state;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  lastTime <span style=\"color:#f92672\">=</span> now;\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(ledPin, state);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><ul>\n<li>스위치를 눌렀다 뗄 때, 물리적 요인에 의해 다시 스위치가 눌리는 효과가 나타나기도 함 (chattering)</li>\n<li>Chattering 효과를 방지하기 위해, 하드웨어적으로 콘덴서를 붙이거나, 소프트웨어적으로 debounce 시간을 만들어 해결해야 한다.</li>\n</ul>\n<br>\n<br>\n<h3 id=\"레이저-모듈-추가-서보모터-날개에-부착\">레이저 모듈 추가: 서보모터 날개에 부착<a class=\"anchor\" href=\"#%eb%a0%88%ec%9d%b4%ec%a0%80-%eb%aa%a8%eb%93%88-%ec%b6%94%ea%b0%80-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-%eb%82%a0%ea%b0%9c%ec%97%90-%eb%b6%80%ec%b0%a9\">#</a></h3>\r\n<h4 id=\"schematic-2\">schematic<a class=\"anchor\" href=\"#schematic-2\">#</a></h4>\r\n<p><img src=\"/image/SG90_Interrupt02.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<p>13번 핀에 레이저모듈을 연결하므로 위 스케치를 그대로 이용</p>\n<br>\n<br>\n<h3 id=\"조도센서-추가\">조도센서 추가<a class=\"anchor\" href=\"#%ec%a1%b0%eb%8f%84%ec%84%bc%ec%84%9c-%ec%b6%94%ea%b0%80\">#</a></h3>\r\n<p>반대편에 조도센서를 놓고, 레이저 모듈이 움직이는 동안 버튼을 눌러 조도센서를 정확하게 맞추면 점수가 올라가는 게임을 만들어보자.</p>\n<br>\n<br>\n<h3 id=\"keypad에서-값을-입력받아-회전시키기\">Keypad에서 값을 입력받아 회전시키기<a class=\"anchor\" href=\"#keypad%ec%97%90%ec%84%9c-%ea%b0%92%ec%9d%84-%ec%9e%85%eb%a0%a5%eb%b0%9b%ec%95%84-%ed%9a%8c%ec%a0%84%ec%8b%9c%ed%82%a4%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic-3\">schematic<a class=\"anchor\" href=\"#schematic-3\">#</a></h4>\r\n<p><img src=\"/image/servo-03.jpg\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-2\">sketch<a class=\"anchor\" href=\"#sketch-2\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Servo.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Keypad.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>Servo servomotor;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pos <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> byte ROWS <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">4</span>;                          <span style=\"color:#75715e\">// 키패드 배열 선언\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> byte COLS <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">4</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">char</span> keys[ROWS][COLS] <span style=\"color:#f92672\">=</span> {                     <span style=\"color:#75715e\">// 키패드 정의\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#e6db74\">&#39;1&#39;</span>,<span style=\"color:#e6db74\">&#39;2&#39;</span>,<span style=\"color:#e6db74\">&#39;3&#39;</span>,<span style=\"color:#e6db74\">&#39;A&#39;</span>},\n</span></span><span style=\"display:flex;\"><span>  {<span style=\"color:#e6db74\">&#39;4&#39;</span>,<span style=\"color:#e6db74\">&#39;5&#39;</span>,<span style=\"color:#e6db74\">&#39;6&#39;</span>,<span style=\"color:#e6db74\">&#39;B&#39;</span>},\n</span></span><span style=\"display:flex;\"><span>  {<span style=\"color:#e6db74\">&#39;7&#39;</span>,<span style=\"color:#e6db74\">&#39;8&#39;</span>,<span style=\"color:#e6db74\">&#39;9&#39;</span>,<span style=\"color:#e6db74\">&#39;C&#39;</span>},\n</span></span><span style=\"display:flex;\"><span>  {<span style=\"color:#e6db74\">&#39;*&#39;</span>,<span style=\"color:#e6db74\">&#39;0&#39;</span>,<span style=\"color:#e6db74\">&#39;#&#39;</span>,<span style=\"color:#e6db74\">&#39;D&#39;</span>},\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>byte rowPins[ROWS] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">9</span>, <span style=\"color:#ae81ff\">8</span>, <span style=\"color:#ae81ff\">7</span>, <span style=\"color:#ae81ff\">6</span>};            <span style=\"color:#75715e\">// 키패드 연결 핀 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>byte colPins[COLS] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">2</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Keypad keypad <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">Keypad</span>( <span style=\"color:#a6e22e\">makeKeymap</span>(keys), rowPins, colPins, ROWS, COLS );\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  servomotor.<span style=\"color:#a6e22e\">attach</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">char</span> keyValue <span style=\"color:#f92672\">=</span> keypad.<span style=\"color:#a6e22e\">getKey</span>();\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(keyValue) {\n</span></span><span style=\"display:flex;\"><span>     <span style=\"color:#66d9ef\">switch</span>(keyValue) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;0&#39;</span> <span style=\"color:#f92672\">:</span>                    <span style=\"color:#75715e\">// 시리얼 모니터에 0을 입력하면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">0</span>);       <span style=\"color:#75715e\">// 0도 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;1&#39;</span> <span style=\"color:#f92672\">:</span>                    <span style=\"color:#75715e\">// 시리얼 모니터에 1을 입력하면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">15</span>);       <span style=\"color:#75715e\">// 15도 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;2&#39;</span> <span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>        servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">30</span>);       <span style=\"color:#75715e\">// 30도 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;3&#39;</span> <span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>        servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">45</span>);       <span style=\"color:#75715e\">// 45도 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;4&#39;</span> <span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>        servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">60</span>);       <span style=\"color:#75715e\">// 60도 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;5&#39;</span> <span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>        servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">75</span>);       <span style=\"color:#75715e\">// 75도 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;6&#39;</span> <span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>        servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">90</span>);       <span style=\"color:#75715e\">// 90도 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;7&#39;</span> <span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>        servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">120</span>);       <span style=\"color:#75715e\">// 120도 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;8&#39;</span> <span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>        servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">150</span>);       <span style=\"color:#75715e\">// 150도 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> <span style=\"color:#e6db74\">&#39;9&#39;</span> <span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>        servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">180</span>);       <span style=\"color:#75715e\">// 180도 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">default</span> <span style=\"color:#f92672\">:</span>\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>     }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"비밀번호-확인하여-서보모터-회전시키기\">비밀번호 확인하여 서보모터 회전시키기<a class=\"anchor\" href=\"#%eb%b9%84%eb%b0%80%eb%b2%88%ed%98%b8-%ed%99%95%ec%9d%b8%ed%95%98%ec%97%ac-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-%ed%9a%8c%ec%a0%84%ec%8b%9c%ed%82%a4%ea%b8%b0\">#</a></h3>\r\n<p>서보모터의 날개를 금고의 개폐장치로 사용하여, 비밀번호 금고를 만들어 보자.</p>\n<br>\n<h4 id=\"sketch-3\">sketch<a class=\"anchor\" href=\"#sketch-3\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Keypad.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Servo.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> tru<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>;                        <span style=\"color:#75715e\">// 비밀번호가 맞는지 확인\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> count<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>;                      <span style=\"color:#75715e\">// 4자리수 카운트\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">char</span> PW[<span style=\"color:#ae81ff\">4</span>]<span style=\"color:#f92672\">=</span>{<span style=\"color:#e6db74\">&#39;1&#39;</span>,<span style=\"color:#e6db74\">&#39;2&#39;</span>,<span style=\"color:#e6db74\">&#39;3&#39;</span>,<span style=\"color:#e6db74\">&#39;A&#39;</span>};     <span style=\"color:#75715e\">//비밀번호\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>Servo servomotor;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 키패드 설정 시작\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> byte ROWS <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">4</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> byte COLS <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">4</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>byte rowPins[ROWS] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">9</span>, <span style=\"color:#ae81ff\">8</span>, <span style=\"color:#ae81ff\">7</span>, <span style=\"color:#ae81ff\">6</span>};\n</span></span><span style=\"display:flex;\"><span>byte colPins[COLS] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">2</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">char</span> keys[ROWS][COLS] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span>  {<span style=\"color:#e6db74\">&#39;1&#39;</span>,<span style=\"color:#e6db74\">&#39;2&#39;</span>,<span style=\"color:#e6db74\">&#39;3&#39;</span>, <span style=\"color:#e6db74\">&#39;A&#39;</span>},\n</span></span><span style=\"display:flex;\"><span>  {<span style=\"color:#e6db74\">&#39;4&#39;</span>,<span style=\"color:#e6db74\">&#39;5&#39;</span>,<span style=\"color:#e6db74\">&#39;6&#39;</span>, <span style=\"color:#e6db74\">&#39;B&#39;</span>},\n</span></span><span style=\"display:flex;\"><span>  {<span style=\"color:#e6db74\">&#39;7&#39;</span>,<span style=\"color:#e6db74\">&#39;8&#39;</span>,<span style=\"color:#e6db74\">&#39;9&#39;</span>, <span style=\"color:#e6db74\">&#39;C&#39;</span>},\n</span></span><span style=\"display:flex;\"><span>  {<span style=\"color:#e6db74\">&#39;*&#39;</span>,<span style=\"color:#e6db74\">&#39;0&#39;</span>,<span style=\"color:#e6db74\">&#39;#&#39;</span>, <span style=\"color:#e6db74\">&#39;D&#39;</span>}\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>Keypad keypad <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">Keypad</span>( <span style=\"color:#a6e22e\">makeKeymap</span>(keys), rowPins, colPins, ROWS, COLS );\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// 키패드 설정 끝\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>  servomotor.<span style=\"color:#a6e22e\">attach</span>(<span style=\"color:#ae81ff\">10</span>);          <span style=\"color:#75715e\">// 서보모터 핀 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">char</span> key <span style=\"color:#f92672\">=</span> keypad.<span style=\"color:#a6e22e\">getKey</span>();     <span style=\"color:#75715e\">// 키패드 입력 변수\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (key) {\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(key);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(key<span style=\"color:#f92672\">==</span>PW[count]) {          <span style=\"color:#75715e\">// 입력번호와 비밀번호가 맞으면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        count<span style=\"color:#f92672\">++</span>;                  <span style=\"color:#75715e\">// 자리수 카운트 1증가\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        tru<span style=\"color:#f92672\">++</span>;                    <span style=\"color:#75715e\">// 맞은수 값 1증가\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>     }\n</span></span><span style=\"display:flex;\"><span>     <span style=\"color:#66d9ef\">else</span> <span style=\"color:#66d9ef\">if</span>(key<span style=\"color:#f92672\">!=</span>PW[count]) {    <span style=\"color:#75715e\">// 입력번호와 비밀번호가 틀리면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        count<span style=\"color:#f92672\">++</span>;                  <span style=\"color:#75715e\">// 자리수 카운트 값만 1증가\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>     }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>     <span style=\"color:#66d9ef\">if</span>(key<span style=\"color:#f92672\">==</span><span style=\"color:#e6db74\">&#39;#&#39;</span>)                 <span style=\"color:#75715e\">// #을 누르면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#a6e22e\">re</span>();                     <span style=\"color:#75715e\">// 초기화\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>     <span style=\"color:#66d9ef\">if</span>(count<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">4</span>) {               <span style=\"color:#75715e\">// 4자리 입력받은 값이\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#66d9ef\">if</span>(tru<span style=\"color:#f92672\">==</span><span style=\"color:#ae81ff\">4</span>)                <span style=\"color:#75715e\">// 모두 맞으면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>          <span style=\"color:#a6e22e\">Su</span>();                   <span style=\"color:#75715e\">// 성공\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        <span style=\"color:#66d9ef\">else</span>                      <span style=\"color:#75715e\">// 그렇지 않으면(4자리는 입력했는데, 모두 맞지는 않았으면)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>          <span style=\"color:#a6e22e\">Fa</span>();                   <span style=\"color:#75715e\">// 실패\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        tru<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>;                    <span style=\"color:#75715e\">// tru, count값 초기화\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        count<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>      }\n</span></span><span style=\"display:flex;\"><span>   }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">Su</span>() {                          <span style=\"color:#75715e\">// 성공했을 때 실행\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">90</span>);              <span style=\"color:#75715e\">// 90도 돌려서 도어락 열림\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;open the door&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">Fa</span>() {                        <span style=\"color:#75715e\">// 실패한 경우는 도어락 잠금 유지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;close the door&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">re</span>() {                        <span style=\"color:#75715e\">// 비밀번호 입력중 #을 입력하면 초기화하고 도어락 잠금 유지\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  tru<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  count<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  servomotor.<span style=\"color:#a6e22e\">write</span>(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;password reset&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"joystick을-사용하여-2개의-서보모터-제어하기\">Joystick을 사용하여 2개의 서보모터 제어하기<a class=\"anchor\" href=\"#joystick%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ec%97%ac-2%ea%b0%9c%ec%9d%98-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-%ec%a0%9c%ec%96%b4%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic-4\">schematic<a class=\"anchor\" href=\"#schematic-4\">#</a></h4>\r\n<p><img src=\"/image/SG90_Joystick01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-4\">sketch<a class=\"anchor\" href=\"#sketch-4\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define JSTICKPIN A0      </span><span style=\"color:#75715e\">// joystick is connected to pin 11\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> servoPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;        <span style=\"color:#75715e\">// servo is connected to pin 10\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> initialDelay <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">544</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> highDelay, lowDelay;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> deg, Jstick, duty;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> deg_factor <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>;      \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> Loop <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">20000</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span> (servoPin, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">PrintValue</span>();\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>  Jstick <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(JSTICKPIN);          \n</span></span><span style=\"display:flex;\"><span>  deg <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(Jstick, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1023</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">180</span>);     \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">servoWrite</span>(servoPin, deg);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">servoWrite</span>(<span style=\"color:#66d9ef\">int</span> servo, <span style=\"color:#66d9ef\">int</span> duty)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  highDelay <span style=\"color:#f92672\">=</span> initialDelay <span style=\"color:#f92672\">+</span> (duty <span style=\"color:#f92672\">*</span> deg_factor); <span style=\"color:#75715e\">// setting angle\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(servo, HIGH);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(highDelay);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  lowDelay <span style=\"color:#f92672\">=</span> Loop <span style=\"color:#f92672\">-</span> highDelay;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(servo, LOW);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delayMicroseconds</span>(lowDelay);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span> (<span style=\"color:#ae81ff\">15</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">PrintValue</span>() {\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#a6e22e\">analogRead</span>(JSTICKPIN));\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span> (<span style=\"color:#e6db74\">&#34; Joystick Value&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/arduino-piezo-buzzer/","title":"Arduino, 피에조 부저","content":"<h3 id=\"buzzer의-종류\">Buzzer의 종류<a class=\"anchor\" href=\"#buzzer%ec%9d%98-%ec%a2%85%eb%a5%98\">#</a></h3>\r\n<table>\n  <thead>\n      <tr>\n          <th style=\"text-align: center\">Active Buzzer (능동형 부저)</th>\n          <th style=\"text-align: center\">Passive Buzzer (수동형 부저)</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td style=\"text-align: center\">有源蜂鸣器 (KY-012)</td>\n          <td style=\"text-align: center\">无源蜂鸣器 (KY-006)</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">회로가 내장되어 있어, 전원만 인가하면 소리가 나므로 프로그램 제어가 편리함</td>\n          <td style=\"text-align: center\">내부에 진동원이 없어, 스케치에 주파수를 지정하여야만 소리를 냄</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">원하는 주파수의 소리를 낼 수 없음</td>\n          <td style=\"text-align: center\">원하는 주파수의 소리를 만들어낼 수 있음</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\">패시브 부저에 비해 비쌈 (모듈 1개 0.9위안)</td>\n          <td style=\"text-align: center\">액티브 부저에 비해 저렴 (모듈 1개 0.8위안)</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/Buzzer-active.png\" width=\"50%\">\n</figure>\n</td>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/Buzzer-passive.png\" width=\"50%\">\n</figure>\n</td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/Buzzer-active3.png\" width=\"50%\">\n</figure>\n</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/Buzzer-active1.png\" width=\"50%\">\n</figure>\n</td>\n          <td style=\"text-align: center\"></td>\n      </tr>\n      <tr>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/Buzzer-active2.png\" width=\"50%\">\n</figure>\n</td>\n          <td style=\"text-align: center\"><figure class=\"center\"><img src=\"/image/Buzzer-passive2.png\" width=\"50%\">\n</figure>\n</td>\n      </tr>\n  </tbody>\n</table>\n<ul>\n<li>모듈로 판매하는 제품의 경우 겉모양으로는 구별이 어렵다. Active Buzzer의 경우 초기 판매시 스티커를 붙여서 판매하지만, 스티커가 떨어져 나간 상태라면 Passive Buzzer와 구별하기 어렵다. 또한 반드시 스티커가 붙은 형태로 판매하는 것도 아니다.</li>\n<li>Active Buzzer의 경우 스티커로 사용전압을 표시하기도 한다. 빨간색은 3V, 파란색은 5V, 보라색은 12V용이다.</li>\n<li>Active Buzzer 모듈의 경우 低电平触发(혹은 Low Level) / 高电平触发(혹은 High Level) 2가지 형태로 표기가 되어 있다. <strong>低电平触发은 DigitalWrite에서 HIGH</strong>일 때 소리가 나며, <strong>高电平触发은 LOW</strong>일 때 소리가 난다.</li>\n<li>모듈 형태가 아닌 단일 부품의 형태라면 연결 핀이 나와 있는 아랫면을 보면 구별할 수 있다. 일반적으로 Active Buzzer는 검은색 실리콘으로 밀폐되어 있으며, Passive Buzzer는 핀의 접합부위가 그대로 노출되어 있다.</li>\n<li>Active Buzzer와 Passive Buzzer를 구별하는 가장 좋은 방법은 사용전압에 해당하는 전압(낮은 전압의 건전지도 가능)의 건전지를 연결시켜보는 것이다. 소리가 나면 Active, 나지 않으면 Passive라고 생각하면 된다.</li>\n</ul>\n<br>\n<br>\n<h3 id=\"active-buzzer\">Active Buzzer<a class=\"anchor\" href=\"#active-buzzer\">#</a></h3>\r\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/Buzzer01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span> () {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span> (<span style=\"color:#ae81ff\">11</span>, OUTPUT);        <span style=\"color:#75715e\">// 11번 핀을 출력으로 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span> () {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span> (<span style=\"color:#ae81ff\">11</span>, HIGH);     <span style=\"color:#75715e\">// 11번 핀 부저 ON\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span> (<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span> (<span style=\"color:#ae81ff\">11</span>, LOW);      <span style=\"color:#75715e\">// 11번 핀 부저 OFF\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span> (<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"과제\">과제<a class=\"anchor\" href=\"#%ea%b3%bc%ec%a0%9c\">#</a></h4>\r\n<p>tact 스위치를 누르면 액티브 부저 소리 울리기</p>\n<br>\n<br>\n<h3 id=\"passive-buzzer-사용\">Passive Buzzer 사용<a class=\"anchor\" href=\"#passive-buzzer-%ec%82%ac%ec%9a%a9\">#</a></h3>\r\n<h4 id=\"주파수\">주파수<a class=\"anchor\" href=\"#%ec%a3%bc%ed%8c%8c%ec%88%98\">#</a></h4>\r\n<ul>\n<li>0옥타브(C0<del>B0): 16</del>31(Hz) (초저주파)</li>\n<li>1옥타브(C1<del>B1): 33</del>62(Hz)</li>\n<li>2옥타브(C2<del>B2): 65</del>123(Hz)\n<ul>\n<li>중저음</li>\n</ul>\n</li>\n<li><strong>3옥타브(C3<del>B3): 131</del>247(Hz)</strong>\n<ul>\n<li>기본 음계에 해당하는 옥타브</li>\n</ul>\n</li>\n<li>4옥타브(C4<del>B4): 262</del>494(Hz)\n<ul>\n<li>일반적으로 고음이라고 불리는 영역</li>\n<li>일반적인 남자의 경우 G4~B4음이 최고음</li>\n<li>음악의 기준음인 **가온 라(A4)(440Hz)**가 속한 영역</li>\n</ul>\n</li>\n<li>5옥타브(C5<del>B5): 523</del>988(Hz)\n<ul>\n<li>일반적인 여성의 경우 D5의 음까지는 낼 수 있고, 고음을 잘 내는 경우 E5까지는 무난함</li>\n</ul>\n</li>\n<li>6옥타브(C6<del>B6): 1047</del>1976(Hz)</li>\n<li>7옥타브(C7<del>B7): 2093</del>3951(Hz)</li>\n<li>8옥타브(C8<del>B8): 4186</del>7902(Hz)</li>\n<li>9옥타브(C9<del>B9): 8372</del>15804(Hz)</li>\n<li>10옥타브(C10<del>B10): 16744</del>31608(Hz) (초음파)</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>한 옥타브 내려가면 주파수가 1/2배, 올라가면 2배가 되고, 한 음계 올라가면 2^(1/12) 배가 된다.</p>\n</li>\n<li>\n<p>0옥타브 중간쯤(20Hz)부터나, 10옥타브 중간쯤(20kHz)부터는 소리가 들리지 않는다. 사람의 가청 영역을 벗어나기 때문. 이를 각각 초저주파, 초음파라고 한다. 어릴 수록 고음이 잘 들리기 때문에, &ldquo;선생님은 못 듣는 벨소리&quot;같은 것을 만들수 있다.</p>\n</li>\n</ul>\n<table>\n  <thead>\n      <tr>\n          <th></th>\n          <th>0</th>\n          <th>1</th>\n          <th>2</th>\n          <th>3</th>\n          <th>4</th>\n          <th>5</th>\n          <th>6</th>\n          <th>7</th>\n          <th>8</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>C(도)</td>\n          <td>16</td>\n          <td>33</td>\n          <td>65</td>\n          <td>131</td>\n          <td>262</td>\n          <td>523</td>\n          <td>1046.5</td>\n          <td>2093</td>\n          <td>4186</td>\n      </tr>\n      <tr>\n          <td>C♯</td>\n          <td>17</td>\n          <td>35</td>\n          <td>69</td>\n          <td>139</td>\n          <td>277</td>\n          <td>554</td>\n          <td>1109</td>\n          <td>2217.5</td>\n          <td>4435</td>\n      </tr>\n      <tr>\n          <td>D(레)</td>\n          <td>18</td>\n          <td>37</td>\n          <td>73</td>\n          <td>147</td>\n          <td>294</td>\n          <td>587</td>\n          <td>1175</td>\n          <td>2349</td>\n          <td>4699</td>\n      </tr>\n      <tr>\n          <td>D♯</td>\n          <td>20</td>\n          <td>39</td>\n          <td>78</td>\n          <td>156</td>\n          <td>311</td>\n          <td>622</td>\n          <td>1244.5</td>\n          <td>2489</td>\n          <td>4978</td>\n      </tr>\n      <tr>\n          <td>E(미)</td>\n          <td>21</td>\n          <td>41</td>\n          <td>82</td>\n          <td>165</td>\n          <td>330</td>\n          <td>659</td>\n          <td>1318.5</td>\n          <td>2637</td>\n          <td>5274</td>\n      </tr>\n      <tr>\n          <td>F(파)</td>\n          <td>22</td>\n          <td>44</td>\n          <td>87</td>\n          <td>175</td>\n          <td>349</td>\n          <td>698.5</td>\n          <td>1397</td>\n          <td>2794</td>\n          <td>5588</td>\n      </tr>\n      <tr>\n          <td>F♯</td>\n          <td>23</td>\n          <td>46</td>\n          <td>92.5</td>\n          <td>185</td>\n          <td>370</td>\n          <td>740</td>\n          <td>1480</td>\n          <td>2960</td>\n          <td>5920</td>\n      </tr>\n      <tr>\n          <td>G(솔)</td>\n          <td>25</td>\n          <td>49</td>\n          <td>98</td>\n          <td>196</td>\n          <td>392</td>\n          <td>784</td>\n          <td>1568</td>\n          <td>3136</td>\n          <td>6272</td>\n      </tr>\n      <tr>\n          <td>G♯</td>\n          <td>26</td>\n          <td>52</td>\n          <td>104</td>\n          <td>208</td>\n          <td>415</td>\n          <td>831</td>\n          <td>1661</td>\n          <td>3322.5</td>\n          <td>6645</td>\n      </tr>\n      <tr>\n          <td>A(라)</td>\n          <td>28</td>\n          <td>55</td>\n          <td>110</td>\n          <td>220</td>\n          <td><strong>440</strong></td>\n          <td>880</td>\n          <td>1760</td>\n          <td>3520</td>\n          <td>7040</td>\n      </tr>\n      <tr>\n          <td>A♯</td>\n          <td>29</td>\n          <td>58</td>\n          <td>116.5</td>\n          <td>233</td>\n          <td>466</td>\n          <td>932</td>\n          <td>1865</td>\n          <td>3729</td>\n          <td>7459</td>\n      </tr>\n      <tr>\n          <td>B(시)</td>\n          <td>31</td>\n          <td>62</td>\n          <td>123.5</td>\n          <td>247</td>\n          <td>494</td>\n          <td>988</td>\n          <td>1975.5</td>\n          <td>3951</td>\n          <td>7902</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"pin-map\">Pin Map<a class=\"anchor\" href=\"#pin-map\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>Arduino</th>\n          <th>Active Buzzer</th>\n          <th>Passive Buzzer</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>11</td>\n          <td>S</td>\n          <td>S</td>\n      </tr>\n      <tr>\n          <td>5V</td>\n          <td>표기없음</td>\n          <td>표기없음</td>\n      </tr>\n      <tr>\n          <td>GND</td>\n          <td>(-)</td>\n          <td>(-)</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"sketch--passive-buzzer\">sketch : Passive Buzzer<a class=\"anchor\" href=\"#sketch--passive-buzzer\">#</a></h4>\r\n<h5 id=\"tone-사용방법\">tone() 사용방법<a class=\"anchor\" href=\"#tone-%ec%82%ac%ec%9a%a9%eb%b0%a9%eb%b2%95\">#</a></h5>\r\n<ul>\n<li>\n<p>tone 함수는 3개의 매개변수(핀, 주파수, 음길이)를 사용하며, 마지막 매개변수(음길이)는 생략 가능하다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">tone</span>(<span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">262</span>, <span style=\"color:#ae81ff\">500</span>);   <span style=\"color:#75715e\">// 11번 핀에 연결된 부저에 C3음을 0.5초 연주\n</span></span></span></code></pre></div></li>\n<li>\n<p>마지막 매개변수를 사용하지 않고 tone을 연속으로 사용하는 경우 주의가 필요하다. 예를들어,</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">tone</span>(<span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">262</span>);   <span style=\"color:#75715e\">// 11번 핀에 연결된 부저에 C3음을 0.5초 연주\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">tone</span>(<span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">294</span>);   <span style=\"color:#75715e\">// 11번 핀에 연결된 부저에 D3음을 0.5초 연주\n</span></span></span></code></pre></div><p>이렇게 tone을 연속으로 사용하면 C3음을 소리낸 이후에, D4음을 내는 것이 아니라 C3음이 계속되므로, noTone함수를 사용하여 소리 출력을 멈추어야 한다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">tone</span>(<span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">262</span>);   <span style=\"color:#75715e\">// 11번 핀에 연결된 부저에 C3음을 0.5초 연주\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">noTone</span>(<span style=\"color:#ae81ff\">11</span>);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">tone</span>(<span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">294</span>);   <span style=\"color:#75715e\">// 11번 핀에 연결된 부저에 D3음을 0.5초 연주\n</span></span></span></code></pre></div></li>\n<li>\n<p>마지막 매개변수를 사용할 때, 중간에 음을 멈추는 구간을 만들려면, delay를 사용한다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">tone</span>(<span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">262</span>, <span style=\"color:#ae81ff\">500</span>);   <span style=\"color:#75715e\">// 11번 핀에 연결된 부저에 C3음을 0.5초 연주\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">600</span>);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">tone</span>(<span style=\"color:#ae81ff\">11</span>, <span style=\"color:#ae81ff\">294</span>, <span style=\"color:#ae81ff\">500</span>);   <span style=\"color:#75715e\">// 11번 핀에 연결된 부저에 D3음을 0.5초 연주\n</span></span></span></code></pre></div><p>C3음을 0.5초 소리낸 후 delay(600) 에 의해 0.6초를 쉬는 것이 아니라, delay(600) 의 시간 중, 0.5초는 C3음을 소리내는 데 사용하고, 나머지 0.1초를 쉰다.</p>\n</li>\n</ul>\n<br>\n<h4 id=\"예시\">예시<a class=\"anchor\" href=\"#%ec%98%88%ec%8b%9c\">#</a></h4>\r\n<h5 id=\"도레미파솔라시도\">도레미파솔라시도<a class=\"anchor\" href=\"#%eb%8f%84%eb%a0%88%eb%af%b8%ed%8c%8c%ec%86%94%eb%9d%bc%ec%8b%9c%eb%8f%84\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> BUZZER_PIN <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>;\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> C_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">261</span>;   <span style=\"color:#75715e\">// 도\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> D_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">294</span>;   <span style=\"color:#75715e\">// 레\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> E_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">330</span>;   <span style=\"color:#75715e\">// 미\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> F_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">349</span>;   <span style=\"color:#75715e\">// 파\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> G_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">392</span>;   <span style=\"color:#75715e\">// 솔\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> A_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">440</span>;   <span style=\"color:#75715e\">// 라\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> B_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">494</span>;   <span style=\"color:#75715e\">// 시\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">tone</span>(BUZZER_PIN, C_4);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">tone</span>(BUZZER_PIN, D_4);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">tone</span>(BUZZER_PIN, E_4);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">tone</span>(BUZZER_PIN, F_4);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">tone</span>(BUZZER_PIN, G_4);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">tone</span>(BUZZER_PIN, A_4);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">tone</span>(BUZZER_PIN, B_4);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">noTone</span>(BUZZER_PIN);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"노래-연주-super-mario-theme\">노래 연주: Super Mario Theme<a class=\"anchor\" href=\"#%eb%85%b8%eb%9e%98-%ec%97%b0%ec%a3%bc-super-mario-theme\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/* Arduino Mario Bros Tunes With Piezo Buzzer and PWM\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"> \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">             by : ARDUTECH\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  Connect the positive side of the Buzzer to pin 11,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  then the negative side to a 1k ohm resistor. Connect\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  the other side of the 1 k ohm resistor to\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  ground(GND) pin on the Arduino.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  */</span>\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_B0  31\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_C1  33\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_CS1 35\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_D1  37\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_DS1 39\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_E1  41\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_F1  44\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_FS1 46\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_G1  49\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_GS1 52\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_A1  55\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_AS1 58\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_B1  62\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_C2  65\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_CS2 69\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_D2  73\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_DS2 78\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_E2  82\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_F2  87\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_FS2 93\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_G2  98\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_GS2 104\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_A2  110\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_AS2 117\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_B2  123\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_C3  131\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_CS3 139\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_D3  147\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_DS3 156\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_E3  165\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_F3  175\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_FS3 185\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_G3  196\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_GS3 208\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_A3  220\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_AS3 233\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_B3  247\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_C4  262\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_CS4 277\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_D4  294\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_DS4 311\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_E4  330\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_F4  349\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_FS4 370\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_G4  392\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_GS4 415\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_A4  440\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_AS4 466\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_B4  494\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_C5  523\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_CS5 554\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_D5  587\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_DS5 622\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_E5  659\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_F5  698\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_FS5 740\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_G5  784\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_GS5 831\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_A5  880\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_AS5 932\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_B5  988\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_C6  1047\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_CS6 1109\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_D6  1175\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_DS6 1245\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_E6  1319\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_F6  1397\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_FS6 1480\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_G6  1568\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_GS6 1661\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_A6  1760\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_AS6 1865\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_B6  1976\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_C7  2093\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_CS7 2217\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_D7  2349\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_DS7 2489\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_E7  2637\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_F7  2794\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_FS7 2960\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_G7  3136\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_GS7 3322\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_A7  3520\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_AS7 3729\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_B7  3951\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_C8  4186\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_CS8 4435\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_D8  4699\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define NOTE_DS8 4978\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define melodyPin 11\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Mario main theme melody\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> melody[] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span>  NOTE_E7, NOTE_E7, <span style=\"color:#ae81ff\">0</span>, NOTE_E7,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>, NOTE_C7, NOTE_E7, <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>  NOTE_G7, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>,  <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>  NOTE_G6, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  NOTE_C7, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, NOTE_G6,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, NOTE_E6, <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>, NOTE_A6, <span style=\"color:#ae81ff\">0</span>, NOTE_B6,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>, NOTE_AS6, NOTE_A6, <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  NOTE_G6, NOTE_E7, NOTE_G7,\n</span></span><span style=\"display:flex;\"><span>  NOTE_A7, <span style=\"color:#ae81ff\">0</span>, NOTE_F7, NOTE_G7,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>, NOTE_E7, <span style=\"color:#ae81ff\">0</span>, NOTE_C7,\n</span></span><span style=\"display:flex;\"><span>  NOTE_D7, NOTE_B6, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  NOTE_C7, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, NOTE_G6,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, NOTE_E6, <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>, NOTE_A6, <span style=\"color:#ae81ff\">0</span>, NOTE_B6,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>, NOTE_AS6, NOTE_A6, <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  NOTE_G6, NOTE_E7, NOTE_G7,\n</span></span><span style=\"display:flex;\"><span>  NOTE_A7, <span style=\"color:#ae81ff\">0</span>, NOTE_F7, NOTE_G7,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>, NOTE_E7, <span style=\"color:#ae81ff\">0</span>, NOTE_C7,\n</span></span><span style=\"display:flex;\"><span>  NOTE_D7, NOTE_B6, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Mario main theme tempo\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> tempo[] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">9</span>, <span style=\"color:#ae81ff\">9</span>, <span style=\"color:#ae81ff\">9</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">9</span>, <span style=\"color:#ae81ff\">9</span>, <span style=\"color:#ae81ff\">9</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Underworld melody\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> underworld_melody[] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span>  NOTE_C4, NOTE_C5, NOTE_A3, NOTE_A4,\n</span></span><span style=\"display:flex;\"><span>  NOTE_AS3, NOTE_AS4, <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>  NOTE_C4, NOTE_C5, NOTE_A3, NOTE_A4,\n</span></span><span style=\"display:flex;\"><span>  NOTE_AS3, NOTE_AS4, <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>  NOTE_F3, NOTE_F4, NOTE_D3, NOTE_D4,\n</span></span><span style=\"display:flex;\"><span>  NOTE_DS3, NOTE_DS4, <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>  NOTE_F3, NOTE_F4, NOTE_D3, NOTE_D4,\n</span></span><span style=\"display:flex;\"><span>  NOTE_DS3, NOTE_DS4, <span style=\"color:#ae81ff\">0</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>, NOTE_DS4, NOTE_CS4, NOTE_D4,\n</span></span><span style=\"display:flex;\"><span>  NOTE_CS4, NOTE_DS4,\n</span></span><span style=\"display:flex;\"><span>  NOTE_DS4, NOTE_GS3,\n</span></span><span style=\"display:flex;\"><span>  NOTE_G3, NOTE_CS4,\n</span></span><span style=\"display:flex;\"><span>  NOTE_C4, NOTE_FS4, NOTE_F4, NOTE_E3, NOTE_AS4, NOTE_A4,\n</span></span><span style=\"display:flex;\"><span>  NOTE_GS4, NOTE_DS4, NOTE_B3,\n</span></span><span style=\"display:flex;\"><span>  NOTE_AS3, NOTE_A3, NOTE_GS3,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//Underwolrd tempo\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> underworld_tempo[] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">6</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">3</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">6</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">3</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">6</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">3</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">12</span>, <span style=\"color:#ae81ff\">6</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">6</span>, <span style=\"color:#ae81ff\">18</span>, <span style=\"color:#ae81ff\">18</span>, <span style=\"color:#ae81ff\">18</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">6</span>, <span style=\"color:#ae81ff\">6</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">6</span>, <span style=\"color:#ae81ff\">6</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">6</span>, <span style=\"color:#ae81ff\">6</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">18</span>, <span style=\"color:#ae81ff\">18</span>, <span style=\"color:#ae81ff\">18</span>, <span style=\"color:#ae81ff\">18</span>, <span style=\"color:#ae81ff\">18</span>, <span style=\"color:#ae81ff\">18</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">10</span>, <span style=\"color:#ae81ff\">10</span>, <span style=\"color:#ae81ff\">10</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">10</span>, <span style=\"color:#ae81ff\">10</span>, <span style=\"color:#ae81ff\">10</span>,\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">3</span>\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>(<span style=\"color:#66d9ef\">void</span>)\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(melodyPin, OUTPUT);  <span style=\"color:#75715e\">// buzzer\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">pinMode</span>(<span style=\"color:#ae81ff\">13</span>, OUTPUT);         <span style=\"color:#75715e\">// led indicator when singing a note\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//sing the tunes\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">sing</span>(<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">sing</span>(<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">sing</span>(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> song <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">sing</span>(<span style=\"color:#66d9ef\">int</span> s) {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// iterate over the notes of the melody:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  song <span style=\"color:#f92672\">=</span> s;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span> (song <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">2</span>) {\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34; &#39;Underworld Theme&#39;&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">int</span> size <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">sizeof</span>(underworld_melody) <span style=\"color:#f92672\">/</span> <span style=\"color:#66d9ef\">sizeof</span>(<span style=\"color:#66d9ef\">int</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> thisNote <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; thisNote <span style=\"color:#f92672\">&lt;</span> size; thisNote<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">// to calculate the note duration, take one second\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">// divided by the note type.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//e.g. quarter note = 1000 / 4, eighth note = 1000/8, etc.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> noteDuration <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1000</span> <span style=\"color:#f92672\">/</span> underworld_tempo[thisNote];\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">buzz</span>(melodyPin, underworld_melody[thisNote], noteDuration);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">// to distinguish the notes, set a minimum time between them.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">// the note&#39;s duration + 30% seems to work well:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> pauseBetweenNotes <span style=\"color:#f92672\">=</span> noteDuration <span style=\"color:#f92672\">*</span> <span style=\"color:#ae81ff\">1.30</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">delay</span>(pauseBetweenNotes);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">// stop the tone playing:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#a6e22e\">buzz</span>(melodyPin, <span style=\"color:#ae81ff\">0</span>, noteDuration);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  } <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34; &#39;Mario Theme&#39;&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">int</span> size <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">sizeof</span>(melody) <span style=\"color:#f92672\">/</span> <span style=\"color:#66d9ef\">sizeof</span>(<span style=\"color:#66d9ef\">int</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">int</span> thisNote <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; thisNote <span style=\"color:#f92672\">&lt;</span> size; thisNote<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">// to calculate the note duration, take one second\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">// divided by the note type.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">//e.g. quarter note = 1000 / 4, eighth note = 1000/8, etc.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> noteDuration <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1000</span> <span style=\"color:#f92672\">/</span> tempo[thisNote];\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">buzz</span>(melodyPin, melody[thisNote], noteDuration);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">// to distinguish the notes, set a minimum time between them.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#75715e\">// the note&#39;s duration + 30% seems to work well:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#66d9ef\">int</span> pauseBetweenNotes <span style=\"color:#f92672\">=</span> noteDuration <span style=\"color:#f92672\">*</span> <span style=\"color:#ae81ff\">1.30</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">delay</span>(pauseBetweenNotes);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#75715e\">// stop the tone playing:\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      <span style=\"color:#a6e22e\">buzz</span>(melodyPin, <span style=\"color:#ae81ff\">0</span>, noteDuration);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">buzz</span>(<span style=\"color:#66d9ef\">int</span> targetPin, <span style=\"color:#66d9ef\">long</span> frequency, <span style=\"color:#66d9ef\">long</span> length) {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(<span style=\"color:#ae81ff\">13</span>, HIGH);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">long</span> delayValue <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">1000000</span> <span style=\"color:#f92672\">/</span> frequency <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">2</span>; <span style=\"color:#75715e\">// calculate the delay value between transitions\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//// 1 second&#39;s worth of microseconds, divided by the frequency, then split in half since\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//// there are two phases to each cycle\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">long</span> numCycles <span style=\"color:#f92672\">=</span> frequency <span style=\"color:#f92672\">*</span> length <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">1000</span>; <span style=\"color:#75715e\">// calculate the number of cycles for proper timing\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">//// multiply frequency, which is really cycles per second, by the number of seconds to\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">//// get the total number of cycles to produce\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span> (<span style=\"color:#66d9ef\">long</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; i <span style=\"color:#f92672\">&lt;</span> numCycles; i<span style=\"color:#f92672\">++</span>) { <span style=\"color:#75715e\">// for the calculated length of time...\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">digitalWrite</span>(targetPin, HIGH); <span style=\"color:#75715e\">// write the buzzer pin high to push out the diaphram\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delayMicroseconds</span>(delayValue); <span style=\"color:#75715e\">// wait for the calculated delay value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">digitalWrite</span>(targetPin, LOW); <span style=\"color:#75715e\">// write the buzzer pin low to pull back the diaphram\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delayMicroseconds</span>(delayValue); <span style=\"color:#75715e\">// wait again or the calculated delay value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(<span style=\"color:#ae81ff\">13</span>, LOW);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"노래-연주-학교종이-땡땡땡\">노래 연주: 학교종이 땡땡땡<a class=\"anchor\" href=\"#%eb%85%b8%eb%9e%98-%ec%97%b0%ec%a3%bc-%ed%95%99%ea%b5%90%ec%a2%85%ec%9d%b4-%eb%95%a1%eb%95%a1%eb%95%a1\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> BUZZER_PIN <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>;\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> C_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">261</span>;   <span style=\"color:#75715e\">// 도\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> D_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">294</span>;   <span style=\"color:#75715e\">// 레\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> E_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">330</span>;   <span style=\"color:#75715e\">// 미\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> F_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">349</span>;   <span style=\"color:#75715e\">// 파\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> G_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">392</span>;   <span style=\"color:#75715e\">// 솔\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> A_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">440</span>;   <span style=\"color:#75715e\">// 라\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> B_4 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">494</span>;   <span style=\"color:#75715e\">// 시\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">typedef</span> <span style=\"color:#66d9ef\">struct</span>  { \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">int</span> tone;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> delay;\n</span></span><span style=\"display:flex;\"><span>} TAD;<span style=\"color:#75715e\">//Tone And Delay\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span> \n</span></span><span style=\"display:flex;\"><span>TAD music[] <span style=\"color:#f92672\">=</span>\n</span></span><span style=\"display:flex;\"><span>  {\n</span></span><span style=\"display:flex;\"><span>    {G_4, <span style=\"color:#ae81ff\">100</span>}, {G_4, <span style=\"color:#ae81ff\">100</span>}, {A_4, <span style=\"color:#ae81ff\">100</span>}, {A_4, <span style=\"color:#ae81ff\">100</span>}, {G_4, <span style=\"color:#ae81ff\">100</span>}, {G_4, <span style=\"color:#ae81ff\">100</span>}, {E_4, <span style=\"color:#ae81ff\">200</span>},\n</span></span><span style=\"display:flex;\"><span>    {G_4, <span style=\"color:#ae81ff\">100</span>}, {G_4, <span style=\"color:#ae81ff\">100</span>}, {E_4, <span style=\"color:#ae81ff\">100</span>}, {E_4, <span style=\"color:#ae81ff\">100</span>}, {D_4, <span style=\"color:#ae81ff\">200</span>}, {G_4, <span style=\"color:#ae81ff\">100</span>}, {G_4, <span style=\"color:#ae81ff\">100</span>},\n</span></span><span style=\"display:flex;\"><span>    {A_4, <span style=\"color:#ae81ff\">100</span>}, {A_4, <span style=\"color:#ae81ff\">100</span>}, {G_4, <span style=\"color:#ae81ff\">100</span>}, {G_4, <span style=\"color:#ae81ff\">100</span>}, {E_4, <span style=\"color:#ae81ff\">200</span>}, {G_4, <span style=\"color:#ae81ff\">100</span>}, {E_4, <span style=\"color:#ae81ff\">100</span>},\n</span></span><span style=\"display:flex;\"><span>    {D_4, <span style=\"color:#ae81ff\">100</span>}, {E_4, <span style=\"color:#ae81ff\">100</span>}, {C_4, <span style=\"color:#ae81ff\">200</span>}\n</span></span><span style=\"display:flex;\"><span>  };\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> musicLen;\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  musicLen <span style=\"color:#f92672\">=</span> <span style=\"color:#66d9ef\">sizeof</span>(music) <span style=\"color:#f92672\">/</span> <span style=\"color:#66d9ef\">sizeof</span>(TAD);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; i <span style=\"color:#f92672\">&lt;</span> musicLen; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">tone</span>(BUZZER_PIN, music[i].tone);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(music[i].delay <span style=\"color:#f92672\">*</span> <span style=\"color:#ae81ff\">5</span>);\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">noTone</span>(BUZZER_PIN);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">30</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">noTone</span>(BUZZER_PIN);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"과제-1\">과제<a class=\"anchor\" href=\"#%ea%b3%bc%ec%a0%9c-1\">#</a></h4>\r\n<ul>\n<li>크리스마스 캐롤 만들어보기</li>\n<li>크리스마스 캐롤 연주시에, 음이 바뀔때마다 신호등 LED점멸 바꿔보기</li>\n</ul>\n<br>\n<br>\n<h3 id=\"미니-피아노-만들기\">미니 피아노 만들기<a class=\"anchor\" href=\"#%eb%af%b8%eb%8b%88-%ed%94%bc%ec%95%84%eb%85%b8-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h3>\r\n<p>패시브 부저와 스위치를 사용하여 미니 피아노를 만들어보자.</p>\n<br>\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/switch11.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> BUZZER_PIN <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//                       도   레   미    파   솔   라   시\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//                       C4   D4   E4   F4   G4   A4   B4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> octave_4[<span style=\"color:#ae81ff\">9</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">261</span>, <span style=\"color:#ae81ff\">294</span>, <span style=\"color:#ae81ff\">330</span>, <span style=\"color:#ae81ff\">349</span>, <span style=\"color:#ae81ff\">392</span>, <span style=\"color:#ae81ff\">440</span>, <span style=\"color:#ae81ff\">494</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// tact switch pin 2~8 for Keyboard\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">2</span>; i<span style=\"color:#f92672\">&lt;=</span><span style=\"color:#ae81ff\">8</span>; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">pinMode</span>(i, INPUT_PULLUP);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">2</span>; i<span style=\"color:#f92672\">&lt;=</span><span style=\"color:#ae81ff\">8</span>; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(<span style=\"color:#a6e22e\">digitalRead</span>(i) <span style=\"color:#f92672\">==</span> HIGH) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">tone</span>(BUZZER_PIN, octave_4[i]);\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>  }  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">noTone</span>(BUZZER_PIN);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"과제-2\">과제<a class=\"anchor\" href=\"#%ea%b3%bc%ec%a0%9c-2\">#</a></h4>\r\n<p>2<del>3명의 학생이 모여 2</del>3 옥타브를 사용하는 피아노 연주곡 만들어보기</p>\n<br>\n<br>\n"}{"uri":"http://localhost:1313/posts/arduino-%ED%82%A4%ED%8C%A8%EB%93%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/","title":"Arduino, 키패드 사용하기","content":"<h3 id=\"44-매트릭스-키보드\">4×4 매트릭스 키보드<a class=\"anchor\" href=\"#44-%eb%a7%a4%ed%8a%b8%eb%a6%ad%ec%8a%a4-%ed%82%a4%eb%b3%b4%eb%93%9c\">#</a></h3>\r\n<p>키패드 입력값을 시리얼 모니터로 출력해보자.</p>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/keypad-01.jpg\" alt=\"\" /></p>\n<br>\n<h4 id=\"pin-map\">Pin Map<a class=\"anchor\" href=\"#pin-map\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>Arduino</th>\n          <th>Keypad</th>\n          <th>일부 Keypad의 경우</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>2</td>\n          <td>1</td>\n          <td>8</td>\n      </tr>\n      <tr>\n          <td>3</td>\n          <td>2</td>\n          <td>7</td>\n      </tr>\n      <tr>\n          <td>4</td>\n          <td>3</td>\n          <td>6</td>\n      </tr>\n      <tr>\n          <td>5</td>\n          <td>4</td>\n          <td>5</td>\n      </tr>\n      <tr>\n          <td>6</td>\n          <td>5</td>\n          <td>4</td>\n      </tr>\n      <tr>\n          <td>7</td>\n          <td>6</td>\n          <td>3</td>\n      </tr>\n      <tr>\n          <td>8</td>\n          <td>7</td>\n          <td>2</td>\n      </tr>\n      <tr>\n          <td>9</td>\n          <td>8</td>\n          <td>1</td>\n      </tr>\n  </tbody>\n</table>\n<blockquote class='book-hint '>\r\n<p>주의 : Keypad 제조회사에 따라 통상적인 배선 순서와는 반대로 해야하는 경우도 있다. 키패드의 단자에 단자번호가 적혀있지 않으므로, 일단 통상적인 배선순서에 따라 연결해보고 시리얼 모니터를 통해 출력되는 값을 보고 확인해야 한다.</p></blockquote><br>\n<br>\n<h3 id=\"라이브러리-추가하기\">라이브러리 추가하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%b6%94%ea%b0%80%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>Keypad 라이브러리는 아두이노 IDE에 기본으로 포함되어 있지 않으므로, 컴파일 전에 라이브러리를 추가한다.</p>\n<p>1. <strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt; <strong>라이브러리 매니저</strong></p>\n<ul>\n<li>검색창에서 keypad 검색</li>\n<li>Keypad by Mark Stanley, Alexander Brevig 라이브러리 설치</li>\n</ul>\n<p>2. <strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong> 에서 Keypad를 선택하면</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Keypad.h&gt;</span></span></span></code></pre></div><ul>\n<li>라이브러리가 스케치에 추가된다.</li>\n</ul>\n<br>\n<br>\n<h3 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h3>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Keypad.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> byte ROWS <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">4</span>;      <span style=\"color:#75715e\">//배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">const</span> byte COLS <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">4</span>;      <span style=\"color:#75715e\">//배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">char</span> keys[ROWS][COLS] <span style=\"color:#f92672\">=</span> { <span style=\"color:#75715e\">//배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  {<span style=\"color:#e6db74\">&#39;1&#39;</span>,<span style=\"color:#e6db74\">&#39;2&#39;</span>,<span style=\"color:#e6db74\">&#39;3&#39;</span>,<span style=\"color:#e6db74\">&#39;A&#39;</span>},\n</span></span><span style=\"display:flex;\"><span>  {<span style=\"color:#e6db74\">&#39;4&#39;</span>,<span style=\"color:#e6db74\">&#39;5&#39;</span>,<span style=\"color:#e6db74\">&#39;6&#39;</span>,<span style=\"color:#e6db74\">&#39;B&#39;</span>},\n</span></span><span style=\"display:flex;\"><span>  {<span style=\"color:#e6db74\">&#39;7&#39;</span>,<span style=\"color:#e6db74\">&#39;8&#39;</span>,<span style=\"color:#e6db74\">&#39;9&#39;</span>,<span style=\"color:#e6db74\">&#39;C&#39;</span>},\n</span></span><span style=\"display:flex;\"><span>  {<span style=\"color:#e6db74\">&#39;*&#39;</span>,<span style=\"color:#e6db74\">&#39;0&#39;</span>,<span style=\"color:#e6db74\">&#39;#&#39;</span>,<span style=\"color:#e6db74\">&#39;D&#39;</span>}\n</span></span><span style=\"display:flex;\"><span>};\n</span></span><span style=\"display:flex;\"><span>byte rowPins[ROWS] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">9</span>, <span style=\"color:#ae81ff\">8</span>, <span style=\"color:#ae81ff\">7</span>, <span style=\"color:#ae81ff\">6</span>}; <span style=\"color:#75715e\">//핀 지정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>byte colPins[COLS] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">5</span>, <span style=\"color:#ae81ff\">4</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">2</span>}; <span style=\"color:#75715e\">//핀 지정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>Keypad keypad <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">Keypad</span>( <span style=\"color:#a6e22e\">makeKeymap</span>(keys), rowPins, colPins, ROWS, COLS );\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>(){\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);  <span style=\"color:#75715e\">//시리얼 통신 9600\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>(){\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">char</span> key <span style=\"color:#f92672\">=</span> keypad.<span style=\"color:#a6e22e\">getKey</span>();  <span style=\"color:#75715e\">//읽어온 값을 key에 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span> (key){\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(key);  <span style=\"color:#75715e\">//key값을 시리얼 모니터에 출력한다\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<p><strong>툴</strong>&gt; <strong>시리얼 모니터</strong>(혹은 Ctrl-Shift-M) 에서 확인한다.</p>\n"}{"uri":"http://localhost:1313/posts/arduino-ir-%EB%A6%AC%EB%AA%A8%EC%BB%A8/","title":"Arduino, IR 리모컨","content":"<p>생활속에서 가장 밀접하게 쓰이는 IR(Infra Red, 적외선) 리모컨의 사용에 대해서 알아본다. 리모컨 작동을 위해서는 기본적으로 IR 신호를 내보내는 리모컨본체와 이 본체에서 내보내는 신호를 받아들이는 IR 리시버가 필요하다.</p>\n<br>\n<h3 id=\"기본-사용법\">기본 사용법<a class=\"anchor\" href=\"#%ea%b8%b0%eb%b3%b8-%ec%82%ac%ec%9a%a9%eb%b2%95\">#</a></h3>\r\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><figure class=\"center\"><img src=\"/image/remote.png\" width=\"80%\">\n</figure>\n       <figure class=\"center\"><img src=\"/image/remote-controller.png\">\n       </figure>\n</p>\n<p>위 그림에서 IR 리시버에 있는 핀은, IR모듈이 아닌 단일 부품형태의 리시버 일때 핀의 순서이다.</p>\n<br>\n<h5 id=\"ir-리시버-모듈을-사용하는-경우\">IR 리시버 모듈을 사용하는 경우<a class=\"anchor\" href=\"#ir-%eb%a6%ac%ec%8b%9c%eb%b2%84-%eb%aa%a8%eb%93%88%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h5>\r\n<p>아두이노 학습용으로 판매하는 IR 리시버는 브레드보드에 바로 붙일 수 있도록 조그만 PCB가 달린 모듈의 형태로 판매되는 경우가 많으며, 이 경우에는 PCB보드에 써있는 글씨를 보고 각 핀에 맞게 아두이노에 연결해야한다. 문제는 PCB에 어느 핀인지를 나타내는 글자가 잘 안보인다는 것!</p>\n<ul>\n<li>Signal : PCB에 S라고 표기되어 있는 쪽</li>\n<li>VCC : 대부분 가운데에 있는 경우가 많았음</li>\n<li>GND : S라고 표기된 부분의 반대쪽이라고 생각하면 된다. (-) 마이너스 표기가 작게 되어 있음</li>\n</ul>\n<br>\n<h4 id=\"pin-map\">Pin Map<a class=\"anchor\" href=\"#pin-map\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>Arduino</th>\n          <th>IR Reciever 모듈 사용시</th>\n          <th>IR Reciever 단일부품</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>2</td>\n          <td>S (Signal)</td>\n          <td>(둥근 모양을 마주보고) 왼쪽</td>\n      </tr>\n      <tr>\n          <td>5V</td>\n          <td>표기 되어 있지 않음</td>\n          <td>(둥근 모양을 마주보고) 오른쪽</td>\n      </tr>\n      <tr>\n          <td>GND</td>\n          <td>-</td>\n          <td>(둥근 모양을 마주보고) 가운데</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"라이브러리-준비하기\">라이브러리 준비하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%a4%80%eb%b9%84%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ul>\n<li>\n<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt; <strong>라이브러리 매니저</strong></p>\n<ul>\n<li>\n<p>검색어 irremote 입력</p>\n</li>\n<li>\n<p>&ldquo;IRremote by Armin Joachimsmeyer&rdquo; 라이브러리 설치/업데이트</p>\n</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/image/remote-library.png\" alt=\"\" /></p>\n<ul>\n<li><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>IRremote</strong> 를 선택하면, IR remote 기능을 사용하는데 필요한 라이브러리가 스케치에 include 된다.</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;IRremote.h&gt;</span></span></span></code></pre></div><br>\n<h4 id=\"리모컨-버튼의-고유값-알아내기\">리모컨 버튼의 고유값 알아내기<a class=\"anchor\" href=\"#%eb%a6%ac%eb%aa%a8%ec%bb%a8-%eb%b2%84%ed%8a%bc%ec%9d%98-%ea%b3%a0%ec%9c%a0%ea%b0%92-%ec%95%8c%ec%95%84%eb%82%b4%ea%b8%b0\">#</a></h4>\r\n<ul>\n<li>old MSB-first 32bit IR data code</li>\n<li>new LSB-first 32bit IR data code</li>\n</ul>\n<p>리모컨 코드값은 위의 2가지 형태로 구분된다. 여기서는 기본적으로 MSB-first 방식을 사용하도록 한다. 아래 스케치를 이용하면 간단하게 MSB-first code 값만 출력된다. (시리얼 모니터 Baudrate 115200)</p>\n<br>\n<h5 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;IRremote.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> RECV_PIN  <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;                       <span style=\"color:#75715e\">// IR 리시버 핀 설정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>IRrecv <span style=\"color:#a6e22e\">irrecv</span>(RECV_PIN);                 <span style=\"color:#75715e\">// IR 리시버 선언\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>decode_results results;                  <span style=\"color:#75715e\">// 수신결과 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">115200</span>);\n</span></span><span style=\"display:flex;\"><span>  irrecv.<span style=\"color:#a6e22e\">enableIRIn</span>();                   <span style=\"color:#75715e\">// IR 리시버 시작\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(irrecv.<span style=\"color:#a6e22e\">decode</span>(<span style=\"color:#f92672\">&amp;</span>results)) {          <span style=\"color:#75715e\">// 리시버가 받은 값이 있으면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;0x&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(results.value, HEX);  <span style=\"color:#75715e\">// 버튼 HEX값을 콘솔에 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    irrecv.<span style=\"color:#a6e22e\">resume</span>();                     <span style=\"color:#75715e\">// 다음 값을 받기 위해 준비\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h5 id=\"serial-monitor\">serial monitor<a class=\"anchor\" href=\"#serial-monitor\">#</a></h5>\r\n<p><img src=\"/image/remote-hex2.png\" alt=\"\" /></p>\n<p>출력값 중에서 앞부분의 <strong>0x</strong>를 제외한 6자리의 값(아래 그림에서 <strong>FFA25D</strong>)이 방금 누른 버튼의 고유 값이다.</p>\n<br>\n<h5 id=\"리모컨-고유값\">리모컨 고유값<a class=\"anchor\" href=\"#%eb%a6%ac%eb%aa%a8%ec%bb%a8-%ea%b3%a0%ec%9c%a0%ea%b0%92\">#</a></h5>\r\n<p>보유하고 있는 리모컨(XA5-14) 제품의 경우, 리모컨 타입은 NEC타입이며 각 버튼별 HEX값은 아래와 같다.</p>\n<table>\n  <thead>\n      <tr>\n          <th>Remote Button</th>\n          <th>unsigned int data</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>1</td>\n          <td>0xFFA25D</td>\n      </tr>\n      <tr>\n          <td>2</td>\n          <td>0XFF629D</td>\n      </tr>\n      <tr>\n          <td>3</td>\n          <td>0XFFE21D</td>\n      </tr>\n      <tr>\n          <td>4</td>\n          <td>0XFF22DD</td>\n      </tr>\n      <tr>\n          <td>5</td>\n          <td>0XFF02FD</td>\n      </tr>\n      <tr>\n          <td>6</td>\n          <td>0XFFC23D</td>\n      </tr>\n      <tr>\n          <td>7</td>\n          <td>0XFFE01F</td>\n      </tr>\n      <tr>\n          <td>8</td>\n          <td>0XFFA857</td>\n      </tr>\n      <tr>\n          <td>9</td>\n          <td>0XFF906F</td>\n      </tr>\n      <tr>\n          <td>0</td>\n          <td>0XFF9867</td>\n      </tr>\n      <tr>\n          <td>*</td>\n          <td>0XFF6897</td>\n      </tr>\n      <tr>\n          <td>#</td>\n          <td>0XFFB04F</td>\n      </tr>\n      <tr>\n          <td>▲</td>\n          <td>0XFF18E7</td>\n      </tr>\n      <tr>\n          <td>▼</td>\n          <td>0XFFA4B5</td>\n      </tr>\n      <tr>\n          <td>◀</td>\n          <td>0XFF10EF</td>\n      </tr>\n      <tr>\n          <td>▶</td>\n          <td>0XFF5AA5</td>\n      </tr>\n      <tr>\n          <td>OK</td>\n          <td>0XFF38C7</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<br>\n<h3 id=\"리모컨-버튼값-시리얼모니터에-출력하기\">리모컨 버튼값 시리얼모니터에 출력하기<a class=\"anchor\" href=\"#%eb%a6%ac%eb%aa%a8%ec%bb%a8-%eb%b2%84%ed%8a%bc%ea%b0%92-%ec%8b%9c%eb%a6%ac%ec%96%bc%eb%aa%a8%eb%8b%88%ed%84%b0%ec%97%90-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"스케치에서-리모컨-버튼-정의하기\">스케치에서 리모컨 버튼 정의하기<a class=\"anchor\" href=\"#%ec%8a%a4%ec%bc%80%ec%b9%98%ec%97%90%ec%84%9c-%eb%a6%ac%eb%aa%a8%ec%bb%a8-%eb%b2%84%ed%8a%bc-%ec%a0%95%ec%9d%98%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<p>각 버튼의 Code값을 알아냈으면 스케치에서 리모컨의 버튼을 정의한다. 예를 들어, 리모컨 버튼 중에서 &ldquo;1&quot;을 눌렀을 때, 출력되는 HEX값이 &ldquo;0xFFA25D&rdquo; 였다면,</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_1 0xFFA25D</span></span></span></code></pre></div><p>리모컨에 있는 모든 버튼을 위와 같은 방법으로 정의한다. 버튼이 보통 10~20개 정도 되므로 상당히 귀찮은 작업이지만 사용하려는 버튼은 모두 정의를 해야한다. 배열을 통해 정의할 수도 있다. 또한 별도의 리모컨이 없으면 집에서 사용하는 리모컨을 사용해도 된다.</p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;IRremote.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;ir_Lego_PF_BitStreamEncoder.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_CH_M       0xFF6897  </span><span style=\"color:#75715e\">// CH- Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_CH         0xFFB04F  </span><span style=\"color:#75715e\">// CH Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_CH_P       0xFF18E7  </span><span style=\"color:#75715e\">// CH+ Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_PREV       0xFF4AB5  </span><span style=\"color:#75715e\">// PREV Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_NEXT       0xFF10EF  </span><span style=\"color:#75715e\">// NEXT Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_PLAY_PAUSE 0xFF5AA5  </span><span style=\"color:#75715e\">// PLAY PAUSE Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_M          0xFF38C7  </span><span style=\"color:#75715e\">// - (VOL-) Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_P          0xFF38C8  </span><span style=\"color:#75715e\">// + (VOL+) Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_EQ         0xFF38C9  </span><span style=\"color:#75715e\">// EQ Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_100P       0xFF38CA  </span><span style=\"color:#75715e\">// 100+ Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_200P       0xFF38CB  </span><span style=\"color:#75715e\">// 100- Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_0 0xFF9867\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_1 0xFFA25D\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_2 0xFF629D\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_3 0xFFE21D\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_4 0xFF22DD\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_5 0xFF02FD\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_6 0xFFC23D\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_7 0xFFE01F\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_8 0xFFA857\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_9 0xFF906F\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> recvPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span>IRrecv <span style=\"color:#a6e22e\">irrecv</span>(recvPin);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>  irrecv.enableIRIn();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  decode_results results;\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(irrecv.decode(<span style=\"color:#f92672\">&amp;</span>results)) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">switch</span>(results.value) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_CH_M :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;CH-&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_CH :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;CH&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_CH_P :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;CH+&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_PREV :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;PREV&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_NEXT :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;NEXT&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_PLAY_PAUSE :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;PLAY/PAUSE&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_M :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;-&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_P :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;+&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_EQ :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;EQ&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_100P :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;100+&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_200P :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;200+&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_0 :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;0&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_1 :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;1&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_2 :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;2&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_3 :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;3&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_4 :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;4&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_5 :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;5&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_6 :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;6&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_7 :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;7&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_8 :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;8&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_9 :\n</span></span><span style=\"display:flex;\"><span>        Serial.println(<span style=\"color:#e6db74\">&#34;9&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    delay(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>    irrecv.resume();\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"과제-리모컨-계산기-만들기\">과제: 리모컨 계산기 만들기<a class=\"anchor\" href=\"#%ea%b3%bc%ec%a0%9c-%eb%a6%ac%eb%aa%a8%ec%bb%a8-%ea%b3%84%ec%82%b0%ea%b8%b0-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h4>\r\n<br>\n<br>\n<h3 id=\"리모컨으로-서보모터-회전시키기\">리모컨으로 서보모터 회전시키기<a class=\"anchor\" href=\"#%eb%a6%ac%eb%aa%a8%ec%bb%a8%ec%9c%bc%eb%a1%9c-%ec%84%9c%eb%b3%b4%eb%aa%a8%ed%84%b0-%ed%9a%8c%ec%a0%84%ec%8b%9c%ed%82%a4%ea%b8%b0\">#</a></h3>\r\n<p>3개의 리모컨 버튼을 정의하여 각 버튼을 통해 서버모터를 회전시켜 본다.</p>\n<ul>\n<li>초기 위치 90도</li>\n<li>Left 버튼을 누르면 5도 감소</li>\n<li>Right 버튼을 누르면 5도 증가</li>\n<li>OK 버튼을 누르면 90도 위치로 이동</li>\n</ul>\n<br>\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/remote-servo.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-2\">sketch<a class=\"anchor\" href=\"#sketch-2\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Servo.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>Servo servomotor;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> servomotorPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> a <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;IRremote.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;ir_Lego_PF_BitStreamEncoder.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_1 0xFFA25D\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_2 0xFF629D\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_3 0xFFE21D\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_4 0xFF22DD\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_5 0xFF02FD\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_6 0xFFC23D\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_7 0xFFE01F\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_8 0xFFA857\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_9 0xFF906F\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_0 0xFF9867\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define BTN_A 0xFF6897  </span><span style=\"color:#75715e\">// * Asterisk Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_P 0xFFB04F  </span><span style=\"color:#75715e\">// # Pound Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_U 0xFF18E7  </span><span style=\"color:#75715e\">// Up Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_D 0xFF4AB5  </span><span style=\"color:#75715e\">// Down Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_L 0xFF10EF  </span><span style=\"color:#75715e\">// Left Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_R 0xFF5AA5  </span><span style=\"color:#75715e\">// Right Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define BTN_O 0xFF38C7  </span><span style=\"color:#75715e\">// OK Button\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> recvPin <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;       <span style=\"color:#75715e\">// IR signal 핀\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>IRrecv <span style=\"color:#a6e22e\">irrecv</span>(recvPin);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  servomotor.<span style=\"color:#a6e22e\">attach</span>(servomotorPin);\n</span></span><span style=\"display:flex;\"><span>  irrecv.<span style=\"color:#a6e22e\">enableIRIn</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  decode_results results;\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(irrecv.<span style=\"color:#a6e22e\">decode</span>(<span style=\"color:#f92672\">&amp;</span>results)) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">switch</span>(results.value) {\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_O :       <span style=\"color:#75715e\">// OK버튼을 누르면 90도 위치로\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        a <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">90</span>;\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_L :\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">if</span>(a <span style=\"color:#f92672\">&gt;</span> <span style=\"color:#ae81ff\">5</span>) {\n</span></span><span style=\"display:flex;\"><span>          a <span style=\"color:#f92672\">=</span> a <span style=\"color:#f92672\">-</span> <span style=\"color:#ae81ff\">5</span>;     <span style=\"color:#75715e\">// L버튼을 누르면 서버모터 5도씩 감소\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        }\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">else</span>\n</span></span><span style=\"display:flex;\"><span>        {\n</span></span><span style=\"display:flex;\"><span>          a <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>        }\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>      <span style=\"color:#66d9ef\">case</span> BTN_R :\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">if</span>(a <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">175</span>) {\n</span></span><span style=\"display:flex;\"><span>          a <span style=\"color:#f92672\">=</span> a <span style=\"color:#f92672\">+</span> <span style=\"color:#ae81ff\">5</span>;     <span style=\"color:#75715e\">// R버튼을 누르면 서버모터 5도씩 증가\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        }\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">else</span>\n</span></span><span style=\"display:flex;\"><span>        {\n</span></span><span style=\"display:flex;\"><span>          a <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">180</span>;\n</span></span><span style=\"display:flex;\"><span>        }\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#66d9ef\">break</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    servomotor.<span style=\"color:#a6e22e\">write</span>(a);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);\n</span></span><span style=\"display:flex;\"><span>    irrecv.<span style=\"color:#a6e22e\">resume</span>();\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"lsb-first-32bit-ir-data-code를-사용하려면\">LSB-first 32bit IR data code를 사용하려면<a class=\"anchor\" href=\"#lsb-first-32bit-ir-data-code%eb%a5%bc-%ec%82%ac%ec%9a%a9%ed%95%98%eb%a0%a4%eb%a9%b4\">#</a></h3>\r\n<p>LSB-first 형태의 디코더 데이터를 사용해야하는 경우에는 라이브러리에서 제공하는 설명서(<a href=\"https://arduino-irremote.github.io/Arduino-IRremote/index.html\">IRremote: IRremote Arduino Library</a>)를 우선 숙지하여 사용토록한다. 여기서는 간단한 사용방법만 덧붙인다.</p>\n<ol>\n<li>예제&gt; IRremote&gt; SimpleReceiver를 선택하여 파일을 불러온다.\n<ul>\n<li>SimpleReceiver.ino의 앞부분에, 사용하려는 리모컨의 프로토콜 타입을 선택할 수 있는 부분이 있다.</li>\n<li>아두이노 실습용으로 판매되는 리모컨은 대부분 NEC타입이므로 <strong>변경할 필요가 없다.</strong></li>\n<li>삼성이나 LG 등 집에서 사용하는 리모컨의 HEX값을 알아내려면, 사용하려는 제품의 제조사에 따라 주석처리되는 부분을 적절히 수정한다.</li>\n</ul>\n</li>\n</ol>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_DENON        // Includes Sharp\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_JVC\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_KASEIKYO\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_PANASONIC    // the same as DECODE_KASEIKYO\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_LG\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define DECODE_NEC          </span><span style=\"color:#75715e\">// Includes Apple and Onkyo\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_SAMSUNG\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_SONY\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_RC5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_RC6\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_BOSEWAVE\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_LEGO_PF\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_MAGIQUEST\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_WHYNTER\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_DISTANCE     // universal decoder for pulse width or pulse distance protocols\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">//#define DECODE_HASH         // special decoder for all protocols\n</span></span></span></code></pre></div><ol start=\"2\">\n<li>SimpleReceiver을 열면 PinDefinitionsAndMore.h가 동시에 열린다.\n<ul>\n<li>이 파일은 사용하는 보드에 따라 Signal핀을 연결하는 핀 번호를 정의하고 있다.</li>\n<li>아두이노 UNO의 경우 DEFAULT/AVR 플랫폼으로 정의되어 있으므로 IR Input핀은 2번을 사용한다. (아래 3번과정 참고: 시리얼 모니터를 열면, 연결된 보드에 따라 몇번 핀에 연결해야하는지 출력이 되므로, 이 과정에서 Signal을 어디에 연결해야하는지 확인할 필요는 없다.)</li>\n<li>ESP32의 경우 IR Input이 GPIO 15번으로 지정되어 있다.</li>\n</ul>\n</li>\n</ol>\n<p><img src=\"/image/remote-pindefinitionandmore.png\" alt=\"\" /></p>\n<ol start=\"3\">\n<li>스케치를 업로드 한 후, 시리얼 모니터를 열고 Baud rate를 115200으로 설정한다. (Signal이 연결된 핀의 번호가 맞는지 확인)</li>\n</ol>\n<p><img src=\"/image/remote-serialmonitor.png\" alt=\"\" /></p>\n<ol start=\"4\">\n<li>리모컨의 버튼을 IR수신부를 향하여 누르면, 3줄이 출력됨\n<ul>\n<li>첫번째 라인에 출력되는 Raw-Data 부분에서 앞부분의 <strong>0x</strong>를 제외한 8자리의 값(아래 그림에서 <strong>BA45FF00</strong>)이 방금 누른 버튼의 고유 값이다.</li>\n<li>각 버튼을 차례대로 누르면서 버튼의 고유값을 기록한다. <a href=\"/attach/ir-remote-hex.pdf\">다운로드</a></li>\n</ul>\n</li>\n</ol>\n<p><img src=\"/image/remote-hex.png\" alt=\"\" /></p>\n"}{"uri":"http://localhost:1313/posts/arduino-1602-lcd-i2c/","title":"Arduino, 1602 LCD (I2C)","content":"<h3 id=\"1602-lcd-i2c\">1602 LCD (I2C)<a class=\"anchor\" href=\"#1602-lcd-i2c\">#</a></h3>\r\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/1602lcd.png\" alt=\"\" /></p>\n<br>\n<table>\n  <thead>\n      <tr>\n          <th>1602 LCD</th>\n          <th>SDA</th>\n          <th>SCL</th>\n          <th>VCC</th>\n          <th>GND</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>Arduino</td>\n          <td>A4</td>\n          <td>A5</td>\n          <td>5V</td>\n          <td>GND</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"라이브러리-설치하기\">라이브러리 설치하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%84%a4%ec%b9%98%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong></p>\n<ul>\n<li>Wire : 기본 내장 라이브러리</li>\n<li>LiquidCrystal I2C (by Frank de Brabander) 검색하여 설치</li>\n</ul>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// I2C 1602 LCD (연결핀을 바꿀 수 없음)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// VCC-5V / GND-GND / SDA-A4 / SCL-A5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Wire.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal_I2C.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// i2c address 는 칩에 따라 0x20~0x27 혹은 0x3F값을 가짐\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>LiquidCrystal_I2C <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">0x27</span>, <span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">2</span>);  \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">init</span>();               <span style=\"color:#75715e\">// lcd 초기화\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.<span style=\"color:#a6e22e\">backlight</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;I Love Steam!!&#34;</span>);   <span style=\"color:#75715e\">// LCD창에 메시지 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 문자열의 길이 13개를 왼쪽으로 스크롤\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> pCount <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; pCount <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">13</span>; pCount<span style=\"color:#f92672\">++</span>) {  \n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">scrollDisplayLeft</span>();         <span style=\"color:#75715e\">// 왼쪽으로 스크롤\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">700</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 문자열 길이 13열 + 기본 16열 = 29개 위치를 오른쪽으로 스크롤\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> pCount <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; pCount <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">29</span>; pCount<span style=\"color:#f92672\">++</span>) { \n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">scrollDisplayRight</span>();       <span style=\"color:#75715e\">// 오른쪽으로 스크롤\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">700</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 왼쪽으로 16개 위치 스크롤하여 처음 위치로 이동\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> pCount <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; pCount <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">16</span>; pCount<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">scrollDisplayLeft</span>();         <span style=\"color:#75715e\">// 왼쪽으로 스크롤\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">700</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h4 id=\"주의사항\">주의사항<a class=\"anchor\" href=\"#%ec%a3%bc%ec%9d%98%ec%82%ac%ed%95%ad\">#</a></h4>\r\n<ul>\n<li>I2C 모듈에 점퍼선을 뺏다가 다시 끼우는 경우, 정상적인 상황에서도 LCD가 작동하지 않는 경우가 있음 (주로 첫번째라인에 ■■■■■■■■■■■■■■■■ 형태로 출력되는 오류가 발생됨)</li>\n<li>이런 경우에는 배선을 모두 완료한 상태에서 스케치 업로드를 다시 하면 대부분 해결됨</li>\n</ul>\n<br>\n<br>\n<h4 id=\"여러-가지-문자열-출력해보기\">여러 가지 문자열 출력해보기<a class=\"anchor\" href=\"#%ec%97%ac%eb%9f%ac-%ea%b0%80%ec%a7%80-%eb%ac%b8%ec%9e%90%ec%97%b4-%ec%b6%9c%eb%a0%a5%ed%95%b4%eb%b3%b4%ea%b8%b0\">#</a></h4>\r\n<ul>\n<li>첫 번째 행에 I Love Steam!!</li>\n<li>두 번째 행에 본인의 영문이름을 써서 스크롤 해보기</li>\n<li>두 번째 행에 출력하는 방법 : lcd.setCursor(0,1);</li>\n</ul>\n<br>\n<br>\n<h3 id=\"1602-lcd에-ds18b20-온도센서-값-출력하기\">1602 LCD에 DS18b20 온도센서 값 출력하기<a class=\"anchor\" href=\"#1602-lcd%ec%97%90-ds18b20-%ec%98%a8%eb%8f%84%ec%84%bc%ec%84%9c-%ea%b0%92-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/1602lcd-ds18b20.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// DS18b20 Temperature Sensor\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;OneWire.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;DallasTemperature.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define TEMP_PIN 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>OneWire <span style=\"color:#a6e22e\">oneWire</span>(TEMP_PIN);\n</span></span><span style=\"display:flex;\"><span>DallasTemperature <span style=\"color:#a6e22e\">sensors</span>(<span style=\"color:#f92672\">&amp;</span>oneWire);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">float</span> celciusTemperature;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// I2C 1602 LCD (연결핀을 바꿀 수 없음)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// VCC-5V / GND-GND / SDA-A4 / SCL-A5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Wire.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal_I2C.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// i2c address 는 칩에 따라 0x27, 0x3F값을 가짐\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>LiquidCrystal_I2C <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">0x27</span>, <span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">2</span>);  \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);  \n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;DallasTemperature IC Control&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Start up the Temperature Sensor library\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  sensors.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// lcd 초기화\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.<span style=\"color:#a6e22e\">init</span>();    \n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">backlight</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  sensors.<span style=\"color:#a6e22e\">requestTemperatures</span>();\n</span></span><span style=\"display:flex;\"><span>  celciusTemperature <span style=\"color:#f92672\">=</span> sensors.<span style=\"color:#a6e22e\">getTempCByIndex</span>(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Temperature is: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(celciusTemperature);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Temperature : &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(celciusTemperature);\n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;*C&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">2000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/arduino-tm1637-%EB%AA%A8%EB%93%88-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/","title":"Arduino, TM1637 모듈 사용하기","content":"<h3 id=\"tm1637\">TM1637<a class=\"anchor\" href=\"#tm1637\">#</a></h3>\r\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/tm1637-01.png\" alt=\"\" /></p>\n<table>\n  <thead>\n      <tr>\n          <th>TM1637</th>\n          <th>CLK</th>\n          <th>DIO</th>\n          <th>VCC</th>\n          <th>GND</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>Arduino</td>\n          <td>4</td>\n          <td>7</td>\n          <td>5V</td>\n          <td>GND</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"라이브러리-추가하기\">라이브러리 추가하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%b6%94%ea%b0%80%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>파일&gt; 새파일&gt;</li>\n<li><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt;</li>\n</ol>\n<p><img src=\"/image/tm1637-02.png\" alt=\"\" /></p>\n<br>\n<ol start=\"3\">\n<li>라이브러리 매니저 창이 뜨면, 검색란에 “tm1637&quot;를 적어 넣음. tm1637관련 라이브러리가 5~6개정도 검색됨. TM1637 by Avishay Orpaz 라이브러리를 선택하여 설치</li>\n</ol>\n<p><img src=\"/image/tm1637-03.png\" alt=\"\" /></p>\n<p><br><br></p>\n<h3 id=\"tm1637-숫자-표기-방법\">TM1637 숫자 표기 방법<a class=\"anchor\" href=\"#tm1637-%ec%88%ab%ec%9e%90-%ed%91%9c%ea%b8%b0-%eb%b0%a9%eb%b2%95\">#</a></h3>\r\n<pre><code>for TM1637 by Avishay Orpaz library \n   *  A  *\n   F     B\n   *  G  *\n   E     C\n   *  D  *  DP\n</code></pre>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<p>&ldquo;8.8.8.8.&rdquo; → &quot; &quot; → &ldquo;0123&rdquo; → &ldquo;dOnE&rdquo;</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Arduino.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;TM1637Display.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Module connection pins (Digital Pins)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define CLK 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DIO 7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// The amount of time (in milliseconds) between tests\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define TEST_DELAY   2000\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">uint8_t</span> SEG_DONE[] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span>  SEG_B <span style=\"color:#f92672\">|</span> SEG_C <span style=\"color:#f92672\">|</span> SEG_D <span style=\"color:#f92672\">|</span> SEG_E <span style=\"color:#f92672\">|</span> SEG_G,               <span style=\"color:#75715e\">// d\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  SEG_A <span style=\"color:#f92672\">|</span> SEG_B <span style=\"color:#f92672\">|</span> SEG_C <span style=\"color:#f92672\">|</span> SEG_D <span style=\"color:#f92672\">|</span> SEG_E <span style=\"color:#f92672\">|</span> SEG_F,       <span style=\"color:#75715e\">// O\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  SEG_C <span style=\"color:#f92672\">|</span> SEG_E <span style=\"color:#f92672\">|</span> SEG_G,                               <span style=\"color:#75715e\">// n\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  SEG_A <span style=\"color:#f92672\">|</span> SEG_D <span style=\"color:#f92672\">|</span> SEG_E <span style=\"color:#f92672\">|</span> SEG_F <span style=\"color:#f92672\">|</span> SEG_G                <span style=\"color:#75715e\">// E\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  };\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>TM1637Display <span style=\"color:#a6e22e\">display</span>(CLK, DIO);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint8_t</span> data[] <span style=\"color:#f92672\">=</span> { <span style=\"color:#ae81ff\">0xff</span>, <span style=\"color:#ae81ff\">0xff</span>, <span style=\"color:#ae81ff\">0xff</span>, <span style=\"color:#ae81ff\">0xff</span> };\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint8_t</span> blank[] <span style=\"color:#f92672\">=</span> { <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span> };\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setBrightness</span>(<span style=\"color:#ae81ff\">15</span>); <span style=\"color:#75715e\">// 0 ~ 15 (15가 가장 밝음)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// display.setBrightness(0x0f);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// All segments on\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  display.<span style=\"color:#a6e22e\">setSegments</span>(data);            <span style=\"color:#75715e\">// &#34;8.8.8.8.&#34;   \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Selectively set different digits   // &#34;0123&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  data[<span style=\"color:#ae81ff\">0</span>] <span style=\"color:#f92672\">=</span> display.<span style=\"color:#a6e22e\">encodeDigit</span>(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  data[<span style=\"color:#ae81ff\">1</span>] <span style=\"color:#f92672\">=</span> display.<span style=\"color:#a6e22e\">encodeDigit</span>(<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  data[<span style=\"color:#ae81ff\">2</span>] <span style=\"color:#f92672\">=</span> display.<span style=\"color:#a6e22e\">encodeDigit</span>(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  data[<span style=\"color:#ae81ff\">3</span>] <span style=\"color:#f92672\">=</span> display.<span style=\"color:#a6e22e\">encodeDigit</span>(<span style=\"color:#ae81ff\">3</span>);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setSegments</span>(data);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Done!\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  display.<span style=\"color:#a6e22e\">setSegments</span>(SEG_DONE);        <span style=\"color:#75715e\">// &#34;dOnE&#34;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"00009999까지-나타내기\">0000~9999까지 나타내기<a class=\"anchor\" href=\"#00009999%ea%b9%8c%ec%a7%80-%eb%82%98%ed%83%80%eb%82%b4%ea%b8%b0\">#</a></h3>\r\n<br>\n<h4 id=\"for-문을-이용하는-방법\">for() 문을 이용하는 방법<a class=\"anchor\" href=\"#for-%eb%ac%b8%ec%9d%84-%ec%9d%b4%ec%9a%a9%ed%95%98%eb%8a%94-%eb%b0%a9%eb%b2%95\">#</a></h4>\r\n<p>먼저 가장 간단하게 for문을 사용하여 0~9999까지의 숫자를 표시해보겠습니다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Arduino.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;TM1637Display.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Module connection pins (Digital Pins)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define CLK 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DIO 7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">uint8_t</span> data[] <span style=\"color:#f92672\">=</span> { <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span> };  <span style=\"color:#75715e\">// 초기 출력값 0000 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> seg3, seg2, seg1, seg0;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>TM1637Display <span style=\"color:#a6e22e\">display</span>(CLK, DIO);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setBrightness</span>(<span style=\"color:#ae81ff\">15</span>);                  <span style=\"color:#75715e\">// 0 ~ 15 (15가 가장 밝음)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// display.setBrightness(0x0f);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>); \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> digitValue <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; digitValue <span style=\"color:#f92672\">&lt;=</span> <span style=\"color:#ae81ff\">9999</span>; digitValue<span style=\"color:#f92672\">++</span>) {     <span style=\"color:#75715e\">// 0~9999까지 1씩 증가시킴\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    seg0 <span style=\"color:#f92672\">=</span> (digitValue <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">1000</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>; <span style=\"color:#75715e\">// 4자리에서 1000의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    seg1 <span style=\"color:#f92672\">=</span> (digitValue <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">100</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;  <span style=\"color:#75715e\">// 4자리에서 100의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    seg2 <span style=\"color:#f92672\">=</span> (digitValue <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">10</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;   <span style=\"color:#75715e\">// 4자리에서 10의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    seg3 <span style=\"color:#f92672\">=</span> digitValue <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;          <span style=\"color:#75715e\">// 4자리에서 1의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>    data[<span style=\"color:#ae81ff\">0</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg0);  <span style=\"color:#75715e\">// 첫번째 FND에 1000의 자리 숫자배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    data[<span style=\"color:#ae81ff\">1</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg1);  <span style=\"color:#75715e\">// 두번째 FND에 100의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    data[<span style=\"color:#ae81ff\">2</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg2);  <span style=\"color:#75715e\">// 세번째 FND에 10의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    data[<span style=\"color:#ae81ff\">3</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg3);  <span style=\"color:#75715e\">// 네번째 FND에 1의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>    display.<span style=\"color:#a6e22e\">setSegments</span>(data);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(digitValue);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>);                       <span style=\"color:#75715e\">// 10ms 마다 카운트\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h4 id=\"millis-함수를-이용하는-방법\">millis() 함수를 이용하는 방법<a class=\"anchor\" href=\"#millis-%ed%95%a8%ec%88%98%eb%a5%bc-%ec%9d%b4%ec%9a%a9%ed%95%98%eb%8a%94-%eb%b0%a9%eb%b2%95\">#</a></h4>\r\n<p>millis() 함수를 이용하여 시간카운트를 통해 0~9999까지 카운트 해보는 방법도 있습니다.</p>\n<p><strong>※ 주의: seg0, seg1, seg2, seg3 등의 변수값이 10<del>15사이의 값을 갖게되면 16진수(A</del>F)로 표현되므로, 각 변수는 10보다 작은 값을 갖도록 해야한다.</strong></p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">extern</span> <span style=\"color:#66d9ef\">volatile</span> <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> timer0_millis;   <span style=\"color:#75715e\">// millis() 리셋을 위한 변수\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Arduino.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;TM1637Display.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Module connection pins (Digital Pins)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define CLK 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DIO 7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> previousTime, currentTime;      <span style=\"color:#75715e\">// 현재시간, 현재시간(ms)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> timeValue;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">uint8_t</span> data[] <span style=\"color:#f92672\">=</span> { <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span> };  <span style=\"color:#75715e\">// 초기 출력값 0000 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> seg3, seg2, seg1, seg0;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>TM1637Display <span style=\"color:#a6e22e\">display</span>(CLK, DIO);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setBrightness</span>(<span style=\"color:#ae81ff\">15</span>);                  <span style=\"color:#75715e\">// 0 ~ 15 (15가 가장 밝음)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// display.setBrightness(0x0f);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>); \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  currentTime <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();                    <span style=\"color:#75715e\">// 현재 시간값을 측정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  if(currentTime - previousTime &gt;= 1000) {   // 현재 시간값을 1s마다 1000씩 증가시킴\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    previousTime = currentTime;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    timeValue = currentTime / 1000;          // 1s 마다 1000씩 증가된 숫자를 1000으로 나누어 줌.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">                                             // (결과적으로 1s마다 1씩 증가된 숫자가 timeValue에 저장됨)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(currentTime <span style=\"color:#f92672\">-</span> previousTime <span style=\"color:#f92672\">&gt;=</span> <span style=\"color:#ae81ff\">100</span>) {    <span style=\"color:#75715e\">// 현재 시간값을 0.1s마다 100씩 증가시킴\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    previousTime <span style=\"color:#f92672\">=</span> currentTime;\n</span></span><span style=\"display:flex;\"><span>    timeValue <span style=\"color:#f92672\">=</span> currentTime <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">100</span>;           <span style=\"color:#75715e\">// 0.1s 마다 100씩 증가된 숫자를 100으로 나누어 줌.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>                                             <span style=\"color:#75715e\">// (결과적으로 0.1s마다 1씩 증가된 숫자가 timeValue에 저장됨)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  if(currentTime - previousTime &gt;= 10) {     // 현재 시간값을 0.01s마다 10씩 증가시킴\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    previousTime = currentTime;\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">    timeValue = currentTime / 10;            // 0.01s 마다 10씩 증가된 숫자를 10으로 나누어 줌.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">                                                (결과적으로 0.01s마다 1씩 증가된 숫자가 timeValue에 저장됨)  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>  \n</span></span><span style=\"display:flex;\"><span>    seg0 <span style=\"color:#f92672\">=</span> (timeValue <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">1000</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;          <span style=\"color:#75715e\">// 현재 시간값 4자리에서 1000의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    seg1 <span style=\"color:#f92672\">=</span> (timeValue <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">100</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;           <span style=\"color:#75715e\">// 현재 시간값 4자리에서 100의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    seg2 <span style=\"color:#f92672\">=</span> (timeValue <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">10</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;            <span style=\"color:#75715e\">// 현재 시간값 4자리에서 10의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\tseg3 <span style=\"color:#f92672\">=</span> timeValue <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;                   <span style=\"color:#75715e\">// 현재 시간값 4자리에서 1의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>    data[<span style=\"color:#ae81ff\">0</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg0);       <span style=\"color:#75715e\">// 첫번째 Segment에 1000의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    data[<span style=\"color:#ae81ff\">1</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg1);       <span style=\"color:#75715e\">// 두번째 Segment에 100의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    data[<span style=\"color:#ae81ff\">2</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg2);       <span style=\"color:#75715e\">// 세번째 Segment에 10의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    data[<span style=\"color:#ae81ff\">3</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg3);       <span style=\"color:#75715e\">// 네번째 Segment에 1의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>    display.<span style=\"color:#a6e22e\">setSegments</span>(data);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(timeValue);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(currentTime<span style=\"color:#f92672\">&gt;=</span><span style=\"color:#ae81ff\">1000000</span>) {                  <span style=\"color:#75715e\">// 1,000,000ms(1000초) 후 millis() 리셋\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    timer0_millis <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>    previousTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"millis-함수를-이용하여-분초-시계-만들기\">millis() 함수를 이용하여 (분:초) 시계 만들기<a class=\"anchor\" href=\"#millis-%ed%95%a8%ec%88%98%eb%a5%bc-%ec%9d%b4%ec%9a%a9%ed%95%98%ec%97%ac-%eb%b6%84%ec%b4%88-%ec%8b%9c%ea%b3%84-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h3>\r\n<p><strong>※ 주의: seg0, seg1, seg2, seg3 등의 변수값이 10<del>15사이의 값을 갖게되면 16진수(A</del>F)로 표현되므로, 각 변수는 10보다 작은 값을 갖도록 해야한다.</strong></p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">extern</span> <span style=\"color:#66d9ef\">volatile</span> <span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> timer0_millis;   <span style=\"color:#75715e\">// millis() 리셋을 위한 변수\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Arduino.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;TM1637Display.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Module connection pins (Digital Pins)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define CLK 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DIO 7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">unsigned</span> <span style=\"color:#66d9ef\">long</span> previousTime, currentTime;      <span style=\"color:#75715e\">// 현재시간, 현재시간(ms)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> timeValue;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">uint8_t</span> data[] <span style=\"color:#f92672\">=</span> { <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span> };  <span style=\"color:#75715e\">// 초기 출력값 0000\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">uint8_t</span> segto;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> seg3, seg2, seg1, seg0;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> initTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">5948</span>;                          <span style=\"color:#75715e\">// 초기 시간 59분 48초\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>TM1637Display <span style=\"color:#a6e22e\">display</span>(CLK, DIO);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setBrightness</span>(<span style=\"color:#ae81ff\">7</span>);                   <span style=\"color:#75715e\">// 0 ~ 15 (15가 가장 밝음)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// display.setBrightness(0x0f);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  seg0 <span style=\"color:#f92672\">=</span> (initTime <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">1000</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;              <span style=\"color:#75715e\">// 초기 시간값 4자리에서 1000의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  seg1 <span style=\"color:#f92672\">=</span> (initTime <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">100</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;               <span style=\"color:#75715e\">// 초기 시간값 4자리에서 100의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  seg2 <span style=\"color:#f92672\">=</span> (initTime <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">10</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;                <span style=\"color:#75715e\">// 초기 시간값 4자리에서 10의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  seg3 <span style=\"color:#f92672\">=</span> initTime <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;                       <span style=\"color:#75715e\">// 초기 시간값 4자리에서 1의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>); \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  currentTime <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">millis</span>();                     <span style=\"color:#75715e\">// 현재 시간값을 측정\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(currentTime <span style=\"color:#f92672\">-</span> previousTime <span style=\"color:#f92672\">&gt;=</span> <span style=\"color:#ae81ff\">1000</span>) {    <span style=\"color:#75715e\">// 현재 시간값을 0.1s마다 100씩 증가시킴\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    previousTime <span style=\"color:#f92672\">=</span> currentTime;\n</span></span><span style=\"display:flex;\"><span>    timeValue <span style=\"color:#f92672\">=</span> currentTime <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">1000</span>;           <span style=\"color:#75715e\">// 0.1s 마다 100씩 증가된 숫자를 100으로 나누어 줌.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>                                              <span style=\"color:#75715e\">// (결과적으로 0.1s마다 1씩 증가된 숫자가 timeValue에 저장됨)  \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    seg3<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(seg3 <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">10</span>) {\n</span></span><span style=\"display:flex;\"><span>      seg3 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>      seg2<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(seg2 <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">6</span> <span style=\"color:#f92672\">&amp;&amp;</span> seg3 <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>      seg2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>      seg1<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(seg1 <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">10</span>) {\n</span></span><span style=\"display:flex;\"><span>      seg1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>      seg0<span style=\"color:#f92672\">++</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(seg0 <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">6</span> <span style=\"color:#f92672\">&amp;&amp;</span> seg1 <span style=\"color:#f92672\">==</span> <span style=\"color:#ae81ff\">0</span>) {\n</span></span><span style=\"display:flex;\"><span>      seg0 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>      seg1 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>      seg2 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>      seg3 <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    data[<span style=\"color:#ae81ff\">0</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg0);         <span style=\"color:#75715e\">// 첫번째 Segment에 1000의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    data[<span style=\"color:#ae81ff\">1</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg1);         <span style=\"color:#75715e\">// 두번째 Segment에 100의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    data[<span style=\"color:#ae81ff\">2</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg2);         <span style=\"color:#75715e\">// 세번째 Segment에 10의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    data[<span style=\"color:#ae81ff\">3</span>]<span style=\"color:#f92672\">=</span>display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg3);         <span style=\"color:#75715e\">// 네번째 Segment에 1의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#75715e\">// 0.5초마다 콜론 깜박이기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    segto <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0x80</span> <span style=\"color:#f92672\">|</span> display.<span style=\"color:#a6e22e\">encodeDigit</span>(seg1);  <span style=\"color:#75715e\">// 분과 초사이의 콜론(:) 표시\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    display.<span style=\"color:#a6e22e\">setSegments</span>(<span style=\"color:#f92672\">&amp;</span>segto,<span style=\"color:#ae81ff\">1</span>,<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);                                <span style=\"color:#75715e\">// 깜박임 딜레이\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    display.<span style=\"color:#a6e22e\">setSegments</span>(data);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">500</span>);                                <span style=\"color:#75715e\">// 깜박임 딜레이\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(currentTime<span style=\"color:#f92672\">&gt;=</span><span style=\"color:#ae81ff\">86400000</span>) {                  <span style=\"color:#75715e\">// 86,400,000ms(86,400초 = 24시간*60분/시간*60분/초) 후 millis() 리셋\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    timer0_millis <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>    previousTime <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"다양한-표현방법-익히기\">다양한 표현방법 익히기<a class=\"anchor\" href=\"#%eb%8b%a4%ec%96%91%ed%95%9c-%ed%91%9c%ed%98%84%eb%b0%a9%eb%b2%95-%ec%9d%b5%ed%9e%88%ea%b8%b0\">#</a></h3>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Arduino.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;TM1637Display.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Module connection pins (Digital Pins)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define CLK 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DIO 7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// The amount of time (in milliseconds) between tests\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define TEST_DELAY   2000\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">uint8_t</span> SEG_DONE[] <span style=\"color:#f92672\">=</span> {\n</span></span><span style=\"display:flex;\"><span>  SEG_B <span style=\"color:#f92672\">|</span> SEG_C <span style=\"color:#f92672\">|</span> SEG_D <span style=\"color:#f92672\">|</span> SEG_E <span style=\"color:#f92672\">|</span> SEG_G,               <span style=\"color:#75715e\">// d\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  SEG_A <span style=\"color:#f92672\">|</span> SEG_B <span style=\"color:#f92672\">|</span> SEG_C <span style=\"color:#f92672\">|</span> SEG_D <span style=\"color:#f92672\">|</span> SEG_E <span style=\"color:#f92672\">|</span> SEG_F,      <span style=\"color:#75715e\">// O\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  SEG_C <span style=\"color:#f92672\">|</span> SEG_E <span style=\"color:#f92672\">|</span> SEG_G,                                <span style=\"color:#75715e\">// n\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  SEG_A <span style=\"color:#f92672\">|</span> SEG_D <span style=\"color:#f92672\">|</span> SEG_E <span style=\"color:#f92672\">|</span> SEG_F <span style=\"color:#f92672\">|</span> SEG_G                <span style=\"color:#75715e\">// E\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  };\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>TM1637Display <span style=\"color:#a6e22e\">display</span>(CLK, DIO);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>()\n</span></span><span style=\"display:flex;\"><span>{\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">int</span> k;\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint8_t</span> data[] <span style=\"color:#f92672\">=</span> { <span style=\"color:#ae81ff\">0xff</span>, <span style=\"color:#ae81ff\">0xff</span>, <span style=\"color:#ae81ff\">0xff</span>, <span style=\"color:#ae81ff\">0xff</span> };\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">uint8_t</span> blank[] <span style=\"color:#f92672\">=</span> { <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span>, <span style=\"color:#ae81ff\">0x00</span> };\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setBrightness</span>(<span style=\"color:#ae81ff\">15</span>); <span style=\"color:#75715e\">// 0 ~ 15 (15가 가장 밝음)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// display.setBrightness(0x0f);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// All segments on\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  display.<span style=\"color:#a6e22e\">setSegments</span>(data);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Selectively set different digits\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  data[<span style=\"color:#ae81ff\">0</span>] <span style=\"color:#f92672\">=</span> display.<span style=\"color:#a6e22e\">encodeDigit</span>(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  data[<span style=\"color:#ae81ff\">1</span>] <span style=\"color:#f92672\">=</span> display.<span style=\"color:#a6e22e\">encodeDigit</span>(<span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  data[<span style=\"color:#ae81ff\">2</span>] <span style=\"color:#f92672\">=</span> display.<span style=\"color:#a6e22e\">encodeDigit</span>(<span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  data[<span style=\"color:#ae81ff\">3</span>] <span style=\"color:#f92672\">=</span> display.<span style=\"color:#a6e22e\">encodeDigit</span>(<span style=\"color:#ae81ff\">3</span>);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setSegments</span>(data);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  for(k = 3; k &gt;= 0; k--) {\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  display.setSegments(data, 1, k);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  delay(TEST_DELAY);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  }\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">  */</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setSegments</span>(data<span style=\"color:#f92672\">+</span><span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// __23 -&gt; data+2: data배열 0123에서 앞에 두 자리 건너 띄운 후,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// 2: 남은 숫자 중 2자리를 잘라서, 2: 앞의 2칸을 띄운 후 출력 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setSegments</span>(data<span style=\"color:#f92672\">+</span><span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// _23_ -&gt; data+2: data배열 0123에서 앞에 두 자리 건너 띄운 후,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// 2: 남은 숫자 중 2자리를 잘라서, 1: 앞의 1칸을 띄운 후 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setSegments</span>(data<span style=\"color:#f92672\">+</span><span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// _123 -&gt; data+1: data배열 0123에서 앞에 한자리 건너 띄운 후,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// 3: 남은 숫자 중 3자리를 잘라서, 1: 앞의 1칸을 띄운 후 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setSegments</span>(data<span style=\"color:#f92672\">+</span><span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">1</span>, <span style=\"color:#ae81ff\">2</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// __3_ -&gt; data+2: data배열 0123에서 앞에 두 자리 건너 띄운 후,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// 1: 남은 숫자 중 1자리를 잘라서, 2: 앞의 2칸을 띄운 후 출력 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">setSegments</span>(data<span style=\"color:#f92672\">+</span><span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// _3__ -&gt; data+2: data배열 0123에서 앞에 두 자리 건너 띄운 후,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// 2: 남은 숫자 중 2자리를 잘라서(3이 마지막 자리이므로 1자리만 자름)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// 2: 앞의 2칸을 띄운 후 출력 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Show decimal numbers with/without leading zeros\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#ae81ff\">0</span>, false); <span style=\"color:#75715e\">// Expect: ___0\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#ae81ff\">0</span>, true);  <span style=\"color:#75715e\">// Expect: 0000\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#ae81ff\">1</span>, false); <span style=\"color:#75715e\">// Expect: ___1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#ae81ff\">1</span>, true);  <span style=\"color:#75715e\">// Expect: 0001\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#ae81ff\">301</span>, false); <span style=\"color:#75715e\">// Expect: _301\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#ae81ff\">301</span>, true); <span style=\"color:#75715e\">// Expect: 0301\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#ae81ff\">14</span>, false, <span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">1</span>); <span style=\"color:#75715e\">// Expect: _14_\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#ae81ff\">4</span>, true, <span style=\"color:#ae81ff\">2</span>, <span style=\"color:#ae81ff\">2</span>);  <span style=\"color:#75715e\">// Expect: __04\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">1</span>, false);  <span style=\"color:#75715e\">// Expect: __-1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">12</span>);        <span style=\"color:#75715e\">// Expect: _-12\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">999</span>);       <span style=\"color:#75715e\">// Expect: -999\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDec</span>(<span style=\"color:#f92672\">-</span><span style=\"color:#ae81ff\">5</span>, false, <span style=\"color:#ae81ff\">3</span>, <span style=\"color:#ae81ff\">0</span>); <span style=\"color:#75715e\">// Expect: _-5_\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberHexEx</span>(<span style=\"color:#ae81ff\">0xf1af</span>);        <span style=\"color:#75715e\">// Expect: f1Af\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberHexEx</span>(<span style=\"color:#ae81ff\">0x2c</span>);          <span style=\"color:#75715e\">// Expect: __2C\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberHexEx</span>(<span style=\"color:#ae81ff\">0xd1</span>, <span style=\"color:#ae81ff\">0</span>, true); <span style=\"color:#75715e\">// Expect: 00d1\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">clear</span>();\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberHexEx</span>(<span style=\"color:#ae81ff\">0xd1</span>, <span style=\"color:#ae81ff\">0</span>, true, <span style=\"color:#ae81ff\">2</span>); <span style=\"color:#75715e\">// Expect: d1__\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Run through all the dots\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(k<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">0</span>; k <span style=\"color:#f92672\">&lt;=</span> <span style=\"color:#ae81ff\">4</span>; k<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    display.<span style=\"color:#a6e22e\">showNumberDecEx</span>(<span style=\"color:#ae81ff\">0</span>, (<span style=\"color:#ae81ff\">0x80</span> <span style=\"color:#f92672\">&gt;&gt;</span> k), true);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDecEx</span>(<span style=\"color:#ae81ff\">3141</span>, (<span style=\"color:#ae81ff\">0x80</span> <span style=\"color:#f92672\">&gt;&gt;</span> <span style=\"color:#ae81ff\">0</span>), true);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 3.141 -&gt; 0x80: dot출력, 0x40: 콜론출력, &gt;&gt;0: 첫번째 도트출력,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// true: 빈자리 0으로 채우기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>     <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDecEx</span>(<span style=\"color:#ae81ff\">243</span>, (<span style=\"color:#ae81ff\">0x80</span> <span style=\"color:#f92672\">&gt;&gt;</span> <span style=\"color:#ae81ff\">1</span>), false);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// _2.43 -&gt; 0x80: dot출력, 0x40: 콜론출력, &gt;&gt;1: 두번째 도트출력,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// true: 빈자리 0으로 채우기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDecEx</span>(<span style=\"color:#ae81ff\">314</span>, (<span style=\"color:#ae81ff\">0x80</span> <span style=\"color:#f92672\">&gt;&gt;</span> <span style=\"color:#ae81ff\">2</span>), false);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// _31.4 -&gt; 0x80: dot출력, 0x40: 콜론출력, &gt;&gt;2: 세번째 도트출력,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// false: 빈자리 채우지 않기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  display.<span style=\"color:#a6e22e\">showNumberDecEx</span>(<span style=\"color:#ae81ff\">52</span>, (<span style=\"color:#ae81ff\">0x80</span> <span style=\"color:#f92672\">&gt;&gt;</span> <span style=\"color:#ae81ff\">3</span>), false);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// __52. -&gt; 0x80: dot출력, 0x40: 콜론출력, &gt;&gt;3: 네번째 도트출력,\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// false: 빈자리 채우지 않기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Brightness Test\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(k <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; k <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">4</span>; k<span style=\"color:#f92672\">++</span>)\n</span></span><span style=\"display:flex;\"><span>      data[k] <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0xff</span>;           <span style=\"color:#75715e\">// 모두 segment를 키는 data배열 선언\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(k <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; k <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">7</span>; k<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    display.<span style=\"color:#a6e22e\">setBrightness</span>(k);  <span style=\"color:#75715e\">// 밝기를 7단계에 걸쳐 점점 밝게 출력 \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    display.<span style=\"color:#a6e22e\">setSegments</span>(data);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// On/Off test\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">for</span>(k <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>; k <span style=\"color:#f92672\">&lt;</span> <span style=\"color:#ae81ff\">4</span>; k<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>    display.<span style=\"color:#a6e22e\">setBrightness</span>(<span style=\"color:#ae81ff\">7</span>, false);  <span style=\"color:#75715e\">// Turn off\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    display.<span style=\"color:#a6e22e\">setSegments</span>(data);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);\n</span></span><span style=\"display:flex;\"><span>    display.<span style=\"color:#a6e22e\">setBrightness</span>(<span style=\"color:#ae81ff\">7</span>, true); <span style=\"color:#75715e\">// Turn on\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    display.<span style=\"color:#a6e22e\">setSegments</span>(data);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(TEST_DELAY);  \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Done!\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  display.<span style=\"color:#a6e22e\">setSegments</span>(SEG_DONE);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// while(1);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/arduino-%EC%98%A8%EC%8A%B5%EB%8F%84%EC%B8%A1%EC%A0%95-dht22/","title":"Arduino, 온도 및 습도 측정 (DHT22)","content":"<h3 id=\"온습도-센서-dht22\">온습도 센서 DHT22<a class=\"anchor\" href=\"#%ec%98%a8%ec%8a%b5%eb%8f%84-%ec%84%bc%ec%84%9c-dht22\">#</a></h3>\r\n<p>DHT22 센서를 이용하여 온도와 습도를 측정한다.</p>\n<table>\n  <thead>\n      <tr>\n          <th>센서</th>\n          <th>DHT11</th>\n          <th>DHT22 (AM2302)</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>사진</td>\n          <td><img src=\"/image/dht22-02.png\" alt=\"DHT11\" /></td>\n          <td><figure class=\"center\"><img src=\"/image/dht22-01.png\">\n</figure>\n</td>\n      </tr>\n      <tr>\n          <td>온도</td>\n          <td>0 ~ 50℃ (오차범위 ±2℃)</td>\n          <td>-40 ~ 100℃ (오차범위 ±0.5℃) (해상도 0.1℃)</td>\n      </tr>\n      <tr>\n          <td>습도</td>\n          <td>20 ~ 90% (오차범위 ±5%)</td>\n          <td>0 ~ 100% (오차범위 ±2~5%) (해상도 0.1%)</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"pinout\">Pinout<a class=\"anchor\" href=\"#pinout\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>DHT22</th>\n          <th>DAT</th>\n          <th>VCC</th>\n          <th>GND</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>Arduino</td>\n          <td>8</td>\n          <td>5V</td>\n          <td>GND</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/dht22-05.png\" alt=\"\" /></p>\n<br>\n<br>\n<h4 id=\"라이브러리-준비하기\">라이브러리 준비하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%a4%80%eb%b9%84%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<h5 id=\"case1-위-사진과-같은-형태의-dht22-모듈을-사용하는-경우\">Case1: 위 사진과 같은 형태의 DHT22 모듈을 사용하는 경우<a class=\"anchor\" href=\"#case1-%ec%9c%84-%ec%82%ac%ec%a7%84%ea%b3%bc-%ea%b0%99%ec%9d%80-%ed%98%95%ed%83%9c%ec%9d%98-dht22-%eb%aa%a8%eb%93%88%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h5>\r\n<ul>\n<li>\n<p>라이브러리 매니저검색창에 검색어로 &lsquo;AM2302&rsquo;를 입력</p>\n<ul>\n<li>\n<p>Groove Temperature And Humidity Sensor (by Seeed Studio) 설치</p>\n<p><img src=\"/image/dht22-07.png\" alt=\"\" /></p>\n</li>\n</ul>\n</li>\n</ul>\n<br>\n<h5 id=\"case2-위-라이브러리로-동작하지-않는-경우\">Case2: 위 라이브러리로 동작하지 않는 경우<a class=\"anchor\" href=\"#case2-%ec%9c%84-%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac%eb%a1%9c-%eb%8f%99%ec%9e%91%ed%95%98%ec%a7%80-%ec%95%8a%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h5>\r\n<p>2개의 라이브러리가 필요합니다.</p>\n<ul>\n<li>\n<p>먼저 DHT sensor library (by Adafruit)를 검색하여 설치를 클릭합니다.</p>\n<p><img src=\"/image/dht22-03.png\" alt=\"\" /></p>\n</li>\n</ul>\n<ul>\n<li>\n<p>그러면 Dependencies for library DHT sensor library 창이 나타나는데, 이때 Install all을 클릭하면 2개의 라이브러리가 동시에 설치됩니다.</p>\n<p><img src=\"/image/dht22-04.png\" alt=\"\" /></p>\n</li>\n</ul>\n<p>두 개의 라이브러리를 설치하기만 하면 되기때문에, 순서가 바뀌어도 관계없습니다.</p>\n<br>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;DHT.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DHTPIN    8          </span><span style=\"color:#75715e\">// data pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define DHTTYPE   DHT22      </span><span style=\"color:#75715e\">// change to DHT11 if you&#39;re using the DHT11\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>                             <span style=\"color:#75715e\">// AM2301(DHT21) -&gt; DHT21, AM2302(DHT22) -&gt; DHT22\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>DHT <span style=\"color:#a6e22e\">dht</span>(DHTPIN, DHTTYPE);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>  dht.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">2000</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// float temperature = dht.readTemperature();\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// float humidity = dht.readHumidity();\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">float</span> temp_hum_val[<span style=\"color:#ae81ff\">2</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">0</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(<span style=\"color:#f92672\">!</span>dht.<span style=\"color:#a6e22e\">readTempAndHumidity</span>(temp_hum_val)){\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Temperature: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(temp_hum_val[<span style=\"color:#ae81ff\">1</span>]);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34; *C</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">,</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Humidity: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(temp_hum_val[<span style=\"color:#ae81ff\">0</span>]);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34; %&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span>{\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Failed to get temprature and humidity value.&#34;</span>);  \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"1602-lcd에-온도-습도-출력하기\">1602 LCD에 온도, 습도 출력하기<a class=\"anchor\" href=\"#1602-lcd%ec%97%90-%ec%98%a8%eb%8f%84-%ec%8a%b5%eb%8f%84-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/dht22-06.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;DHT.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DHTPIN    8          </span><span style=\"color:#75715e\">// data pin\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define DHTTYPE   DHT22      </span><span style=\"color:#75715e\">// change to DHT11 if you&#39;re using the DHT11\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>                             <span style=\"color:#75715e\">// AM2301(DHT21) -&gt; DHT21, AM2302(DHT22) -&gt; DHT22\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>DHT <span style=\"color:#a6e22e\">dht</span>(DHTPIN, DHTTYPE);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// I2C 1602 LCD (연결핀을 바꿀 수 없음)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// VCC-5V / GND-GND / SDA-A4 / SCL-A5\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Wire.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;LiquidCrystal_I2C.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// i2c address 는 칩에 따라 0x27, 0x3F값을 가짐\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>LiquidCrystal_I2C <span style=\"color:#a6e22e\">lcd</span>(<span style=\"color:#ae81ff\">0x27</span>, <span style=\"color:#ae81ff\">16</span>, <span style=\"color:#ae81ff\">2</span>);  \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>  dht.<span style=\"color:#a6e22e\">begin</span>();\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// lcd 초기화\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  lcd.<span style=\"color:#a6e22e\">init</span>();    \n</span></span><span style=\"display:flex;\"><span>  lcd.<span style=\"color:#a6e22e\">backlight</span>();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">2000</span>);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// float temperature = dht.readTemperature();\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// float humidity = dht.readHumidity();\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">float</span> temp_hum_val[<span style=\"color:#ae81ff\">2</span>] <span style=\"color:#f92672\">=</span> {<span style=\"color:#ae81ff\">0</span>};\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">if</span>(<span style=\"color:#f92672\">!</span>dht.<span style=\"color:#a6e22e\">readTempAndHumidity</span>(temp_hum_val)){\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Temperature: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(temp_hum_val[<span style=\"color:#ae81ff\">1</span>]);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34; *C</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">,</span><span style=\"color:#ae81ff\">\\t</span><span style=\"color:#e6db74\">&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Temp. : &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">print</span>(temp_hum_val[<span style=\"color:#ae81ff\">1</span>]);\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;*C&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Humidity: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(temp_hum_val[<span style=\"color:#ae81ff\">0</span>]);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34; %&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>      \n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">setCursor</span>(<span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1</span>);\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;Humi. : &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">print</span>(temp_hum_val[<span style=\"color:#ae81ff\">0</span>]);\n</span></span><span style=\"display:flex;\"><span>    lcd.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34; %&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">else</span>{\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;Failed to get temprature and humidity value.&#34;</span>);  \n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/arduino-%EC%98%A8%EB%8F%84%EC%B8%A1%EC%A0%95-ds18b20/","title":"Arduino, 온도측정(DS18b20)","content":"<h3 id=\"ds18b20-온도센서\">DS18b20 온도센서<a class=\"anchor\" href=\"#ds18b20-%ec%98%a8%eb%8f%84%ec%84%bc%ec%84%9c\">#</a></h3>\r\n<p>DS18b20 온도 센서를 이용하여 온도를 측정한다.</p>\n<ul>\n<li>one-wire 버스 통신</li>\n<li>공급전압: 3.0V ~ 5.5V</li>\n<li>작동온도: -55ºC ~ +125ºC</li>\n<li>오차: +/-0.5 ºC (-10ºC ~ 85ºC 범위에서)</li>\n</ul>\n<br>\n<h4 id=\"pinout\">Pinout<a class=\"anchor\" href=\"#pinout\">#</a></h4>\r\n<p><img src=\"/image/DS18b20.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p>DS18b20 센서는 두 가지 연결방법을 제공하는데, 하나는 VCC를 5V에 연결하는 Normal Mode이고 다른 하나는 VCC를 GND에 연결하는 Parasite Mode이다. 두가지 방법 모두 지원되지만 (경험상) Normal를 추천하며 (원인은 잘 모르겠지만) Parasite Mode에서는 온도센서가 작동이 되지 않는 경우도 가끔 있었다. 회로 구성을 위해 <strong>4.7㏀ 저항 1개</strong>가 필요하며 Normal Mode 구성을 위해 다음 그림과 같이 연결한다.</p>\n<ul>\n<li>3가닥의 선에 브레드보드에 연결할 수 있는 핀을 납땜하고, 노란색선과 빨간색선의 연결부위에 4.7㏀ 저항을 추가로 납땜하여 연결한다.</li>\n</ul>\n<p><img src=\"/image/ESP32-DS18b20-R01.png\" alt=\"\" /></p>\n<ul>\n<li>수축튜브를 사용하여 연결부위를 절연한 뒤,</li>\n</ul>\n<p><img src=\"/image/ESP32-DS18b20-R02.png\" alt=\"\" /></p>\n<ul>\n<li>구경이 조금 더 큰 수축튜브를 사용하여 3가닥을 하나로 감싸 마무리한다.</li>\n</ul>\n<p><img src=\"/image/ESP32-DS18b20-R03.png\" alt=\"\" /></p>\n<br>\n<h5 id=\"normal-mode\">Normal Mode<a class=\"anchor\" href=\"#normal-mode\">#</a></h5>\r\n<p><img src=\"/image/ds18b20-temperature-normal-mode.png\" alt=\"\" /></p>\n<table>\n  <thead>\n      <tr>\n          <th>DS18b20</th>\n          <th>Yellow</th>\n          <th>Red</th>\n          <th>Black</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>Arduino</td>\n          <td>2</td>\n          <td>5V</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>4.7㏀</td>\n          <td>O</td>\n          <td>O</td>\n          <td></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h5 id=\"parasite-mode\">Parasite Mode<a class=\"anchor\" href=\"#parasite-mode\">#</a></h5>\r\n<p><img src=\"/image/ds18b20-temperature.png\" alt=\"\" /></p>\n<table>\n  <thead>\n      <tr>\n          <th>DS18b20</th>\n          <th></th>\n          <th>Yellow</th>\n          <th>Red</th>\n          <th>Black</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>Arduino</td>\n          <td>5V</td>\n          <td>2</td>\n          <td>GND</td>\n          <td>GND</td>\n      </tr>\n      <tr>\n          <td>4.7㏀</td>\n          <td>O</td>\n          <td>O</td>\n          <td></td>\n          <td></td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<h5 id=\"라이브러리-준비하기\">라이브러리 준비하기<a class=\"anchor\" href=\"#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%a4%80%eb%b9%84%ed%95%98%ea%b8%b0\">#</a></h5>\r\n<ul>\n<li>OneWire (by Jim Studt etc.)</li>\n<li>DallasTemperature (by Miles Burton)</li>\n</ul>\n<br>\n<h5 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h5>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;OneWire.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;DallasTemperature.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define TEMP_PIN 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>OneWire <span style=\"color:#a6e22e\">oneWire</span>(TEMP_PIN);\n</span></span><span style=\"display:flex;\"><span>DallasTemperature <span style=\"color:#a6e22e\">sensors</span>(<span style=\"color:#f92672\">&amp;</span>oneWire);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">9600</span>);  \n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;DallasTemperature IC Control&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// Start up the library\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  sensors.begin();\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  sensors.requestTemperatures();\n</span></span><span style=\"display:flex;\"><span> \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">float</span> temperatureC <span style=\"color:#f92672\">=</span> sensors.getTempCByIndex(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">float</span> temperatureF <span style=\"color:#f92672\">=</span> sensors.getTempFByIndex(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.print(temperatureC);\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;*C&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.print(temperatureF);\n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;*F&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">2000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"tm1637에-온도-표시하기\">TM1637에 온도 표시하기<a class=\"anchor\" href=\"#tm1637%ec%97%90-%ec%98%a8%eb%8f%84-%ed%91%9c%ec%8b%9c%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<br>\n<h4 id=\"schematic-normal-mode\">schematic: Normal Mode<a class=\"anchor\" href=\"#schematic-normal-mode\">#</a></h4>\r\n<p><img src=\"/image/ds18b20-temperature-normal-mode-tm1637.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-2\">sketch<a class=\"anchor\" href=\"#sketch-2\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C++\" data-lang=\"C++\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;Arduino.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;TM1637Display.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// Module connection pins (Digital Pins)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#define CLK 4\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define DIO 7\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>TM1637Display <span style=\"color:#a6e22e\">display</span>(CLK, DIO);\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">uint8_t</span> data[] <span style=\"color:#f92672\">=</span> { <span style=\"color:#ae81ff\">0xff</span>, <span style=\"color:#ae81ff\">0xff</span>, <span style=\"color:#ae81ff\">0xff</span>, <span style=\"color:#ae81ff\">0xff</span> };\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> seg3, seg2, seg1, seg0;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// DS18b20 Temperature Sensor Setting\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;OneWire.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#include</span> <span style=\"color:#75715e\">&lt;DallasTemperature.h&gt;</span><span style=\"color:#75715e\">\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define TEMP_PIN 2\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>OneWire <span style=\"color:#a6e22e\">oneWire</span>(TEMP_PIN);\n</span></span><span style=\"display:flex;\"><span>DallasTemperature <span style=\"color:#a6e22e\">sensors</span>(<span style=\"color:#f92672\">&amp;</span>oneWire);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">float</span> celciusTemperature;  <span style=\"color:#75715e\">// Celcius Temperature\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> tempTemperature;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.begin(<span style=\"color:#ae81ff\">9600</span>);  \n</span></span><span style=\"display:flex;\"><span>  Serial.println(<span style=\"color:#e6db74\">&#34;DallasTemperature IC Control&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// DS18b20 Temperature Sensor Initialize\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  sensors.begin();\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// TM1637 Initialize\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  display.setBrightness(<span style=\"color:#ae81ff\">15</span>); <span style=\"color:#75715e\">// 0 ~ 15 (15가 가장 밝음)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#75715e\">// display.setBrightness(0x0f);\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  sensors.requestTemperatures();\n</span></span><span style=\"display:flex;\"><span>  celciusTemperature <span style=\"color:#f92672\">=</span> sensors.getTempCByIndex(<span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.print(<span style=\"color:#e6db74\">&#34;Temperature is: &#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.println(celciusTemperature);\n</span></span><span style=\"display:flex;\"><span>  tempTemperature <span style=\"color:#f92672\">=</span> celciusTemperature <span style=\"color:#f92672\">*</span> <span style=\"color:#ae81ff\">100</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  seg0 <span style=\"color:#f92672\">=</span> (tempTemperature <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">1000</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>; <span style=\"color:#75715e\">// 4자리에서 1000의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  seg1 <span style=\"color:#f92672\">=</span> (tempTemperature <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">100</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;  <span style=\"color:#75715e\">// 4자리에서 100의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  seg2 <span style=\"color:#f92672\">=</span> (tempTemperature <span style=\"color:#f92672\">/</span> <span style=\"color:#ae81ff\">10</span>) <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;   <span style=\"color:#75715e\">// 4자리에서 10의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  seg3 <span style=\"color:#f92672\">=</span> tempTemperature <span style=\"color:#f92672\">%</span> <span style=\"color:#ae81ff\">10</span>;          <span style=\"color:#75715e\">// 4자리에서 1의 자리 숫자 저장\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \n</span></span><span style=\"display:flex;\"><span>  data[<span style=\"color:#ae81ff\">0</span>]<span style=\"color:#f92672\">=</span>display.encodeDigit(seg0);  <span style=\"color:#75715e\">// 첫번째 FND에 1000의 자리 숫자배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  data[<span style=\"color:#ae81ff\">1</span>]<span style=\"color:#f92672\">=</span>display.encodeDigit(seg1);  <span style=\"color:#75715e\">// 두번째 FND에 100의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  data[<span style=\"color:#ae81ff\">2</span>]<span style=\"color:#f92672\">=</span>display.encodeDigit(seg2);  <span style=\"color:#75715e\">// 세번째 FND에 10의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  data[<span style=\"color:#ae81ff\">3</span>]<span style=\"color:#f92672\">=</span>display.encodeDigit(seg3);  <span style=\"color:#75715e\">// 네번째 FND에 1의 자리 숫자 배열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 온도가 100도보다 높으면 소수점 첫째자리까지 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">if</span> (celciusTemperature <span style=\"color:#f92672\">&gt;=</span> <span style=\"color:#ae81ff\">100</span>) {\n</span></span><span style=\"display:flex;\"><span>    display.showNumberDecEx(tempTemperature, (<span style=\"color:#ae81ff\">0x80</span> <span style=\"color:#f92672\">&gt;&gt;</span> <span style=\"color:#ae81ff\">2</span>), true);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// 온도가 100도보다 낮으면 소수점 둘째자리까지 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#66d9ef\">else</span> {\n</span></span><span style=\"display:flex;\"><span>    display.showNumberDecEx(tempTemperature, (<span style=\"color:#ae81ff\">0x80</span> <span style=\"color:#f92672\">&gt;&gt;</span> <span style=\"color:#ae81ff\">1</span>), true);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>  delay(<span style=\"color:#ae81ff\">2000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/arduino-%EC%8A%A4%EC%9C%84%EC%B9%98-%ED%92%80%EB%8B%A4%EC%9A%B4-%ED%92%80%EC%97%85%EC%A0%80%ED%95%AD/","title":"Arduino 스위치, 풀다운저항, 풀업저항","content":"<h3 id=\"tact-switch\">Tact Switch<a class=\"anchor\" href=\"#tact-switch\">#</a></h3>\r\n<p><img src=\"/image/tact_switch.png\" alt=\"\" /></p>\n<br>\n<h3 id=\"pull-down\">Pull-down<a class=\"anchor\" href=\"#pull-down\">#</a></h3>\r\n<table>\n  <thead>\n      <tr>\n          <th></th>\n          <th>동작</th>\n          <th>Arduino</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>스위치를 누르면</td>\n          <td>ON</td>\n          <td>HIGH</td>\n      </tr>\n      <tr>\n          <td>스위치에서 손을 떼면</td>\n          <td>OFF</td>\n          <td>LOW</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><strong>저항(10k 이상)을 GND에 연결</strong>한 경우: Pull-down 회로</p>\n<p><img src=\"/image/switch01.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> switch_R <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(switch_R, INPUT);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">digitalRead</span>(switch_R);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(i <span style=\"color:#f92672\">==</span> HIGH) {                  <span style=\"color:#75715e\">// 스위치를 누르면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;1&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {                           <span style=\"color:#75715e\">// 스위치에서 손을 떼면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;0&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h3 id=\"pull-up\">Pull-up<a class=\"anchor\" href=\"#pull-up\">#</a></h3>\r\n<table>\n  <thead>\n      <tr>\n          <th></th>\n          <th>동작</th>\n          <th>Arduino</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>스위치를 누르면</td>\n          <td>OFF</td>\n          <td>LOW</td>\n      </tr>\n      <tr>\n          <td>스위치에서 손을 떼면</td>\n          <td>ON</td>\n          <td>HIGH</td>\n      </tr>\n  </tbody>\n</table>\n<br>\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><strong>저항(10k 이상)을 VCC(5V)에 연결</strong>한 경우: Pull-up 회로</p>\n<p><img src=\"/image/switch02.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> switch_R <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(switch_R, INPUT);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">int</span> i <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">digitalRead</span>(switch_R);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(i <span style=\"color:#f92672\">==</span> HIGH) {                  <span style=\"color:#75715e\">// 스위치를 누르면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;1&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {                           <span style=\"color:#75715e\">// 스위치에서 손을 떼면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;0&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"스위치를-사용할-때-풀다운-or-풀업-저항을-구성해야-하는-이유\">스위치를 사용할 때, 풀다운 or 풀업 저항을 구성해야 하는 이유<a class=\"anchor\" href=\"#%ec%8a%a4%ec%9c%84%ec%b9%98%eb%a5%bc-%ec%82%ac%ec%9a%a9%ed%95%a0-%eb%95%8c-%ed%92%80%eb%8b%a4%ec%9a%b4-or-%ed%92%80%ec%97%85-%ec%a0%80%ed%95%ad%ec%9d%84-%ea%b5%ac%ec%84%b1%ed%95%b4%ec%95%bc-%ed%95%98%eb%8a%94-%ec%9d%b4%ec%9c%a0\">#</a></h3>\r\n<p>출처: <a href=\"https://blog.xcoda.net/77\">풀업(Pull-up)저항,  풀다운(Pull-down)저항 (악보쓰는 프로그래머)</a></p>\n<h4 id=\"floating-문제\">Floating 문제<a class=\"anchor\" href=\"#floating-%eb%ac%b8%ec%a0%9c\">#</a></h4>\r\n<table>\n  <thead>\n      <tr>\n          <th>5V에 연결한 경우</th>\n          <th>GND에 연결한 경우</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td><figure class=\"center\"><img src=\"/image/switch03.png\" width=\"75%\">\n</figure>\n</td>\n          <td><figure class=\"center\"><img src=\"/image/switch04.png\" width=\"75%\">\n</figure>\n</td>\n      </tr>\n      <tr>\n          <td>스위치를 누르면 HIGH, 스위치를 떼면 LOW ?</td>\n          <td>스위치를 누르면 LOW, 스위치를 떼면 HIGH ?</td>\n      </tr>\n      <tr>\n          <td>실제로는 스위치를 누른 상태에는 HIGH이지만, 스위치를 뗀 상태에는 <strong>HIGH와 LOW가 섞여서 들어간다</strong></td>\n          <td>실제로는 스위치를 누른 상태에는 LOW이지만, 스위치를 뗀 상태에는 <strong>LOW와 HIGH가 섞여서 들어간다.</strong></td>\n      </tr>\n  </tbody>\n</table>\n<p>즉, 스위치를 누른 상태에서는 어떤 값을 가져야 하는지 확실하지만, 스위치를 뗀 상태에서는 어떤 값을 가져야 하는지 불확실하다는 문제가 발생하는데, 이것이 플로팅이다.</p>\n<br>\n<h4 id=\"floating의-해결과-또-다른-문제\">Floating의 해결과 또 다른 문제<a class=\"anchor\" href=\"#floating%ec%9d%98-%ed%95%b4%ea%b2%b0%ea%b3%bc-%eb%98%90-%eb%8b%a4%eb%a5%b8-%eb%ac%b8%ec%a0%9c\">#</a></h4>\r\n<ul>\n<li><strong>(아래 그림대로 연결 절대 금지!)</strong> 위 그림 2개를 조합하여, 회로를 만든다고 가정하면</li>\n</ul>\n<p><img src=\"/image/switch05.png\" alt=\"\" /></p>\n<p>스위치를 누르면 HIGH, 스위치를 누르지 않으면 LOW ?</p>\n<ul>\n<li>(<strong>그림대로 연결 절대 금지!</strong>) 그러나 위 그림과 같이 연결하면 또다른 심각한 문제가 발생한다.</li>\n</ul>\n<p><img src=\"/image/switch06.png\" alt=\"\" /></p>\n<ul>\n<li>\n<p>스위치를 누르는 순간, 5V와 GND가 직접 연결되어 전기적으로 합선(쇼트)이 되기때문에 아두이노 보드가 망가지거나 심한 경우, 아두이노가 연결된 컴퓨터가 망가질 수도 있다.</p>\n</li>\n<li>\n<p>이 그림은 마치 건전지 양극을 도선으로 그대로 연결한 것과 마찬가지인 상황이며, 실제 건전지에 이와 같은 방법으로 선을 연결하면 건전지가 과열되어 녹거나 심하면 불이 날수도 있다.</p>\n</li>\n</ul>\n<p><img src=\"/image/switch07.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"문제-해결-방법\">문제 해결 방법<a class=\"anchor\" href=\"#%eb%ac%b8%ec%a0%9c-%ed%95%b4%ea%b2%b0-%eb%b0%a9%eb%b2%95\">#</a></h4>\r\n<ul>\n<li>이런 문제를 해결하려면, 양극의 사이에 저항을 하나 넣어서 전류의 흐름을 방해하면 된다.</li>\n</ul>\n<p><img src=\"/image/switch08.png\" alt=\"\" /></p>\n<br>\n<ul>\n<li>이를 응용하여 스위치의 한쪽에 저항을 하나 추가로 연결하는 것이고, 이것이 바로 풀다운 저항 혹은 풀업 저항을 구성해야하는 이유이다.</li>\n</ul>\n<br>\n<br>\n<h3 id=\"아두이노-보드에-내장된-풀업저항-사용하기\">아두이노 보드에 내장된 풀업저항 사용하기<a class=\"anchor\" href=\"#%ec%95%84%eb%91%90%ec%9d%b4%eb%85%b8-%eb%b3%b4%eb%93%9c%ec%97%90-%eb%82%b4%ec%9e%a5%eb%90%9c-%ed%92%80%ec%97%85%ec%a0%80%ed%95%ad-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<ul>\n<li>\n<p>스위치를 사용하는 경우, 풀다운 저항 혹은 풀업 저항을 사용해야 하므로. 스위치를 구성할 때마다 10k~100kΩ 정도의 저항을 별도로 준비해서 회로를 구성해야 한다. 매우 중요한 문제이지만, 매우 귀찮기도 하다.</p>\n</li>\n<li>\n<p>그래서&hellip;친절하게도 아두이노 보드는 자체에 풀업 저항을 내장해두었다. 당연한 이야기이지만 아두이노 보드에 내장된 풀업 저항을 사용한다면, 별도의 저항을 준비하지 않아도 되기때문에 회로를 간단하게 구성할 수 있다.</p>\n</li>\n</ul>\n<ul>\n<li>\n<p>기본적으로 <strong>풀업</strong> 회로이므로 <strong>스위치가 눌리지 않은 상태가 HIGH</strong>이며, <strong>스위치가 눌린 상태에서 LOW</strong>값을 갖습니다.</p>\n</li>\n<li>\n<p>pinMode 선언시, <strong>INPUT_PULLUP</strong>을 사용합니다.</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#a6e22e\">pinMode</span> (<span style=\"color:#ae81ff\">2</span>, INPUT_PULLUP);</span></span></code></pre></div></li>\n</ul>\n<br>\n<h4 id=\"schematic-2\">schematic<a class=\"anchor\" href=\"#schematic-2\">#</a></h4>\r\n<p><img src=\"/image/switch04.png\" alt=\"\" /></p>\n <br>\n<h4 id=\"sketch-2\">sketch<a class=\"anchor\" href=\"#sketch-2\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> switch_R <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> R;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(switch_R, INPUT_PULLUP);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>    R <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">digitalRead</span>(switch_R);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(R <span style=\"color:#f92672\">==</span> LOW) {                   <span style=\"color:#75715e\">// 스위치를 누르면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;0&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {                           <span style=\"color:#75715e\">// 스위치에서 손을 떼면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;1&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"스위치를-눌러-led-켜기\">스위치를 눌러 LED 켜기<a class=\"anchor\" href=\"#%ec%8a%a4%ec%9c%84%ec%b9%98%eb%a5%bc-%eb%88%8c%eb%9f%ac-led-%ec%bc%9c%ea%b8%b0\">#</a></h3>\r\n<p>위에서 구성한 풀업 회로에 RGB LED를 추가하여, 각 스위치에 연결된 LED가 점등되도록 구성해보자.</p>\n<br>\n<h4 id=\"schematic-3\">schematic<a class=\"anchor\" href=\"#schematic-3\">#</a></h4>\r\n<p><img src=\"/image/switch10.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-3\">sketch<a class=\"anchor\" href=\"#sketch-3\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> switch_R <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">2</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> switch_G <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">3</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> switch_B <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">4</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> pin_ledR <span style=\"color:#f92672\">=</span> A0;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> pin_ledG <span style=\"color:#f92672\">=</span> A1;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> pin_ledB <span style=\"color:#f92672\">=</span> A2;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> R, G, B;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(switch_R, INPUT_PULLUP);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(switch_G, INPUT_PULLUP);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(switch_B, INPUT_PULLUP);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(pin_ledR, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(pin_ledG, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(pin_ledB, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>  \n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>    R <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">digitalRead</span>(switch_R);\n</span></span><span style=\"display:flex;\"><span>    G <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">digitalRead</span>(switch_G);\n</span></span><span style=\"display:flex;\"><span>    B <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">digitalRead</span>(switch_B);\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(R <span style=\"color:#f92672\">==</span> LOW) {                  <span style=\"color:#75715e\">// R 스위치를 누르면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;R=1&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledR, HIGH);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {                          <span style=\"color:#75715e\">// R 스위치에서 손을 떼면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;R=0&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledR, LOW);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(G <span style=\"color:#f92672\">==</span> LOW) {                  <span style=\"color:#75715e\">// G 스위치를 누르면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;G=1&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledG, HIGH);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {                          <span style=\"color:#75715e\">// G 스위치에서 손을 떼면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;G=0&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledG, LOW);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">if</span>(B <span style=\"color:#f92672\">==</span> LOW) {                  <span style=\"color:#75715e\">// B 스위치를 누르면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;B=1&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledB, HIGH);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">else</span> {                          <span style=\"color:#75715e\">// B 스위치에서 손을 떼면\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>        Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;B=0&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>        <span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledB, LOW);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/arduino-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0/","title":"Arduino 시작하기, RGB LED, PWM","content":"<h2 id=\"arduino\">Arduino<a class=\"anchor\" href=\"#arduino\">#</a></h2>\r\n<p><img src=\"/image/arduino-01uno.png\" alt=\"\" /></p>\n<br>\n<h3 id=\"pinout\">Pinout<a class=\"anchor\" href=\"#pinout\">#</a></h3>\r\n<h4 id=\"digital--analog\">Digital &amp; Analog<a class=\"anchor\" href=\"#digital--analog\">#</a></h4>\r\n<p><img src=\"/image/arduino-02unopin.png\" alt=\"\" /></p>\n<ul>\n<li>Digital\n<ul>\n<li>0~13번 핀</li>\n<li>PWM:3,5,6,9,10,11번 핀 (<strong>8bit</strong>로 <strong>0~255</strong>의 범위를 사용)</li>\n</ul>\n</li>\n<li>Analog Input:  ADC <strong>10bit</strong>로 <strong>0~1023</strong>의 범위를 사용</li>\n<li>스케치 업로드 중에는 0번핀(RX), 1번핀(TX)을 사용할 수 없다.</li>\n</ul>\n<br>\n<h4 id=\"전원부-v_in\">전원부 V_in<a class=\"anchor\" href=\"#%ec%a0%84%ec%9b%90%eb%b6%80-v_in\">#</a></h4>\r\n<ul>\n<li>\n<p>input으로 사용</p>\n<ul>\n<li>기본적으로 파워잭을 사용하는 것과 같음</li>\n<li>아두이노에 전원을 공급 (6.6V~12V 범위에서 가능)</li>\n<li>외부전원이 Vin을 통해 공급되면, USB포트에서 나오는 전원공급은 자동으로 차단됨</li>\n<li>최소 전압은 6.6V이나, 다이오드에서의 전압 강하로 인해, 최소 7.2V가 공급되어야 USB포트에서의 전원이 차단되고, 외부전원으로 아두이노가 전원을 공급받기 시작함</li>\n</ul>\n</li>\n<li>\n<p>output으로 사용</p>\n<ul>\n<li>파워잭으로 전원을 공급하면, Vin은 자동으로 OUTPUT용도가 됨</li>\n<li>5V보다 큰 전압, 전류를 필요로 하는 장치(모터 등)를 연결할 경우, 파워잭으로 전원을 공급하고 Vin으로 출력</li>\n</ul>\n</li>\n</ul>\n<br>\n<h3 id=\"arduino-보드의-종류\">Arduino 보드의 종류<a class=\"anchor\" href=\"#arduino-%eb%b3%b4%eb%93%9c%ec%9d%98-%ec%a2%85%eb%a5%98\">#</a></h3>\r\n<p><img src=\"/image/arduino-04arduino.png\" alt=\"\" /></p>\n<br>\n<h3 id=\"브레드-보드--점퍼선\">브레드 보드 &amp; 점퍼선<a class=\"anchor\" href=\"#%eb%b8%8c%eb%a0%88%eb%93%9c-%eb%b3%b4%eb%93%9c--%ec%a0%90%ed%8d%bc%ec%84%a0\">#</a></h3>\r\n<p><img src=\"/image/arduino-03breadboard.png\" alt=\"\" /></p>\n<br>\n<h3 id=\"부품-센서-모듈-쉴드\">부품, 센서, 모듈, 쉴드<a class=\"anchor\" href=\"#%eb%b6%80%ed%92%88-%ec%84%bc%ec%84%9c-%eb%aa%a8%eb%93%88-%ec%89%b4%eb%93%9c\">#</a></h3>\r\n<p><img src=\"/image/arduino-05parts.png\" alt=\"\" /></p>\n<br>\n<br>\n<h2 id=\"arduino-ide\">Arduino IDE<a class=\"anchor\" href=\"#arduino-ide\">#</a></h2>\r\n<h3 id=\"arduino-ide-설치하기\">Arduino IDE 설치하기<a class=\"anchor\" href=\"#arduino-ide-%ec%84%a4%ec%b9%98%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<ul>\n<li>2021년 9월 현재 최신버전 1.8.60 &amp; 2.0 beta 11 (당분간 1.8.x 버전 설치 추천)</li>\n<li><a href=\"https://www.arduino.cc/en/Main/Software\">아두이노 홈페이지, www.arduino.cc</a> 에서 다운로드 받아 설치</li>\n<li>설치 경로에 한글이 포함되지 않도록 한다.</li>\n<li>설치 완료 후, 아두이노 IDE를 실행하면 arduino driver가 설치된다. 모두 설치</li>\n<li>호환칩(CH340 or CH341)을 사용하는 아두이노의 경우, <a href=\"http://www.wch.cn/download/CH341SER_ZIP.html\">칩제조사 홈페이지</a>에서 별도의 driver를 다운로드 받은 후 추가로 설치해야 한다.</li>\n</ul>\n<br>\n<blockquote class='book-hint '>\r\n<p>CH340/341 호환칩을 사용하는 아두이노 우노보드의 경우 빨간색으로 된 표시된 부분의 칩이 직사각형인 형태로 되어 있는 경우가 많다. 정품의 경우 FT232칩을 사용하며, 대부분의 경우 동일한 위치에 정사각형 모양의 칩을 가지고 있다. 드라이버 추가 설치이외의 기능상의 차이점은 없다.</p></blockquote><p><img src=\"/image/arduino-ch341.png\" alt=\"\" /></p>\n<br>\n<h3 id=\"arduino-ide의-기본-구성\">Arduino IDE의 기본 구성<a class=\"anchor\" href=\"#arduino-ide%ec%9d%98-%ea%b8%b0%eb%b3%b8-%ea%b5%ac%ec%84%b1\">#</a></h3>\r\n<p><img src=\"/image/arduino-06ide.png\" alt=\"\" /></p>\n<br>\n<h3 id=\"arduino-연결하기\">Arduino 연결하기<a class=\"anchor\" href=\"#arduino-%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<ol>\n<li>\n<p>USB A(M)-B(M) 케이블을 사용하여 PC와 아두이노 우노를 연결한다. (아두이노에 연결하는 포트는 대부분 USB-B(M) type이나, 최근 나오는 일부 호환 보드의 경우 microUSB 포트인 경우도 있다.)</p>\n<p><img src=\"/image/arduino-07link.png\" alt=\"\" /></p>\n</li>\n</ol>\n<br>\n<ol start=\"2\">\n<li><strong>툴</strong>&gt; <strong>보드</strong>&gt; 에서 Arduino 보드를 선택한다. → Arduino/Genuino Uno\n<img src=\"/image/arduino-08board.png\" alt=\"\" /></li>\n</ol>\n<br>\n<ol start=\"3\">\n<li><strong>툴</strong>&gt; <strong>포트</strong>&gt; 에서 Arduino에 연결되어 있는 포트를 선택한다. → COMx (Arduino/Genuino Uno)\n<img src=\"/image/arduino-09comport.png\" alt=\"\" /></li>\n</ol>\n<br>\n<br>\n<h2 id=\"arduino-스케치\">Arduino 스케치<a class=\"anchor\" href=\"#arduino-%ec%8a%a4%ec%bc%80%ec%b9%98\">#</a></h2>\r\n<h3 id=\"기본-구조\">기본 구조<a class=\"anchor\" href=\"#%ea%b8%b0%eb%b3%b8-%ea%b5%ac%ec%a1%b0\">#</a></h3>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c\" data-lang=\"c\"><span style=\"display:flex;\"><span><span style=\"color:#960050;background-color:#1e0010\">블록‘</span>I<span style=\"color:#960050;background-color:#1e0010\">’</span>             <span style=\"color:#75715e\">// 블록I은 라이브러리, 변수 선언 (필요없는 경우 생략가능)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {     <span style=\"color:#75715e\">// 블록II 부분을 아두이노 켜질 때 딱 한번 실행\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\t<span style=\"color:#960050;background-color:#1e0010\">블록‘</span>II<span style=\"color:#960050;background-color:#1e0010\">’</span>        <span style=\"color:#75715e\">// 초기화, pinMode …   \n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {      <span style=\"color:#75715e\">// 블록III 부분을 반복 실행\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\t<span style=\"color:#960050;background-color:#1e0010\">블록‘</span>III<span style=\"color:#960050;background-color:#1e0010\">’</span>\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"exercise-1\">Exercise 1:<a class=\"anchor\" href=\"#exercise-1\">#</a></h3>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/* 처음 해보는 아두이노 코딩\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">   LED 깜박이기 */</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(<span style=\"color:#ae81ff\">13</span>, OUTPUT);      <span style=\"color:#75715e\">// digitalWrite 사용시 pinMode 설정해야 함. (플로팅 방지)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(<span style=\"color:#ae81ff\">13</span>, HIGH);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(<span style=\"color:#ae81ff\">13</span>, LOW);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><ul>\n<li>void setup에 모든 명령어가 위치</li>\n<li>; (세미콜론)은 문장이 끝났음을 선언</li>\n<li>**처음 컴파일하는 경우 파일을 저장하는 절차가 수행되며, 이를 위해 파일 이름을 지정해주어야 함 **</li>\n<li>주석문 사용 방법 (컴파일시 skip)\n<ul>\n<li>// ~~~~              1개의 라인만 주석문 처리</li>\n<li>/* ~~~~*/          여러개의 라인을 /** */ 안에 넣어서 주석문을 만들 수 있음</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"pinmode13-output\">pinMode(13, OUTPUT);<a class=\"anchor\" href=\"#pinmode13-output\">#</a></h4>\r\n<ul>\n<li>13번 핀을 출력 모드로 설정 (※입력 모드로 사용하려면 OUTPUT 대신 INPUT or INPUT_PULLUP 사용)</li>\n<li>pinMode는 digitalRead, digitalWrite를 사용하는 핀에만 선언</li>\n<li>즉, 0과 1의 입출력에만 사용하는 핀에 선언하며, PWM사용핀은 pinMode 선언이 불필요하다.</li>\n<li>INPUT은 입력핀으로 사용시, OUTPUT은 출력핀으로 사용시</li>\n</ul>\n<br>\n<h4 id=\"digitalwriteled-high\">digitalWrite(led, HIGH);<a class=\"anchor\" href=\"#digitalwriteled-high\">#</a></h4>\r\n<ul>\n<li>디지털 핀의 전압을 LOW(0의 값) 또는 HIGH(1의 값)로 설정\n<ul>\n<li>LOW : 0V (전기가 통하지 않음)</li>\n<li>HIGH : 5V (전기가 통함)</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"delay1000\">delay(1000);<a class=\"anchor\" href=\"#delay1000\">#</a></h4>\r\n<ul>\n<li>특정 시간 동안 아두이노를 멈추게 하는 명령 (ms 단위)\n<ul>\n<li>1초 : 1000</li>\n<li>5초 : 5000</li>\n</ul>\n</li>\n</ul>\n<br>\n<ul>\n<li>그러므로 위 예제는,\n<ul>\n<li>아두이노 보드에 있는 13번 LED가 1초가 켜졌다가 꺼짐</li>\n<li>void loop에서 수행할 반복 명령이 없으므로, LED가 꺼진 상태를 그대로 유지</li>\n</ul>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"exercise-2\">Exercise 2:<a class=\"anchor\" href=\"#exercise-2\">#</a></h3>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">pinMode</span>(<span style=\"color:#ae81ff\">13</span>, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(<span style=\"color:#ae81ff\">13</span>, HIGH);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(<span style=\"color:#ae81ff\">13</span>, LOW);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><ul>\n<li>void setup\n<ul>\n<li>pinMode는 digitalWrite를 사용하는 pin을 설정하여 플로팅을 방지하는 선언이므로, 한번만 실행하면 됨</li>\n</ul>\n</li>\n<li>void loop에 의해\n<ul>\n<li>1초간 켜졌다가, 1초간 꺼지는 것을 반복</li>\n</ul>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"exercise-3-변수-설정\">Exercise 3: 변수 설정<a class=\"anchor\" href=\"#exercise-3-%eb%b3%80%ec%88%98-%ec%84%a4%ec%a0%95\">#</a></h3>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> led <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">13</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">pinMode</span>(led, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  \t<span style=\"color:#a6e22e\">digitalWrite</span>(led, HIGH);\n</span></span><span style=\"display:flex;\"><span>   \t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>   \t<span style=\"color:#a6e22e\">digitalWrite</span>(led, LOW);\n</span></span><span style=\"display:flex;\"><span>   \t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"int-led--13\">int led = 13;<a class=\"anchor\" href=\"#int-led--13\">#</a></h4>\r\n<ul>\n<li>led 라는 integer (정수) 변수를 선언</li>\n<li>led 변수의 값을 13으로 지정</li>\n</ul>\n<br>\n<br>\n<h3 id=\"exercise-4-상수로-설정하는-경우1\">Exercise 4: 상수로 설정하는 경우(1)<a class=\"anchor\" href=\"#exercise-4-%ec%83%81%ec%88%98%eb%a1%9c-%ec%84%a4%ec%a0%95%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b01\">#</a></h3>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">#define led 13\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">pinMode</span>(led, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  \t<span style=\"color:#a6e22e\">digitalWrite</span>(led, HIGH);\n</span></span><span style=\"display:flex;\"><span>   \t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>   \t<span style=\"color:#a6e22e\">digitalWrite</span>(led, LOW);\n</span></span><span style=\"display:flex;\"><span>   \t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"define-led-13\">#define led 13<a class=\"anchor\" href=\"#define-led-13\">#</a></h4>\r\n<ul>\n<li>int led = 13; 을 사용하는 대신 #define으로 상수 선언을 해도 됨</li>\n<li>상수 형태로 선언하면 컴파일시에 정의된 값을 참조하여 대체하므로 메모리를 차지하지 않음</li>\n<li><strong>#define을 사용하는 경우, 문장 종료 기호인 ;(세미콜론)을 사용하지 않음!</strong></li>\n</ul>\n<br>\n<br>\n<h3 id=\"exercise-5-상수로-설정하는-경우2\">Exercise 5: 상수로 설정하는 경우(2)<a class=\"anchor\" href=\"#exercise-5-%ec%83%81%ec%88%98%eb%a1%9c-%ec%84%a4%ec%a0%95%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b02\">#</a></h3>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">const</span> <span style=\"color:#66d9ef\">int</span> led <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">13</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">pinMode</span>(led, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  \t<span style=\"color:#a6e22e\">digitalWrite</span>(led, HIGH);\n</span></span><span style=\"display:flex;\"><span>   \t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>   \t<span style=\"color:#a6e22e\">digitalWrite</span>(led, LOW);\n</span></span><span style=\"display:flex;\"><span>   \t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"const-int-led--13\">const int led = 13;<a class=\"anchor\" href=\"#const-int-led--13\">#</a></h4>\r\n<ul>\n<li>const int led = 13; 형태로 상수 선언을 해도 됨</li>\n<li>단, <strong>문장종료 기호인 ;(세미콜론)을 사용함!</strong></li>\n</ul>\n<br>\n<br>\n<h3 id=\"blink-예제\">Blink 예제<a class=\"anchor\" href=\"#blink-%ec%98%88%ec%a0%9c\">#</a></h3>\r\n<p><strong>파일</strong>&gt; <strong>예제</strong>&gt; <strong>01.Basics</strong>&gt; <strong>Blink</strong></p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c\" data-lang=\"c\"><span style=\"display:flex;\"><span><span style=\"color:#75715e\">/*\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">   (주석문 생략)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">*/</span>\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// the setup function runs once when you press reset or power the board\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#75715e\">// initialize digital pin LED_BUILTIN as an output.\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">pinMode</span>(LED_BUILTIN, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\">// the loop function runs over and over again forever\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">digitalWrite</span>(LED_BUILTIN, HIGH);   <span style=\"color:#75715e\">// turn the LED on (HIGH is the voltage level)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);                       <span style=\"color:#75715e\">// wait for a second\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">digitalWrite</span>(LED_BUILTIN, LOW);    <span style=\"color:#75715e\">// turn the LED off by making the voltage LOW\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);                       <span style=\"color:#75715e\">// wait for a second\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}</span></span></code></pre></div><br>\n<h4 id=\"exercise\">Exercise<a class=\"anchor\" href=\"#exercise\">#</a></h4>\r\n<ol>\n<li>켜고 끄는 시간을 시간을 2초로 설정해본다.</li>\n</ol>\n<br>\n<br>\n<h3 id=\"신호등-led\">신호등 LED<a class=\"anchor\" href=\"#%ec%8b%a0%ed%98%b8%eb%93%b1-led\">#</a></h3>\r\n<figure class=\"center\"><img src=\"/image/3led.png\" width=\"50%\">\n</figure>\n\n<br>\n<h4 id=\"exercise-3\">Exercise<a class=\"anchor\" href=\"#exercise-3\">#</a></h4>\r\n<p>빨간색 5초 → 노란색 1초 → 초록색 5초씩 번갈아가면서 점등되도록 만들어 보자.</p>\n<br>\n<br>\n<h2 id=\"rgb-led\">RGB LED<a class=\"anchor\" href=\"#rgb-led\">#</a></h2>\r\n<h3 id=\"rgb-led의-3색을-교대로-점멸하기\">RGB LED의 3색을 교대로 점멸하기<a class=\"anchor\" href=\"#rgb-led%ec%9d%98-3%ec%83%89%ec%9d%84-%ea%b5%90%eb%8c%80%eb%a1%9c-%ec%a0%90%eb%a9%b8%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<br>\n<h4 id=\"schematic\">schematic<a class=\"anchor\" href=\"#schematic\">#</a></h4>\r\n<p><img src=\"/image/arduino-10rgbled.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-rgb-led-모듈의-핀이-gndrgb형태로-구성되어-있는-경우\">sketch: RGB LED 모듈의 핀이 **(GND,R,G,B)**형태로 구성되어 있는 경우<a class=\"anchor\" href=\"#sketch-rgb-led-%eb%aa%a8%eb%93%88%ec%9d%98-%ed%95%80%ec%9d%b4-gndrgb%ed%98%95%ed%83%9c%eb%a1%9c-%ea%b5%ac%ec%84%b1%eb%90%98%ec%96%b4-%ec%9e%88%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h4>\r\n<ul>\n<li>digitalWrite를 사용하는 경우: HIGH 켜짐, LOW 꺼짐</li>\n<li>analogWrite를 사용하는 경우: 0 꺼짐, 255 켜짐</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c\" data-lang=\"c\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledR <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>; \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledG <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>; \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>; \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">pinMode</span>(pin_ledR, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">pinMode</span>(pin_ledG, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">pinMode</span>(pin_ledB, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledR, HIGH);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledR, LOW);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledG, HIGH);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledG, LOW);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledB, HIGH);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledB, LOW);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h4 id=\"주의사항-rgb-led-모듈의-핀이-vccrgb형태로-구성되어-있는-경우\">주의사항: RGB LED 모듈의 핀이 <strong>(VCC,R,G,B)형태</strong>로 구성되어 있는 경우<a class=\"anchor\" href=\"#%ec%a3%bc%ec%9d%98%ec%82%ac%ed%95%ad-rgb-led-%eb%aa%a8%eb%93%88%ec%9d%98-%ed%95%80%ec%9d%b4-vccrgb%ed%98%95%ed%83%9c%eb%a1%9c-%ea%b5%ac%ec%84%b1%eb%90%98%ec%96%b4-%ec%9e%88%eb%8a%94-%ea%b2%bd%ec%9a%b0\">#</a></h4>\r\n<ul>\n<li><strong>255에서 각 Color 코드값을 뺀 값</strong>으로 사용해야 한다!!! (주의할 것)</li>\n</ul>\n<blockquote class='book-hint '>\r\n<ul>\n<li>\n<p>digitalWrite를 사용하는 경우</p>\n<ul>\n<li>HIGH 꺼짐</li>\n<li>LOW 켜짐</li>\n</ul>\n</li>\n<li>\n<p>analogWrite를 사용하는 경우</p>\n<ul>\n<li>\n<p>원래 값이 &ldquo;0&quot;인 경우 LED가 꺼지는 것이 정상이지만, VCC/R/G/B LED의 경우는</p>\n<p>255 - 0 = <strong>255</strong> 일때, LED가 꺼짐</p>\n</li>\n<li>\n<p>원래 값이 &ldquo;255&quot;인 경우 LED가 켜지는 것이 정상이지만, VCC/R/G/B LED의 경우는</p>\n<p>255 - 255 = <strong>0</strong> 일때 LED가 켜짐</p>\n</li>\n<li>\n<p>Red LED의 세기를 &ldquo;153&quot;으로 주고 싶을 경우, VCC/R/G/B LED에서는</p>\n<p>255 - 153 = <strong>102</strong> 의 값을 주어야 함</p>\n</li>\n</ul>\n</li>\n</ul></blockquote><br>\n<h4 id=\"수정된-sketch-vccrgb로-구성된-모듈의-경우\">(수정된) sketch: (<strong>VCC</strong>,R,G,B로 구성된 모듈의 경우)<a class=\"anchor\" href=\"#%ec%88%98%ec%a0%95%eb%90%9c-sketch-vccrgb%eb%a1%9c-%ea%b5%ac%ec%84%b1%eb%90%9c-%eb%aa%a8%eb%93%88%ec%9d%98-%ea%b2%bd%ec%9a%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledR <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>; \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledG <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>; \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>; \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">pinMode</span>(pin_ledR, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">pinMode</span>(pin_ledG, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">pinMode</span>(pin_ledB, OUTPUT);\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledR, LOW);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledR, HIGH);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledG, LOW);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledG, HIGH);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledB, LOW);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">digitalWrite</span>(pin_ledB, HIGH);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h2 id=\"pwm\">PWM<a class=\"anchor\" href=\"#pwm\">#</a></h2>\r\n<h3 id=\"arduino-pwm-출력\">Arduino PWM 출력<a class=\"anchor\" href=\"#arduino-pwm-%ec%b6%9c%eb%a0%a5\">#</a></h3>\r\n<ul>\n<li><strong>analogWrite()</strong> : 8bit를 사용하므로 <strong>0~255</strong> 범위에서 센서값을 출력</li>\n<li><strong>GND</strong>,R,G,B로 구성된 모듈의 경우\n*   analogWrite(pin_ledR, <strong>0</strong>);           pin_ledR에 연결된 LED를 <strong>&ldquo;켬&rdquo;</strong>\n*   analogWrite(pin_ledR, <strong>255</strong>);       pin_ledR에 연결된 LED를 <strong>끔</strong></li>\n<li>PWM 출력이 가능한 디지털핀(<strong>3,5,6,9,10,11</strong>)을 사용하여 출력</li>\n<li><strong>pinMode 선언 불필요</strong>\n<ul>\n<li>예를들어, pinMode(9, OUTPUT); → 9번 핀으로 PWM 출력을 한다면 불필요한 선언임</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"sketch-gndrgb로-구성된-모듈의-경우\">sketch: (<strong>GND</strong>,R,G,B로 구성된 모듈의 경우)<a class=\"anchor\" href=\"#sketch-gndrgb%eb%a1%9c-%ea%b5%ac%ec%84%b1%eb%90%9c-%eb%aa%a8%eb%93%88%ec%9d%98-%ea%b2%bd%ec%9a%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledR <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>; \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledG <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>; \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>; \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {      <span style=\"color:#75715e\">// pinMode 필요없음\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledR, <span style=\"color:#ae81ff\">255</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledR, <span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledG, <span style=\"color:#ae81ff\">255</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledG, <span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledB, <span style=\"color:#ae81ff\">255</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">1000</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledB, <span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h3 id=\"여러가지-색깔-만들어보기\">여러가지 색깔 만들어보기<a class=\"anchor\" href=\"#%ec%97%ac%eb%9f%ac%ea%b0%80%ec%a7%80-%ec%83%89%ea%b9%94-%eb%a7%8c%eb%93%a4%ec%96%b4%eb%b3%b4%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"16진수-및-10진수-color-table\">16진수 및 10진수 Color Table<a class=\"anchor\" href=\"#16%ec%a7%84%ec%88%98-%eb%b0%8f-10%ec%a7%84%ec%88%98-color-table\">#</a></h4>\r\n<p><img src=\"/image/color_table01.png\" alt=\"\" /></p>\n<p><img src=\"/image/color_table02.png\" alt=\"\" /></p>\n<p><img src=\"/image/color_table03.png\" alt=\"\" /></p>\n<p><img src=\"/image/color_table04.png\" alt=\"\" /></p>\n<p>※ 색깔이 미묘하게 다를 수 있다.</p>\n<br>\n<h4 id=\"sketch-006699-r000-g102-b153-색깔-만들기\">sketch: 006699 (R:000, G:102, B:153) 색깔 만들기<a class=\"anchor\" href=\"#sketch-006699-r000-g102-b153-%ec%83%89%ea%b9%94-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledR <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>; \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledG <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>; \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>; \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledR, <span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledG, <span style=\"color:#ae81ff\">102</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledB, <span style=\"color:#ae81ff\">153</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"exercise-무지개-색깔-만들기\">Exercise: 무지개 색깔 만들기<a class=\"anchor\" href=\"#exercise-%eb%ac%b4%ec%a7%80%ea%b0%9c-%ec%83%89%ea%b9%94-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h4>\r\n<ul>\n<li>\n<p>1초마다 빨-주-노-초-파-남-보 순서대로 색깔이 출력되도록 만들어 본다. (색상표에서 가장 비슷한 색깔 선택)</p>\n</li>\n<li>\n<p>각 색깔을 출력한 뒤</p>\n</li>\n<li>\n<p>delay(1000); 을 추가하여야 1초간 해당 색깔이 유지된다.</p>\n<table>\n  <thead>\n      <tr>\n          <th></th>\n          <th>빨</th>\n          <th>주</th>\n          <th>노</th>\n          <th>초</th>\n          <th>파</th>\n          <th>남</th>\n          <th>보</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>R color code</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>G color code</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>B color code</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n  </tbody>\n</table>\n</li>\n</ul>\n<br>\n<h3 id=\"rgb-gradation-그라데이션-효과를-주어-색깔-바꿔보기\">RGB Gradation: 그라데이션 효과를 주어 색깔 바꿔보기<a class=\"anchor\" href=\"#rgb-gradation-%ea%b7%b8%eb%9d%bc%eb%8d%b0%ec%9d%b4%ec%85%98-%ed%9a%a8%ea%b3%bc%eb%a5%bc-%ec%a3%bc%ec%96%b4-%ec%83%89%ea%b9%94-%eb%b0%94%ea%bf%94%eb%b3%b4%ea%b8%b0\">#</a></h3>\r\n<ul>\n<li>빨간색 (R:255, G:0, B:0)에서 초록색 (R:0, G:255, B:0)으로 색깔 바꾸기\n<ul>\n<li>R값이 255에서 시작하여 0까지 감소하는 동안</li>\n<li>G값은 0에서 시작하여 255까지 감소하면 된다.</li>\n<li>B는 0 유지</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"for문-사용하기\">for문 사용하기<a class=\"anchor\" href=\"#for%eb%ac%b8-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ul>\n<li>\n<p>기본 문법</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">for</span>(<span style=\"color:#960050;background-color:#1e0010\">초기값</span>; <span style=\"color:#960050;background-color:#1e0010\">조건</span>; <span style=\"color:#960050;background-color:#1e0010\">증감</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#960050;background-color:#1e0010\">반복처리문</span>;\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div></li>\n<li>\n<p>예를들어</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">for</span>(R<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">255</span>; R<span style=\"color:#f92672\">&gt;=</span><span style=\"color:#ae81ff\">0</span>; R<span style=\"color:#f92672\">--</span>) {\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#960050;background-color:#1e0010\">반복처리문</span>;\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><ul>\n<li>R값이 255부터</li>\n<li>0보다 크거나 같을 때(0)까지</li>\n<li>R값을 1씩 감소시키면서</li>\n<li>반복처리문을 실행</li>\n<li>즉, 반복처리문을 256회 실행</li>\n</ul>\n</li>\n</ul>\n<br>\n<h4 id=\"color값-변화시키기\">Color값 변화시키기<a class=\"anchor\" href=\"#color%ea%b0%92-%eb%b3%80%ed%99%94%ec%8b%9c%ed%82%a4%ea%b8%b0\">#</a></h4>\r\n<ul>\n<li>\n<p>먼저 변화하는 값을 저장할 변수를 설정하고, 초기값으로 0을 지정 (초기값은 지정하지 않아도 됨)</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> R <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> G <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> B <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;</span></span></code></pre></div></li>\n<li>\n<p>R값을 255부터 0까지 감소시키면서, G값은 0에서 255까지 감소시킴</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">for</span>(R<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">255</span>; R<span style=\"color:#f92672\">&gt;=</span><span style=\"color:#ae81ff\">0</span>; R<span style=\"color:#f92672\">--</span>) {\n</span></span><span style=\"display:flex;\"><span>    G <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span> <span style=\"color:#f92672\">-</span> R;\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div></li>\n<li>\n<p>여기에 analogWrite를 추가하고, 색깔이 일정한 시간동안 나타난 뒤 바뀌도록 delay를 추가</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">for</span>(R<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">255</span>; R<span style=\"color:#f92672\">&gt;=</span><span style=\"color:#ae81ff\">0</span>; R<span style=\"color:#f92672\">--</span>) {\n</span></span><span style=\"display:flex;\"><span>\tG <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span> <span style=\"color:#f92672\">-</span> R;\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledR, R);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledG, G);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledB, <span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div></li>\n</ul>\n<br>\n<h4 id=\"빨간색초록색-그라데이션-코드-완성하기\">빨간색&gt;초록색 그라데이션 코드 완성하기<a class=\"anchor\" href=\"#%eb%b9%a8%ea%b0%84%ec%83%89%ec%b4%88%eb%a1%9d%ec%83%89-%ea%b7%b8%eb%9d%bc%eb%8d%b0%ec%9d%b4%ec%85%98-%ec%bd%94%eb%93%9c-%ec%99%84%ec%84%b1%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> R <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> G <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> B <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledR <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">9</span>; \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledG <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">10</span>; \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>; \n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#66d9ef\">for</span>(R<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">255</span>; R<span style=\"color:#f92672\">&gt;=</span><span style=\"color:#ae81ff\">0</span>; R<span style=\"color:#f92672\">--</span>) {\n</span></span><span style=\"display:flex;\"><span>\t\tG <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">255</span> <span style=\"color:#f92672\">-</span> R;\n</span></span><span style=\"display:flex;\"><span>\t\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledR, R);\n</span></span><span style=\"display:flex;\"><span>\t\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledG, G);\n</span></span><span style=\"display:flex;\"><span>\t\t<span style=\"color:#a6e22e\">analogWrite</span>(pin_ledB, <span style=\"color:#ae81ff\">0</span>);\n</span></span><span style=\"display:flex;\"><span>\t\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">10</span>);\n</span></span><span style=\"display:flex;\"><span>\t}\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h4 id=\"exercise-빨간색초록색파란색반복-그라데이션\">Exercise: 빨간색&gt;초록색&gt;파란색&gt;(반복)&raquo; 그라데이션<a class=\"anchor\" href=\"#exercise-%eb%b9%a8%ea%b0%84%ec%83%89%ec%b4%88%eb%a1%9d%ec%83%89%ed%8c%8c%eb%9e%80%ec%83%89%eb%b0%98%eb%b3%b5-%ea%b7%b8%eb%9d%bc%eb%8d%b0%ec%9d%b4%ec%85%98\">#</a></h4>\r\n<br>\n<br>\n<h2 id=\"analog-신호의-처리\">Analog 신호의 처리<a class=\"anchor\" href=\"#analog-%ec%8b%a0%ed%98%b8%ec%9d%98-%ec%b2%98%eb%a6%ac\">#</a></h2>\r\n<h3 id=\"가변저항-값을-시리얼모니터에-출력하기\">가변저항 값을 시리얼모니터에 출력하기<a class=\"anchor\" href=\"#%ea%b0%80%eb%b3%80%ec%a0%80%ed%95%ad-%ea%b0%92%ec%9d%84-%ec%8b%9c%eb%a6%ac%ec%96%bc%eb%aa%a8%eb%8b%88%ed%84%b0%ec%97%90-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"analog-ina0a5-핀의-역할\">ANALOG IN(A0~A5) 핀의 역할<a class=\"anchor\" href=\"#analog-ina0a5-%ed%95%80%ec%9d%98-%ec%97%ad%ed%95%a0\">#</a></h4>\r\n<ol>\n<li>아날로그 입력으로 사용 : analogRead()\n<ul>\n<li>analogRead()는 pinMode 선언 불필요</li>\n<li>예를들어, pinMode(A0, INPUT); → 불필요한 선언임</li>\n</ul>\n</li>\n<li>PWM을 사용하는 디지털 입력으로 사용 :</li>\n<li>analogRead()\n<ul>\n<li>analogRead() : 10bit를 사용하므로 0~1023 범위에서 센서값을 읽음</li>\n</ul>\n</li>\n</ol>\n<br>\n<h4 id=\"schematic-1\">schematic<a class=\"anchor\" href=\"#schematic-1\">#</a></h4>\r\n<p><img src=\"/image/arduino-11potentiometer.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch\">sketch<a class=\"anchor\" href=\"#sketch\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> value_potentiometer <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;      <span style=\"color:#75715e\">// potentiometer value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>); \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\tvalue_potentiometer <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(A0);       <span style=\"color:#75715e\">// 10bit (0~1023)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\tSerial.<span style=\"color:#a6e22e\">println</span>(value_potentiometer);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h3 id=\"가변저항-값에-따라-led-밝기-조절하기\">가변저항 값에 따라 LED 밝기 조절하기<a class=\"anchor\" href=\"#%ea%b0%80%eb%b3%80%ec%a0%80%ed%95%ad-%ea%b0%92%ec%97%90-%eb%94%b0%eb%9d%bc-led-%eb%b0%9d%ea%b8%b0-%ec%a1%b0%ec%a0%88%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<h4 id=\"schematic-2\">schematic<a class=\"anchor\" href=\"#schematic-2\">#</a></h4>\r\n<p><img src=\"/image/arduino-12rgbled_potentiometer.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"sketch-1\">sketch<a class=\"anchor\" href=\"#sketch-1\">#</a></h4>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-c\" data-lang=\"c\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">int</span> pin_ledB <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">11</span>;                <span style=\"color:#75715e\">// Blue LED for PWM\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span><span style=\"color:#66d9ef\">int</span> value_potentiometer <span style=\"color:#f92672\">=</span> <span style=\"color:#ae81ff\">0</span>;      <span style=\"color:#75715e\">// potentiometer value\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);  \n</span></span><span style=\"display:flex;\"><span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\tvalue_potentiometer <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">analogRead</span>(A0);                             <span style=\"color:#75715e\">// 10bit (0~1023)\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>\tvalue_potentiometer <span style=\"color:#f92672\">=</span> <span style=\"color:#a6e22e\">map</span>(value_potentiometer, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">1023</span>, <span style=\"color:#ae81ff\">0</span>, <span style=\"color:#ae81ff\">255</span>);  <span style=\"color:#75715e\">// 10bit → 8bit\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#a6e22e\">analogWrite</span>(pin_ledB, value_potentiometer);\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;illumination level: &#34;</span>); \n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">println</span>(value_potentiometer);\n</span></span><span style=\"display:flex;\"><span>\t<span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">100</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<br>\n<h2 id=\"시리얼-모니터-사용하기\">시리얼 모니터 사용하기<a class=\"anchor\" href=\"#%ec%8b%9c%eb%a6%ac%ec%96%bc-%eb%aa%a8%eb%8b%88%ed%84%b0-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0\">#</a></h2>\r\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);         <span style=\"color:#75715e\">// 시리얼 모니터 사용 선언, 출력속도 지정 9600 Baud rate\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;A&#34;</span>);          <span style=\"color:#75715e\">// print   출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;B&#34;</span>);        <span style=\"color:#75715e\">// println 출력 후 줄바꾸기\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;C&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;D&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1</span>; i<span style=\"color:#f92672\">&lt;</span><span style=\"color:#ae81ff\">11</span>; i<span style=\"color:#f92672\">++</span>) {\n</span></span><span style=\"display:flex;\"><span>        Serial.<span style=\"color:#a6e22e\">println</span>(i);      <span style=\"color:#75715e\">// 변수값 출력\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    }\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5000</span>);\n</span></span><span style=\"display:flex;\"><span>    \n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h3 id=\"excercise-1\">Excercise 1.<a class=\"anchor\" href=\"#excercise-1\">#</a></h3>\r\n<ul>\n<li>시리얼 모니터에 출력해보기</li>\n</ul>\n<pre tabindex=\"0\"><code>**********\n**********\n**********\n**********\n**********\n**********\n**********\n**********\n**********\n**********</code></pre><div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);         <span style=\"color:#75715e\">// 시리얼 모니터 사용 선언, 출력속도 지정 9600 Baud rate\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>\tSerial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<ul>\n<li>for문을 사용하여 위 모양대로 출력해보기</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);         <span style=\"color:#75715e\">// 시리얼 모니터 사용 선언, 출력속도 지정 9600 Baud rate\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1</span>; i<span style=\"color:#f92672\">&lt;=</span><span style=\"color:#ae81ff\">10</span>; i<span style=\"color:#f92672\">++</span>) {   <span style=\"color:#75715e\">// 1 ~ 10행\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5000</span>);\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<h3 id=\"excercise-2\">Excercise 2.<a class=\"anchor\" href=\"#excercise-2\">#</a></h3>\r\n<ul>\n<li>시리얼 모니터에 출력해보기</li>\n</ul>\n<pre tabindex=\"0\"><code>*\n**\n***\n****\n*****\n******\n*******\n********\n*********\n**********</code></pre><div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);         <span style=\"color:#75715e\">// 시리얼 모니터 사용 선언, 출력속도 지정 9600 Baud rate\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;*&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;***&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;****&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;*****&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;******&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;*******&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;*********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>(<span style=\"color:#e6db74\">&#34;**********&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5000</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div><br>\n<ul>\n<li>for문을 사용하여 위 모양대로 출력해보기</li>\n</ul>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">setup</span>() {\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">begin</span>(<span style=\"color:#ae81ff\">9600</span>);         <span style=\"color:#75715e\">// 시리얼 모니터 사용 선언, 출력속도 지정 9600 Baud rate\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>}\n</span></span><span style=\"display:flex;\"><span>\n</span></span><span style=\"display:flex;\"><span><span style=\"color:#66d9ef\">void</span> <span style=\"color:#a6e22e\">loop</span>() {\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> i<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1</span>; i<span style=\"color:#f92672\">&lt;=</span><span style=\"color:#ae81ff\">10</span>; i<span style=\"color:#f92672\">++</span>) {   <span style=\"color:#75715e\">// 1 ~ 10행\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>    <span style=\"color:#66d9ef\">for</span>(<span style=\"color:#66d9ef\">int</span> j<span style=\"color:#f92672\">=</span><span style=\"color:#ae81ff\">1</span>; j<span style=\"color:#f92672\">&lt;=</span>i; j<span style=\"color:#f92672\">++</span>) {  <span style=\"color:#75715e\">// 1 ~ 10열\n</span></span></span><span style=\"display:flex;\"><span><span style=\"color:#75715e\"></span>      Serial.<span style=\"color:#a6e22e\">print</span>(<span style=\"color:#e6db74\">&#34;*&#34;</span>);\n</span></span><span style=\"display:flex;\"><span>    }\n</span></span><span style=\"display:flex;\"><span>    Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>  }\n</span></span><span style=\"display:flex;\"><span>  <span style=\"color:#a6e22e\">delay</span>(<span style=\"color:#ae81ff\">5000</span>);\n</span></span><span style=\"display:flex;\"><span>  Serial.<span style=\"color:#a6e22e\">println</span>();\n</span></span><span style=\"display:flex;\"><span>}</span></span></code></pre></div>"}{"uri":"http://localhost:1313/posts/%EC%97%91%EC%85%80-%EB%8B%A4%EC%A4%91%EC%A1%B0%EA%B1%B4%EB%9E%AD%ED%82%B9/","title":"엑셀, 다중조건을 사용하여 랭킹 구하기","content":"<p>1가지 조건으로 랭킹을 구하는 경우, rank.eq() 함수를 사용하면 되지만, 2가지 이상의 조건이 부합하는 경우에는 rank.eq() 함수로는 구할 수 없습니다. 이처럼 다중 조건이 주어졌을 때 랭킹을 구하는 방법입니다.</p>\n<br>\n<h3 id=\"예시\">예시<a class=\"anchor\" href=\"#%ec%98%88%ec%8b%9c\">#</a></h3>\r\n<p><img src=\"/image/rank.png\" alt=\"\" /></p>\n<br>\n<p>위 예시에서 &lsquo;자격&rsquo;과 &lsquo;계열&rsquo; 조건에 따라 각각의 랭킹을 구하는 함수는</p>\n<p>3년인문 랭킹의 경우</p>\n<div class=\"highlight\"><pre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"><code class=\"language-C\" data-lang=\"C\"><span style=\"display:flex;\"><span><span style=\"color:#f92672\">=</span><span style=\"color:#a6e22e\">IF</span>(<span style=\"color:#a6e22e\">AND</span>(<span style=\"color:#960050;background-color:#1e0010\">$</span>E3<span style=\"color:#f92672\">=</span>L<span style=\"color:#960050;background-color:#1e0010\">$</span><span style=\"color:#ae81ff\">1</span>,<span style=\"color:#960050;background-color:#1e0010\">$</span>F3<span style=\"color:#f92672\">=</span>L<span style=\"color:#960050;background-color:#1e0010\">$</span><span style=\"color:#ae81ff\">2</span>),<span style=\"color:#a6e22e\">SUMPRODUCT</span>((<span style=\"color:#960050;background-color:#1e0010\">$</span>E<span style=\"color:#960050;background-color:#1e0010\">$</span><span style=\"color:#ae81ff\">3</span><span style=\"color:#f92672\">:</span><span style=\"color:#960050;background-color:#1e0010\">$</span>E<span style=\"color:#960050;background-color:#1e0010\">$</span><span style=\"color:#ae81ff\">27</span><span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">$</span>E3)<span style=\"color:#f92672\">*</span>(<span style=\"color:#960050;background-color:#1e0010\">$</span>F<span style=\"color:#960050;background-color:#1e0010\">$</span><span style=\"color:#ae81ff\">3</span><span style=\"color:#f92672\">:</span><span style=\"color:#960050;background-color:#1e0010\">$</span>F<span style=\"color:#960050;background-color:#1e0010\">$</span><span style=\"color:#ae81ff\">27</span><span style=\"color:#f92672\">=</span><span style=\"color:#960050;background-color:#1e0010\">$</span>F3)<span style=\"color:#f92672\">*</span>(<span style=\"color:#960050;background-color:#1e0010\">$</span>J<span style=\"color:#960050;background-color:#1e0010\">$</span><span style=\"color:#ae81ff\">3</span><span style=\"color:#f92672\">:</span><span style=\"color:#960050;background-color:#1e0010\">$</span>J<span style=\"color:#960050;background-color:#1e0010\">$</span><span style=\"color:#ae81ff\">27</span><span style=\"color:#f92672\">&gt;</span><span style=\"color:#960050;background-color:#1e0010\">$</span>J3))<span style=\"color:#f92672\">+</span><span style=\"color:#ae81ff\">1</span>,<span style=\"color:#e6db74\">&#34;&#34;</span>)</span></span></code></pre></div><p>입니다.</p>\n<br>\n<ul>\n<li>L1, L2에 &lsquo;3&rsquo;, &lsquo;인문&rsquo;이라는 조건을 넣고</li>\n<li>AND($E3=L$1,$F3=L$2) 부분을 통해 E, F열의 값이 각각 &lsquo;3&rsquo;과 &lsquo;인문&rsquo;인 경우에만</li>\n<li>J3:J27 까지의 국어영어 합계점수에 따라 랭킹을 부여합니다.</li>\n<li>동석차인경우 높은 순위의 값을 부여합니다.</li>\n</ul>\n"}{"uri":"http://localhost:1313/posts/%EC%97%B0%EC%88%98%EA%B8%B0-diy/","title":"연수기 DIY","content":"<h3 id=\"연수기의-원리\">연수기의 원리<a class=\"anchor\" href=\"#%ec%97%b0%ec%88%98%ea%b8%b0%ec%9d%98-%ec%9b%90%eb%a6%ac\">#</a></h3>\r\n<p>연수기는 Ca2+, Mg2+, Fe2+ 같은 양이온을 포함한 <strong>센물</strong>을, (이러한 양이온을 제거한 형태의) <strong>단물</strong>로 만들어주는 장치입니다. 이렇게 만들어 주는 방법은 크게 두가지인데, 하나는 전기적인 방법이고, 다른 하나는 센물에 포함되어 있는 양이온을 다른 형태의 양이온으로 치환시켜주는 방법입니다. 전자는 전기연결이 필요하므로, 보통 집에서 사용하는 연수기는 후자의 방법을 사용하지요.</p>\n<br>\n<p>이를 위해 기본적으로 <strong>양이온교환수지</strong>를 사용합니다. 양이온 교환수지는 보통 날치알 같은 작은 알갱이 형태로 되어 있는데, 이 알갱이에 수많은 Na+이 붙어 있다고 생각하면 되요. 이 상태에서 센물(수돗물)이 들어오면, 센물의 Ca2+, Mg2+, Fe2+ 등의 이온이 Na+가 붙어 있던 자리에 대신 들어가게 되고, 대신 Na+가 수도물에 포함되어 나오게 되는데, 이렇게 되면 물 속에 Ca2+, Mg2+, Fe2+ 등의 성분이 사라지게 되어, 연수(단물)가 나오게 되는 것입니다. 말로 표현하자니 엄청 복잡한데요. 그러나, 고등학교 화학시간에도 이러한 원리를 이미 배웠다는 사실&hellip;교과서에 나와있는 그림으로 표현하면 아래와 같아요.</p>\n<p><img src=\"/image/Softner-01.png\" alt=\"\" /></p>\n<br>\n<p>그러므로, 연수기는 양이온 교환수지가 기본이되며, 여기에 세디멘트필터나 KDF필터 등을 덧붙이면 보다 성능 좋은 연수기를 만들 수 있는 것입니다.</p>\n<br>\n<h4 id=\"양이온-교환수지-재생의-원리\">양이온 교환수지 재생의 원리<a class=\"anchor\" href=\"#%ec%96%91%ec%9d%b4%ec%98%a8-%ea%b5%90%ed%99%98%ec%88%98%ec%a7%80-%ec%9e%ac%ec%83%9d%ec%9d%98-%ec%9b%90%eb%a6%ac\">#</a></h4>\r\n<p>또 하나! 위의 그림에서 보면 양이온 교환수지에 붙어 있는 Na+가, Ca2+나 Mg2+로 바뀌고 있는데요. 이러한 과정이 반복되어 Na+가 Ca2+나 Mg2+로 모두 바뀌게 되면, 더이상 연수기의 역할을 하지 못하게 되겠죠. 바로 이때가 양이온교환수지를 재생해주어야 하는 시점입니다. 눈으로는 볼 수는 없기 때문에 대략 1~2달정도 뒤에 재생하면 됩니다.</p>\n<br>\n<p>재생하는 원리는 연수기 원리와 반대로, 양이온 교환수지에 붙어있는 Ca2+, Mg2+ 등의 이온을 Na+로 바꿔주면 됩니다. 이를 위해 Na+가 다량 포함된 소금물에 담궈두는 것이에요.</p>\n<br>\n<p>이제 연수기를 만들어 보겠습니다. 이런 재료들은 중국이 매우 저렴해요. 똑같은 부품을 한국에서 사려면 거의 두 배이상 비용이 소요됩니다.</p>\n<br>\n<br>\n<h3 id=\"연수기-diy에-필요한-부품--필터\">연수기 DIY에 필요한 부품 &amp; 필터<a class=\"anchor\" href=\"#%ec%97%b0%ec%88%98%ea%b8%b0-diy%ec%97%90-%ed%95%84%ec%9a%94%ed%95%9c-%eb%b6%80%ed%92%88--%ed%95%84%ed%84%b0\">#</a></h3>\r\n<table>\n  <thead>\n      <tr>\n          <th>부품(중국어)</th>\n          <th>규격</th>\n          <th>수량</th>\n          <th>가격(元)</th>\n          <th>구입처</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>투명 하우징(透明 滤瓶)</td>\n          <td>10寸(33.3cm), 4分(½ inch)</td>\n          <td>3</td>\n          <td>23 * 3</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z0d.6639537.1997196601.1381.67905b15PJvT7q&amp;id=2801134265\">타오바오 링크</a></td>\n      </tr>\n      <tr>\n          <td>하우징 연결니플(4分 外牙对接头)</td>\n          <td>M44(½ inch)</td>\n          <td>4</td>\n          <td>1.5 * 4</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z0d.6639537.1997196601.1411.67905b15PJvT7q&amp;id=3346062143\">타오바오 링크</a></td>\n      </tr>\n      <tr>\n          <td>하우징 고정브라켓(铁板)</td>\n          <td>10寸(33.3cm), 3级, 台式</td>\n          <td>1</td>\n          <td>18</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z0d.6639537.1997196601.1421.67905b15PJvT7q&amp;id=12901831458\">타오바오 링크</a></td>\n      </tr>\n      <tr>\n          <td>고정브라켓 받침대(台式滤瓶托盘)</td>\n          <td>10寸专用(孔距 3cm*4cm)</td>\n          <td>3</td>\n          <td>3 * 3</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z0d.6639537.1997196601.1401.67905b15PJvT7q&amp;id=12723290555\">타오바오 링크</a></td>\n      </tr>\n      <tr>\n          <td>스텐나사(滤瓶安装 不锈钢 螺丝)</td>\n          <td>5*16</td>\n          <td>12</td>\n          <td>0.25 * 12</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z0d.6639537.1997196601.1391.67905b15PJvT7q&amp;id=7533254839\">타오바오 링크</a></td>\n      </tr>\n      <tr>\n          <td>하우징 오프너(滤瓶 扳手)</td>\n          <td>10寸(33.3cm)</td>\n          <td>1</td>\n          <td>1.5</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z0d.6639537.1997196601.1371.67905b15PJvT7q&amp;id=2497951177\">타오바오 링크</a></td>\n      </tr>\n      <tr>\n          <td>테프론 테이프(生料带)</td>\n          <td></td>\n          <td>1</td>\n          <td>1.4</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z0d.6639537.1997196601.1331.67905b15PJvT7q&amp;id=3885748725\">타오바오 링크</a></td>\n      </tr>\n      <tr>\n          <td>세디멘트침전필터(PP棉滤芯)</td>\n          <td>10寸(33.3cm)</td>\n          <td>6</td>\n          <td>3 * 6</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z0d.6639537.1997196601.1361.67905b15PJvT7q&amp;id=2851424237\">타오바오 링크</a></td>\n      </tr>\n      <tr>\n          <td>KDF,활성탄필터(KDF活性炭滤芯)</td>\n          <td>KDF55 1000g, 활성탄 300g</td>\n          <td>1</td>\n          <td>150</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z0d.6639537.1997196601.1351.67905b15PJvT7q&amp;id=42424910740\">타오바오 링크</a></td>\n      </tr>\n      <tr>\n          <td>양이온교환수지(阳离子交换树脂)</td>\n          <td>양이온교환수지 500g</td>\n          <td>1</td>\n          <td>25</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z0d.6639537.1997196601.1341.67905b15PJvT7q&amp;id=17355996004\">타오바오 링크</a></td>\n      </tr>\n      <tr>\n          <td><strong>연수기부품 구입비 : 107.9元</strong></td>\n          <td><strong>필터 구입비 : 193元</strong></td>\n          <td><strong>∴총비용</strong></td>\n          <td><strong>= 300.9元</strong></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>(필요시 선택사항)</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n      </tr>\n      <tr>\n          <td>수전 연결관(波纹进水软管)</td>\n          <td>4分, 100cm, 304不锈钢</td>\n          <td>2</td>\n          <td>9 * 2</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z10.3-c.w4002-6097124090.25.629b416wGU3iK&amp;id=40065388099\">타오바오 링크</a></td>\n      </tr>\n      <tr>\n          <td>연결니플(4分 外牙对接头)</td>\n          <td>M44(½ inch)</td>\n          <td>1</td>\n          <td>1.5</td>\n          <td><a href=\"https://item.taobao.com/item.htm?spm=a1z0d.6639537.1997196601.1411.67905b15PJvT7q&amp;id=3346062143\">타오바오 링크</a></td>\n      </tr>\n  </tbody>\n</table>\n<p>※ 모두 같은 판매자이므로 장바구니에 수량맞춰 담아 한번에 주문하세요. (단, 선택사항에 있는 수전 연결관은 판매자가 다릅니다.)</p>\n<p>※ (필요시 선택사항) 기존에 사용하던 연수기가 있으세요? 사용하던 연수기의 수전 연결호스의 규격이 4分 (½ inch)인 경우에는 수전 연결관을 추가로 구입할 필요가 없습니다. 그러나, 연수기를 처음 설치하는 경우에는 수전(주로 샤워기가 달려있는 부분에서 원수를 연결)과의 거리를 생각하여 연결관과 연결니플을 추가로 구입해야 합니다. 이에 대해서는 아래에서 추가로 설명합니다.</p>\n<br>\n<br>\n<h3 id=\"필터-역할-및-교환주기\">필터 역할 및 교환주기<a class=\"anchor\" href=\"#%ed%95%84%ed%84%b0-%ec%97%ad%ed%95%a0-%eb%b0%8f-%ea%b5%90%ed%99%98%ec%a3%bc%ea%b8%b0\">#</a></h3>\r\n<table>\n  <thead>\n      <tr>\n          <th>단계</th>\n          <th>필터종류</th>\n          <th>역할</th>\n          <th>교환주기</th>\n      </tr>\n  </thead>\n  <tbody>\n      <tr>\n          <td>1단계</td>\n          <td>세디멘트(PP)</td>\n          <td>녹물, 염소 제거</td>\n          <td>1~2개월</td>\n      </tr>\n      <tr>\n          <td>2단계</td>\n          <td>KDF, 활성탄</td>\n          <td>중금속, 염소 제거</td>\n          <td>1년~2년</td>\n      </tr>\n      <tr>\n          <td>3단계</td>\n          <td>양이온 교환수지</td>\n          <td>Ca2+, Mg2+ 제거</td>\n          <td>1-2개월 마다 소금물 처리, 1년 뒤 완전 교환</td>\n      </tr>\n  </tbody>\n</table>\n<p>\u200b\t1) 세디멘트필터를 6개 구입해두면, 2개월에 한 번씩 교환하여 <strong>총 1년을 사용</strong>할 수 있습니다.</p>\n<p>\u200b\t2) KDF필터는 최소 1년~2년간 사용가능 합니다.</p>\n<p>\u200b\t3) KDF필터를 1년마다 교체한다고 하면, <strong>1년 유지비가 193원</strong>이 되겠죠.</p>\n<p>\u200b\t4) 양이온 교환수지는 1개만 구입한 뒤에, 1<del>2개월마다 한번씩 집에서 사용하는 굵은 소금으로 재생하면 되므로, 여러 개를 구입할 필요가 없어요. 재생하는 방법은, 1L의 물에 굵은 소금을 400g정도를 넣어 소금물을 만들고, 소금물에 양이온 교환수지 필터를 필터통채로 넣어 담근 뒤, 1</del>2시간 후에 꺼내어 재설치하면 됩니다. 소금물로 5회 재생하려면 2000g의 소금(海盐)이 필요한데, <a href=\"https://item.taobao.com/item.htm?spm=a230r.1.14.52.5781e995IGc3HC&amp;id=40273962890&amp;ns=1&amp;abbucket=3#detail\">타오바오</a>에서 16원정도 합니다.</p>\n<p>\u200b\t5) 물론, 이러한 과정이 귀찮으면 양이온교환수지필터를 추가로 구입하면 됩니다. 1년에 5개씩 추가로 소모한다고 해도 유지비가 <strong>125원 추가</strong>되는 정도입니다. 어떻게 할지는 잘 생각하셔서&hellip;</p>\n<br>\n<br>\n<h3 id=\"조립방법\">조립방법<a class=\"anchor\" href=\"#%ec%a1%b0%eb%a6%bd%eb%b0%a9%eb%b2%95\">#</a></h3>\r\n<h4 id=\"하우징-만들기\">하우징 만들기<a class=\"anchor\" href=\"#%ed%95%98%ec%9a%b0%ec%a7%95-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>\n<p><strong>하우징</strong>은 윗쪽 머리부분(흰색으로 된 입출수 구멍이 있는 부분)과 아래쪽 몸통부분(필터를 넣는 곳)으로 나눠집니다. 일단 윗부분과 아래부분을 분리하여 둡니다.</p>\n</li>\n<li>\n<p><strong>하우징 머리부분</strong>에 표기되어 있는 <strong>입출수 방향 화살표</strong>를 잘 보고, 일정한 방향으로 3열로 배열합니다.</p>\n</li>\n<li>\n<p><strong>하우징 연결니플 2개</strong>를 사용하여 하우징 머리부분 3개를 서로 연결합니다. (주의! 연결니플이 헐겁게 연결되거나, 추후 사용시 연결부분에서 물이 새어나오면, 니플의 나사산을 <strong>테프론테이프</strong>로 12바퀴 정도 감은 뒤 다시 연결합니다.)</p>\n</li>\n<li>\n<p>연결된 하우징 머리부분을 바닥에 내려놓고, 하우징의 구멍에 맞추어 <strong>하우징 고정브라켓</strong>을 올려놓습니다. (구멍이 맞지 않는 경우, 니플 연결 부위를 조절하여 구멍을 맞춥니다.)</p>\n</li>\n<li>\n<p>하우징 고정브라켓 위에, <strong>고정브라켓 받침대</strong>를 구멍에 맞추어 올려놓습니다.</p>\n</li>\n<li>\n<p><strong>스텐나사</strong>를 사용하여 &ldquo;고정브라켓 받침대+하우징 고정브라켓+하우징 머리부분&quot;을 단단히 고정합니다. 대략 아래 사진과 같은 모양으로 조립하면 됩니다.</p>\n</li>\n</ol>\n<p><img src=\"/image/Softner-02.png\" alt=\"\" /></p>\n<ol start=\"6\">\n<li>남아 있는 2개의 <strong>하우징 연결니플</strong>을, 연결된 하우징 머리 양쪽 끝에 돌려 끼워넣습니다.</li>\n</ol>\n<br>\n<h4 id=\"필터-조립하기\">필터 조립하기<a class=\"anchor\" href=\"#%ed%95%84%ed%84%b0-%ec%a1%b0%eb%a6%bd%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<ol>\n<li>\n<p>조립된 하우징의 입수 부분과 출수 부분을 찾은 뒤에, 뒤집어 바닥에 내려놓습니다.</p>\n</li>\n<li>\n<p>입수 부분쪽에 **1번필터(세디멘트/PP필터)**를 끼우고, 맨처음 빼두었던 <strong>하우징 아래쪽 몸통부분</strong>을 돌려 끼웁니다. 그리고, <strong>하우징 오프너</strong>를 사용하여 꽉 조입니다.</p>\n</li>\n<li>\n<p>가운데 부분에 **2번필터(KDF+활성탄필터)**를 끼우고, 동일한 방법으로 몸통부분을 조립합니다.</p>\n</li>\n<li>\n<p>출수 부분쪽에 **3번필터(양이온교환수지필터)**를 끼우고, 동일한 방법으로 몸통부분을 조립합니다.</p>\n</li>\n</ol>\n<p><img src=\"/image/Softner-03.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"수전연결\">수전연결<a class=\"anchor\" href=\"#%ec%88%98%ec%a0%84%ec%97%b0%ea%b2%b0\">#</a></h3>\r\n<p>수전연결을 위해서는 연결관이 필요합니다. 아래 그림을 보세요.</p>\n<p><img src=\"/image/Softner-04.png\" alt=\"\" /></p>\n<br>\n<p>위 그림처럼 최소 2개의 연결관이 필요한데요. 수전과 연수기의 거리를 생각하셔서 연결관을 주문하셔야 합니다.  예를 들어서 설명하면,</p>\n<p>\u200b\t1)  먼저 연수기를 놓을 위치를 정하세요.</p>\n<p>\u200b\t2) 그 후에, 수전과 연수기의 거리를 대략적으로 재어 봅니다.</p>\n<p>\u200b\t3) 만약, 연수기와 입수구(or 출수구)의 거리가 1m보다 짧으면 2개의 연결관을 주문하면되고</p>\n<p>\u200b\t4) 만약, 거리가 1m보다 길면 연결관을 추가로 주문하여 연결관의 길이를 연장하여야 합니다. 이때, 연결관과 연결관을 서로 맞붙여 연결하기 위해서는 연결니플이 필요합니다. 사용하는 연결니플의 형태는 하우징 연결니플과 똑같은 것을 주문하면 되므로, 전체 재료를 주문하기 전에 연결니플이 총 몇개가 필요한지 잘 생각하셔서 주문하세요.</p>\n<br>\n<p>모두 연결이 되었으면, 첫 사용시에는 필터후레싱을 해주세요. 그냥 물을 5분정도 틀어 흘려보내는 거에요. 후레싱이 끝났으면 이제 맘 놓고 사용하시면 됩니다. 끄~읕!</p>\n"}{"uri":"http://localhost:1313/posts/%EC%97%91%EC%85%80-%EC%82%AC%EC%A7%84%EC%9C%BC%EB%A1%9C-vlookup-%ED%9A%A8%EA%B3%BC-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0/","title":"엑셀, 사진으로 vlookup 효과 구현하기","content":"<p>엑셀의 vlookup 함수는 사진파일을 데이터형으로 다룰 수 없어요. 여기서는 사전에 준비된 사진파일(.jpg, .gif, .png, .bmp 등)을 보다 쉽게 엑셀파일에 삽입하고, 삽입된 사진을 몇가지 함수를 조합하여 vlookup 효과를 구현하는 방법을 알아보도록 하겠습니다.</p>\n<br>\n<h3 id=\"예시\">예시<a class=\"anchor\" href=\"#%ec%98%88%ec%8b%9c\">#</a></h3>\r\n<p>담임 선생님이라면 매 학년초마다 연락처 등을 포함한 학생인적사항 관련 조사를 하게 됩니다. 일반적인 경우라면 관련 부서에서 한글워드프로세서나 엑셀, 한셀 등으로 양식을 만들어서 보내주고 그것을 이용하여 작업을 하는데, 사실 여러 부서에서 중복된 데이터를 다양한 형태의 폼으로 원하기 때문에 그때마다 재입력해야하는 엄청난 비효율을 매년마다 경험하게 되요. 그렇기 때문에 조금 어렵고 귀찮기는 하지만 한글워드프로세서보다는 엑셀, 한셀 등의 스프레드시트를 통해 관리하는 것을 강력히 추천합니다. <strong>엑셀로 RAW데이터를 만들어두면, 이 데이터를 활용하여 한글워드프로세서의 메일머지를 이용하기도 쉽고 엑셀이나 한셀을 사용하여 통계를 내기도 쉬워지기 때문</strong>이죠.</p>\n<p>이렇게 RAW데이터를 엑셀로 만들어두었다고 치고, 이를 활용하여 학적부를 만들어보겠습니다. 특정 데이터의 형태가 학생에 따라 반복되어 출력되는 형태이기때문에, 메인이 되는 한 페이지를 만들고, 원하는 학생을 선택하여 vlookup 함수를 써서 RAW데이터시트의 데이터를 메인페이지로 불러와 학생에 따른 데이터를 띄우는 방법이 가장 좋겠지만&hellip;</p>\n<p>여기서는 학급 시트를 만들고, 해당 학급의 모든 학생의 학적부가 동일 시트에 연속적으로 이어져 나오는 형태를 만들어 보려고 합니다. 좋은 방법이 아닌것 같은데 왜 이렇게 하냐고요? 왜냐하면 현장에서는 실제로 이런 방법을 더 좋아하는 분들이 많기 때문이죠. 20~30여명 정도만 관리하면 되는 담임선생님 입장에서는 보다 직관적이고 명확하기 때문입니다. (<strong>※조금 어렵네? 혹은 복잡하네? 왜 이런것을 하지? 라고 느끼는 사람이 한 명이라도 있다면, 현장에서 적용하기는 어렵다</strong>는 점을 고려하세요. 쉽게 이용할 수 있도록 어느 정도의 배려를 해주어야 모두 함께 이용할 수 있습니다.)</p>\n<p>어쨋든, 이 과정에서 가장 어려운 부분이 사진을 넣는 것입니다. 다른 데이터는 RAW데이터가 있는 시트에서 vlookup 함수를 사용하여 불러오면 되지만 서두에서 이야기한대로 사진의 경우는 vlookup으로 호출할 수 없기 때문입니다. 예를 들어 아래와 같이 학적부 형태를 만들고 ①, ②이라고 쓰여있는 곳에 1번 학생과 2번학생의 사진을 자동으로 불러오도록 하는 것이 vlookup으로 불가능하다는 것이죠. 여기에는 ②까지 표시되어 있지만 실제 한 학급에 20여명의 학생이 있으므로 하나의 시트에 20여개의 사진이 번호에 맞는 위치에 정확하게 배치를 해야하는데, vlookup이 안된다니 왜 엑셀을 이따구로 만들었는지 모르겠네요. ^^;</p>\n<p><img src=\"/image/catalog01.png\" alt=\"\" /></p>\n<br>\n<p>그렇다고 사진을 하나씩 수동으로 넣는 것도 쉬운 일은 아닙니다. 물론 20여명의 학생만 있다면 약간의 시간과 노동력 투자를 통해 가능은 하겠지요. 하지만 한번 해보시면 바로 느끼게 될 것입니다. 해당 셀의 사이즈에 맞도록 사진 크기를 수동으로 조절해가면서 사진을 하나씩 하나씩 넣는 것이 엄청 귀찮은 일이라는 것을&hellip;</p>\n<br>\n<p>그러므로 여기서는 사진입력을 손쉽게 하는 방법을 포함하여 사진으로 vlookup과 같은 기능을 구현하는 방법을 알아보겠습니다.</p>\n<br>\n<br>\n<h3 id=\"사진1학년-시트를-만들어-vba코드-삽입하기\">(&lsquo;&lsquo;사진(1학년)&rsquo;&rsquo; 시트를 만들어) VBA코드 삽입하기<a class=\"anchor\" href=\"#%ec%82%ac%ec%a7%841%ed%95%99%eb%85%84-%ec%8b%9c%ed%8a%b8%eb%a5%bc-%eb%a7%8c%eb%93%a4%ec%96%b4-vba%ec%bd%94%eb%93%9c-%ec%82%bd%ec%9e%85%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<br>\n<h4 id=\"1-개발-도구-메뉴-활성화\">1) &lsquo;&lsquo;개발 도구&rsquo;&rsquo; 메뉴 활성화<a class=\"anchor\" href=\"#1-%ea%b0%9c%eb%b0%9c-%eb%8f%84%ea%b5%ac-%eb%a9%94%eb%89%b4-%ed%99%9c%ec%84%b1%ed%99%94\">#</a></h4>\r\n<p>VBA코드를 넣기 위해서는 <strong>개발 도구</strong>라는 메뉴 내의 <strong>Visual Basic</strong>를 활성화시켜야 하는데요.</p>\n<p><img src=\"/image/catalog03.png\" alt=\"\" /></p>\n<p>위 그림과 같이 개발 도구 메뉴가 보이지 않는 경우라면 아래의 방법대로 메뉴를 활성화 시켜주어야 합니다.</p>\n<br>\n<p><strong>파일</strong>&gt; <strong>옵션</strong>&gt; <strong>리본 사용자 지정</strong></p>\n<p><img src=\"/image/catalog02.png\" alt=\"\" /></p>\n<p>오른쪽에 있는 <strong>리본 메뉴 사용자 지정</strong>의 <strong>개발도구</strong>에 체크 합니다.</p>\n<br>\n<h4 id=\"2-사진을-모아두기-위한-시트-생성\">2) 사진을 모아두기 위한 시트 생성<a class=\"anchor\" href=\"#2-%ec%82%ac%ec%a7%84%ec%9d%84-%eb%aa%a8%ec%95%84%eb%91%90%ea%b8%b0-%ec%9c%84%ed%95%9c-%ec%8b%9c%ed%8a%b8-%ec%83%9d%ec%84%b1\">#</a></h4>\r\n<p>학생 사진이 들어갈 시트를 만듭니다. 예를들어 **사진(1학년)**이라는 시트를 만듭니다. 예시로 만든 시트의 형태는 다음과 같습니다. 이때 사진이 들어갈 셀의 크기를 실제 사진이 사용될 크기대로 조절합니다. (행과 열 블럭을 잡아 각각 한번에 조절해야 모든 셀의 크기가 같아집니다.)</p>\n<p><img src=\"/image/catalog04.png\" alt=\"\" /></p>\n<p>그리고 사진이 들어갈 부분만 <strong>셀 색상을 지정</strong>합니다. (아무 색상이나 가능. 단, 흰색은 색깔이 없는 셀과 구별이 되지 않으므로 추천하지 않아요.)</p>\n<br>\n<h4 id=\"3-vba코드-붙여넣기\">3) VBA코드 붙여넣기<a class=\"anchor\" href=\"#3-vba%ec%bd%94%eb%93%9c-%eb%b6%99%ec%97%ac%eb%84%a3%ea%b8%b0\">#</a></h4>\r\n<p>이제 &lsquo;&lsquo;개발 도구&rsquo;&lsquo;의 &lsquo;&lsquo;Visual Basic&rsquo;&rsquo; 메뉴를 열고 **사진(1학년)**시트에 해당하는 부분(아래 예시 그림에서 Sheet3 부분)을 더블클릭한 뒤 아래의 VBA코드를 붙여넣고 저장합니다.</p>\n<p><img src=\"/image/catalog05.png\" alt=\"\" /></p>\n<br>\n<p>알면 좋겠지만, 코드의 의미를 전혀 모른다고 해도 상관없습니다. 그냥 복사하여 붙여넣기만 하면 돼요.</p>\n<pre tabindex=\"0\"><code class=\"language-visual\" data-lang=\"visual\">Private Sub Worksheet_SelectionChange(ByVal Target As Range)\n\nDim strResult As String\nDim fd As FileDialog\n\nIf Target.Interior.ColorIndex &lt;&gt; -4142 Then\nOn Error GoTo n:\n\nSet fd = Application.FileDialog(msoFileDialogFilePicker)\nextImages = &#34;&#34;*.gif; *.jpg; *.jpeg; *.bmp, *.png&#34;&#34;\n\nWith fd\n.Filters.Clear\n.Filters.Add &#34;&#34;Images&#34;&#34;, extImages, 1\n.AllowMultiSelect = False\n.Show\nstrResult = .SelectedItems(1)\nEnd With\n\nActiveSheet.Shapes.AddPicture(strResult, False, True, 0, 0, 0, 0).Select\nWith Selection\n.ShapeRange.LockAspectRatio = msoFalse\n.Top = Target.Top\n.Left = Target.Left\n.Width = Target.Width\n.Height = Target.Height\n.Placement = xlMoveAndSize\nEnd With\nEnd If\nn:\nEnd Sub</code></pre><br>\n<br>\n<h3 id=\"사진1학년-시트에-사진-파일-등록\">(&lsquo;&lsquo;사진(1학년)&rsquo;&rsquo; 시트에) 사진 파일 등록<a class=\"anchor\" href=\"#%ec%82%ac%ec%a7%841%ed%95%99%eb%85%84-%ec%8b%9c%ed%8a%b8%ec%97%90-%ec%82%ac%ec%a7%84-%ed%8c%8c%ec%9d%bc-%eb%93%b1%eb%a1%9d\">#</a></h3>\r\n<br>\n<h4 id=\"사진-파일-만들기\">사진 파일 만들기<a class=\"anchor\" href=\"#%ec%82%ac%ec%a7%84-%ed%8c%8c%ec%9d%bc-%eb%a7%8c%eb%93%a4%ea%b8%b0\">#</a></h4>\r\n<p>사진 파일은 *.gif; *.jpg; *.jpeg; *.bmp, *.png 형식으로 등록할 수 있습니다. 사진을 넣을 셀의 크기를 고려하여 적당한 비율의 사진파일을 미리 만들어 둡니다.</p>\n<br>\n<h4 id=\"사진-파일-등록\">사진 파일 등록<a class=\"anchor\" href=\"#%ec%82%ac%ec%a7%84-%ed%8c%8c%ec%9d%bc-%eb%93%b1%eb%a1%9d\">#</a></h4>\r\n<p>사진이 준비가 되었으면 셀색상을 입힌 부분을 마우스로 클릭하면 사진 파일을 선택하는 창이 나오는데, 이때 해당 학생의 사진을 선택하면 사진이 등록됩니다. 이때 사진의 크기는 자동으로 조절되어 셀의 크기에 딱 맞게 등록이 되고, 실제 사용할 학적부 페이지에도 이 부분에서 지정한 셀의 크기대로 삽입이 되기때문에, 셀의 크기를 조절하여 만들 때 가능한 최선을 다해(?) 잘 만들어두는 것이 중요해요.</p>\n<br>\n<h4 id=\"선택사항-dummy-사진-파일-등록\">(선택사항) dummy 사진 파일 등록<a class=\"anchor\" href=\"#%ec%84%a0%ed%83%9d%ec%82%ac%ed%95%ad-dummy-%ec%82%ac%ec%a7%84-%ed%8c%8c%ec%9d%bc-%eb%93%b1%eb%a1%9d\">#</a></h4>\r\n<p>(꼭 해야하는 것은 아니지만 경험상&hellip;) 사진이 없는 학생을 위해 사용할 더미 사진을 추가로 등록해두는 것이 좋습니다. 사진 등록하는 곳 맨끝번호에(예를들어 반 학생이 19명이라면 20번에) 아무 사진이나 똑같은 크기로 준비하여 등록을 해주세요. 예를 들면 이런거죠.</p>\n<p><img src=\"/image/dummy.png\" alt=\"\" /></p>\n<br>\n<br>\n<h3 id=\"사진1학년-시트에서-이름-정의하기\">(&lsquo;&lsquo;사진(1학년)&rsquo;&rsquo; 시트에서) 이름 정의하기<a class=\"anchor\" href=\"#%ec%82%ac%ec%a7%841%ed%95%99%eb%85%84-%ec%8b%9c%ed%8a%b8%ec%97%90%ec%84%9c-%ec%9d%b4%eb%a6%84-%ec%a0%95%ec%9d%98%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>사진을 등록했던 시트를 다시 봅니다. 사실 이 시트에는 A열이 숨겨져 있었습니다. B~E열까지의 내용을 모두 합쳐서 만든 <strong>학적번호</strong>라는 제목을 가진 열입니다. 이것이 왜 필요하냐하면&hellip;vlookup과 같은 효과로 사진을 찾기 위해서는 특정 자료를 매칭시켜야 하기 떄문이죠. 여기서는 학적번호 열을 통해 매칭을 시키는 것으로 가정합니다.</p>\n<p><img src=\"/image/catalog06.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"학적번호-열에-대한-이름-지정\">&lsquo;&lsquo;학적번호 열&rsquo;&lsquo;에 대한 이름 지정<a class=\"anchor\" href=\"#%ed%95%99%ec%a0%81%eb%b2%88%ed%98%b8-%ec%97%b4%ec%97%90-%eb%8c%80%ed%95%9c-%ec%9d%b4%eb%a6%84-%ec%a7%80%ec%a0%95\">#</a></h4>\r\n<p>이제 <strong>수식</strong>&gt; <strong>이름 정의</strong>를 클릭합니다. 아래와 같이 새 이름을 등록할 수 있는 창이 뜨면</p>\n<p><img src=\"/image/catalog07.png\" alt=\"\" /></p>\n<p>이름과 참조 대상을 위와 같이 지정합니다.</p>\n<ul>\n<li>이름 : <strong>학적번호1학년1반</strong></li>\n<li>참조대상 : <strong>=&lsquo;사진(1학년)&rsquo;!$A$2:$A$21</strong></li>\n</ul>\n<p>A2에서 A21셀까지 참조 대상이 지정되어 있으므로 더미 포함 총 20개의 사진이 등록되어 있다는 뜻이겠네요. 만약에 인원이 더 많다면 그에 맞게 숫자를 조절하면 됩니다.</p>\n<p>※ 학기중 전입생이 올 수 있기 때문에 조금 여유있게 지정을 해두는 것이 좋습니다. 즉, 현재 학급의 학생이 19번까지 있다고해서 더미를 포함하여 딱 20개의 사진만 등록할 수 있게 만들면 나중에 힘들어 질수도 있어요. 여유있게 30~40개의 사진을 등록할 수 있게 참조대상을 지정하세요. 예를들어 참조대상을  <strong>=&lsquo;사진(1학년)&rsquo;!$A$2:$A$41</strong> 이렇게 지정해 두는 것을 추천합니다.</p>\n<br>\n<h4 id=\"사진-열에-대한-이름-지정\">&lsquo;&lsquo;사진 열&rsquo;&lsquo;에 대한 이름 지정<a class=\"anchor\" href=\"#%ec%82%ac%ec%a7%84-%ec%97%b4%ec%97%90-%eb%8c%80%ed%95%9c-%ec%9d%b4%eb%a6%84-%ec%a7%80%ec%a0%95\">#</a></h4>\r\n<p>이번에는 사진 열에 대한 이름을 지정하기 위해 다시  <strong>수식</strong>&gt; <strong>이름 정의</strong>를 클릭합니다. 이전과 같이 새 이름을 등록할 수 있는 창이 뜨면,</p>\n<ul>\n<li>이름 : <strong>사진1학년1반</strong></li>\n<li>참조대상 : <strong>=&lsquo;사진(1학년)&rsquo;!$G$2:$G$21</strong> (이것도 마찬가지로 여유있게 지정해 두는 것을 추천합니다.)</li>\n</ul>\n<br>\n<br>\n<h3 id=\"선택사항-학적부1학년-시트에서-매칭-조건으로-사용될-셀의-데이터-유효성-검사\">(선택사항) (&lsquo;&lsquo;학적부(1학년) 시트에서&rsquo;&rsquo;) 매칭 조건으로 사용될 셀의 데이터 유효성 검사<a class=\"anchor\" href=\"#%ec%84%a0%ed%83%9d%ec%82%ac%ed%95%ad-%ed%95%99%ec%a0%81%eb%b6%801%ed%95%99%eb%85%84-%ec%8b%9c%ed%8a%b8%ec%97%90%ec%84%9c-%eb%a7%a4%ec%b9%ad-%ec%a1%b0%ea%b1%b4%ec%9c%bc%eb%a1%9c-%ec%82%ac%ec%9a%a9%eb%90%a0-%ec%85%80%ec%9d%98-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%9c%a0%ed%9a%a8%ec%84%b1-%ea%b2%80%ec%82%ac\">#</a></h3>\r\n<br>\n<h4 id=\"데이터-유효성-검사\">데이터 유효성 검사<a class=\"anchor\" href=\"#%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%9c%a0%ed%9a%a8%ec%84%b1-%ea%b2%80%ec%82%ac\">#</a></h4>\r\n<p>매칭 **조건으로 사용될 셀(혹은 셀 전체)**에 대하여 데이터 유효성 검사를 합니다. 그런데 위에서 매칭시킬 <strong>조건</strong>으로 학적번호를 사용하기로 하고 이름을 지정하였으니 이것을 이용하는 것입니다. 먼저 실제 사진이 위치할 시트인 <strong>학적부(1학년)</strong> 시트를 보면,</p>\n<p><img src=\"/image/catalog08.png\" alt=\"\" /></p>\n<br>\n<p>**조건으로 사용될 셀(혹은 셀 전체)**이 A2, A32, A62 &hellip;. 이고 20명의 학생을 등록한다면 A572 까지 입니다. 이 셀들을 블록설정한 뒤에 <strong>데이터</strong>&gt; <strong>데이터 유효성 검사</strong> 메뉴를 이용하여 검사조건을 설정하는 것입니다.</p>\n<p>(※ A2, A32 등의 셀에는 학적번호 내용을 써야 합니다. 예를들어 A2셀은 초등 1학년 1반의 1번 학생에 대한 학적번호가 들어가야 하므로, <strong>초등1학년1반1</strong>이라는 내용이 들어가야 하는 것이지요)</p>\n<p><img src=\"/image/catalog09.png\" alt=\"\" /></p>\n<ul>\n<li>제한 대상 : 목록</li>\n<li>원본 : 학적번호1학년1반 (<strong>&lsquo;학적번호 열&rsquo;에 대한 이름 지정</strong> 과정에서 만들었던 <strong>이름</strong>을 사용)</li>\n</ul>\n<br>\n<br>\n<h3 id=\"사진1학년-시트에서-개별-학생-사진에-대한-이름-정의하기\">(&lsquo;&lsquo;사진(1학년)&rsquo;&rsquo; 시트에서) 개별 학생 사진에 대한 이름 정의하기<a class=\"anchor\" href=\"#%ec%82%ac%ec%a7%841%ed%95%99%eb%85%84-%ec%8b%9c%ed%8a%b8%ec%97%90%ec%84%9c-%ea%b0%9c%eb%b3%84-%ed%95%99%ec%83%9d-%ec%82%ac%ec%a7%84%ec%97%90-%eb%8c%80%ed%95%9c-%ec%9d%b4%eb%a6%84-%ec%a0%95%ec%9d%98%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>※ 이 과정은 반드시 사진(1학년) 시트에서 진행해야 하는 것은 아니며, 사진이 입력되지 않은 상태에서 진행해도 됩니다.</p>\n<br>\n<h4 id=\"개별-학생-사진에-대한-이름-정의하기\">개별 학생 사진에 대한 이름 정의하기<a class=\"anchor\" href=\"#%ea%b0%9c%eb%b3%84-%ed%95%99%ec%83%9d-%ec%82%ac%ec%a7%84%ec%97%90-%eb%8c%80%ed%95%9c-%ec%9d%b4%eb%a6%84-%ec%a0%95%ec%9d%98%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<p>이제 학생 개인별 사진 하나하나에 대한 이름을 정의하겠습니다. <strong>수식</strong>&gt; <strong>이름 관리자</strong> 메뉴를 클릭하면 <strong>이름 관리자</strong> 창이 나타나는데 여기서 <strong>새로 만들기</strong>를 선택합니다.</p>\n<p><img src=\"/image/catalog10.png\" alt=\"\" /></p>\n<ul>\n<li>이름 : <strong>사진1학년1반1번</strong></li>\n<li>참조대상 : <strong>=INDEX(사진1학년1반,MATCH(&lsquo;&lsquo;학적부(1학년)&rsquo;&rsquo;!$A$2,학적번호1학년1반,0))</strong></li>\n</ul>\n<p><br> 참조대상의 INDEX 수식에 들어간 내용의 의미는 다음과 같습니다.</p>\n<ul>\n<li><strong>학적번호1학년1반</strong> :  <strong>학적번호 열&rsquo;&lsquo;에 대한 이름 지정</strong> 과정에서 만들었던 <strong>이름</strong>을 사용</li>\n<li><strong>사진1학년1반</strong> : <strong>사진 열&rsquo;&lsquo;에 대한 이름 지정</strong> 과정에서 만들었던 <strong>이름</strong>을 사용</li>\n<li><strong>학적부(1학년)!$A$2</strong> : 현재 지정하고 있는 개별 학생 사진의 이름이 <strong>사진1학년1반1번</strong>이므로, 사진이 입력될 시트인 <strong>학적부(1학년)</strong> 시트의 A2셀에 있는 매칭 조건과 같으면 이 사진을 연결하라는 의미</li>\n</ul>\n<br>\n<br>\n<h3 id=\"학적부1학년-시트에-더미-사진-붙여넣고-수식으로-연결하기\">(학적부(1학년) 시트에) 더미 사진 붙여넣고 수식으로 연결하기<a class=\"anchor\" href=\"#%ed%95%99%ec%a0%81%eb%b6%801%ed%95%99%eb%85%84-%ec%8b%9c%ed%8a%b8%ec%97%90-%eb%8d%94%eb%af%b8-%ec%82%ac%ec%a7%84-%eb%b6%99%ec%97%ac%eb%84%a3%ea%b3%a0-%ec%88%98%ec%8b%9d%ec%9c%bc%eb%a1%9c-%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>이제 <strong>학적부(1학년) 시트</strong>의 <strong>사진이 들어갈 셀</strong>에 <strong>사진(1학년) 시트</strong>에 입력한 사진 중 <strong>더미 사진</strong>을 붙여넣습니다. (원래는 더미 사진이 아니라 아무 학생의 사진을 붙여넣어도 관계없지만, 혼동이 될 수 있으므로 더미 사진을 넣는 것을 추천합니다.)</p>\n<br>\n<h4 id=\"더미-사진-복사\">더미 사진 복사<a class=\"anchor\" href=\"#%eb%8d%94%eb%af%b8-%ec%82%ac%ec%a7%84-%eb%b3%b5%ec%82%ac\">#</a></h4>\r\n<p>아래와 같은 상태에서 학생이 19명이 있고 20번째에 더미 사진을 붙여넣은 상태라고 가정하면, 더미 사진이 G21셀에 위치해 있겠죠? 이 사진을 선택한 후 Ctrl-C을 눌러 복사합니다.</p>\n<p><img src=\"/image/catalog04.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"더미-사진-붙여넣기\">더미 사진 붙여넣기<a class=\"anchor\" href=\"#%eb%8d%94%eb%af%b8-%ec%82%ac%ec%a7%84-%eb%b6%99%ec%97%ac%eb%84%a3%ea%b8%b0\">#</a></h4>\r\n<p><strong>학적부(1학년)</strong> 시트에서 실제 사진이 들어갈 부분이 1번 학생의 경우 N3~Q8셀까지 병합이 되어 있는데요. 여기서 N3셀에 커서를 두고 Ctrl-V로 붙여넣기하면 더미 사진이 들어가게 됩니다.</p>\n<p><img src=\"/image/catalog08.png\" alt=\"\" /></p>\n<br>\n<p>※ 이미지를 붙여넣어 정의된 이름과 연결하면 불필요한 여백이 생기면서, 이미지의 크기가 원래 크기보다 작아지게 되므로, 사전에 자르기 기능을 통해서 필요없는 부분을 삭제해주어야 합니다. (붙여넣은 사진이 문제가 없다면 신경쓰지 않아도 됨.)</p>\n<br>\n<h4 id=\"수식-입력하여-연결하기\">수식 입력하여 연결하기<a class=\"anchor\" href=\"#%ec%88%98%ec%8b%9d-%ec%9e%85%eb%a0%a5%ed%95%98%ec%97%ac-%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<p>더미 사진을 붙여넣은 후, <strong>붙여넣은 사진을 클릭한 상태에서</strong> 수식입력창에 <strong>&quot;=사진1학년1반1번&quot;</strong> 이라고 입력한 뒤 엔터를 누릅니다.</p>\n<p><img src=\"/image/catalog11.png\" alt=\"\" /></p>\n<br>\n<h4 id=\"개별-사진-이름-정의-반복하기\">개별 사진 이름 정의 반복하기<a class=\"anchor\" href=\"#%ea%b0%9c%eb%b3%84-%ec%82%ac%ec%a7%84-%ec%9d%b4%eb%a6%84-%ec%a0%95%ec%9d%98-%eb%b0%98%eb%b3%b5%ed%95%98%ea%b8%b0\">#</a></h4>\r\n<p>1번 학생에 대한 과정이 모두 완료되었으므로, 2번 이후의 학생에 대하여 동일한 과정을 반복합니다.</p>\n<ul>\n<li>\n<p>더미사진 붙여넣기</p>\n</li>\n<li>\n<p>수식 입력하여 연결하기</p>\n</li>\n</ul>\n<br>\n<p>※ 단, 메인이 되는 한 개의 페이지만 만드는 경우라면 개별 사진에 대한 이름 정의를 반복하지 않아도 됩니다.</p>\n<br>\n<br>\n<h3 id=\"사진-매칭-확인하기\">사진 매칭 확인하기<a class=\"anchor\" href=\"#%ec%82%ac%ec%a7%84-%eb%a7%a4%ec%b9%ad-%ed%99%95%ec%9d%b8%ed%95%98%ea%b8%b0\">#</a></h3>\r\n<p>전체 과정이 마무리 되었으므로, 사진(1학년) 시트에 사진을 입력하였을 때, 학적부에 각 학생의 사진이 바뀌어 나타나는지 확인합니다.</p>\n<br>\n<br>\n<h3 id=\"간단한-설명-및-예시-파일\">간단한 설명 및 예시 파일<a class=\"anchor\" href=\"#%ea%b0%84%eb%8b%a8%ed%95%9c-%ec%84%a4%eb%aa%85-%eb%b0%8f-%ec%98%88%ec%8b%9c-%ed%8c%8c%ec%9d%bc\">#</a></h3>\r\n<p>위 전체 과정에 대한 설명이 좀 복잡하므로, 간단한 설명과 그에 따른 예시 파일을 덧붙입니다.</p>\n<p><a href=\"/image/%ec%82%ac%ec%a7%84%ec%a1%b0%ed%9a%8c.xlsx\">사진조회.xlsx</a></p>\n"}{"uri":"http://localhost:1313/posts/%EC%97%91%EC%85%80-%EB%B9%88%EC%85%80-%EC%B1%84%EC%9A%B0%EA%B8%B0/","title":"엑셀, 빈셀 채우기","content":"<p>아래와 같이 학년, 반, 번호를 채워 넣으려고 할 때, A3~A31셀이 빈 셀로 되어 있네요. 이럴때 모든 셀을 1학년을 나타내는 숫자 1을 채워 넣으려면 어떻게 해야 할까요? A2셀을 클릭하고 A31셀까지 아래쪽으로 쭉 드래그를 하면 되겠죠?</p>\n<p><img src=\"/image/equal01.png\" alt=\"\" /></p>\n<br>\n<p>그런데, 문제는 &lsquo;반&rsquo;의 숫자를 넣을 B열입니다. 1~3반까지의 숫자가 나뉘어 있으므로 드래그를 세번 나누어서 해야 하는 것이죠. 세개의 반만 있으면 다행이지만, 학급수가 많다면 이것도 쉬운일이 아닙니다. 이럴때, 한번의 작업으로 빈셀을 채우는 방법을 알아보겠습니다.</p>\n<br>\n<ol>\n<li>먼저 A2~B31까지 블럭을 설정합니다.</li>\n</ol>\n<p><img src=\"/image/equal02.png\" alt=\"\" /></p>\n<br>\n<ol start=\"2\">\n<li>이 상태에서 F5키를 누르고, 옵션을 클릭합니다.</li>\n</ol>\n<p><img src=\"/image/equal03.png\" alt=\"\" /></p>\n<br>\n<ol start=\"3\">\n<li>빈셀을 선택하고 확인을 클릭하면</li>\n</ol>\n<p><img src=\"/image/equal04.png\" alt=\"\" /></p>\n<br>\n<ol start=\"4\">\n<li>블럭으로 잡았던 부분이 빈셀로 바뀝니다.</li>\n</ol>\n<p><img src=\"/image/equal05.png\" alt=\"\" /></p>\n<br>\n<ol start=\"5\">\n<li>이 상태에서 &lsquo;<strong>=</strong>&rsquo; 을 누른 뒤</li>\n</ol>\n<p><img src=\"/image/equal06.png\" alt=\"\" /></p>\n<br>\n<ol start=\"6\">\n<li>키보드의 위화살표 키 (↑)를 눌러, 빈셀의 바로 위 셀을 가리키게 한 뒤</li>\n</ol>\n<p><img src=\"/image/equal07.png\" alt=\"\" /></p>\n<br>\n<ol start=\"7\">\n<li>곧바로 Ctrl-Enter를 누르면, 빈 셀이 모두 채워지게 됩니다.</li>\n</ol>\n<p><img src=\"/image/equal08.png\" alt=\"\" /></p>\n<br>\n<p>※ 주의 할 점</p>\n<p>빈 셀이 채워질 때, 수식의 형태로 채워집니다. 그러므로 행 삭제 등의 작업이 필요한 경우에는 다시 A2~B31 셀까지 블럭으로 설정한 뒤, Ctrl-C로 복사하고 텍스트로 붙여넣기를 해두는 것이 좋을 수도 있습니다.</p>\n"}{"uri":"http://localhost:1313/posts/%EC%97%AD%EC%82%BC%ED%88%AC%EC%95%95-%EC%A0%95%EC%88%98%EA%B8%B0-diy/","title":"역삼투압 정수기 DIY","content":"<p>몸에 좋은 미네랄까지 걸러낸다고 하여 역삼투압정수기를 싫어하시는 분도 많지요? 그러나 여기는 중국입니다. 미네랄이고 뭐고, 그냥 거를 수 있는 것은 다 걸러내는 것이 좋습니다.</p>\n<br>\n<p>역삼투압정수기의 경우 2)번이 정석입니다. 그런데, 폐수가 너무 많이\u00a0버려지기때문에, 1)번과 같이 작업하는 분도 계시죠. 정수 성능은 조금 떨어지겠지만 폐수가 전혀 없기도 합니다. 그렇지만 역삼투압정수기의 원리에 맞추어 생각해보면, 1)번 구성은 가장 비싼 RO필터 성능을 급격히 저하시키는 원인이 될 수 있습니다. 1)번과 같이 설치하는 것보다는 2)번 구성대로 하고, 대신 폐수라인을 적절히 빼내어 설거지 용도로 사용하는 것이 좋습니다.</p>\n<p><img src=\"/image/RO-01.jpg\" alt=\"역삼투압정수기 구조\" /></p>\n<br>\n<p>솔레노이드밸브와 모터펌프, 압력센서스위치는 24V 아답터와 아래와 같이 결선하면 됩니다. (※솔레노이드밸브와 압력센서스위치는 극성이 없으나, 모터펌프는 극성을 맞추어 연결!)</p>\n<p><img src=\"/image/RO-02.jpg\" alt=\"배선도\" /></p>\n<br>\n<br>\n<h3 id=\"부품-구입\">부품 구입<a class=\"anchor\" href=\"#%eb%b6%80%ed%92%88-%ea%b5%ac%ec%9e%85\">#</a></h3>\r\n<p>필요한 부품은 모두 타오바오에서 구입할 수 있었는데, 부품의 간체표기법을 몰라 검색어에 이것저것 넣어가며 이름을 알아가면서 검색하느라 조금 고생을 했습니다. ㅋㅋ</p>\n<ul>\n<li>수도아답터(원수밸브)(4分金属进水三通+2分球阀) 1개 : 13원 (※수도 원수 밸브 규격 :\u00a04分=1/2인치)</li>\n<li>원터치 T피팅(1/4인치)(2分管+2分管+2分管T型三通快接) 2개 : 개당 1.5원</li>\n<li>원터치 L피팅(1/4인치)(2分管+2分管弯头快接) 11개 : 개당 1.2원</li>\n<li>솔레노이드밸브(快接式 2分管 进水电磁阀 24V) 1개 : 9원</li>\n<li>모터펌프(50G邓元增压泵 TYP-2500) 1개 : 63원</li>\n<li>펌프용피팅(3分外牙+2分管接头) 2개 : 개당 4원</li>\n<li>테프론테이프(生料带) : 1.5원</li>\n<li>폐수저항(废水比) 1개 : 5원</li>\n<li>체크밸브(2头插2分管 一字型快接逆止阀) 2개 : 개당 4원</li>\n<li>볼밸브(2分球阀快接) 1개 : 5원</li>\n<li>피팅마개(1/4인치)(2分堵头) 1개 : 0.4원</li>\n<li>압력탱크 3.2갤런(压力桶储水桶)+압력밸브(压力桶球阀) 1개 : 42.5원</li>\n<li>압력센서스위치(快接式高压开关) 1개 : 9.5원</li>\n<li>압력센서스위치 접속단자(插线) 1개 : 2원</li>\n<li>조리수밸브(直颈龙头, 304, 3M유사품) 1개 : 31원</li>\n<li>조리수밸브 구멍마개 1개(이사갈때 구멍마개용) 1개 : 10원</li>\n<li>아답터(DC24V 2A)(水泵电源) 1개 : 5원</li>\n<li>정수기용 호스 PE관(2分PE管水管) 10미터 : 미터당 0.52원</li>\n<li>호스커터기(切管刀) : 7원</li>\n<li>필터는 한국식접속필터(韩式快接滤芯)형으로 2년 교체분량 구매\n<ul>\n<li>세디멘트(3개월-6개) : 熔喷PP棉滤芯(분홍색) : 개당 12원</li>\n<li>프리카본(3개월-6개) : CTO压缩活性碳滤芯(남색) : 개당 12원</li>\n<li>RO(24개월-1개) : RO反渗透膜滤芯(파랑) : 개당 110원</li>\n<li>포스트카본(6개월-4개) : 后置载银颗粒活性碳滤芯(보라) : 개당 15원</li>\n<li>코코넛입상활성탄(6개월-4개) : UDF颗粒活性碳滤芯(초록) (TCR대용) : 개당 13원</li>\n</ul>\n</li>\n<li>정수기 케이스(RO纯水机外壳 5级) 1개 : 68원\n<ul>\n<li>(아래 사진과 같이) 필터 5개와 모터펌프가 함께 수납가능한 크기의 케이스를 선택</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/image/RO-case-01.jpg\" alt=\"\" /></p>\n<p><img src=\"/image/RO-case-02.jpg\" alt=\"\" /></p>\n<ul>\n<li>\n<p>필터 고정대(净水器 5连 大单夹) 2개 : 개당 1.8원</p>\n<p><img src=\"/image/RO-30.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>그밖에 십자드라이버, 니퍼, 절연테이프 등의 간단한 공구와 전기재료</p>\n</li>\n<li>\n<p>조리수밸브 구멍이 없는 경우 드릴과 14mm 드릴비트가 필요</p>\n</li>\n<li>\n<p>설치 상황에서 어떻게 될지 몰라서 피팅류는 여유분을 더 구매</p>\n</li>\n</ul>\n<br>\n<h4 id=\"diy-소요비용\">DIY 소요비용<a class=\"anchor\" href=\"#diy-%ec%86%8c%ec%9a%94%eb%b9%84%ec%9a%a9\">#</a></h4>\r\n<p>필터(2년교환분량) 366위안 + 부품 308위안 = 674위안, 한국돈으로 115,000원 정도입니다.</p>\n<br>\n<br>\n<h4 id=\"diy시-주의사항\">DIY시 주의사항<a class=\"anchor\" href=\"#diy%ec%8b%9c-%ec%a3%bc%ec%9d%98%ec%82%ac%ed%95%ad\">#</a></h4>\r\n<p>정수기 DIY의 실제 과정은\u00a0매우 간단하여, 필터의 양쪽 끝단에 L피팅을 붙이고 구상도대로 호스를 잘라 연결만 하면 되는데요. 연결시 몇가지 주의할 점은,</p>\n<ul>\n<li>필터는 되도록 입수구가 아래쪽, 출수구가 위쪽을 향하도록 조립하는 것이 좋고,</li>\n<li>필터를 케이스에 끼우기전에 반드시 후레싱(필터에 물을 2~3L정도 통과시키는 과정)을 거쳐야 합니다.</li>\n<li>체크밸브, 솔레노이드밸브, 모터펌프와 필터류는 물의 흐름방향을 잘 보고 조립하세요.</li>\n<li>배선 연결시 <strong>솔레노이드밸브와 압력센서스위치는 (+)(-)극성이 없지만</strong>, 모터펌프는 극성을 지켜야 합니다.</li>\n</ul>\n<br>\n<br>\n<h3 id=\"diy-결과\">DIY 결과<a class=\"anchor\" href=\"#diy-%ea%b2%b0%ea%b3%bc\">#</a></h3>\r\n<p>완성후 아답터를 콘센트에 꼽고 조리수밸브를 열어보니 모터가 돌아가면서 물이 졸졸졸 나오는 것이 RO정수기 답네요. 처음에는 조리수밸브를 닫고 압력탱크에 물이 꽉찰때까지 기다려야 합니다. 이후에 조리수밸브를 열면 기성품 못지않게 잘 나오게 되죠. 압력탱크 용량이 웅진에서 쓰는 것보다 더 큰 3.2갤런(약 12.1리터)이어서 한번에 더 많은 양을 쓸 수도 있습니다.</p>\n<br>\n<p>며칠동안 테스트를 하였는데, 초반에 침전물같은 것이 눈에 보이지만, 작은 공기기포이므로 걱정할 필요가 없습니다. 이틀정도 지나고 나면 기포도 발생하지 않습니다. 다만 모터펌프와 연결된 호스가 진동에 의해 덜덜거리며 떨리는 소음이 조금 거슬리긴 합니다. 문제없이 잘 작동되는 것이 확인되면 케이블타이로 고정하여 진동을 제거해주세요.</p>\n<br>\n<br>\n<h3 id=\"참고-필터-후레싱-방법\">(참고) 필터 후레싱 방법<a class=\"anchor\" href=\"#%ec%b0%b8%ea%b3%a0-%ed%95%84%ed%84%b0-%ed%9b%84%eb%a0%88%ec%8b%b1-%eb%b0%a9%eb%b2%95\">#</a></h3>\r\n<ul>\n<li>역삼투압 필터 (원자재 공급사에 따라 후레싱방법이 다름)\n<ul>\n<li>미국 필림테크 다우케미칼 제품 : 보존액이 전혀 없는 건식이므로 후레싱 생략가능. 단, 후레싱을 하고자 할 경우에는 배출수쪽을 막지 않고 물을 2리터정도 흘려보냄.</li>\n<li>웅진케미칼(옛 삼성제일합섬) 공급 CSM역삼투압 멤브레인 :\u00a01차로 배출수쪽을 막지 않고 물을 2리터정도 흘려보낸 뒤,\u00a02차로 배출수쪽을 막고서\u00a0정수쪽으로 약간만 흘러보내면 됨</li>\n</ul>\n</li>\n<li>나머지 필터의 경우 2리터정도 흘려보내면 됨.</li>\n</ul>\n<p>\u00a0</p>\n"}]