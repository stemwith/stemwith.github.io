<!DOCTYPE html>
<html lang="ko-kr" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="DS18b20 온도센서#
DS18b20 온도 센서를 이용하여 온도를 측정한다.

one-wire 버스 통신
공급전압: 3.0V ~ 5.5V
작동온도: -55ºC ~ &#43;125ºC
오차: &#43;/-0.5 ºC (-10ºC ~ 85ºC 범위에서)


Pinout#


schematic#
DS18b20 센서는 두 가지 연결방법을 제공하는데, 하나는 VCC를 5V에 연결하는 Normal Mode이고 다른 하나는 VCC를 GND에 연결하는 Parasite Mode이다. 두가지 방법 모두 지원되지만 (경험상) Normal를 추천하며 (원인은 잘 모르겠지만) Parasite Mode에서는 온도센서가 작동이 되지 않는 경우도 가끔 있었다. 회로 구성을 위해 4.7㏀ 저항 1개가 필요하며 Normal Mode 구성을 위해 다음 그림과 같이 연결한다.">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/posts/esp32-%EC%98%A8%EB%8F%84%EC%B8%A1%EC%A0%95-ds18b20/">
  <meta property="og:site_name" content="STEM with">
  <meta property="og:title" content="ESP32, 온도측정(DS18b20), PLX_DAQ">
  <meta property="og:description" content="DS18b20 온도센서#DS18b20 온도 센서를 이용하여 온도를 측정한다.
one-wire 버스 통신 공급전압: 3.0V ~ 5.5V 작동온도: -55ºC ~ &#43;125ºC 오차: &#43;/-0.5 ºC (-10ºC ~ 85ºC 범위에서) Pinout#schematic#DS18b20 센서는 두 가지 연결방법을 제공하는데, 하나는 VCC를 5V에 연결하는 Normal Mode이고 다른 하나는 VCC를 GND에 연결하는 Parasite Mode이다. 두가지 방법 모두 지원되지만 (경험상) Normal를 추천하며 (원인은 잘 모르겠지만) Parasite Mode에서는 온도센서가 작동이 되지 않는 경우도 가끔 있었다. 회로 구성을 위해 4.7㏀ 저항 1개가 필요하며 Normal Mode 구성을 위해 다음 그림과 같이 연결한다.">
  <meta property="og:locale" content="ko_kr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-09-17T00:41:00+09:00">
    <meta property="article:modified_time" content="2021-09-17T00:41:00+09:00">


<title>ESP32, 온도측정(DS18b20), PLX_DAQ | STEM with</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/posts/esp32-%EC%98%A8%EB%8F%84%EC%B8%A1%EC%A0%95-ds18b20/">
<link rel="stylesheet" href="/book.min.aeea42fb216bc5e1dbc1c7adf74b0ac79e17602b386834ac6f1c28574b966754.css" integrity="sha256-rupC&#43;yFrxeHbwcet90sKx54XYCs4aDSsbxwoV0uWZ1Q=" crossorigin="anonymous">


  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.a51994453e5fa3809f7eaaf6143af9de9b67838bac6ba6a9fe161e0559cc2672.js" integrity="sha256-pRmURT5fo4Cffqr2FDr53ptng4usa6ap/hYeBVnMJnI=" crossorigin="anonymous"></script>

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-128DRYVCRT"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-128DRYVCRT');
        }
      </script>


  
</head>
<body dir="ltr" class="book-kind-page book-type-posts">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/logo.svg" alt="Logo" /><span>STEM with</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>

























</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>ESP32, 온도측정(DS18b20), PLX_DAQ</h3>

  <label for="toc-control">
    
    <img src="/icons/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ds18b20-온도센서">DS18b20 온도센서</a></li>
        <li><a href="#라이브러리-준비하기">라이브러리 준비하기</a></li>
        <li><a href="#plx-daq">PLX-DAQ</a></li>
        <li><a href="#온도센서의-온도값-기록하기">온도센서의 온도값 기록하기</a></li>
        <li><a href="#microsoft-data-streamer">Microsoft Data Streamer</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown book-post">
  <h1>
    ESP32, 온도측정(DS18b20), PLX_DAQ
  </h1>
  
  <div class="flex align-center text-small book-post-date">
    <img src="/icons/calendar.svg" class="book-icon" alt="" />
    <span>September 17, 2021</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/esp32/">Esp32</a>
  </div>
  

  


  <div class="book-post-content markdown-inner"><h3 id="ds18b20-온도센서">DS18b20 온도센서<a class="anchor" href="#ds18b20-%ec%98%a8%eb%8f%84%ec%84%bc%ec%84%9c">#</a></h3>
<p>DS18b20 온도 센서를 이용하여 온도를 측정한다.</p>
<ul>
<li>one-wire 버스 통신</li>
<li>공급전압: 3.0V ~ 5.5V</li>
<li>작동온도: -55ºC ~ +125ºC</li>
<li>오차: +/-0.5 ºC (-10ºC ~ 85ºC 범위에서)</li>
</ul>
<br>
<h4 id="pinout">Pinout<a class="anchor" href="#pinout">#</a></h4>
<p><img src="/image/DS18b20.png" alt="" /></p>
<br>
<h4 id="schematic">schematic<a class="anchor" href="#schematic">#</a></h4>
<p>DS18b20 센서는 두 가지 연결방법을 제공하는데, 하나는 VCC를 5V에 연결하는 Normal Mode이고 다른 하나는 VCC를 GND에 연결하는 Parasite Mode이다. 두가지 방법 모두 지원되지만 (경험상) Normal를 추천하며 (원인은 잘 모르겠지만) Parasite Mode에서는 온도센서가 작동이 되지 않는 경우도 가끔 있었다. 회로 구성을 위해 <strong>4.7㏀ 저항 1개</strong>가 필요하며 Normal Mode 구성을 위해 다음 그림과 같이 연결한다.</p>
<ul>
<li>3가닥의 선에 브레드보드에 연결할 수 있는 핀을 납땜하고, 노란색선과 빨간색선의 연결부위에 4.7㏀ 저항을 추가로 납땜하여 연결한다.</li>
</ul>
<p><img src="/image/ESP32-DS18b20-R01.png" alt="" /></p>
<ul>
<li>수축튜브를 사용하여 연결부위를 절연한 뒤,</li>
</ul>
<p><img src="/image/ESP32-DS18b20-R02.png" alt="" /></p>
<ul>
<li>구경이 조금 더 큰 수축튜브를 사용하여 3가닥을 하나로 감싸 마무리한다.</li>
</ul>
<p><img src="/image/ESP32-DS18b20-R03.png" alt="" /></p>
<br>
<h5 id="normal-mode">Normal Mode<a class="anchor" href="#normal-mode">#</a></h5>
<p><img src="/image/ESP32-DS18b20-temperature.png" alt="" /></p>
<br>
<br>
<h3 id="라이브러리-준비하기">라이브러리 준비하기<a class="anchor" href="#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%a4%80%eb%b9%84%ed%95%98%ea%b8%b0">#</a></h3>
<p><strong>Sketch</strong>&gt; <strong>Include Library</strong>&gt; <strong>Manage Libraries</strong>&gt;</p>
<ul>
<li>OneWire (by Jim Studt etc.)</li>
<li>DallasTemperature (by Miles Burton)</li>
</ul>
<br>
<h4 id="sketch">sketch<a class="anchor" href="#sketch">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;OneWire.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;DallasTemperature.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define TEMP_PIN 4
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>OneWire <span style="color:#a6e22e">oneWire</span>(TEMP_PIN);
</span></span><span style="display:flex;"><span>DallasTemperature <span style="color:#a6e22e">sensors</span>(<span style="color:#f92672">&amp;</span>oneWire);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span>() {
</span></span><span style="display:flex;"><span>  Serial.begin(<span style="color:#ae81ff">115200</span>);  
</span></span><span style="display:flex;"><span>  Serial.println(<span style="color:#e6db74">&#34;DallasTemperature IC Control&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Start up the library
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  sensors.begin();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span>() {
</span></span><span style="display:flex;"><span>  sensors.requestTemperatures();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">float</span> temperatureC <span style="color:#f92672">=</span> sensors.getTempCByIndex(<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">float</span> temperatureF <span style="color:#f92672">=</span> sensors.getTempFByIndex(<span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>  Serial.print(temperatureC);
</span></span><span style="display:flex;"><span>  Serial.println(<span style="color:#e6db74">&#34;*C&#34;</span>);
</span></span><span style="display:flex;"><span>  Serial.print(temperatureF);
</span></span><span style="display:flex;"><span>  Serial.println(<span style="color:#e6db74">&#34;*F&#34;</span>);
</span></span><span style="display:flex;"><span>  delay(<span style="color:#ae81ff">2000</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><br>
<br>
<h3 id="plx-daq">PLX-DAQ<a class="anchor" href="#plx-daq">#</a></h3>
<p>ESP32를 사용하여 센서데이터를 Excel로 보내고 실시간 그래프를 그려주는 Excel 매크로 파일이다. Parallax에서 만든 것이지만, 현재 공식적인 업데이트는 중지되어 있다. 이런 이유로 Parallax 홈페이지에서 다운로드 받을 수 있는 PLX-DAQ는 최신 버전의 Excel에서 활용이 불가능하며, ESP32에서의 활용도 불가능하다. 현재는 아두이노 포럼 등에서 최신 버전의 Excel과 ESP32 등에서 활용 가능하도록 업데이트를 진행하고 있으므로 Parallax 홈페이지가 아닌, 아두이노 포럼에서 다운로드 받도록 한다.</p>
<br>
<h4 id="download">download<a class="anchor" href="#download">#</a></h4>
<p><a href="https://forum.arduino.cc/t/plx-daq-version-2-now-with-64-bit-support-and-further-new-features/420628/72#msg3251256">PLX-DAQ version 2 - now with 64 bit support! (and further new features) - Using Arduino / Interfacing w/ Software on the Computer - Arduino Forum</a>)</p>
<br>
<h4 id="sketch-1">sketch<a class="anchor" href="#sketch-1">#</a></h4>
<ul>
<li>
<p><strong>void setup()</strong></p>
<ul>
<li>Excel Sheet Clear</li>
</ul>
<pre tabindex="0"><code>Serial.println(&#34;CLEARDATA&#34;);</code></pre><ul>
<li>Label 만들기 (콤마(,)로 구분)</li>
</ul>
<pre tabindex="0"><code>Serial.println(&#34;LABEL,Date,Time,Millis,SensorValue&#34;);</code></pre></li>
<li>
<p><strong>void loop()</strong></p>
<ul>
<li>Data 출력</li>
</ul>
<pre tabindex="0"><code>Serial.println( (String) &#34;DATA,DATE,TIME,&#34; + millis() + &#34;,&#34; + SensorValue );
  delay(200);</code></pre><p>(혹은, 아래와 같이 라인을 구분하는 것도 좋은 방법이다.</p>
<pre tabindex="0"><code>  Serial.print(&#34;DATA,DATE,TIME,&#34;);
  Serial.print(millis());
  Serial.print(&#34;,&#34;);
  Serial.print(i);
  Serial.print(&#34;,&#34;);
  Serial.println(SensorValue);</code></pre><ul>
<li>DATA 출력시작은 Serial.print(&ldquo;DATA,&rdquo;); 로 하며, DATA 출력종료는 println을 통해 개행한다.</li>
<li>delay를 500이상 주어야 안정적으로 데이터를 수신한다.</li>
</ul>
</li>
<li>
<p><strong>전체 sketch</strong></p>
<p>GPIO4 데이터를 엑셀 파일에 기록한다.</p>
<pre tabindex="0"><code>int i = 0;
const int SensorPin = 4;
float SensorValue;

void setup() {
  Serial.begin(115200);
  Serial.println(&#34;CLEARDATA&#34;);
  Serial.println(&#34;LABEL,Date,Time,Millis,Times,SensorValue&#34;);
}

void loop() {
  SensorValue = analogRead(SensorPin)/100.00;
  Serial.print(&#34;DATA,DATE,TIME,&#34;);
  Serial.print(millis());
  Serial.print(&#34;,&#34;);
  Serial.print(i);
  Serial.print(&#34;,&#34;);
  Serial.println(SensorValue);
  i++;
  delay(5000);  // 5초마다 1번씩 측정
}</code></pre></li>
</ul>
<br>
<br>
<h3 id="온도센서의-온도값-기록하기">온도센서의 온도값 기록하기<a class="anchor" href="#%ec%98%a8%eb%8f%84%ec%84%bc%ec%84%9c%ec%9d%98-%ec%98%a8%eb%8f%84%ea%b0%92-%ea%b8%b0%eb%a1%9d%ed%95%98%ea%b8%b0">#</a></h3>
<h4 id="sketch-2">sketch<a class="anchor" href="#sketch-2">#</a></h4>
<pre tabindex="0"><code>#include &lt;OneWire.h&gt;
#include &lt;DallasTemperature.h&gt;

int i = 0;
const int SensorPin = 4;
float temperatureC;
//float temperatureF;

OneWire oneWire(SensorPin);
DallasTemperature sensors(&amp;oneWire);

void setup() {
  Serial.begin(115200);  
  Serial.println(&#34;DallasTemperature IC Control&#34;);

  // Start up the library
  sensors.begin();
  Serial.println(&#34;CLEARDATA&#34;);
  Serial.println(&#34;LABEL,Date,Time,Millis,Times,SensorValue&#34;);
}

void loop() {
  sensors.requestTemperatures();
  temperatureC = sensors.getTempCByIndex(0);
  // temperatureF = sensors.getTempFByIndex(0);

  Serial.print(&#34;DATA,DATE,TIME,&#34;);
  Serial.print(millis());
  Serial.print(&#34;,&#34;);
  Serial.print(i);
  Serial.print(&#34;,&#34;);
  Serial.println(temperatureC);
  i++;
  delay(5000);  // 5초마다 1번씩 측정
}</code></pre><br>
<h4 id="plx-daq-엑셀파일-실행">PLX-DAQ 엑셀파일 실행<a class="anchor" href="#plx-daq-%ec%97%91%ec%85%80%ed%8c%8c%ec%9d%bc-%ec%8b%a4%ed%96%89">#</a></h4>
<ul>
<li>
<p>다운로드 받은 <a href="/attach/ESP32-PLX-DAQ-AutoGrapher-SensorValue.xlsm">PLX-DAQ 엑셀 매크로 파일</a>을 더블 클릭하여 불러들인다.</p>
<p><img src="/image/PLX-DAQ-01.png" alt="" /></p>
</li>
<li>
<p>Settings에서 ESP32가 연결된 Com port와 Baud rate 설정</p>
<ul>
<li>Port: 6 (<strong>장치 관리자</strong>&gt; <strong>포트</strong>&gt; 에서 확인)</li>
<li>Baud: 115200 (ESP32의 경우 115200, 아두이노는 9600으로 셋팅)</li>
</ul>
</li>
<li>
<p>스케치를 업로드 한 뒤, Connect를 누르면 실시간으로 데이터를 받아서 기록함</p>
</li>
<li>
<p>기본적으로 셋팅되어 있는 차트가 실시간으로 그려진다. 단, 차트가 그려지지 않거나 잘못된 형태로 표현되는 경우, 엑셀 차트의 데이터 범위를 재설정하여야 한다.</p>
</li>
</ul>
<p><img src="/image/PLX-DAQ-02.png" alt="" /></p>
<br>
<br>
<h3 id="microsoft-data-streamer">Microsoft Data Streamer<a class="anchor" href="#microsoft-data-streamer">#</a></h3>
<p>PLX-DAQ와 비슷한 역할을 하는 Microsoft Data Streamer가 있으나, 현재 아두이노만 지원하며 ESP32에서는 데이터를 전송받지 못하는 문제가 있음.</p>
</div>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">
  <div>
  
    <a href="/posts/esp32-%EC%8A%A4%ED%85%9D%EB%AA%A8%ED%84%B0-%EC%A0%9C%EC%96%B4/" class="flex align-center">
      <img src="/icons/backward.svg" class="book-icon" alt="Previous" title="ESP32, 스텝모터" />
      <span>ESP32, 스텝모터</span>
    </a>
  
  </div>
  <div>
  
    <a href="/posts/drone-%EC%A1%B0%EC%A2%85%EA%B8%B0-%EC%88%98%EC%8B%A0%EA%B8%B0/" class="flex align-center">
      <span>드론 Part2 조종기 FrSky TaranisQ X7 수신기 FrSky X8R</span>
      <img src="/icons/forward.svg" class="book-icon" alt="Next" title="드론 Part2 조종기 FrSky TaranisQ X7 수신기 FrSky X8R" />
    </a>
  
  </div>
</div>
 
        
  
  <div class="book-comments">

</div>
  
 
        
        

 
      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    

<aside class="book-toc">
  <div class="book-toc-content">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ds18b20-온도센서">DS18b20 온도센서</a></li>
        <li><a href="#라이브러리-준비하기">라이브러리 준비하기</a></li>
        <li><a href="#plx-daq">PLX-DAQ</a></li>
        <li><a href="#온도센서의-온도값-기록하기">온도센서의 온도값 기록하기</a></li>
        <li><a href="#microsoft-data-streamer">Microsoft Data Streamer</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </div>
</aside>

 
  </main>

  
</body>
</html>


















