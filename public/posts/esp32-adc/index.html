<!DOCTYPE html>
<html lang="ko-kr" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="ESP32 ADC#

ESP32는 18개의 12bit ADC 입력핀을 사용할 수 있다. (0~4095)
아두이노의 경우 10bit를 사용한다. (0~1023)
0V ~ 3.3V의 전압을 0~4095(0xFFF)까지의 디지털값으로 AD 변환한다.
Arduino IDE 환경에서는 ESP32의 ADC 관련 레지스터를 조작하지 않고 analogRead() 함수를 사용하여 ESP32의 ADC 입력핀의 전압값을 가져올 수 있다. 



Potentiometer 저항값 출력하기#
schematic#









  

  
  


sketch#
가변저항의 저항을 A0(ADC1_CH0, GPIO36)로 읽고 전압값으로 변환한 뒤 시리얼 모니터로 출력한다.
// ESP32 ADC test
#define analogPin A0

void setup() {
  Serial.begin(115200);
} 

void loop() {
  // read the input on analog pin GPIO36 (ADC1_CH0):
  int sensorValue = analogRead(analogPin);

  // Convert the analog (12bit ADC :  0 - 4095) to a voltage (0 - 3.3V):
  float voltage = (sensorValue /4095.0) * 3.3;

  // print out the value you read:
  Serial.println(voltage);

  delay(200);
}

Potentiometer로 LED 밝기 조절하기#
schematic#









  

  
  



LED : R → GPIO19 / G → GPIO18 / B → GPIO17 / GND
저항 : R → 150Ω / G → 100Ω / B → 100Ω
Potentiometer: Left 5V, Center AO(IO36), Right GND


sketch#
#define RED_LED 19       // GPIO 19
#define analogPin A0     // Sensor VP, GPIO 36

int freq = 5000;         // 주파수
int ledChannel = 0;      // 채널 (0 ~ 15 선택)
int resolution = 10;     // 해상도 (1 ~ 16bit resolution 선택)
int R = 0;

void setup() {
  Serial.begin(115200);
  ledcSetup(ledChannel, freq, resolution);    // 지정된 채널, 주파수 및 해상도 설정
  ledcAttachPin(RED_LED, ledChannel);         // LED 핀과 채널 연결
}

void loop() {
  float raw = analogRead(analogPin);
  R = map(raw, 0, 4095, 0, 1023);             // 12bit -&gt; 10bit

  Serial.print(R); Serial.println(&#34; ohm&#34;);
  ledcWrite(ledChannel, R);
  delay(7);
}">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/posts/esp32-adc/">
  <meta property="og:site_name" content="stemwith">
  <meta property="og:title" content="esp32 ADC">
  <meta property="og:description" content="ESP32 ADC#ESP32는 18개의 12bit ADC 입력핀을 사용할 수 있다. (0~4095) 아두이노의 경우 10bit를 사용한다. (0~1023) 0V ~ 3.3V의 전압을 0~4095(0xFFF)까지의 디지털값으로 AD 변환한다. Arduino IDE 환경에서는 ESP32의 ADC 관련 레지스터를 조작하지 않고 analogRead() 함수를 사용하여 ESP32의 ADC 입력핀의 전압값을 가져올 수 있다. Potentiometer 저항값 출력하기#schematic#sketch#가변저항의 저항을 A0(ADC1_CH0, GPIO36)로 읽고 전압값으로 변환한 뒤 시리얼 모니터로 출력한다.
// ESP32 ADC test #define analogPin A0 void setup() { Serial.begin(115200); } void loop() { // read the input on analog pin GPIO36 (ADC1_CH0): int sensorValue = analogRead(analogPin); // Convert the analog (12bit ADC : 0 - 4095) to a voltage (0 - 3.3V): float voltage = (sensorValue /4095.0) * 3.3; // print out the value you read: Serial.println(voltage); delay(200); }
Potentiometer로 LED 밝기 조절하기#schematic#LED : R → GPIO19 / G → GPIO18 / B → GPIO17 / GND 저항 : R → 150Ω / G → 100Ω / B → 100Ω Potentiometer: Left 5V, Center AO(IO36), Right GND sketch##define RED_LED 19 // GPIO 19 #define analogPin A0 // Sensor VP, GPIO 36 int freq = 5000; // 주파수 int ledChannel = 0; // 채널 (0 ~ 15 선택) int resolution = 10; // 해상도 (1 ~ 16bit resolution 선택) int R = 0; void setup() { Serial.begin(115200); ledcSetup(ledChannel, freq, resolution); // 지정된 채널, 주파수 및 해상도 설정 ledcAttachPin(RED_LED, ledChannel); // LED 핀과 채널 연결 } void loop() { float raw = analogRead(analogPin); R = map(raw, 0, 4095, 0, 1023); // 12bit -&gt; 10bit Serial.print(R); Serial.println(&#34; ohm&#34;); ledcWrite(ledChannel, R); delay(7); }">
  <meta property="og:locale" content="ko_kr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2019-10-20T01:59:54+09:00">
    <meta property="article:modified_time" content="2019-10-20T01:59:54+09:00">


<title>esp32 ADC | stemwith</title>
<link rel="icon" href="/favicon.ico" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/posts/esp32-adc/">
<link rel="stylesheet" href="/book.min.4a9d0c155a0e6c344df12063be3cf2ab65cdfeee91d3cab693d1e82931923740.css" integrity="sha256-Sp0MFVoObDRN8SBjvjzyq2XN/u6R08q2k9HoKTGSN0A=" crossorigin="anonymous">


  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.aaeb00f59d8b1e7d01cbd820188270f12285a8297c6fb702d9b898f76d7f65b9.js" integrity="sha256-qusA9Z2LHn0By9ggGIJw8SKFqCl8b7cC2biY921/Zbk=" crossorigin="anonymous"></script>

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-128DRYVCRT"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-128DRYVCRT');
        }
      </script>


  
</head>
<body dir="ltr" class="book-kind-page book-type-posts">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/og_image.png" alt="Logo" /></a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>

























</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>esp32 ADC</h3>

  <label for="toc-control">
    
    <img src="/icons/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#esp32-adc">ESP32 ADC</a></li>
        <li><a href="#potentiometer-저항값-출력하기">Potentiometer 저항값 출력하기</a></li>
        <li><a href="#potentiometer로-led-밝기-조절하기">Potentiometer로 LED 밝기 조절하기</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown book-post">
  <h1>
    esp32 ADC
  </h1>
  
  <div class="flex align-center text-small book-post-date">
    <img src="/icons/calendar.svg" class="book-icon" alt="" />
    <span>October 20, 2019</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/esp32/">Esp32</a>
  </div>
  

  


  <div class="book-post-content markdown-inner"><h3 id="esp32-adc">ESP32 ADC<a class="anchor" href="#esp32-adc">#</a></h3>
<ul>
<li>ESP32는 18개의 12bit ADC 입력핀을 사용할 수 있다. (0~4095)</li>
<li>아두이노의 경우 10bit를 사용한다. (0~1023)</li>
<li>0V ~ 3.3V의 전압을 0~4095(0xFFF)까지의 디지털값으로 AD 변환한다.</li>
<li>Arduino IDE 환경에서는 ESP32의 ADC 관련 레지스터를 조작하지 않고 analogRead() 함수를 사용하여 ESP32의 ADC 입력핀의 전압값을 가져올 수 있다. </li>
</ul>
<br>
<br>
<h3 id="potentiometer-저항값-출력하기">Potentiometer 저항값 출력하기<a class="anchor" href="#potentiometer-%ec%a0%80%ed%95%ad%ea%b0%92-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0">#</a></h3>
<h4 id="schematic">schematic<a class="anchor" href="#schematic">#</a></h4>







<figure
  
  class="center"

  
  style="width: 75%;">

  <img src="/image/esp32-adc-01.png" alt="/image/esp32-adc-01.png">

  
  
</figure>
<br>
<h4 id="sketch">sketch<a class="anchor" href="#sketch">#</a></h4>
<p>가변저항의 저항을 A0(ADC1_CH0, GPIO36)로 읽고 전압값으로 변환한 뒤 시리얼 모니터로 출력한다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="cl"><span class="c1">// ESP32 ADC test
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define analogPin A0
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">Serial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// read the input on analog pin GPIO36 (ADC1_CH0):
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">int</span> <span class="n">sensorValue</span> <span class="o">=</span> <span class="nf">analogRead</span><span class="p">(</span><span class="n">analogPin</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// Convert the analog (12bit ADC :  0 - 4095) to a voltage (0 - 3.3V):
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">float</span> <span class="n">voltage</span> <span class="o">=</span> <span class="p">(</span><span class="n">sensorValue</span> <span class="o">/</span><span class="mf">4095.0</span><span class="p">)</span> <span class="o">*</span> <span class="mf">3.3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// print out the value you read:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">voltage</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nf">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div><br>
<br>
<h3 id="potentiometer로-led-밝기-조절하기">Potentiometer로 LED 밝기 조절하기<a class="anchor" href="#potentiometer%eb%a1%9c-led-%eb%b0%9d%ea%b8%b0-%ec%a1%b0%ec%a0%88%ed%95%98%ea%b8%b0">#</a></h3>
<h4 id="schematic-1">schematic<a class="anchor" href="#schematic-1">#</a></h4>







<figure
  
  class="center"

  
  style="width: 75%;">

  <img src="/image/esp32-adc-02.png" alt="/image/esp32-adc-02.png">

  
  
</figure>
<br>
<ul>
<li>LED : R → GPIO19 / G → GPIO18 / B → GPIO17 / GND</li>
<li>저항 : R → 150Ω / G → 100Ω / B → 100Ω</li>
<li>Potentiometer: Left 5V, Center AO(IO36), Right GND</li>
</ul>
<br>
<h4 id="sketch-1">sketch<a class="anchor" href="#sketch-1">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="cl"><span class="cp">#define RED_LED 19       </span><span class="c1">// GPIO 19
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define analogPin A0     </span><span class="c1">// Sensor VP, GPIO 36
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">freq</span> <span class="o">=</span> <span class="mi">5000</span><span class="p">;</span>         <span class="c1">// 주파수
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">ledChannel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>      <span class="c1">// 채널 (0 ~ 15 선택)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">resolution</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>     <span class="c1">// 해상도 (1 ~ 16bit resolution 선택)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">R</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">Serial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nf">ledcSetup</span><span class="p">(</span><span class="n">ledChannel</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="n">resolution</span><span class="p">);</span>    <span class="c1">// 지정된 채널, 주파수 및 해상도 설정
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nf">ledcAttachPin</span><span class="p">(</span><span class="n">RED_LED</span><span class="p">,</span> <span class="n">ledChannel</span><span class="p">);</span>         <span class="c1">// LED 핀과 채널 연결
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">float</span> <span class="n">raw</span> <span class="o">=</span> <span class="nf">analogRead</span><span class="p">(</span><span class="n">analogPin</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">R</span> <span class="o">=</span> <span class="nf">map</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4095</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1023</span><span class="p">);</span>             <span class="c1">// 12bit -&gt; 10bit
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="n">Serial</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">R</span><span class="p">);</span> <span class="n">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="s">&#34; ohm&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nf">ledcWrite</span><span class="p">(</span><span class="n">ledChannel</span><span class="p">,</span> <span class="n">R</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nf">delay</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div></div>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">
  <div>
  
    <a href="/posts/arduino-bluetooth-blynk/" class="flex align-center">
      <img src="/icons/backward.svg" class="book-icon" alt="Previous" title="Arduino, Bluetooth, Blynk" />
      <span>Arduino, Bluetooth, Blynk</span>
    </a>
  
  </div>
  <div>
  
    <a href="/posts/esp32-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0/" class="flex align-center">
      <span>esp32 시작하기</span>
      <img src="/icons/forward.svg" class="book-icon" alt="Next" title="esp32 시작하기" />
    </a>
  
  </div>
</div>
 
        
  
  <div class="book-comments">

</div>
  
 
        
        

 
      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    

<aside class="book-toc">
  <div class="book-toc-content">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#esp32-adc">ESP32 ADC</a></li>
        <li><a href="#potentiometer-저항값-출력하기">Potentiometer 저항값 출력하기</a></li>
        <li><a href="#potentiometer로-led-밝기-조절하기">Potentiometer로 LED 밝기 조절하기</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </div>
</aside>

 
  </main>

  
</body>
</html>


















