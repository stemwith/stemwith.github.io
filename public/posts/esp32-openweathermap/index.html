<!DOCTYPE html>
<html lang="ko-kr" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="OpenWeatherMap.org#
OpenWeatherMap은 세계 각 지역의 현재 날씨, 예보, 과거 날씨 데이터를 제공하는 사이트입니다. (몇가지 제약이 있긴 하지만) 회원가입을 통해서 API Key를 생성하고 이를 통해 무료로 실시간 날씨 정보를 얻을 수 있습니다.

Free Current weather and forecasts collection#

60 Calls per minute (no more than)
Current weather API
5 days/3 hour forecast API
Weather maps 1.0
UV index
Weather alerts
Availability 95%
Weather API data update  &lt; 2 hours
Weather maps data update  &lt; 3 hours
API lifetime support :  Current version
Historical weather collection은 모두 Starter 이상(유료)


Current weather collections API Key 생성#


Sign Up을 클릭하여 회원가입을 하고,">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/posts/esp32-openweathermap/">
  <meta property="og:site_name" content="STEM with">
  <meta property="og:title" content="esp32 OpenWeatherMap에서 실시간 날씨 정보 받기">
  <meta property="og:description" content="OpenWeatherMap.org#OpenWeatherMap은 세계 각 지역의 현재 날씨, 예보, 과거 날씨 데이터를 제공하는 사이트입니다. (몇가지 제약이 있긴 하지만) 회원가입을 통해서 API Key를 생성하고 이를 통해 무료로 실시간 날씨 정보를 얻을 수 있습니다.
Free Current weather and forecasts collection#60 Calls per minute (no more than) Current weather API 5 days/3 hour forecast API Weather maps 1.0 UV index Weather alerts Availability 95% Weather API data update &lt; 2 hours Weather maps data update &lt; 3 hours API lifetime support : Current version Historical weather collection은 모두 Starter 이상(유료) Current weather collections API Key 생성#Sign Up을 클릭하여 회원가입을 하고,">
  <meta property="og:locale" content="ko_kr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2019-11-19T18:27:53+09:00">
    <meta property="article:modified_time" content="2019-11-19T18:27:53+09:00">
    <meta property="article:tag" content="Iot">


<title>esp32 OpenWeatherMap에서 실시간 날씨 정보 받기 | STEM with</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/posts/esp32-openweathermap/">
<link rel="stylesheet" href="/book.min.aeea42fb216bc5e1dbc1c7adf74b0ac79e17602b386834ac6f1c28574b966754.css" integrity="sha256-rupC&#43;yFrxeHbwcet90sKx54XYCs4aDSsbxwoV0uWZ1Q=" crossorigin="anonymous">


  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.a51994453e5fa3809f7eaaf6143af9de9b67838bac6ba6a9fe161e0559cc2672.js" integrity="sha256-pRmURT5fo4Cffqr2FDr53ptng4usa6ap/hYeBVnMJnI=" crossorigin="anonymous"></script>

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-128DRYVCRT"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-128DRYVCRT');
        }
      </script>


  
</head>
<body dir="ltr" class="book-kind-page book-type-posts">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>STEM with</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>

























</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>esp32 OpenWeatherMap에서 실시간 날씨 정보 받기</h3>

  <label for="toc-control">
    
    <img src="/icons/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#openweathermaporg">OpenWeatherMap.org</a></li>
        <li><a href="#esp32에서-사용하는-경우">ESP32에서 사용하는 경우</a></li>
        <li><a href="#json-parsing">JSON Parsing</a></li>
        <li><a href="#weather-condition-code">Weather Condition Code</a></li>
        <li><a href="#1602-lcd에-날씨-정보-출력하기">1602 LCD에 날씨 정보 출력하기</a></li>
        <li><a href="#공공데이터-활용하기">공공데이터 활용하기</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown book-post">
  <h1>
    esp32 OpenWeatherMap에서 실시간 날씨 정보 받기
  </h1>
  
  <div class="flex align-center text-small book-post-date">
    <img src="/icons/calendar.svg" class="book-icon" alt="" />
    <span>November 19, 2019</span>
  </div>



  
  <div class="text-small">
    
      <a href="/categories/esp32/">Esp32</a>
  </div>
  

  
  <div class="text-small">
    
      <a href="/tags/iot/">Iot</a>
  </div>
  


  <div class="book-post-content markdown-inner"><h3 id="openweathermaporg">OpenWeatherMap.org<a class="anchor" href="#openweathermaporg">#</a></h3>
<p><a href="https://openweathermap.org/">OpenWeatherMap</a>은 세계 각 지역의 현재 날씨, 예보, 과거 날씨 데이터를 제공하는 사이트입니다. (몇가지 제약이 있긴 하지만) 회원가입을 통해서 API Key를 생성하고 이를 통해 무료로 실시간 날씨 정보를 얻을 수 있습니다.</p>
<br>
<h4 id="free-current-weather-and-forecasts-collection">Free Current weather and forecasts collection<a class="anchor" href="#free-current-weather-and-forecasts-collection">#</a></h4>
<ul>
<li>60 Calls per minute (no more than)</li>
<li><a href="https://openweathermap.org/current">Current weather API</a></li>
<li><a href="https://openweathermap.org/forecast5">5 days/3 hour forecast API</a></li>
<li><a href="https://openweathermap.org/api/weathermaps">Weather maps 1.0</a></li>
<li><a href="https://openweathermap.org/api/uvi">UV index</a></li>
<li><a href="https://openweathermap.org/triggers">Weather alerts</a></li>
<li>Availability 95%</li>
<li>Weather API data update  &lt; 2 hours</li>
<li>Weather maps data update  &lt; 3 hours</li>
<li>API lifetime support :  Current version</li>
<li>Historical weather collection은 모두 Starter 이상(유료)</li>
</ul>
<br>
<h4 id="current-weather-collections-api-key-생성">Current weather collections API Key 생성<a class="anchor" href="#current-weather-collections-api-key-%ec%83%9d%ec%84%b1">#</a></h4>
<ol>
<li>
<p>Sign Up을 클릭하여 회원가입을 하고,</p>
<p><img src="/image/owm-api-01.png" alt="" /></p>
<br>
<p><img src="/image/owm-api-02.png" alt="" /></p>
<br>
</li>
<li>
<p>Sign In을 클릭하여 로그인한 뒤, API Keys를 누릅니다.</p>
<p><img src="/image/owm-api-03.png" alt="" /></p>
<br>
<p><img src="/image/owm-api-04.png" alt="" /></p>
<br>
</li>
<li>
<p>Default로 지정되어 있는 Key를 복사하거나, 새로운 Key를 생성합니다.</p>
</li>
</ol>
<p><img src="/image/owm-api-05.png" alt="" /></p>
<br>
<ol start="4">
<li>
<p>API Key를 이용하는 방법은 메인홈페이지 메뉴의 API 탭을 누른뒤, 얻고자 하는 날씨정보(예를 들어 Current weather data)의 <a href="https://openweathermap.org/api"><strong>API doc</strong></a>을 참고하세요.</p>
<p><img src="/image/owm-api-06.png" alt="" /></p>
</li>
<li>
<p>먼저 인터넷 브라우저를 통해 날씨정보가 어떻게 출력되는지 알아보기위하여 아래 홈페이지 주소에 접속해봅니다. 이때 주소의 끝부분에 있는 YOUR_API_KEY 대신 본인의 API Key를 입력합니다.</p>
</li>
</ol>
<br>
<ul>
<li>서울: <a href="https://api.openweathermap.org/data/2.5/weather?q=Seoul,KR&amp;units=metric&amp;APPID=YOUR_API_KEY">https://api.openweathermap.org/data/2.5/weather?q=Seoul,KR&units=metric&APPID=YOUR_API_KEY</a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">https://api.openweathermap.org/data/2.5/weather?q=Seoul,KR&amp;units=metric&amp;APPID=1bf3d5e1bd2e5934aadd86..........</span></span></span></code></pre></div><br>
<ul>
<li>런던: <a href="https://api.openweathermap.org/data/2.5/weather?q=London,GB&amp;units=metric&amp;appid=YOUR_API_KEY">https://api.openweathermap.org/data/2.5/weather?q=London,GB&units=metric&appid=YOUR_API_KEY</a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">https://api.openweathermap.org/data/2.5/weather?q=London,GB&amp;units=metric&amp;APPID=1bf3d5e1bd2e5934aadd86..........</span></span></span></code></pre></div><br>
<ul>
<li>상하이: <a href="https://api.openweathermap.org/data/2.5/weather?q=Shanghai,CN&amp;units=metric&amp;APPID=YOUR_API_KEY">https://api.openweathermap.org/data/2.5/weather?q=Shanghai,CN&units=metric&APPID=YOUR_API_KEY</a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">https://api.openweathermap.org/data/2.5/weather?q=Shanghai,CN&amp;units=metric&amp;APPID=1bf3d5e1bd2e5934aadd86..........</span></span></span></code></pre></div><br>
<h4 id="브라우저에-출력되는-내용">브라우저에 출력되는 내용<a class="anchor" href="#%eb%b8%8c%eb%9d%bc%ec%9a%b0%ec%a0%80%ec%97%90-%ec%b6%9c%eb%a0%a5%eb%90%98%eb%8a%94-%eb%82%b4%ec%9a%a9">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;coord&#34;</span>:{<span style="color:#f92672">&#34;lon&#34;</span>:<span style="color:#ae81ff">-0.13</span>,<span style="color:#f92672">&#34;lat&#34;</span>:<span style="color:#ae81ff">51.51</span>},<span style="color:#f92672">&#34;weather&#34;</span>:[{<span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">804</span>,<span style="color:#f92672">&#34;main&#34;</span>:<span style="color:#e6db74">&#34;Clouds&#34;</span>,<span style="color:#f92672">&#34;description&#34;</span>:<span style="color:#e6db74">&#34;overcast clouds&#34;</span>,<span style="color:#f92672">&#34;icon&#34;</span>:<span style="color:#e6db74">&#34;04n&#34;</span>}],<span style="color:#f92672">&#34;base&#34;</span>:<span style="color:#e6db74">&#34;stations&#34;</span>,<span style="color:#f92672">&#34;main&#34;</span>:{<span style="color:#f92672">&#34;temp&#34;</span>:<span style="color:#ae81ff">277.16</span>,<span style="color:#f92672">&#34;pressure&#34;</span>:<span style="color:#ae81ff">1007</span>,<span style="color:#f92672">&#34;humidity&#34;</span>:<span style="color:#ae81ff">86</span>,<span style="color:#f92672">&#34;temp_min&#34;</span>:<span style="color:#ae81ff">274.82</span>,<span style="color:#f92672">&#34;temp_max&#34;</span>:<span style="color:#ae81ff">279.26</span>},<span style="color:#f92672">&#34;visibility&#34;</span>:<span style="color:#ae81ff">8000</span>,<span style="color:#f92672">&#34;wind&#34;</span>:{<span style="color:#f92672">&#34;speed&#34;</span>:<span style="color:#ae81ff">5.1</span>,<span style="color:#f92672">&#34;deg&#34;</span>:<span style="color:#ae81ff">90</span>},<span style="color:#f92672">&#34;clouds&#34;</span>:{<span style="color:#f92672">&#34;all&#34;</span>:<span style="color:#ae81ff">90</span>},<span style="color:#f92672">&#34;dt&#34;</span>:<span style="color:#ae81ff">1574300635</span>,<span style="color:#f92672">&#34;sys&#34;</span>:{<span style="color:#f92672">&#34;type&#34;</span>:<span style="color:#ae81ff">1</span>,<span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">1414</span>,<span style="color:#f92672">&#34;country&#34;</span>:<span style="color:#e6db74">&#34;GB&#34;</span>,<span style="color:#f92672">&#34;sunrise&#34;</span>:<span style="color:#ae81ff">1574321288</span>,<span style="color:#f92672">&#34;sunset&#34;</span>:<span style="color:#ae81ff">1574352288</span>},<span style="color:#f92672">&#34;timezone&#34;</span>:<span style="color:#ae81ff">0</span>,<span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">2643743</span>,<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;London&#34;</span>,<span style="color:#f92672">&#34;cod&#34;</span>:<span style="color:#ae81ff">200</span>}</span></span></code></pre></div><br>
<p>그밖의 도시 및 국가명은 Maps&gt; Weather maps를 클릭하여 표시되는 지도를 통해 확인할 수 있습니다.</p>
<br>
<br>
<h3 id="esp32에서-사용하는-경우">ESP32에서 사용하는 경우<a class="anchor" href="#esp32%ec%97%90%ec%84%9c-%ec%82%ac%ec%9a%a9%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0">#</a></h3>
<h4 id="wifi-접속-설정">wifi 접속 설정<a class="anchor" href="#wifi-%ec%a0%91%ec%86%8d-%ec%84%a4%ec%a0%95">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> ssid     <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;your ssid&#34;</span>;                  <span style="color:#75715e">// 연결할 SSID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> password <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;your password&#34;</span>;              <span style="color:#75715e">// 연결할 SSID의 비밀번호
</span></span></span></code></pre></div><ul>
<li>wifi에 접속하기 위한 ssid와 password를 설정</li>
</ul>
<br>
<h4 id="openweathermaporg-접속-설정">OpenWeatherMap.org 접속 설정<a class="anchor" href="#openweathermaporg-%ec%a0%91%ec%86%8d-%ec%84%a4%ec%a0%95">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> String endpoint <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://api.openweathermap.org&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> String ver <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/data/2.5/weather?q=&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> String city <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Shanghai,CN&#34;</span>;                 <span style="color:#75715e">// City,Country (띄어쓰기 금지)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> String appid <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&amp;units=metric&amp;APPID=&#34;</span>;       <span style="color:#75715e">// Units: metric
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> String key <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1bf3d5e1bd2e5934aadd86..........&#34;</span>;    <span style="color:#75715e">// API Key
</span></span></span></code></pre></div><ul>
<li>날씨 데이터를 받아올 도시, 국가를 지정 (Shanghai,CN)  (※주의: <strong>Shanghai,CN</strong> 사이에 <strong>띄어쓰기를 하면 안됨</strong>)</li>
<li>key 변수에 본의 API Key를 입력</li>
</ul>
<br>
<h4 id="sketch">sketch<a class="anchor" href="#sketch">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;WiFi.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;HTTPClient.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> ssid     <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;your ssid&#34;</span>;                  <span style="color:#75715e">// 연결할 SSID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> password <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;your password&#34;</span>;              <span style="color:#75715e">// 연결할 SSID의 비밀번호
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// OpenWeatherMap.org: Shanghai,CN
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> String endpoint <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://api.openweathermap.org&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> String ver <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/data/2.5/weather?q=&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> String city <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Shanghai,CN&#34;</span>;                 <span style="color:#75715e">// City,Country (띄어쓰기 금지)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> String appid <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&amp;units=metric&amp;APPID=&#34;</span>;       <span style="color:#75715e">// Units: metric
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> String key <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1bf3d5e1bd2e5934aadd86..........&#34;</span>;    <span style="color:#75715e">// API Key
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span>() {
</span></span><span style="display:flex;"><span>    Serial.begin(<span style="color:#ae81ff">115200</span>);
</span></span><span style="display:flex;"><span>    delay(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    WiFi.begin(ssid, password);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 와이파이 연결
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> (WiFi.status() <span style="color:#f92672">!=</span> WL_CONNECTED) {
</span></span><span style="display:flex;"><span>      delay(<span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>      Serial.println(<span style="color:#e6db74">&#34;Connecting to WiFi..&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Serial.println(<span style="color:#e6db74">&#34;Connected to the WiFi network&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 연결 여부 로그 출력
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> ((WiFi.status() <span style="color:#f92672">==</span> WL_CONNECTED)) {    <span style="color:#75715e">// Check the current connection status
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 
</span></span><span style="display:flex;"><span>    HTTPClient http;
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    http.begin(endpoint <span style="color:#f92672">+</span> ver <span style="color:#f92672">+</span> city <span style="color:#f92672">+</span> appid <span style="color:#f92672">+</span> key); <span style="color:#75715e">// Specify the URL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> httpCode <span style="color:#f92672">=</span> http.GET();                       <span style="color:#75715e">// Make the request
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (httpCode <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {                              <span style="color:#75715e">// Check for the returning code
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 
</span></span><span style="display:flex;"><span>        String json <span style="color:#f92672">=</span> http.getString();         <span style="color:#75715e">// get JSON format data
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Serial.println(httpCode);
</span></span><span style="display:flex;"><span>        Serial.println(json);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>      Serial.println(<span style="color:#e6db74">&#34;Error on HTTP request&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    http.end();                                     <span style="color:#75715e">// Free the resources
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  delay(<span style="color:#ae81ff">30000</span>); 
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><br>
<h4 id="출력-data">출력 DATA<a class="anchor" href="#%ec%b6%9c%eb%a0%a5-data">#</a></h4>
<p>출력 데이터는 <strong>JSON</strong>(JavaScript Object Notation)을 기반으로 합니다. JSON은 프로그래밍 언어에 관계없이 데이터를 생성하고 읽을 수 있도록 만들어졌으며, 이를 통해 상호간에 보다 쉽게 데이터를 교환이 가능한 텍스트 기반의 데이터 교환 방식입니다. OpenWeatherMap에서도 이 방식을 사용하여 날씨 데이터를 생성하여 출력하고 있으며, 출력 데이터의 형태는 아래와 같습니다.</p>
<blockquote class='book-hint '>
<p>스케치 맨 아래라인의 delay 명령으로 인해 10초마다 1번씩 data를 출력합니다. 단, OpenWeatherMap free service의 update time이 2시간 이하로 되어 있으므로, 자료 갱신이 매 출력시마다 진행되지는 않습니다.</p></blockquote><p><img src="/image/owm-01.png" alt="" /></p>
<br>
<p>Firefox 등의 몇몇 인터넷 브라우저에서는 JSON 데이터를 보다 직관적으로 이해할 수 있도록 계층별로 나누어 출력해주기도 합니다.</p>
<p><img src="/image/owm-02.png" alt="" /></p>
<br>
<br>
<h3 id="json-parsing">JSON Parsing<a class="anchor" href="#json-parsing">#</a></h3>
<p>위와 같이 복잡한 형태로 출력되는 날씨 데이터 중에서 필요한 날씨 정보를 추출하기 위하여 JSON (JavaScript Object Notation) 파싱 과정을 거쳐야 하는데요. 이를 위해 아두이노 IDE에서 Json 파싱을 위한 라이브러리를 설치하여야 합니다.</p>
<br>
<h4 id="라이브러리-설치">라이브러리 설치<a class="anchor" href="#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%84%a4%ec%b9%98">#</a></h4>
<p>ArduinoJson (by Benoit Blanchon) 라이브러리 (version 6)를 설치합니다.</p>
<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong></p>
<p><img src="/image/json-01.png" alt="" /></p>
<br>
<p><img src="/image/json-02.png" alt="" /></p>
<br>
<h4 id="memory-pool-크기-계산">Memory pool 크기 계산<a class="anchor" href="#memory-pool-%ed%81%ac%ea%b8%b0-%ea%b3%84%ec%82%b0">#</a></h4>
<ol>
<li>JSON 파싱에 사용할 배열의 크기를 계산하여 메모리를 확보합니다. 이를 위해 샘플로 사용할 JSON데이터가 필요하므로, 먼저 웹브라우저에서 OpenWeatherMap에 접속한 뒤,</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">https://api.openweathermap.org/data/2.5/weather?q=Shanghai,CN&amp;units=metric&amp;APPID=1bf3d5e1bd2e5934aadd86..........</span></span></span></code></pre></div><br>
<ol start="2">
<li>출력되는 JSON 데이터를 드래그하여 복사합니다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;coord&#34;</span>:{<span style="color:#f92672">&#34;lon&#34;</span>:<span style="color:#ae81ff">-0.13</span>,<span style="color:#f92672">&#34;lat&#34;</span>:<span style="color:#ae81ff">51.51</span>},<span style="color:#f92672">&#34;weather&#34;</span>:[{<span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">804</span>,<span style="color:#f92672">&#34;main&#34;</span>:<span style="color:#e6db74">&#34;Clouds&#34;</span>,<span style="color:#f92672">&#34;description&#34;</span>:<span style="color:#e6db74">&#34;overcast clouds&#34;</span>,<span style="color:#f92672">&#34;icon&#34;</span>:<span style="color:#e6db74">&#34;04n&#34;</span>}],<span style="color:#f92672">&#34;base&#34;</span>:<span style="color:#e6db74">&#34;stations&#34;</span>,<span style="color:#f92672">&#34;main&#34;</span>:{<span style="color:#f92672">&#34;temp&#34;</span>:<span style="color:#ae81ff">277.16</span>,<span style="color:#f92672">&#34;pressure&#34;</span>:<span style="color:#ae81ff">1007</span>,<span style="color:#f92672">&#34;humidity&#34;</span>:<span style="color:#ae81ff">86</span>,<span style="color:#f92672">&#34;temp_min&#34;</span>:<span style="color:#ae81ff">274.82</span>,<span style="color:#f92672">&#34;temp_max&#34;</span>:<span style="color:#ae81ff">279.26</span>},<span style="color:#f92672">&#34;visibility&#34;</span>:<span style="color:#ae81ff">8000</span>,<span style="color:#f92672">&#34;wind&#34;</span>:{<span style="color:#f92672">&#34;speed&#34;</span>:<span style="color:#ae81ff">5.1</span>,<span style="color:#f92672">&#34;deg&#34;</span>:<span style="color:#ae81ff">90</span>},<span style="color:#f92672">&#34;clouds&#34;</span>:{<span style="color:#f92672">&#34;all&#34;</span>:<span style="color:#ae81ff">90</span>},<span style="color:#f92672">&#34;dt&#34;</span>:<span style="color:#ae81ff">1574300635</span>,<span style="color:#f92672">&#34;sys&#34;</span>:{<span style="color:#f92672">&#34;type&#34;</span>:<span style="color:#ae81ff">1</span>,<span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">1414</span>,<span style="color:#f92672">&#34;country&#34;</span>:<span style="color:#e6db74">&#34;GB&#34;</span>,<span style="color:#f92672">&#34;sunrise&#34;</span>:<span style="color:#ae81ff">1574321288</span>,<span style="color:#f92672">&#34;sunset&#34;</span>:<span style="color:#ae81ff">1574352288</span>},<span style="color:#f92672">&#34;timezone&#34;</span>:<span style="color:#ae81ff">0</span>,<span style="color:#f92672">&#34;id&#34;</span>:<span style="color:#ae81ff">2643743</span>,<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;London&#34;</span>,<span style="color:#f92672">&#34;cod&#34;</span>:<span style="color:#ae81ff">200</span>}</span></span></code></pre></div><br>
<ol start="3">
<li><a href="https://arduinojson.org/assistant">https://arduinojson.org/assistant</a> 에 접속한 뒤, <strong>Input</strong>란에 있는 내용을 모두 지우고 복사한 JSON데이터를 붙여넣기하면, Memory pool size가 자동으로 계산됩니다.</li>
</ol>
<p><img src="/image/owm-04.png" alt="" /></p>
<br>
<ol start="4">
<li>Memory pool size의 Expression부분을 드래그하여 복사하고, Additional bytes for strings dubplucation 부분의 숫자를 이용하여 스케치에서 다음의 형식으로 변수를 생성합니다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> size_t capacity <span style="color:#f92672">=</span> JSON_ARRAY_SIZE(<span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> JSON_OBJECT_SIZE(<span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>JSON_OBJECT_SIZE(<span style="color:#ae81ff">2</span>) <span style="color:#f92672">+</span> JSON_OBJECT_SIZE(<span style="color:#ae81ff">4</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>JSON_OBJECT_SIZE(<span style="color:#ae81ff">5</span>) <span style="color:#f92672">+</span> JSON_OBJECT_SIZE(<span style="color:#ae81ff">13</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">240</span>;</span></span></code></pre></div><blockquote class='book-hint '>
<p>실제로는 아래 Parsing Program에 이미 변수가 설정되어 있으므로, 이 과정은 수행하지 않아도 됩니다.</p></blockquote><br>
<h4 id="parsing-program">Parsing program<a class="anchor" href="#parsing-program">#</a></h4>
<ol>
<li>Memory pool size가 출력된 화면의 아래쪽에 Parsing program도 함께 출력됩니다.</li>
</ol>
<p><img src="/image/owm-05.png" alt="" /></p>
<br>
<ol start="2">
<li>우선 Parsing Program 전체를 복사한 뒤, 스케치의 void loop() 부분에 붙여넣기 합니다.</li>
</ol>
<br>
<ol start="3">
<li>밑줄친 부분의 json 변수가 나타나 있는 라인을 모두 지우고</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> json <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;{</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">coord</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:{</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">lon</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:121.49,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">lat</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:31.23},</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">weather</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:[{</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">id</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:804,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">main</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">Clouds</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">description</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">overcast clouds</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">icon</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">04d</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">}],</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">base</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">stations</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">main</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:{</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">temp</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:293.02,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">pressure</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:1027,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">humidity</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:55,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">temp_min</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:289.82,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">temp_max</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:298.71},</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">visibility</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:10000,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">wind</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:{</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">speed</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:3,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">deg</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:60},</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">clouds</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:{</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">all</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:94},</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">dt</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:1574303919,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">sys</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:{</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">type</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:1,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">id</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:9659,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">country</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">CN</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">sunrise</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:1574288762,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">sunset</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:1574326426},</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">timezone</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:28800,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">id</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:1796236,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">name</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">Shanghai</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">,</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">cod</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">:200}&#34;</span>;</span></span></code></pre></div><br>
<ol start="4">
<li>OpenWeatherMap에서 실시간으로 받는 String 형식의 데이터 변수로 바꿔줍니다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>String json <span style="color:#f92672">=</span> http.getString();</span></span></code></pre></div><br>
<ol start="5">
<li>Timezone 반영을 위하여, 붙여넣기 한 Parsing program의 아래 부분에 아래 내용을 추가합니다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>dt <span style="color:#f92672">=</span> dt <span style="color:#f92672">+</span> timezone;                     <span style="color:#75715e">// for GMT+8 -&gt; +28800, for GMT+9 -&gt; +32400
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>sys_sunrise <span style="color:#f92672">=</span> sys_sunrise <span style="color:#f92672">+</span> timezone;
</span></span><span style="display:flex;"><span>sys_sunset <span style="color:#f92672">=</span> sys_sunset <span style="color:#f92672">+</span> timezone;</span></span></code></pre></div><br>
<ol start="6">
<li>
<p>UNIX Timestamp로 표기되는 시간을 일반적인 날짜, 시간으로 표기되도록 변환해줍니다. 이를 위해서 timelib.h 파일을 이용해야하는데, 이 파일은 Time 라이브러리(by Michael Margolis)에 포함되어 있지요. 그러므로 라이브러리 매니저를 통해 Time라이브러리를 찾아 설치해줍니다.</p>
<p><img src="/image/owm-10.png" alt="" /></p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>year(dt), month(dt), day(dt), hour(dt), minute(dt), second(dt), weekday(dt));</span></span></code></pre></div><p>​		위의 스케치를 통해서 UTC를 YYYY.MM.DD HH:MM:SS(요일) 형태의 날짜를 변환하며, printf문을 통해 출력할 수 있습니다.</p>
<br>
<h4 id="data-출력에-사용한-variables">Data 출력에 사용한 variables<a class="anchor" href="#data-%ec%b6%9c%eb%a0%a5%ec%97%90-%ec%82%ac%ec%9a%a9%ed%95%9c-variables">#</a></h4>
<p>JSON 형식의 데이터를 파싱할때 사용한 변수들입니다.</p>
<table>
  <thead>
      <tr>
          <th>내용</th>
          <th>형식</th>
          <th>변수</th>
          <th>unit</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>UNIX Time(UTC)</td>
          <td>long</td>
          <td>dt</td>
          <td></td>
      </tr>
      <tr>
          <td>Weather ID</td>
          <td>int</td>
          <td>weather_0_id</td>
          <td></td>
      </tr>
      <tr>
          <td>Weather Main</td>
          <td>const char*</td>
          <td>weather_0_main</td>
          <td></td>
      </tr>
      <tr>
          <td>Weather Description</td>
          <td>const char*</td>
          <td>weather_0_description</td>
          <td></td>
      </tr>
      <tr>
          <td>Weather Icon ID</td>
          <td>const char*</td>
          <td>weather_0_icon</td>
          <td></td>
      </tr>
      <tr>
          <td>Temperature</td>
          <td>float</td>
          <td>main_temp</td>
          <td>℃</td>
      </tr>
      <tr>
          <td>Temperature Max.</td>
          <td>float</td>
          <td>main_temp_max</td>
          <td>℃</td>
      </tr>
      <tr>
          <td>Temperature Min.</td>
          <td>float</td>
          <td>main_temp_min</td>
          <td>℃</td>
      </tr>
      <tr>
          <td>Pressure</td>
          <td>int</td>
          <td>main_pressure</td>
          <td>hPa</td>
      </tr>
      <tr>
          <td>Humidity</td>
          <td>int</td>
          <td>main_humidity</td>
          <td>%</td>
      </tr>
      <tr>
          <td>Visibility</td>
          <td>int</td>
          <td>visibility</td>
          <td>m</td>
      </tr>
      <tr>
          <td>Wind Speed</td>
          <td>int</td>
          <td>wind_speed</td>
          <td>m/s</td>
      </tr>
      <tr>
          <td>Wind Degree</td>
          <td>int</td>
          <td>wind_deg</td>
          <td>º</td>
      </tr>
      <tr>
          <td>Clouds</td>
          <td>int</td>
          <td>clouds_all</td>
          <td></td>
      </tr>
      <tr>
          <td>Sunrise</td>
          <td>long</td>
          <td>sys_sunrise</td>
          <td></td>
      </tr>
      <tr>
          <td>Sunset</td>
          <td>long</td>
          <td>sys_sunset</td>
          <td></td>
      </tr>
      <tr>
          <td>City ID</td>
          <td>long</td>
          <td>id</td>
          <td></td>
      </tr>
      <tr>
          <td>City name</td>
          <td>const char*</td>
          <td>name</td>
          <td></td>
      </tr>
      <tr>
          <td>Country</td>
          <td>const char*</td>
          <td>sys_country</td>
          <td></td>
      </tr>
      <tr>
          <td>Longitude</td>
          <td>float</td>
          <td>coord_lon</td>
          <td>º</td>
      </tr>
      <tr>
          <td>Latitude</td>
          <td>float</td>
          <td>coord_lat</td>
          <td>º</td>
      </tr>
      <tr>
          <td>GMT</td>
          <td>int</td>
          <td>timezone  (※timezone/3600)</td>
          <td>hour</td>
      </tr>
      <tr>
          <td></td>
          <td>int</td>
          <td>sys_type</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>int</td>
          <td>sys_id</td>
          <td></td>
      </tr>
      <tr>
          <td>Base</td>
          <td>const char*</td>
          <td>base</td>
          <td></td>
      </tr>
      <tr>
          <td>COD</td>
          <td>int</td>
          <td>cod</td>
          <td></td>
      </tr>
  </tbody>
</table>
<br>
<br>
<h4 id="sketch-전체">sketch: 전체<a class="anchor" href="#sketch-%ec%a0%84%ec%b2%b4">#</a></h4>
<p>위의 과정을 통해 만들진 부분 스케치를 병합하여 JSON 파싱을 위한 전체 스케치를 구성해봅니다.</p>
<blockquote class='book-hint '>
<p>ArduinoJson 라이브러리의 경우 version 5와 6의 사용 문법이 조금 다릅니다. 현재 Arduino IDE에서 라이브러리 추가과정을 통해 다운로드 받을 수 있는 최신 라이브러리 버전이 ArduinoJson 6이므로, 이에 맞게 작성하여야합니다. (기존의 ArduinoJson 5에 맞게 작성된 스케치는 컴파일이 되지 않으므로, <a href="https://arduinojson.org/v6/doc/upgrade/">Migrating from version 5 to 6</a> 문서를 참고하여 스케치를 변경해야 합니다.)</p></blockquote><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;WiFi.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;HTTPClient.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;ArduinoJson.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;TimeLib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> ssid     <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;your ssid&#34;</span>;                  <span style="color:#75715e">// 연결할 SSID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> password <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;your password&#34;</span>;              <span style="color:#75715e">// 연결할 SSID의 비밀번호
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> String endpoint <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://api.openweathermap.org&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> String ver <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/data/2.5/weather?q=&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> String city <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Shanghai,CN&#34;</span>;                 <span style="color:#75715e">// City,Country (띄어쓰기 금지)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> String appid <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&amp;units=metric&amp;APPID=&#34;</span>;       <span style="color:#75715e">// Units: metric
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> String key <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1bf3d5e1bd2e5934aadd86..........&#34;</span>;    <span style="color:#75715e">// API Key
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">long</span> offset_days <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;     <span style="color:#75715e">// 3 days for convert unix timestamp to datetime
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span>() {
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  Serial.begin(<span style="color:#ae81ff">115200</span>);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  WiFi.begin(ssid, password);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">while</span> (WiFi.status() <span style="color:#f92672">!=</span> WL_CONNECTED) {
</span></span><span style="display:flex;"><span>    delay(<span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>    Serial.println(<span style="color:#e6db74">&#34;Connecting to WiFi..&#34;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  Serial.println(<span style="color:#e6db74">&#34;Connected to the WiFi network&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> ((WiFi.status() <span style="color:#f92672">==</span> WL_CONNECTED)) {      <span style="color:#75715e">// Check the current connection status
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 
</span></span><span style="display:flex;"><span>    HTTPClient http;
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    http.begin(endpoint <span style="color:#f92672">+</span> ver <span style="color:#f92672">+</span> city <span style="color:#f92672">+</span> appid <span style="color:#f92672">+</span> key); <span style="color:#75715e">// Specify the URL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> httpCode <span style="color:#f92672">=</span> http.GET();                       <span style="color:#75715e">// Make the request
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (httpCode <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {                              <span style="color:#75715e">// Check for the returning code
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">// 데이터 파싱
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> size_t capacity <span style="color:#f92672">=</span> JSON_ARRAY_SIZE(<span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> JSON_OBJECT_SIZE(<span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>JSON_OBJECT_SIZE(<span style="color:#ae81ff">2</span>) <span style="color:#f92672">+</span> JSON_OBJECT_SIZE(<span style="color:#ae81ff">4</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>JSON_OBJECT_SIZE(<span style="color:#ae81ff">5</span>) <span style="color:#f92672">+</span> JSON_OBJECT_SIZE(<span style="color:#ae81ff">13</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">270</span>;
</span></span><span style="display:flex;"><span>      DynamicJsonDocument doc(capacity);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      String json <span style="color:#f92672">=</span> http.getString();                <span style="color:#75715e">// get JSON format data
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      deserializeJson(doc, json);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">float</span> coord_lon <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;coord&#34;</span>][<span style="color:#e6db74">&#34;lon&#34;</span>]; <span style="color:#75715e">// 121.49
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">float</span> coord_lat <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;coord&#34;</span>][<span style="color:#e6db74">&#34;lat&#34;</span>]; <span style="color:#75715e">// 31.23
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      JsonObject weather_0 <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;weather&#34;</span>][<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> weather_0_id <span style="color:#f92672">=</span> weather_0[<span style="color:#e6db74">&#34;id&#34;</span>]; <span style="color:#75715e">// 804
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> weather_0_main <span style="color:#f92672">=</span> weather_0[<span style="color:#e6db74">&#34;main&#34;</span>]; <span style="color:#75715e">// &#34;Clouds&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> weather_0_description <span style="color:#f92672">=</span> weather_0[<span style="color:#e6db74">&#34;description&#34;</span>]; <span style="color:#75715e">// &#34;overcast clouds&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> weather_0_icon <span style="color:#f92672">=</span> weather_0[<span style="color:#e6db74">&#34;icon&#34;</span>]; <span style="color:#75715e">// &#34;04d&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      JsonObject weather_1 = weather[1];
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      int weather_1_id = weather_1[&#34;id&#34;]; // 701
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_1_main = weather_1[&#34;main&#34;]; // &#34;Mist&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_1_description = weather_1[&#34;description&#34;]; // &#34;mist&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_1_icon = weather_1[&#34;icon&#34;]; // &#34;50n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      JsonObject weather_2 = weather[2];
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      int weather_2_id = weather_2[&#34;id&#34;]; // 741
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_2_main = weather_2[&#34;main&#34;]; // &#34;Fog&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_2_description = weather_2[&#34;description&#34;]; // &#34;fog&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_2_icon = weather_2[&#34;icon&#34;]; // &#34;50n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> base <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;base&#34;</span>]; <span style="color:#75715e">// &#34;stations&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      JsonObject main <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;main&#34;</span>];
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">float</span> main_temp <span style="color:#f92672">=</span> main[<span style="color:#e6db74">&#34;temp&#34;</span>]; <span style="color:#75715e">// 293.02
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">int</span> main_pressure <span style="color:#f92672">=</span> main[<span style="color:#e6db74">&#34;pressure&#34;</span>]; <span style="color:#75715e">// 1027
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">int</span> main_humidity <span style="color:#f92672">=</span> main[<span style="color:#e6db74">&#34;humidity&#34;</span>]; <span style="color:#75715e">// 55
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">float</span> main_temp_min <span style="color:#f92672">=</span> main[<span style="color:#e6db74">&#34;temp_min&#34;</span>]; <span style="color:#75715e">// 289.82
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">float</span> main_temp_max <span style="color:#f92672">=</span> main[<span style="color:#e6db74">&#34;temp_max&#34;</span>]; <span style="color:#75715e">// 298.71
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> visibility <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;visibility&#34;</span>]; <span style="color:#75715e">// 10000
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> wind_speed <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;wind&#34;</span>][<span style="color:#e6db74">&#34;speed&#34;</span>]; <span style="color:#75715e">// 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">int</span> wind_deg <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;wind&#34;</span>][<span style="color:#e6db74">&#34;deg&#34;</span>]; <span style="color:#75715e">// 60
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> clouds_all <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;clouds&#34;</span>][<span style="color:#e6db74">&#34;all&#34;</span>]; <span style="color:#75715e">// 94
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">long</span> dt <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;dt&#34;</span>]; <span style="color:#75715e">// 1574303919
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      JsonObject sys <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;sys&#34;</span>];
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> sys_type <span style="color:#f92672">=</span> sys[<span style="color:#e6db74">&#34;type&#34;</span>]; <span style="color:#75715e">// 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">int</span> sys_id <span style="color:#f92672">=</span> sys[<span style="color:#e6db74">&#34;id&#34;</span>]; <span style="color:#75715e">// 9659
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//float sys_message = sys[&#34;message&#34;]; // Internal parameter (0.0226)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> sys_country <span style="color:#f92672">=</span> sys[<span style="color:#e6db74">&#34;country&#34;</span>]; <span style="color:#75715e">// &#34;CN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">long</span> sys_sunrise <span style="color:#f92672">=</span> sys[<span style="color:#e6db74">&#34;sunrise&#34;</span>]; <span style="color:#75715e">// 1574288762
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">long</span> sys_sunset <span style="color:#f92672">=</span> sys[<span style="color:#e6db74">&#34;sunset&#34;</span>]; <span style="color:#75715e">// 1574326426
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> timezone <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;timezone&#34;</span>]; <span style="color:#75715e">// 28800
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">long</span> id <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;id&#34;</span>]; <span style="color:#75715e">// 1796236
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> name <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;name&#34;</span>]; <span style="color:#75715e">// &#34;Shanghai&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">int</span> cod <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;cod&#34;</span>]; <span style="color:#75715e">// 200
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      dt <span style="color:#f92672">=</span> dt <span style="color:#f92672">+</span> timezone;                <span style="color:#75715e">// for GMT+8 -&gt; +28800, for GMT+9 -&gt; +32400
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      sys_sunrise <span style="color:#f92672">=</span> sys_sunrise <span style="color:#f92672">+</span> timezone;
</span></span><span style="display:flex;"><span>      sys_sunset <span style="color:#f92672">=</span> sys_sunset <span style="color:#f92672">+</span> timezone;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//int main_sea_level = main[&#34;sea_level&#34;]; // Atmospheric pressure hPa on the sea level
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//int main_grnd_level = main[&#34;grnd_level&#34;]; // Atmospheric pressure hPa on the ground level     
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//int rain_1h = doc[&#34;rain&#34;][&#34;1h&#34;]; // Rain volume for the last 1 hour, mm
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//int rain_3h = doc[&#34;rain&#34;][&#34;3h&#34;]; // Rain volume for the last 3 hour, mm
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//int snow_1h = doc[&#34;snow&#34;][&#34;1h&#34;]; // Snow volume for the last 1 hour, mm
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//int snow_3h = doc[&#34;snow&#34;][&#34;3h&#34;]; // Snow volume for the last 3 hour, mm
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//데이터 출력
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      Serial.print(<span style="color:#e6db74">&#34;UNIX Time of Weather: &#34;</span>); Serial.println(dt);
</span></span><span style="display:flex;"><span>      Serial.printf(<span style="color:#e6db74">&#34;Time of Weather: %4d-%02d-%02d %02d:%02d:%02d(%1d)</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, year(dt), month(dt), day(dt), hour(dt), minute(dt), second(dt), weekday(dt));
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Weather ID: &#34;</span>); Serial.println(weather_0_id);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Weather Main: &#34;</span>); Serial.println(weather_0_main);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Weather Description: &#34;</span>); Serial.println(weather_0_description);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Weather Icon: &#34;</span>); Serial.println(weather_0_icon);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Temperature(℃): &#34;</span>); Serial.println(main_temp);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Temperature Max(℃): &#34;</span>); Serial.println(main_temp_max);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Temperature Min(℃): &#34;</span>); Serial.println(main_temp_min);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Pressure(hPa): &#34;</span>); Serial.println(main_pressure);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Humidity(%): &#34;</span>); Serial.println(main_humidity);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Visibility(m): &#34;</span>); Serial.println(visibility);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Wind Speed(m/s): &#34;</span>); Serial.println(wind_speed);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Wind Degree(º): &#34;</span>); Serial.println(wind_deg);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Clouds: &#34;</span>); Serial.println(clouds_all);
</span></span><span style="display:flex;"><span>      Serial.printf(<span style="color:#e6db74">&#34;Sunrise: %02d:%02d:%02d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, hour(sys_sunrise), minute(sys_sunrise), second(sys_sunrise));
</span></span><span style="display:flex;"><span>      Serial.printf(<span style="color:#e6db74">&#34;Sunset:  %02d:%02d:%02d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, hour(sys_sunset), minute(sys_sunset), second(sys_sunset));
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;City/Country: &#34;</span>); Serial.print(name); Serial.print(<span style="color:#e6db74">&#34;/&#34;</span>); Serial.println(sys_country);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;longitude/latidude: &#34;</span>); Serial.print(coord_lon); Serial.print(<span style="color:#e6db74">&#34;/&#34;</span>); Serial.println(coord_lat);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Timezone: GMT+&#34;</span>); Serial.println(timezone<span style="color:#f92672">/</span><span style="color:#ae81ff">3600</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Sea Level(hPa): &#34;); Serial.println(main_sea_level);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Ground Level(hPa): &#34;); Serial.println(main_grnd_level);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Rain 1h(mm): &#34;); Serial.println(rain_1h);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Rain 3h(mm): &#34;); Serial.println(rain_3h);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Snow 1h(mm): &#34;); Serial.println(snow_1h);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Snow 3h(mm): &#34;); Serial.println(snow_3h);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      */</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>      Serial.println(<span style="color:#e6db74">&#34;Error on HTTP request&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    http.end();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  delay(<span style="color:#ae81ff">30000</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><br>
<h4 id="출력-data-1">출력 Data<a class="anchor" href="#%ec%b6%9c%eb%a0%a5-data-1">#</a></h4>
<p><img src="/image/owm-03.png" alt="" /></p>
<br>
<br>
<h3 id="weather-condition-code">Weather Condition Code<a class="anchor" href="#weather-condition-code">#</a></h3>
<h4 id="group-2xx-thunderstorm">Group 2xx: Thunderstorm<a class="anchor" href="#group-2xx-thunderstorm">#</a></h4>
<table>
  <thead>
      <tr>
          <th>ID</th>
          <th>Main</th>
          <th>Description</th>
          <th>Icon</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>200</td>
          <td>Thunderstorm</td>
          <td>thunderstorm with light rain</td>
          <td><img src="http://openweathermap.org/img/wn/11d@2x.png" alt="img" /> 11d</td>
      </tr>
      <tr>
          <td>201</td>
          <td>Thunderstorm</td>
          <td>thunderstorm with rain</td>
          <td><img src="http://openweathermap.org/img/wn/11d@2x.png" alt="img" /> 11d</td>
      </tr>
      <tr>
          <td>202</td>
          <td>Thunderstorm</td>
          <td>thunderstorm with heavy rain</td>
          <td><img src="http://openweathermap.org/img/wn/11d@2x.png" alt="img" /> 11d</td>
      </tr>
      <tr>
          <td>210</td>
          <td>Thunderstorm</td>
          <td>light thunderstorm</td>
          <td><img src="http://openweathermap.org/img/wn/11d@2x.png" alt="img" /> 11d</td>
      </tr>
      <tr>
          <td>211</td>
          <td>Thunderstorm</td>
          <td>thunderstorm</td>
          <td><img src="http://openweathermap.org/img/wn/11d@2x.png" alt="img" /> 11d</td>
      </tr>
      <tr>
          <td>212</td>
          <td>Thunderstorm</td>
          <td>heavy thunderstorm</td>
          <td><img src="http://openweathermap.org/img/wn/11d@2x.png" alt="img" /> 11d</td>
      </tr>
      <tr>
          <td>221</td>
          <td>Thunderstorm</td>
          <td>ragged thunderstorm</td>
          <td><img src="http://openweathermap.org/img/wn/11d@2x.png" alt="img" /> 11d</td>
      </tr>
      <tr>
          <td>230</td>
          <td>Thunderstorm</td>
          <td>thunderstorm with light drizzle</td>
          <td><img src="http://openweathermap.org/img/wn/11d@2x.png" alt="img" /> 11d</td>
      </tr>
      <tr>
          <td>231</td>
          <td>Thunderstorm</td>
          <td>thunderstorm with drizzle</td>
          <td><img src="http://openweathermap.org/img/wn/11d@2x.png" alt="img" /> 11d</td>
      </tr>
      <tr>
          <td>232</td>
          <td>Thunderstorm</td>
          <td>thunderstorm with heavy drizzle</td>
          <td><img src="http://openweathermap.org/img/wn/11d@2x.png" alt="img" /> 11d</td>
      </tr>
  </tbody>
</table>
<br>
<h4 id="group-3xx-drizzle">Group 3xx: Drizzle<a class="anchor" href="#group-3xx-drizzle">#</a></h4>
<table>
  <thead>
      <tr>
          <th>ID</th>
          <th>Main</th>
          <th>Description</th>
          <th>Icon</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>300</td>
          <td>Drizzle</td>
          <td>light intensity drizzle</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
      <tr>
          <td>301</td>
          <td>Drizzle</td>
          <td>drizzle</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
      <tr>
          <td>302</td>
          <td>Drizzle</td>
          <td>heavy intensity drizzle</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
      <tr>
          <td>310</td>
          <td>Drizzle</td>
          <td>light intensity drizzle rain</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
      <tr>
          <td>311</td>
          <td>Drizzle</td>
          <td>drizzle rain</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
      <tr>
          <td>312</td>
          <td>Drizzle</td>
          <td>heavy intensity drizzle rain</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
      <tr>
          <td>313</td>
          <td>Drizzle</td>
          <td>shower rain and drizzle</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
      <tr>
          <td>314</td>
          <td>Drizzle</td>
          <td>heavy shower rain and drizzle</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
      <tr>
          <td>321</td>
          <td>Drizzle</td>
          <td>shower drizzle</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
  </tbody>
</table>
<br>
<h4 id="group-5xx-rain">Group 5xx: Rain<a class="anchor" href="#group-5xx-rain">#</a></h4>
<table>
  <thead>
      <tr>
          <th>ID</th>
          <th>Main</th>
          <th>Description</th>
          <th>Icon</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>500</td>
          <td>Rain</td>
          <td>light rain</td>
          <td><img src="http://openweathermap.org/img/wn/10d@2x.png" alt="img" /> 10d</td>
      </tr>
      <tr>
          <td>501</td>
          <td>Rain</td>
          <td>moderate rain</td>
          <td><img src="http://openweathermap.org/img/wn/10d@2x.png" alt="img" /> 10d</td>
      </tr>
      <tr>
          <td>502</td>
          <td>Rain</td>
          <td>heavy intensity rain</td>
          <td><img src="http://openweathermap.org/img/wn/10d@2x.png" alt="img" /> 10d</td>
      </tr>
      <tr>
          <td>503</td>
          <td>Rain</td>
          <td>very heavy rain</td>
          <td><img src="http://openweathermap.org/img/wn/10d@2x.png" alt="img" /> 10d</td>
      </tr>
      <tr>
          <td>504</td>
          <td>Rain</td>
          <td>extreme rain</td>
          <td><img src="http://openweathermap.org/img/wn/10d@2x.png" alt="img" /> 10d</td>
      </tr>
      <tr>
          <td>511</td>
          <td>Rain</td>
          <td>freezing rain</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
      <tr>
          <td>520</td>
          <td>Rain</td>
          <td>light intensity shower rain</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
      <tr>
          <td>521</td>
          <td>Rain</td>
          <td>shower rain</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
      <tr>
          <td>522</td>
          <td>Rain</td>
          <td>heavy intensity shower rain</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
      <tr>
          <td>531</td>
          <td>Rain</td>
          <td>ragged shower rain</td>
          <td><img src="http://openweathermap.org/img/wn/09d@2x.png" alt="img" /> 09d</td>
      </tr>
  </tbody>
</table>
<br>
<h4 id="group-6xx-snow">Group 6xx: Snow<a class="anchor" href="#group-6xx-snow">#</a></h4>
<table>
  <thead>
      <tr>
          <th>ID</th>
          <th>Main</th>
          <th>Description</th>
          <th>Icon</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>600</td>
          <td>Snow</td>
          <td>light snow</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
      <tr>
          <td>601</td>
          <td>Snow</td>
          <td>Snow</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
      <tr>
          <td>602</td>
          <td>Snow</td>
          <td>Heavy snow</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
      <tr>
          <td>611</td>
          <td>Snow</td>
          <td>Sleet</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
      <tr>
          <td>612</td>
          <td>Snow</td>
          <td>Light shower sleet</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
      <tr>
          <td>613</td>
          <td>Snow</td>
          <td>Shower sleet</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
      <tr>
          <td>615</td>
          <td>Snow</td>
          <td>Light rain and snow</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
      <tr>
          <td>616</td>
          <td>Snow</td>
          <td>Rain and snow</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
      <tr>
          <td>620</td>
          <td>Snow</td>
          <td>Light shower snow</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
      <tr>
          <td>621</td>
          <td>Snow</td>
          <td>Shower snow</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
      <tr>
          <td>622</td>
          <td>Snow</td>
          <td>Heavy shower snow</td>
          <td><img src="http://openweathermap.org/img/wn/13d@2x.png" alt="img" /> 13d</td>
      </tr>
  </tbody>
</table>
<br>
<h4 id="group-7xx-atmosphere">Group 7xx: Atmosphere<a class="anchor" href="#group-7xx-atmosphere">#</a></h4>
<table>
  <thead>
      <tr>
          <th>ID</th>
          <th>Main</th>
          <th>Description</th>
          <th>Icon</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>701</td>
          <td>Mist</td>
          <td>mist</td>
          <td><img src="http://openweathermap.org/img/wn/50d@2x.png" alt="img" /> 50d</td>
      </tr>
      <tr>
          <td>711</td>
          <td>Smoke</td>
          <td>Smoke</td>
          <td><img src="http://openweathermap.org/img/wn/50d@2x.png" alt="img" /> 50d</td>
      </tr>
      <tr>
          <td>721</td>
          <td>Haze</td>
          <td>Haze</td>
          <td><img src="http://openweathermap.org/img/wn/50d@2x.png" alt="img" /> 50d</td>
      </tr>
      <tr>
          <td>731</td>
          <td>Dust</td>
          <td>sand/ dust whirls</td>
          <td><img src="http://openweathermap.org/img/wn/50d@2x.png" alt="img" /> 50d</td>
      </tr>
      <tr>
          <td>741</td>
          <td>Fog</td>
          <td>fog</td>
          <td><img src="http://openweathermap.org/img/wn/50d@2x.png" alt="img" /> 50d</td>
      </tr>
      <tr>
          <td>751</td>
          <td>Sand</td>
          <td>sand</td>
          <td><img src="http://openweathermap.org/img/wn/50d@2x.png" alt="img" /> 50d</td>
      </tr>
      <tr>
          <td>761</td>
          <td>Dust</td>
          <td>dust</td>
          <td><img src="http://openweathermap.org/img/wn/50d@2x.png" alt="img" /> 50d</td>
      </tr>
      <tr>
          <td>762</td>
          <td>Ash</td>
          <td>volcanic ash</td>
          <td><img src="http://openweathermap.org/img/wn/50d@2x.png" alt="img" /> 50d</td>
      </tr>
      <tr>
          <td>771</td>
          <td>Squall</td>
          <td>squalls</td>
          <td><img src="http://openweathermap.org/img/wn/50d@2x.png" alt="img" /> 50d</td>
      </tr>
      <tr>
          <td>781</td>
          <td>Tornado</td>
          <td>tornado</td>
          <td><img src="http://openweathermap.org/img/wn/50d@2x.png" alt="img" /> 50d</td>
      </tr>
  </tbody>
</table>
<br>
<h4 id="group-800-clear">Group 800: Clear<a class="anchor" href="#group-800-clear">#</a></h4>
<table>
  <thead>
      <tr>
          <th>ID</th>
          <th>Main</th>
          <th>Description</th>
          <th>Icon</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>800</td>
          <td>Clear</td>
          <td>clear sky</td>
          <td><img src="http://openweathermap.org/img/wn/01d@2x.png" alt="img" /> 01d <img src="http://openweathermap.org/img/wn/01n@2x.png" alt="img" /> 01n</td>
      </tr>
  </tbody>
</table>
<br>
<h4 id="group-80x-clouds">Group 80x: Clouds<a class="anchor" href="#group-80x-clouds">#</a></h4>
<table>
  <thead>
      <tr>
          <th>ID</th>
          <th>Main</th>
          <th>Description</th>
          <th>Icon</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>801</td>
          <td>Clouds</td>
          <td>few clouds: 11-25%</td>
          <td><img src="http://openweathermap.org/img/wn/02d@2x.png" alt="img" /> 02d <img src="http://openweathermap.org/img/wn/02n@2x.png" alt="img" /> 02n</td>
      </tr>
      <tr>
          <td>802</td>
          <td>Clouds</td>
          <td>scattered clouds: 25-50%</td>
          <td><img src="http://openweathermap.org/img/wn/03d@2x.png" alt="img" /> 03d <img src="http://openweathermap.org/img/wn/03n@2x.png" alt="img" /> 03n</td>
      </tr>
      <tr>
          <td>803</td>
          <td>Clouds</td>
          <td>broken clouds: 51-84%</td>
          <td><img src="http://openweathermap.org/img/wn/04d@2x.png" alt="img" /> 04d <img src="http://openweathermap.org/img/wn/04n@2x.png" alt="img" /> 04n</td>
      </tr>
      <tr>
          <td>804</td>
          <td>Clouds</td>
          <td>overcast clouds: 85-100%</td>
          <td><img src="http://openweathermap.org/img/wn/04d@2x.png" alt="img" /> 04d <img src="http://openweathermap.org/img/wn/04n@2x.png" alt="img" /> 04n</td>
      </tr>
  </tbody>
</table>
<br>
<h4 id="icon-출력방법">ICON 출력방법<a class="anchor" href="#icon-%ec%b6%9c%eb%a0%a5%eb%b0%a9%eb%b2%95">#</a></h4>
<p>Weather ID 801에 해당하는 아이콘 code가 02d이므로 URL을 다음과 같이 지정하면</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>http://openweathermap.org/img/wn/10d.png</span></span></code></pre></div><p><img src="http://openweathermap.org/img/wn/10d.png" alt="" /></p>
<p>ICON크기를 크게 출력하고 싶은 경우에는 아이콘 code에 <strong>@2x</strong>를 덧붙입니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>http://openweathermap.org/img/wn/10d@2x.png</span></span></code></pre></div><p><img src="http://openweathermap.org/img/wn/10d@2x.png" alt="" /></p>
<br>
<br>
<h3 id="1602-lcd에-날씨-정보-출력하기">1602 LCD에 날씨 정보 출력하기<a class="anchor" href="#1602-lcd%ec%97%90-%eb%82%a0%ec%94%a8-%ec%a0%95%eb%b3%b4-%ec%b6%9c%eb%a0%a5%ed%95%98%ea%b8%b0">#</a></h3>
<p>여러가지 날씨 정보 중에서 현재 온도를 1602 LCD(I2C)에 출력해보겠습니다.</p>
<br>
<h4 id="라이브러리-설치하기">라이브러리 설치하기<a class="anchor" href="#%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%ec%84%a4%ec%b9%98%ed%95%98%ea%b8%b0">#</a></h4>
<p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong></p>
<ul>
<li>LiquidCrystal I2C (by Frank de Brabander) 검색하여 설치</li>
</ul>
<br>
<h4 id="schematic">schematic<a class="anchor" href="#schematic">#</a></h4>
<p><img src="/image/owm-06.png" alt="" /></p>
<br>
<h4 id="sketch-1">sketch<a class="anchor" href="#sketch-1">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;WiFi.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;HTTPClient.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;ArduinoJson.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;TimeLib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> ssid     <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;your ssid&#34;</span>;                  <span style="color:#75715e">// 연결할 SSID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> password <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;your password&#34;</span>;              <span style="color:#75715e">// 연결할 SSID의 비밀번호
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> String endpoint <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://api.openweathermap.org&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> String ver <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/data/2.5/weather?q=&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> String city <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Shanghai,CN&#34;</span>;                 <span style="color:#75715e">// City,Country (띄어쓰기 금지)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> String appid <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&amp;units=metric&amp;APPID=&#34;</span>;       <span style="color:#75715e">// Units: metric
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> String key <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1bf3d5e1bd2e5934aadd86..........&#34;</span>;    <span style="color:#75715e">// API Key
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">long</span> offset_days <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;                            <span style="color:#75715e">// 3 days for convert unix timestamp to datetime
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">float</span> main_temp;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// set the LCD
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;LiquidCrystal_I2C.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> lcdColumns <span style="color:#f92672">=</span> <span style="color:#ae81ff">16</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> lcdRows <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// set LCD address, number of columns and rows
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// if you don&#39;t know your display address, run an I2C scanner sketch
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>LiquidCrystal_I2C <span style="color:#a6e22e">lcd</span>(<span style="color:#ae81ff">0x27</span>, lcdColumns, lcdRows);  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span>() {
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  Serial.begin(<span style="color:#ae81ff">115200</span>);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  WiFi.begin(ssid, password);
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">while</span> (WiFi.status() <span style="color:#f92672">!=</span> WL_CONNECTED) {
</span></span><span style="display:flex;"><span>    delay(<span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>    Serial.println(<span style="color:#e6db74">&#34;Connecting to WiFi..&#34;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  Serial.println(<span style="color:#e6db74">&#34;Connected to the WiFi network&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// initialize LCD
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  lcd.init();
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// turn on LCD backlight                      
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  lcd.backlight();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> ((WiFi.status() <span style="color:#f92672">==</span> WL_CONNECTED)) {            <span style="color:#75715e">// Check the current connection status
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 
</span></span><span style="display:flex;"><span>    HTTPClient http;
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    http.begin(endpoint <span style="color:#f92672">+</span> ver <span style="color:#f92672">+</span> city <span style="color:#f92672">+</span> appid <span style="color:#f92672">+</span> key); <span style="color:#75715e">// Specify the URL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> httpCode <span style="color:#f92672">=</span> http.GET();                       <span style="color:#75715e">// Make the request
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (httpCode <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {                              <span style="color:#75715e">// Check for the returning code
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">// 데이터 파싱
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> size_t capacity <span style="color:#f92672">=</span> JSON_ARRAY_SIZE(<span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> JSON_OBJECT_SIZE(<span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>JSON_OBJECT_SIZE(<span style="color:#ae81ff">2</span>) <span style="color:#f92672">+</span> JSON_OBJECT_SIZE(<span style="color:#ae81ff">4</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>JSON_OBJECT_SIZE(<span style="color:#ae81ff">5</span>) <span style="color:#f92672">+</span> JSON_OBJECT_SIZE(<span style="color:#ae81ff">13</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">270</span>;
</span></span><span style="display:flex;"><span>      DynamicJsonDocument doc(capacity);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      String json <span style="color:#f92672">=</span> http.getString();                <span style="color:#75715e">// get JSON format data
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      deserializeJson(doc, json);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">float</span> coord_lon <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;coord&#34;</span>][<span style="color:#e6db74">&#34;lon&#34;</span>]; <span style="color:#75715e">// 121.49
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">float</span> coord_lat <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;coord&#34;</span>][<span style="color:#e6db74">&#34;lat&#34;</span>]; <span style="color:#75715e">// 31.23
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      JsonObject weather_0 <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;weather&#34;</span>][<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> weather_0_id <span style="color:#f92672">=</span> weather_0[<span style="color:#e6db74">&#34;id&#34;</span>]; <span style="color:#75715e">// 804
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> weather_0_main <span style="color:#f92672">=</span> weather_0[<span style="color:#e6db74">&#34;main&#34;</span>]; <span style="color:#75715e">// &#34;Clouds&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> weather_0_description <span style="color:#f92672">=</span> weather_0[<span style="color:#e6db74">&#34;description&#34;</span>]; <span style="color:#75715e">// &#34;overcast clouds&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> weather_0_icon <span style="color:#f92672">=</span> weather_0[<span style="color:#e6db74">&#34;icon&#34;</span>]; <span style="color:#75715e">// &#34;04d&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      JsonObject weather_1 = weather[1];
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      int weather_1_id = weather_1[&#34;id&#34;]; // 701
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_1_main = weather_1[&#34;main&#34;]; // &#34;Mist&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_1_description = weather_1[&#34;description&#34;]; // &#34;mist&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_1_icon = weather_1[&#34;icon&#34;]; // &#34;50n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      JsonObject weather_2 = weather[2];
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      int weather_2_id = weather_2[&#34;id&#34;]; // 741
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_2_main = weather_2[&#34;main&#34;]; // &#34;Fog&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_2_description = weather_2[&#34;description&#34;]; // &#34;fog&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      const char* weather_2_icon = weather_2[&#34;icon&#34;]; // &#34;50n&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> base <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;base&#34;</span>]; <span style="color:#75715e">// &#34;stations&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      JsonObject main <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;main&#34;</span>];
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">float</span> main_temp <span style="color:#f92672">=</span> main[<span style="color:#e6db74">&#34;temp&#34;</span>]; <span style="color:#75715e">// 293.02
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">int</span> main_pressure <span style="color:#f92672">=</span> main[<span style="color:#e6db74">&#34;pressure&#34;</span>]; <span style="color:#75715e">// 1027
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">int</span> main_humidity <span style="color:#f92672">=</span> main[<span style="color:#e6db74">&#34;humidity&#34;</span>]; <span style="color:#75715e">// 55
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">float</span> main_temp_min <span style="color:#f92672">=</span> main[<span style="color:#e6db74">&#34;temp_min&#34;</span>]; <span style="color:#75715e">// 289.82
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">float</span> main_temp_max <span style="color:#f92672">=</span> main[<span style="color:#e6db74">&#34;temp_max&#34;</span>]; <span style="color:#75715e">// 298.71
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> visibility <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;visibility&#34;</span>]; <span style="color:#75715e">// 10000
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> wind_speed <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;wind&#34;</span>][<span style="color:#e6db74">&#34;speed&#34;</span>]; <span style="color:#75715e">// 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">int</span> wind_deg <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;wind&#34;</span>][<span style="color:#e6db74">&#34;deg&#34;</span>]; <span style="color:#75715e">// 60
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> clouds_all <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;clouds&#34;</span>][<span style="color:#e6db74">&#34;all&#34;</span>]; <span style="color:#75715e">// 94
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">long</span> dt <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;dt&#34;</span>]; <span style="color:#75715e">// 1574303919
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      JsonObject sys <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;sys&#34;</span>];
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> sys_type <span style="color:#f92672">=</span> sys[<span style="color:#e6db74">&#34;type&#34;</span>]; <span style="color:#75715e">// 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">int</span> sys_id <span style="color:#f92672">=</span> sys[<span style="color:#e6db74">&#34;id&#34;</span>]; <span style="color:#75715e">// 9659
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//float sys_message = sys[&#34;message&#34;]; // Internal parameter (0.0226)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> sys_country <span style="color:#f92672">=</span> sys[<span style="color:#e6db74">&#34;country&#34;</span>]; <span style="color:#75715e">// &#34;CN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">long</span> sys_sunrise <span style="color:#f92672">=</span> sys[<span style="color:#e6db74">&#34;sunrise&#34;</span>]; <span style="color:#75715e">// 1574288762
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">long</span> sys_sunset <span style="color:#f92672">=</span> sys[<span style="color:#e6db74">&#34;sunset&#34;</span>]; <span style="color:#75715e">// 1574326426
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">int</span> timezone <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;timezone&#34;</span>]; <span style="color:#75715e">// 28800
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">long</span> id <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;id&#34;</span>]; <span style="color:#75715e">// 1796236
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> name <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;name&#34;</span>]; <span style="color:#75715e">// &#34;Shanghai&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">int</span> cod <span style="color:#f92672">=</span> doc[<span style="color:#e6db74">&#34;cod&#34;</span>]; <span style="color:#75715e">// 200
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      dt <span style="color:#f92672">=</span> dt <span style="color:#f92672">+</span> timezone;                     <span style="color:#75715e">// for GMT+8 -&gt; +28800, for GMT+9 -&gt; +32400
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      sys_sunrise <span style="color:#f92672">=</span> sys_sunrise <span style="color:#f92672">+</span> timezone;
</span></span><span style="display:flex;"><span>      sys_sunset <span style="color:#f92672">=</span> sys_sunset <span style="color:#f92672">+</span> timezone;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//int main_sea_level = main[&#34;sea_level&#34;]; // Atmospheric pressure hPa on the sea level
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//int main_grnd_level = main[&#34;grnd_level&#34;]; // Atmospheric pressure hPa on the ground level     
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//int rain_1h = doc[&#34;rain&#34;][&#34;1h&#34;]; // Rain volume for the last 1 hour, mm
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//int rain_3h = doc[&#34;rain&#34;][&#34;3h&#34;]; // Rain volume for the last 3 hour, mm
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//int snow_1h = doc[&#34;snow&#34;][&#34;1h&#34;]; // Snow volume for the last 1 hour, mm
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">//int snow_3h = doc[&#34;snow&#34;][&#34;3h&#34;]; // Snow volume for the last 3 hour, mm
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">//데이터 출력
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      Serial.print(<span style="color:#e6db74">&#34;UNIX Time of Weather: &#34;</span>); Serial.println(dt);
</span></span><span style="display:flex;"><span>      Serial.printf(<span style="color:#e6db74">&#34;Time of Weather: %4d-%02d-%02d %02d:%02d:%02d(%1d)</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, year(dt), month(dt), day(dt), hour(dt), minute(dt), second(dt), weekday(dt));
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Weather ID: &#34;</span>); Serial.println(weather_0_id);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Weather Main: &#34;</span>); Serial.println(weather_0_main);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Weather Description: &#34;</span>); Serial.println(weather_0_description);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Weather Icon: &#34;</span>); Serial.println(weather_0_icon);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Temperature(℃): &#34;</span>); Serial.println(main_temp);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Temperature Max(℃): &#34;</span>); Serial.println(main_temp_max);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Temperature Min(℃): &#34;</span>); Serial.println(main_temp_min);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Pressure(hPa): &#34;</span>); Serial.println(main_pressure);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Humidity(%): &#34;</span>); Serial.println(main_humidity);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Visibility(m): &#34;</span>); Serial.println(visibility);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Wind Speed(m/s): &#34;</span>); Serial.println(wind_speed);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Wind Degree(º): &#34;</span>); Serial.println(wind_deg);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Clouds: &#34;</span>); Serial.println(clouds_all);
</span></span><span style="display:flex;"><span>      Serial.printf(<span style="color:#e6db74">&#34;Sunrise: %02d:%02d:%02d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, hour(sys_sunrise), minute(sys_sunrise), second(sys_sunrise));
</span></span><span style="display:flex;"><span>      Serial.printf(<span style="color:#e6db74">&#34;Sunset:  %02d:%02d:%02d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, hour(sys_sunset), minute(sys_sunset), second(sys_sunset));
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;City/Country: &#34;</span>); Serial.print(name); Serial.print(<span style="color:#e6db74">&#34;/&#34;</span>); Serial.println(sys_country);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;longitude/latidude: &#34;</span>); Serial.print(coord_lon); Serial.print(<span style="color:#e6db74">&#34;/&#34;</span>); Serial.println(coord_lat);
</span></span><span style="display:flex;"><span>      Serial.print(<span style="color:#e6db74">&#34;Timezone: GMT+&#34;</span>); Serial.println(timezone<span style="color:#f92672">/</span><span style="color:#ae81ff">3600</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Sea Level(hPa): &#34;); Serial.println(main_sea_level);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Ground Level(hPa): &#34;); Serial.println(main_grnd_level);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Rain 1h(mm): &#34;); Serial.println(rain_1h);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Rain 3h(mm): &#34;); Serial.println(rain_3h);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Snow 1h(mm): &#34;); Serial.println(snow_1h);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      Serial.print(&#34;Snow 3h(mm): &#34;); Serial.println(snow_3h);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">      */</span>
</span></span><span style="display:flex;"><span>      lcd.setCursor(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>      lcd.print(<span style="color:#e6db74">&#34;Temperature : &#34;</span>);
</span></span><span style="display:flex;"><span>      lcd.setCursor(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>      lcd.print(main_temp);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>      Serial.println(<span style="color:#e6db74">&#34;Error on HTTP request&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    http.end();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  delay(<span style="color:#ae81ff">30000</span>);
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  lcd.setCursor(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>  lcd.print(<span style="color:#e6db74">&#34;                &#34;</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><blockquote class='book-hint '>
<p>Arduino IDE에서 컴파일시 *&ldquo;&ldquo;경고: 라이브러리 LiquidCrystal_I2C가 avr 아키텍처에서 실행되며 esp32아키텍처에서 실행되는 현재보드에서는 호환되지 않을 수 있습니다.&rdquo;&quot;*라는 메세지가 나타나지만, LCD 출력에는 문제가 없습니다.</p></blockquote><br>
<br>
<h3 id="공공데이터-활용하기">공공데이터 활용하기<a class="anchor" href="#%ea%b3%b5%ea%b3%b5%eb%8d%b0%ec%9d%b4%ed%84%b0-%ed%99%9c%ec%9a%a9%ed%95%98%ea%b8%b0">#</a></h3>
<p>위의 방법을 응용하면 국가별, 관련 업체별로 제공되는 여러가지 공공데이터를 활용할 수 있습니다.</p>
<ul>
<li>대기질 관련 데이터 : <a href="https://aqicn.org/api/">https://aqicn.org/api/</a></li>
<li>(한국)공공데이터포털 : <a href="https://www.data.go.kr/">https://www.data.go.kr/</a></li>
<li>(미국)공공데이터포털 : <a href="https://www.data.gov/">https://www.data.gov/</a></li>
</ul>
<p>그밖에 활용가능한 공공데이터가 어떤 것이 있는지, 살펴보세요~</p>
</div>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">
  <div>
  
    <a href="/posts/arduino-geiger-counter/" class="flex align-center">
      <img src="/icons/backward.svg" class="book-icon" alt="Previous" title="Arduino, Geiger Counter" />
      <span>Arduino, Geiger Counter</span>
    </a>
  
  </div>
  <div>
  
    <a href="/posts/esp32-ap-mode-and-websocket_draft/" class="flex align-center">
      <span>esp32 AP mode &amp; Websocket</span>
      <img src="/icons/forward.svg" class="book-icon" alt="Next" title="esp32 AP mode &amp; Websocket" />
    </a>
  
  </div>
</div>
 
        
  
  <div class="book-comments">

</div>
  
 
        
        

 
      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    

<aside class="book-toc">
  <div class="book-toc-content">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#openweathermaporg">OpenWeatherMap.org</a></li>
        <li><a href="#esp32에서-사용하는-경우">ESP32에서 사용하는 경우</a></li>
        <li><a href="#json-parsing">JSON Parsing</a></li>
        <li><a href="#weather-condition-code">Weather Condition Code</a></li>
        <li><a href="#1602-lcd에-날씨-정보-출력하기">1602 LCD에 날씨 정보 출력하기</a></li>
        <li><a href="#공공데이터-활용하기">공공데이터 활용하기</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </div>
</aside>

 
  </main>

  
</body>
</html>


















