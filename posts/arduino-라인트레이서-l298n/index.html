<!doctype html><html lang=ko-kr dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="아두이노를 사용하여 검은색 라인을 따라 움직이는 라인트레이서 자동차를 만들어보자.

TCRT5000 IR reflective sensor#
라인트레이서 제작시 가장 널리 사용되는 IR 센서이다. 감지하는 부분이 검은색으로 되어 있는 부분이라면 IR이 모두 흡수되고, 흰색으로 되어 있는 부분에서는 모두 반사되는 원리를 이용한다.


장애물이 없는 경우: 1 반환
센서와 12mm이내의 거리에 밝은색이 위치하는 경우: 0 반환
센서와 12mm이내의 거리에 검은색이 위치하는 경우: 1 반환
검은색의 경우도 아주 가까이 가져가면 적외선 수신량이 증가하여 0의 값을 반환할 수 있으므로, 라인트레이서 구성시 감지하는 적당한 거리를 찾는 것이 중요합니다.
10~12mm 정도의 거리에서 측정하는 것을 추천
AO 단자를 이용할 경우 아날로그 신호로 처리도 가능


(위 스펙과는 별도로) 라인트레이서 제작시에는 경험상 센서가 바닥면으로부터 2cm정도 떨어지도록 설치하는 것을 추천함"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://stemwith.github.io/posts/arduino-%EB%9D%BC%EC%9D%B8%ED%8A%B8%EB%A0%88%EC%9D%B4%EC%84%9C-l298n/"><meta property="og:site_name" content="STEM with"><meta property="og:title" content="Arduino, 라인트레이서, L298N"><meta property="og:description" content="아두이노를 사용하여 검은색 라인을 따라 움직이는 라인트레이서 자동차를 만들어보자.
TCRT5000 IR reflective sensor# 라인트레이서 제작시 가장 널리 사용되는 IR 센서이다. 감지하는 부분이 검은색으로 되어 있는 부분이라면 IR이 모두 흡수되고, 흰색으로 되어 있는 부분에서는 모두 반사되는 원리를 이용한다.
장애물이 없는 경우: 1 반환 센서와 12mm이내의 거리에 밝은색이 위치하는 경우: 0 반환 센서와 12mm이내의 거리에 검은색이 위치하는 경우: 1 반환 검은색의 경우도 아주 가까이 가져가면 적외선 수신량이 증가하여 0의 값을 반환할 수 있으므로, 라인트레이서 구성시 감지하는 적당한 거리를 찾는 것이 중요합니다. 10~12mm 정도의 거리에서 측정하는 것을 추천 AO 단자를 이용할 경우 아날로그 신호로 처리도 가능 (위 스펙과는 별도로) 라인트레이서 제작시에는 경험상 센서가 바닥면으로부터 2cm정도 떨어지도록 설치하는 것을 추천함"><meta property="og:locale" content="ko_kr"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-10-28T22:48:56+09:00"><meta property="article:modified_time" content="2019-10-28T22:48:56+09:00"><meta property="article:tag" content="Rc"><title>Arduino, 라인트레이서, L298N | STEM with</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://stemwith.github.io/posts/arduino-%EB%9D%BC%EC%9D%B8%ED%8A%B8%EB%A0%88%EC%9D%B4%EC%84%9C-l298n/><link rel=stylesheet href=/book.min.aeea42fb216bc5e1dbc1c7adf74b0ac79e17602b386834ac6f1c28574b966754.css integrity="sha256-rupC+yFrxeHbwcet90sKx54XYCs4aDSsbxwoV0uWZ1Q=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.7b28fde92e12728045c6dd86a6143cfbb6f0314f78d5c6f255b169b94b485a86.js integrity="sha256-eyj96S4ScoBFxt2GphQ8+7bwMU941cbyVbFpuUtIWoY=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-128DRYVCRT"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-128DRYVCRT")}</script></head><body dir=ltr class="book-kind-page book-type-posts"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/logo.svg alt=Logo><span>STEM with</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/icons/menu.svg class=book-icon alt=Menu></label><h3>Arduino, 라인트레이서, L298N</h3><label for=toc-control><img src=/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><ul><li><a href=#tcrt5000-ir-reflective-sensor>TCRT5000 IR reflective sensor</a></li><li><a href=#모터드라이버-l298n>모터드라이버 L298N</a></li><li><a href=#전원>전원</a></li><li><a href=#모터>모터</a></li><li><a href=#프레임-조립>프레임 조립</a></li><li><a href=#아두이노-연결하기>아두이노 연결하기</a></li></ul></li></ul></nav></aside></header><article class="markdown book-post"><h1>Arduino, 라인트레이서, L298N</h1><div class="flex align-center text-small book-post-date"><img src=/icons/calendar.svg class=book-icon alt>
<span>October 28, 2019</span></div><div class=text-small><a href=/categories/arduino/>Arduino</a></div><div class=text-small><a href=/tags/rc/>Rc</a></div><div class="book-post-content markdown-inner"><p>아두이노를 사용하여 검은색 라인을 따라 움직이는 라인트레이서 자동차를 만들어보자.</p><br><h3 id=tcrt5000-ir-reflective-sensor>TCRT5000 IR reflective sensor<a class=anchor href=#tcrt5000-ir-reflective-sensor>#</a></h3><p>라인트레이서 제작시 가장 널리 사용되는 IR 센서이다. 감지하는 부분이 검은색으로 되어 있는 부분이라면 IR이 모두 흡수되고, 흰색으로 되어 있는 부분에서는 모두 반사되는 원리를 이용한다.</p><p><img src=/image/LT-03.png alt></p><ul><li>장애물이 없는 경우: 1 반환</li><li>센서와 12mm이내의 거리에 밝은색이 위치하는 경우: 0 반환</li><li>센서와 12mm이내의 거리에 검은색이 위치하는 경우: 1 반환</li><li>검은색의 경우도 아주 가까이 가져가면 적외선 수신량이 증가하여 0의 값을 반환할 수 있으므로, 라인트레이서 구성시 감지하는 적당한 거리를 찾는 것이 중요합니다.</li><li>10~12mm 정도의 거리에서 측정하는 것을 추천</li><li>AO 단자를 이용할 경우 아날로그 신호로 처리도 가능</li></ul><blockquote class=book-hint><p>(위 스펙과는 별도로) 라인트레이서 제작시에는 경험상 센서가 바닥면으로부터 2cm정도 떨어지도록 설치하는 것을 추천함</p></blockquote><br><h4 id=schematic>schematic<a class=anchor href=#schematic>#</a></h4><p><img src=/image/tcrt5000.png alt></p><br><h4 id=sketch>sketch<a class=anchor href=#sketch>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C++ data-lang=C++><span style=display:flex><span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> pin_sensor <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  Serial.begin(<span style=color:#ae81ff>9600</span>);
</span></span><span style=display:flex><span>  pinMode(pin_sensor, INPUT);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>loop</span>() {
</span></span><span style=display:flex><span>	i <span style=color:#f92672>=</span> digitalRead(pin_sensor)
</span></span><span style=display:flex><span>    Serial.println(i);                 <span style=color:#75715e>// 검은색(1), 밝은색(0) 출력
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    delay(<span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>}</span></span></code></pre></div><br><br><h3 id=모터드라이버-l298n>모터드라이버 L298N<a class=anchor href=#%eb%aa%a8%ed%84%b0%eb%93%9c%eb%9d%bc%ec%9d%b4%eb%b2%84-l298n>#</a></h3><p>대부분의 모터는 구동에 필요한 전력 소모량 커서 아두이노의 자체 출력으로는 구동이 불가능하다. 그러므로 건전지, SMPS 등의 외부 전원을 사용하여 모터에 충분한 전력을 공급하고, 이를 제어하기위한 모터드라이버를 반드시 사용해야 한다.</p><p>아두이노에서 사용하는 대표적인 모터드라이브는 L298N, TB6612FNG 등이 있으며, 여기서는 2CH의 2A출력이 가능한 L298N을 사용하여 간단한 라인트레이서를 제작한다.</p><p><img src=/image/LT-01.png alt></p><br><h4 id=pinout>Pinout<a class=anchor href=#pinout>#</a></h4><ul><li><p>모터A 출력 : 왼쪽 모터를 연결한다.</p></li><li><p>모터B 출력 : 오른쪽 모터를 연결한다.</p></li><li><p>12V (입력) : 외부전원을 입력한다. (5~35V)</p><ul><li>12V 이상의 외부전원을 입력하는 경우, 레귤레이터 보호를 위해 5V 점퍼선을 제거해야 함</li></ul></li><li><p>5V (입력/출력)</p><ul><li>점퍼핀이 연결되어 있는 경우 5V 출력 (단, 5V출력으로 사용하려면 외부전원을 12V이하로 주어야 하며, 그 이상의 전압을 인가하는 경우 레귤레이터가 손상됨)</li><li>점퍼핀 없는 경우 5V 입력을 통해 L298N에 전원 인가</li></ul></li><li><p>Enable 모터A : 왼쪽 모터 PWM (점퍼를 제거하고, INPUT핀 양옆의 핀에 PWM신호 입력)</p></li><li><p>Enable 모터B : 오른쪽 모터 PWM (점퍼를 제거하고, INPUT핀 양옆의 핀에 PWM신호 입력)</p></li><li><p>PWM을 사용하는 경우 모터에 인가하는 전원이 6V(AA*4개)인 경우 PWM값이 낮으면 모터가 회전하지 않으므로 코딩시 주의한다.</p></li><li><p>INPUT : IN1, IN2, IN3, IN4</p><table><thead><tr><th>Direction</th><th>IN1</th><th>IN2</th><th>IN3</th><th>IN4</th></tr></thead><tbody><tr><td>Go</td><td>HIGH</td><td>HIGH</td><td>LOW</td><td>LOW</td></tr><tr><td>Back</td><td>LOW</td><td>LOW</td><td>HIGH</td><td>HIGH</td></tr><tr><td>Brake</td><td>LOW</td><td>LOW</td><td>LOW</td><td>LOW</td></tr><tr><td>Left_Turn</td><td>HIGH</td><td>LOW</td><td>LOW</td><td>LOW</td></tr><tr><td>Right_Turn</td><td>LOW</td><td>HIGH</td><td>LOW</td><td>LOW</td></tr><tr><td>Left_Back_Turn</td><td>LOW</td><td>LOW</td><td>HIGH</td><td>LOW</td></tr><tr><td>Right_Back_Turm</td><td>LOW</td><td>LOW</td><td>LOW</td><td>HIGH</td></tr></tbody></table></li></ul><br><h4 id=jumper>Jumper<a class=anchor href=#jumper>#</a></h4><ul><li>Enable 모터A<ul><li>점퍼를 연결시키지 않으면 PWM사용</li><li>점퍼 연결시 왼쪽 모터에 5V (즉, PWM을 사용하지 않는 경우에만 연결)</li></ul></li><li>Enable 모터B<ul><li>점퍼를 연결시키지 않으면 PWM사용</li><li>점퍼 연결시 오른쪽 모터 5V (즉, PWM을 사용하지 않는 경우에만 연결)</li></ul></li><li>5V (※ Pinout의 5V 부분 참고)</li></ul><br><br><h3 id=전원>전원<a class=anchor href=#%ec%a0%84%ec%9b%90>#</a></h3><ul><li>대부분의 초보자를 위한 4WD 제작 키트는 AA건전지 4개를 직렬연결할 수 있는 전지소켓을 포함하여 판매하는 경우가 많지만</li><li>But, 제작 경험으로 볼 때 AA건전지 4개로 얻을 수 있는 전력만으로는 원활한 구동이 되지 않는 경우가 많다.</li><li>AA건전지 6개를 직렬로 연결하여 9V정도를 공급하거나 (사용시간 10~15분정도 가능)</li><li>18650 리튬이온전지 2개를 연결하여 7.4V를 공급하는 것을 추천한다.</li></ul><br><br><h3 id=모터>모터<a class=anchor href=#%eb%aa%a8%ed%84%b0>#</a></h3><p>아두이노 기초 실습용으로 많이 쓰이는 이름없는 중국산 모터이다.</p><p><img src=/image/LT-02.jpg alt></p><table><thead><tr><th>기어비 48:1</th><th>RPM(무부하)</th><th>전류 mA (무부하)</th><th>토크(kg·cm)</th></tr></thead><tbody><tr><td>3V</td><td>120</td><td>40</td><td>3.2</td></tr><tr><td>6V</td><td>240</td><td>70</td><td>5.5</td></tr></tbody></table><br><br><h3 id=프레임-조립>프레임 조립<a class=anchor href=#%ed%94%84%eb%a0%88%ec%9e%84-%ec%a1%b0%eb%a6%bd>#</a></h3><h4 id=준비물>준비물<a class=anchor href=#%ec%a4%80%eb%b9%84%eb%ac%bc>#</a></h4><p><img src=/image/LT-04.png alt></p><br><h4 id=조립과정>조립과정<a class=anchor href=#%ec%a1%b0%eb%a6%bd%ea%b3%bc%ec%a0%95>#</a></h4><ol><li>모터 4개와 M-F형태의 8가닥 리드선을 준비하고 모터에 리드선을 납땜할 준비를 합니다.</li></ol><p><img src=/image/LT-05.jpg alt></p><br><ol start=2><li>DC모터를 보면 양쪽에 (+)(-)극을 연결하는 단자가 있습니다.</li></ol><p><img src=/image/LT-06.jpg alt></p><br><ol start=3><li>준비한 8가닥의 M-F리드선을 2가닥씩 묶어 4갈래로 전체 길이의 1/2의 길이만큼 나누어 준비한뒤,</li></ol><p><img src=/image/LT-07.jpg alt></p><br><ol start=4><li>2개의 가닥 중 한 부분을 모터의 (+)(-)단자에 끼우고,</li></ol><p><img src=/image/LT-08.jpg alt></p><br><ol start=5><li>각각을 납땜합니다. 총 4개의 모터를 납땜하여 아래 모습처럼 만듭니다.</li></ol><p><img src=/image/LT-09.jpg alt></p><br><p>※ (주의) 납땜시, 아래 그림처럼 리드선이 모터의 본체에 닿으면 안됩니다.</p><p><img src=/image/LT-10.jpg alt></p><br><p>​ 처음 납땜할 때부터 닿지 않도록 하는 것이 좋지만, 납땜을 이미 진행한 후에 리드선이 본체에 닿아 있다면 아래의 그림처럼 끝 부분을 살짝 휘어두거나, 니퍼로 잘라내도록 합니다.</p><p><img src=/image/LT-11.jpg alt></p><br><ol start=6><li>외부 전원으로 사용할 건전지소켓을 준비합니다. (사진상에는 1.5V AA건전지 4개가 직렬로 연결되는 건전지소켓을 사용하였지만, 4개의 모터를 구동하기 위해서는 1.5V AA건전지를 6개 직렬로 연결하여 9V 전압을 사용하는 것을 추천합니다. 단, 9V사각전지(6F22) 1개로 사용하는 것은 전류가 약하므로 사용불가!)</li></ol><p><img src=/image/LT-12.jpg alt></p><br><p>​ 건전지소켓에 나와있는 리드선의 끝부분을 스트리퍼를 사용하여 피복을 조금더 벗겨냅니다. 또한 빨간색과 검은색 점퍼선 2개를 별로로 준비한뒤, 한쪽 단자를 잘라내고, 스트리퍼로 피복을 벗겨냅니다.</p><br><ol start=7><li>건전지소켓의 리드선과 점퍼선을 붙여 떨어지지 않도록 단단히 납땜한 후,</li></ol><p><img src=/image/LT-13.jpg alt></p><br><ol start=8><li>합선되지 않도록 절연테이프나 열수축튜브로 각각을 잘 감싸둡니다.</li></ol><p><img src=/image/LT-14.jpg alt></p><br><ol start=9><li>이제 아크릴판을 준비합니다.</li></ol><p><img src=/image/LT-15.jpg alt></p><br><ol start=10><li>아래 그림의 Step1~2과정과 같이 모터를 고정할 아크릴 조각을 끼울 것입니다.</li></ol><p><img src=/image/LT-16.png alt></p><br><p>​ 우선, 모터를 고정할 아크릴 조각 2개를 고정할 위치를 확인합니다. 총 4개의 모터를 고정할 것이므로 아크릴 조각 8개가 필요합니다.</p><p><img src=/image/LT-17.jpg alt></p><br><ol start=11><li>모터고정 아크릴 조각을 아래 사진처럼 끼웁니다. 하나는 구멍에 집어 넣고, 나머지 하나는 측면의 홈에 살짝 걸쳐둡니다.</li></ol><p><img src=/image/LT-18.jpg alt></p><br><ol start=12><li>이제 모터를 설치하겠습니다.</li></ol><p><img src=/image/LT-19.png alt></p><br><p><img src=/image/LT-20.png alt></p><br><p>​ 나사와 너트를 2개씩 준비한 후</p><p><img src=/image/LT-21.jpg alt></p><br><p>​ 아크릴 조각 2개 사이에 모터를 위치시킨 후, 모터 몸체이 있는 나사 구멍에 나사 2개를 통과시켜</p><p><img src=/image/LT-22.jpg alt></p><br><p>​ 아래 사진 같이 고정합니다.</p><p><img src=/image/LT-23.jpg alt></p><br><p>13. 모터를 고정한 후, 바퀴축의 안쪽 부분에 바퀴의 균형을 잡아줄 동그란 아크릴 조각을 끼워줍니다.</p><p><img src=/image/LT-24.jpg alt></p><br><p>​ 4개의 모터를 같은 방법으로 고정시켜 아래와 같은 형태를 만듭니다. 주의할 것은 모터의 단자가 위치한 은색부분의 모터본체 부분이 서로 맞닿는 형태로 조립을 해야 합니다.</p><p><img src=/image/LT-25.jpg alt></p><br><ol start=14><li>바퀴를 끼웁니다.</li></ol><p><img src=/image/LT-26.png alt></p><br><ol start=15><li>금속기둥을 세우고 상판을 덮습니다. (아크릴상판이 없는 경우는 생략 가능)</li></ol><p><img src=/image/LT-27.png alt></p><br><p><img src=/image/LT-28.png alt></p><br><ol start=16><li>기판 아래면에 모터가 위치하도록 위아래를 뒤집은 후에, 기판 윗면에 TCRT5000 IR Reflective Sensor, 아두이노, 브레드보드, L298N 모터드라이브, 9V 전지소켓을 차례대로 올리고 나사볼트와 절연테이프 등으로 고정합니다. 대략 아래 사진과 비슷하게 고정하면 됩니다.</li></ol><p><img src=/image/LT-29.jpg alt></p><br><br><h3 id=아두이노-연결하기>아두이노 연결하기<a class=anchor href=#%ec%95%84%eb%91%90%ec%9d%b4%eb%85%b8-%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0>#</a></h3><h4 id=schematic-1>schematic<a class=anchor href=#schematic-1>#</a></h4><p><img src=/image/LT-30.png alt></p><br><h4 id=회로-연결>회로 연결<a class=anchor href=#%ed%9a%8c%eb%a1%9c-%ec%97%b0%ea%b2%b0>#</a></h4><h5 id=모터--모터드라이버>모터 ↔ 모터드라이버<a class=anchor href=#%eb%aa%a8%ed%84%b0--%eb%aa%a8%ed%84%b0%eb%93%9c%eb%9d%bc%ec%9d%b4%eb%b2%84>#</a></h5><table><thead><tr><th></th><th>L/F 모터 U단자</th><th>L/F 모터 D단자</th><th>L/R 모터 U단자</th><th>L/R 모터 D단자</th><th>R/F 모터 U단자</th><th>R/F 모터 D단자</th><th>R/R 모터 U단자</th><th>R/R모터 D단자</th></tr></thead><tbody><tr><td>L298N OUT1</td><td></td><td>○</td><td></td><td>○</td><td></td><td></td><td></td><td></td></tr><tr><td>L298N OUT2</td><td>○</td><td></td><td>○</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>L298N OUT3</td><td></td><td></td><td></td><td></td><td></td><td>○</td><td></td><td>○</td></tr><tr><td>L298N OUT4</td><td></td><td></td><td></td><td></td><td>○</td><td></td><td>○</td><td></td></tr></tbody></table><br><h5 id=모터드라이버--전지소켓--아두이노>모터드라이버 ↔ 전지소켓 ↔ 아두이노<a class=anchor href=#%eb%aa%a8%ed%84%b0%eb%93%9c%eb%9d%bc%ec%9d%b4%eb%b2%84--%ec%a0%84%ec%a7%80%ec%86%8c%ec%bc%93--%ec%95%84%eb%91%90%ec%9d%b4%eb%85%b8>#</a></h5><table><thead><tr><th></th><th>전지소켓 (+)</th><th>전지소켓(-)</th><th>아두이노</th></tr></thead><tbody><tr><td>L298N 12V</td><td>○</td><td></td><td>Vin</td></tr><tr><td>L298N GND</td><td></td><td>GND (아두이노)</td><td>GND</td></tr><tr><td>L298N 5V</td><td></td><td></td><td>5V</td></tr></tbody></table><br><h5 id=모터드라이브-enable--input--아두이노>모터드라이브 ENABLE & INPUT ↔ 아두이노<a class=anchor href=#%eb%aa%a8%ed%84%b0%eb%93%9c%eb%9d%bc%ec%9d%b4%eb%b8%8c-enable--input--%ec%95%84%eb%91%90%ec%9d%b4%eb%85%b8>#</a></h5><table><thead><tr><th></th><th>아두이노</th></tr></thead><tbody><tr><td>L298N EN(A)</td><td>5</td></tr><tr><td>L298N IN1</td><td>8</td></tr><tr><td>L298N IN2</td><td>9</td></tr><tr><td>L298N IN3</td><td>10</td></tr><tr><td>L298N IN4</td><td>11</td></tr><tr><td>L298N EN(B)</td><td>6</td></tr></tbody></table><br><h5 id=tcrt5000-sensor--아두이노>TCRT5000 Sensor ↔ 아두이노<a class=anchor href=#tcrt5000-sensor--%ec%95%84%eb%91%90%ec%9d%b4%eb%85%b8>#</a></h5><table><thead><tr><th></th><th>아두이노</th></tr></thead><tbody><tr><td>#1 TCRT5000 VCC</td><td>5V</td></tr><tr><td>#1 TCRT5000 GND</td><td>GND</td></tr><tr><td>#1 TCRT5000 DO</td><td>2</td></tr><tr><td>#1 TCRT5000 AO</td><td>–</td></tr><tr><td>#2 TCRT5000 VCC</td><td>5V</td></tr><tr><td>#2 TCRT5000 GND</td><td>GND</td></tr><tr><td>#2 TCRT5000 DO</td><td>3</td></tr><tr><td>#2 TCRT5000 AO</td><td>–</td></tr></tbody></table><br><h4 id=sketch-1>sketch<a class=anchor href=#sketch-1>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span><span style=color:#75715e>/* L298N - 2CH Motor Driver
</span></span></span><span style=display:flex><span><span style=color:#75715e>Direction         IN1    IN2    IN3    IN4
</span></span></span><span style=display:flex><span><span style=color:#75715e>-------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#75715e>GO                HIGH   HIGH   LOW    LOW
</span></span></span><span style=display:flex><span><span style=color:#75715e>BACK              LOW    LOW    HIGH   HIGH
</span></span></span><span style=display:flex><span><span style=color:#75715e>BRAKE             LOW    LOW    LOW    LOW
</span></span></span><span style=display:flex><span><span style=color:#75715e>LEFT_TURN         HIGH   LOW    LOW    LOW
</span></span></span><span style=display:flex><span><span style=color:#75715e>RIGHT_TURN        LOW    HIGH   LOW    LOW
</span></span></span><span style=display:flex><span><span style=color:#75715e>LEFT_BACK_TURN    LOW    LOW    HIGH   LOW
</span></span></span><span style=display:flex><span><span style=color:#75715e>RIGHT_BACK_TURN   LOW    LOW    LOW    HIGH
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>PWM: 6V시 최소값 200이상은 되야 바퀴회전 가능 (너무 낮은 전압에서 회전 안됨)
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 모터_전진컨트롤
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> Left_motor_IN1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>;       <span style=color:#75715e>// IN1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> Right_motor_IN2 <span style=color:#f92672>=</span> <span style=color:#ae81ff>9</span>;      <span style=color:#75715e>// IN2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 모터_후진컨트롤
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> Left_motor_IN3 <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>;      <span style=color:#75715e>// IN3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> Right_motor_IN4 <span style=color:#f92672>=</span> <span style=color:#ae81ff>11</span>;     <span style=color:#75715e>// IN4
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 모터_속도컨트롤
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> Left_PWM <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;               <span style=color:#75715e>// 왼쪽모터 속도
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> Right_PWM <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>;              <span style=color:#75715e>// 오른쪽모터 속도
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// IR Sensor
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> Left_Sensor <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;    <span style=color:#75715e>// 왼쪽센서
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> Right_Sensor <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>;   <span style=color:#75715e>// 오른쪽센서
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> Left_Sensor_Value;        <span style=color:#75715e>// 검은색:1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> Right_Sensor_Value;       <span style=color:#75715e>// 흰색:0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setup</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(Left_motor_IN1, OUTPUT);      <span style=color:#75715e>// PIN 8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>pinMode</span>(Right_motor_IN2, OUTPUT);     <span style=color:#75715e>// PIN 9
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(Left_motor_IN3, OUTPUT);      <span style=color:#75715e>// PIN 10
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>pinMode</span>(Right_motor_IN4, OUTPUT);     <span style=color:#75715e>// PIN 11
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(Left_PWM, OUTPUT);            <span style=color:#75715e>// PIN 5
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>pinMode</span>(Right_PWM, OUTPUT);           <span style=color:#75715e>// PIN 6
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pinMode</span>(Left_Sensor, INPUT);          <span style=color:#75715e>// 왼쪽센서
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>pinMode</span>(Right_Sensor, INPUT);         <span style=color:#75715e>// 오른쪽센서
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 전진
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>go</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>digitalWrite</span>(Left_motor_IN1, HIGH);   <span style=color:#75715e>// 왼쪽모터   전진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>digitalWrite</span>(Right_motor_IN2, HIGH);  <span style=color:#75715e>// 오론쪽모터 전진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>digitalWrite</span>(Left_motor_IN3, LOW);    <span style=color:#75715e>// 왼쪽모터   후진_회전
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>digitalWrite</span>(Right_motor_IN4, LOW);   <span style=color:#75715e>// 오른쪽모터 후진_회전
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>analogWrite</span>(Left_PWM, <span style=color:#ae81ff>255</span>);           <span style=color:#75715e>// PWM값(0~255), 모터 회전속도 조절
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>analogWrite</span>(Right_PWM, <span style=color:#ae81ff>255</span>);          <span style=color:#75715e>// PWM값(0~255), 모터 회전속도 조절
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 후진
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>back</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>digitalWrite</span>(Left_motor_IN1, LOW);    <span style=color:#75715e>// 왼쪽모터   전진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>digitalWrite</span>(Right_motor_IN2, LOW);   <span style=color:#75715e>// 오론쪽모터 전진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>digitalWrite</span>(Left_motor_IN3, HIGH);   <span style=color:#75715e>// 왼쪽모터   후진_회전
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>digitalWrite</span>(Right_motor_IN4, HIGH);  <span style=color:#75715e>// 오른쪽모터 후진_회전
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>analogWrite</span>(Left_PWM, <span style=color:#ae81ff>255</span>);           <span style=color:#75715e>// PWM값(0~255), 모터 회전속도 조절
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>analogWrite</span>(Right_PWM, <span style=color:#ae81ff>255</span>);          <span style=color:#75715e>// PWM값(0~255), 모터 회전속도 조절
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>brake</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>digitalWrite</span>(Left_motor_IN1, LOW);    <span style=color:#75715e>// 왼쪽모터   전진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>digitalWrite</span>(Right_motor_IN2, LOW);   <span style=color:#75715e>// 오론쪽모터 전진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>digitalWrite</span>(Left_motor_IN3, LOW);    <span style=color:#75715e>// 왼쪽모터   후진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>digitalWrite</span>(Right_motor_IN4, LOW);   <span style=color:#75715e>// 오른쪽모터 후진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>5</span>);  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 좌회전
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>turn_left</span>(){
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>digitalWrite</span>(Left_motor_IN1, LOW);    <span style=color:#75715e>// 왼쪽모터   전진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>digitalWrite</span>(Right_motor_IN2, HIGH);  <span style=color:#75715e>// 오론쪽모터 전진_회전
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>digitalWrite</span>(Left_motor_IN3, LOW);    <span style=color:#75715e>// 왼쪽모터   후진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>digitalWrite</span>(Right_motor_IN4, LOW);   <span style=color:#75715e>// 오른쪽모터 후진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>analogWrite</span>(Right_PWM, <span style=color:#ae81ff>255</span>);           <span style=color:#75715e>// PWM값(0~255), 모터 회전속도 조절
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 우회전
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>turn_right</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>digitalWrite</span>(Left_motor_IN1, HIGH);   <span style=color:#75715e>// 왼쪽모터   전진_회전
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>digitalWrite</span>(Right_motor_IN2, LOW);   <span style=color:#75715e>// 오론쪽모터 전진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>digitalWrite</span>(Left_motor_IN3, LOW);    <span style=color:#75715e>// 왼쪽모터   후진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>digitalWrite</span>(Right_motor_IN4, LOW);   <span style=color:#75715e>// 오른쪽모터 후진_정지
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>analogWrite</span>(Left_PWM, <span style=color:#ae81ff>255</span>);           <span style=color:#75715e>// PWM값(0~255), 모터 회전속도 조절
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>delay</span>(<span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>loop</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//신호가 있으면(흰색) LOW,  신호가 없으면(검은색) HIGH
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  Right_Sensor_Value <span style=color:#f92672>=</span> <span style=color:#a6e22e>digitalRead</span>(Right_Sensor);
</span></span><span style=display:flex><span>  Left_Sensor_Value <span style=color:#f92672>=</span> <span style=color:#a6e22e>digitalRead</span>(Left_Sensor);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 전진: 왼쪽센서 검은색, 오른쪽센서 검은색
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (Left_Sensor_Value <span style=color:#f92672>==</span> HIGH <span style=color:#f92672>&amp;&amp;</span> Right_Sensor_Value <span style=color:#f92672>==</span> HIGH)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>go</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 좌회전: 왼쪽센서 검은색, 오른쪽센서 흰색
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (Left_Sensor_Value <span style=color:#f92672>==</span> HIGH <span style=color:#f92672>&amp;</span> Right_Sensor_Value <span style=color:#f92672>==</span> LOW)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>turn_left</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 우회전: 왼쪽센서 흰색, 오른쪽센서 검은색
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (Left_Sensor_Value <span style=color:#f92672>==</span> LOW <span style=color:#f92672>&amp;</span> Right_Sensor_Value <span style=color:#f92672>==</span> HIGH) 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>turn_right</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 정지: 왼쪽센서 흰색, 오른쪽센서 흰색
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>brake</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div><br><h5 id=센서-감도-조정>센서 감도 조정<a class=anchor href=#%ec%84%bc%ec%84%9c-%ea%b0%90%eb%8f%84-%ec%a1%b0%ec%a0%95>#</a></h5><ul><li>센서 반응을 살피면서 TCRT5000 모듈에 붙어 있는 감도조절기를 십자드라이버로 돌려 라인트레이싱에 가장 최적인 감도를 찾아야 한다.</li></ul></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a href=/posts/dc%EB%AA%A8%ED%84%B0-4wd-%EC%9E%90%EB%8F%99%EC%B0%A8-%EB%A7%8C%EB%93%A4%EA%B8%B0/ class="flex align-center"><img src=/icons/backward.svg class=book-icon alt=Previous title="DC모터 + 4WD 자동차 만들기 (TB6612FNG)">
<span>DC모터 + 4WD 자동차 만들기 (TB6612FNG)</span></a></div><div><a href=/posts/arduino-bluetooth-%ED%8E%98%EC%96%B4%EB%A7%81/ class="flex align-center"><span>Arduino, Bluetooth 페어링</span>
<img src=/icons/forward.svg class=book-icon alt=Next title="Arduino, Bluetooth 페어링"></a></div></div><div class=book-comments></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#tcrt5000-ir-reflective-sensor>TCRT5000 IR reflective sensor</a></li><li><a href=#모터드라이버-l298n>모터드라이버 L298N</a></li><li><a href=#전원>전원</a></li><li><a href=#모터>모터</a></li><li><a href=#프레임-조립>프레임 조립</a></li><li><a href=#아두이노-연결하기>아두이노 연결하기</a></li></ul></li></ul></nav></div></aside></main></body></html>