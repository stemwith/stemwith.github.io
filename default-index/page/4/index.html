<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Welcome to &quot;stemwith&quot;</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Welcome to &quot;stemwith&quot;"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Welcome to &quot;stemwith&quot;"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="for stem education"><meta property="og:type" content="blog"><meta property="og:title" content="Welcome to &quot;stemwith&quot;"><meta property="og:url" content="http://stemwith.github.io/"><meta property="og:site_name" content="Welcome to &quot;stemwith&quot;"><meta property="og:description" content="for stem education"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="http://stemwith.github.io/img/og_image.png"><meta property="article:author" content="chemidot"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://stemwith.github.io"},"headline":"Welcome to \"stemwith\"","image":["http://stemwith.github.io/img/og_image.png"],"author":{"@type":"Person","name":"chemidot"},"publisher":{"@type":"Organization","name":"Welcome to \"stemwith\"","logo":{"@type":"ImageObject","url":"http://stemwith.github.io/img/logo.svg"}},"description":"for stem education"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/monokai.css"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&amp;family=Roboto" rel="stylesheet"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-151970975-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-151970975-1');</script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/rss2.xml" title="Welcome to "stemwith"" type="application/rss+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Welcome to &quot;stemwith&quot;" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-10-02T05:18:00.000Z" title="2018. 10. 2. 오후 1:18:00">2018-10-02</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-11-17T03:46:58.997Z" title="2021. 11. 17. 오전 11:46:58">2021-11-17</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/arduino/">arduino</a></span><span class="level-item">9분안에 읽기 (약 1342 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/10/02/1602-LCD-Display/">1602 LCD, 조도, 초음파, 온습도</a></h1><div class="content"><p>1602 LCD 중에서 (I2C 모듈이 추가되어 있지 않은) 가장 기본적인 형태, 즉 1602 LCD만 있는 상태에서의 출력방법을 알아보겠습니다.</p>
<br>

<h3 id="schematic"><a href="#schematic" class="headerlink" title="schematic"></a>schematic</h3><p><img src="/image/1602-01.jpg"></p>
<br>

<h4 id="schematic-백라이트-밝기-조절-추가"><a href="#schematic-백라이트-밝기-조절-추가" class="headerlink" title="schematic : 백라이트 밝기 조절 추가"></a>schematic : 백라이트 밝기 조절 추가</h4><p>백라이트를 사용하지 않으면 너무 어두워서 글자가 잘 보이지 않는다. 적당한 밝기의 백라이트 사용을 위해 <strong>LCD 3번핀을 3.3㏀ 거쳐서 GND로 연결</strong>(혹은 1㏀ 3개를 직렬연결) 하거나, 아래 회로와 같이 가변 저항을 사용하면 백라이트의 밝기를 적절히 조절할 수도 있다.</p>
<p><img src="/image/1602-02.jpg"></p>
<h4 id="Pin-Map"><a href="#Pin-Map" class="headerlink" title="Pin Map"></a>Pin Map</h4><table>
<thead>
<tr>
<th>LCD Pin</th>
<th></th>
<th align="center"></th>
<th>Arduino Uno</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>VSS</td>
<td align="center">LCD GND</td>
<td>GND</td>
</tr>
<tr>
<td>2</td>
<td>VDD</td>
<td align="center">LCD 전원</td>
<td>+5V</td>
</tr>
<tr>
<td>3</td>
<td>VO</td>
<td align="center">글자 대비값</td>
<td>(가변저항 추가/미사용시 3.3㏀ 거쳐서 GND)</td>
</tr>
<tr>
<td>4</td>
<td>RS</td>
<td align="center">레지스터 설정</td>
<td>12</td>
</tr>
<tr>
<td>5</td>
<td>RW</td>
<td align="center">읽기/쓰기모드 설정</td>
<td>GND</td>
</tr>
<tr>
<td>6</td>
<td>E</td>
<td align="center">쓰기모드 활성화</td>
<td>11</td>
</tr>
<tr>
<td>7</td>
<td>D0</td>
<td align="center">데이터 핀</td>
<td></td>
</tr>
<tr>
<td>8</td>
<td>D1</td>
<td align="center">″</td>
<td></td>
</tr>
<tr>
<td>9</td>
<td>D2</td>
<td align="center">″</td>
<td></td>
</tr>
<tr>
<td>10</td>
<td>D3</td>
<td align="center">″</td>
<td></td>
</tr>
<tr>
<td>11</td>
<td>D4</td>
<td align="center">″</td>
<td>5</td>
</tr>
<tr>
<td>12</td>
<td>D5</td>
<td align="center">″</td>
<td>4</td>
</tr>
<tr>
<td>13</td>
<td>D6</td>
<td align="center">″</td>
<td>3</td>
</tr>
<tr>
<td>14</td>
<td>D7</td>
<td align="center">″</td>
<td>2</td>
</tr>
<tr>
<td>15</td>
<td>A</td>
<td align="center">배경밝기 전압입력</td>
<td>(가변저항 추가)</td>
</tr>
<tr>
<td>16</td>
<td>K</td>
<td align="center">배경밝기 GND</td>
<td>(가변저항 추가)</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="sketch"><a href="#sketch" class="headerlink" title="sketch"></a>sketch</h3><h4 id="라이브러리-설치하기"><a href="#라이브러리-설치하기" class="headerlink" title="라이브러리 설치하기"></a>라이브러리 설치하기</h4><p>이 경우에는 Arduino IDE에 기본적으로 포함되어 있는 LiquidCrystal 라이브러리를 이용한다.</p>
<ul>
<li>  <strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>LiquidCrystal</strong></li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;LiquidCrystal.h&gt;</span></span></span><br></pre></td></tr></table></figure>

<br>

<h4 id="function"><a href="#function" class="headerlink" title="function"></a>function</h4><table>
<thead>
<tr>
<th>function</th>
<th>기능</th>
</tr>
</thead>
<tbody><tr>
<td>LiquidCrystal()</td>
<td>LCD 클래스 생성(LCD interface 설정)</td>
</tr>
<tr>
<td>begin()</td>
<td>LCD 화면 초기화(column과 row 설정)</td>
</tr>
<tr>
<td>clear()</td>
<td>LCD 화면을 지우고 커서를 (0,0) 위치로 옮김</td>
</tr>
<tr>
<td>home()</td>
<td>커서를 (0,0) 위치로 옮김</td>
</tr>
<tr>
<td>setCursor()</td>
<td>커서를 특정 위치로 옮김</td>
</tr>
<tr>
<td>write()</td>
<td>현재 커서에 한 문자를 출력</td>
</tr>
<tr>
<td>print()</td>
<td>현재 커서부터 출력 (Serial.print() 함수와 유사)</td>
</tr>
<tr>
<td>cursor(), nocursor()</td>
<td>커서 표시 O or X</td>
</tr>
<tr>
<td>display(), noDisplay()</td>
<td>LCD 화면에 정보 표시 O or X</td>
</tr>
<tr>
<td>scrollDisplayLeft(), scrollDisplayRight()</td>
<td>LCD 내용과 커서를 좌/우로 한 칸 스크롤</td>
</tr>
<tr>
<td>autoscroll(), noautoscroll()</td>
<td>문자 출력 시 이전 내용을 스크롤 할 지를 결정</td>
</tr>
<tr>
<td>leftToRight(), rightToLeft()</td>
<td>문자 출력 후 커서의 이동 위치 결정 (문자 출력 방향 결정)</td>
</tr>
<tr>
<td>createChar()</td>
<td>사용자 문자 등록, 총 8개까지 가능</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="예시"><a href="#예시" class="headerlink" title="예시"></a>예시</h3><h4 id="sketch-문자-2열-출력하기"><a href="#sketch-문자-2열-출력하기" class="headerlink" title="sketch : 문자 2열 출력하기"></a>sketch : 문자 2열 출력하기</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;LiquidCrystal.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">LiquidCrystal <span class="title">lcd</span><span class="params">(<span class="number">12</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>)</span></span>;  <span class="comment">// pin 연결에 대한 class 선언 (RS,E,D4,D5,D6,D7)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	lcd.begin(<span class="number">16</span>, <span class="number">2</span>);             <span class="comment">// LCD크기 지정</span></span><br><span class="line">	lcd.print(<span class="string">&quot;SKS Afterschool&quot;</span>);</span><br><span class="line">	lcd.setCursor(<span class="number">0</span>, <span class="number">1</span>);          <span class="comment">// 커서를 (0,1) 즉 두번째 줄(행)의 첫번째 칸(열)으로 이동</span></span><br><span class="line">	lcd.print(<span class="string">&quot;Let&#x27;s Arduino!!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>


<h4 id="sketch-문자열-좌우-스크롤하기"><a href="#sketch-문자열-좌우-스크롤하기" class="headerlink" title="sketch : 문자열 좌우 스크롤하기"></a>sketch : 문자열 좌우 스크롤하기</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;LiquidCrystal.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">LiquidCrystal <span class="title">lcd</span><span class="params">(<span class="number">12</span>, <span class="number">11</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  lcd.begin(<span class="number">16</span>, <span class="number">2</span>);</span><br><span class="line">  lcd.print(<span class="string">&quot;SKS Afterschool&quot;</span>);</span><br><span class="line">  lcd.setCursor(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">  lcd.print(<span class="string">&quot;Let&#x27;s Arduino!!&quot;</span>);</span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> left = <span class="number">0</span>; left &lt; <span class="number">15</span>; left++) &#123;</span><br><span class="line">    lcd.scrollDisplayLeft();  <span class="comment">// 15번 왼쪽으로 이동 (15글자)</span></span><br><span class="line">    delay(<span class="number">300</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> right = <span class="number">0</span>; right &lt; <span class="number">31</span>; right++) &#123;</span><br><span class="line">    lcd.scrollDisplayRight();  <span class="comment">// 31번 오른쪽으로 이동 (15글자+16칸)</span></span><br><span class="line">    delay(<span class="number">300</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> left = <span class="number">0</span>; left &lt; <span class="number">16</span>; left++) &#123;</span><br><span class="line">    lcd.scrollDisplayLeft();  <span class="comment">// 16번 왼쪽으로 이동 (16칸)</span></span><br><span class="line">    delay(<span class="number">300</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><br><br></p>
<h3 id="문자열과-조도센서값을-출력하기"><a href="#문자열과-조도센서값을-출력하기" class="headerlink" title="문자열과 조도센서값을 출력하기"></a>문자열과 조도센서값을 출력하기</h3><h4 id="schematic-1"><a href="#schematic-1" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/1602-03.jpg"></p>
<br>

<h4 id="sketch-문자열과-조도센서를-읽은-조도값을-동시에-출력하기"><a href="#sketch-문자열과-조도센서를-읽은-조도값을-동시에-출력하기" class="headerlink" title="sketch : 문자열과 조도센서를 읽은 조도값을 동시에 출력하기"></a>sketch : 문자열과 조도센서를 읽은 조도값을 동시에 출력하기</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;LiquidCrystal.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">LiquidCrystal <span class="title">lcd</span><span class="params">(<span class="number">12</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>)</span></span>;  <span class="comment">// pin 연결에 대한 class 선언 (RS,E,D4,D5,D6,D7)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	lcd.begin(<span class="number">16</span>, <span class="number">2</span>);             <span class="comment">// LCD크기 지정</span></span><br><span class="line">	lcd.print(<span class="string">&quot;Illumination:&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	lcd.setCursor(<span class="number">0</span>, <span class="number">1</span>);         <span class="comment">// 커서를 (0,1) 즉 첫번째 줄의 두번째 칸으로 이동</span></span><br><span class="line">	lcd.print(analogRead(A0));   <span class="comment">// A0에서 읽은 조도값을 출력</span></span><br><span class="line">	delay(<span class="number">200</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="sketch-조도-센서값을-위로-스크롤시키기"><a href="#sketch-조도-센서값을-위로-스크롤시키기" class="headerlink" title="sketch : 조도 센서값을 위로 스크롤시키기"></a>sketch : 조도 센서값을 위로 스크롤시키기</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;LiquidCrystal.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> i, j, k=<span class="number">1</span>;</span><br><span class="line"><span class="function">LiquidCrystal <span class="title">lcd</span><span class="params">(<span class="number">12</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  lcd.begin(<span class="number">16</span>, <span class="number">2</span>);</span><br><span class="line">  lcd.print(<span class="string">&quot;Illumination:&quot;</span>);</span><br><span class="line">  lcd.setCursor(<span class="number">0</span>, <span class="number">1</span>);        <span class="comment">// 두번째 줄에</span></span><br><span class="line">  i = analogRead(A0);</span><br><span class="line">  lcd.print(<span class="string">&quot;Check#&quot;</span>);</span><br><span class="line">  lcd.print(k);               <span class="comment">// 측정 횟수</span></span><br><span class="line">  lcd.print(<span class="string">&quot; : &quot;</span>);</span><br><span class="line">  lcd.print(i);               <span class="comment">// 첫번째 조도값 출력</span></span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  lcd.clear();                <span class="comment">// lcd 화면 지우고 (0,0)으로 커서 이동</span></span><br><span class="line">  j = i;                      <span class="comment">// 이전 조도값을 j에 저장</span></span><br><span class="line">  lcd.print(<span class="string">&quot;Check#&quot;</span>);</span><br><span class="line">  lcd.print(k);               <span class="comment">// 이전 조도값 측정 횟수</span></span><br><span class="line">  lcd.print(<span class="string">&quot; : &quot;</span>);</span><br><span class="line">  lcd.print(j);               <span class="comment">// 이전 조도값 출력</span></span><br><span class="line"></span><br><span class="line">  lcd.setCursor(<span class="number">0</span>, <span class="number">1</span>);        <span class="comment">// 두번째 줄로 이동</span></span><br><span class="line">  i = analogRead(A0);         <span class="comment">// 새로운 조도값 측정</span></span><br><span class="line">  k++;                        <span class="comment">// 측정 횟수 증가</span></span><br><span class="line">  lcd.print(<span class="string">&quot;check#&quot;</span>);</span><br><span class="line">  lcd.print(k);               <span class="comment">// 새로운 측정 횟수</span></span><br><span class="line">  lcd.print(<span class="string">&quot; : &quot;</span>);</span><br><span class="line">  lcd.print(i);               <span class="comment">// 새로운 조도값 출력</span></span><br><span class="line">  </span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="초음파-센서-거리값-출력하기"><a href="#초음파-센서-거리값-출력하기" class="headerlink" title="초음파 센서 거리값 출력하기"></a>초음파 센서 거리값 출력하기</h3><p>초음파를 이용하여 사물간의 거리를 측정하는 센서입니다. 아두이노에서는 HC-SR04, US-100 제품을 많이 사용하며, 여기서는 HC-SR04를 사용해보겠습니다.</p>
<br>


<h4 id="schematic-2"><a href="#schematic-2" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/1602-04.jpg"></p>
<br>

<h4 id="Pin-Map-HC-SR04"><a href="#Pin-Map-HC-SR04" class="headerlink" title="Pin Map : HC-SR04"></a>Pin Map : HC-SR04</h4><table>
<thead>
<tr>
<th>DHT11</th>
<th>아두이노</th>
</tr>
</thead>
<tbody><tr>
<td>VCC</td>
<td>5V</td>
</tr>
<tr>
<td>Trig (초음파 송신)</td>
<td>8 (pinMode 설정함)</td>
</tr>
<tr>
<td>Echo (초음파 수신)</td>
<td>9 (pinMode 설정함)</td>
</tr>
<tr>
<td>GND</td>
<td>GND</td>
</tr>
</tbody></table>
<br>

<h4 id="sketch-1"><a href="#sketch-1" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;LiquidCrystal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TRIG 8</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ECHO 9</span></span><br><span class="line"></span><br><span class="line"><span class="function">LiquidCrystal <span class="title">lcd</span><span class="params">(<span class="number">12</span>, <span class="number">11</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   pinMode(TRIG, OUTPUT);</span><br><span class="line">   pinMode(ECHO, INPUT);</span><br><span class="line">   lcd.begin(<span class="number">16</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  digitalWrite(TRIG, LOW);  <span class="comment">// 초음파발사 정지(초기화)</span></span><br><span class="line">  delayMicroseconds(<span class="number">2</span>);</span><br><span class="line">  digitalWrite(TRIG, HIGH); <span class="comment">// 초음파발사</span></span><br><span class="line">  delayMicroseconds(<span class="number">2</span>);</span><br><span class="line">  digitalWrite(TRIG, LOW);  <span class="comment">// 초음파발사 정지</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">long</span> distance = pulseIn(ECHO, HIGH)/<span class="number">58.2</span>;</span><br><span class="line">  lcd.clear();</span><br><span class="line">  lcd.setCursor(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">  lcd.print(distance);</span><br><span class="line">  lcd.print(<span class="string">&quot; cm&quot;</span>);</span><br><span class="line">  delay(<span class="number">200</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="DHT11-온·습도센서-값-출력하기"><a href="#DHT11-온·습도센서-값-출력하기" class="headerlink" title="DHT11 온·습도센서 값 출력하기"></a>DHT11 온·습도센서 값 출력하기</h3><p>DHT11 센서를 사용하면 온도와 습도를 동시에 측정할 수 있다. 여기서는 1602 LCD에 온도와 습도를 출력해본다.</p>
<br>

<h4 id="schematic-3"><a href="#schematic-3" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/1602-05.jpg"></p>
<br>

<h4 id="Pin-Map-1"><a href="#Pin-Map-1" class="headerlink" title="Pin Map"></a>Pin Map</h4><table>
<thead>
<tr>
<th>DHT11</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
</tr>
</thead>
<tbody><tr>
<td>Arduino</td>
<td>5V</td>
<td></td>
<td>2, 10㏀ 저항 거쳐서 5V</td>
<td>GND</td>
</tr>
</tbody></table>
<br>

<h4 id="라이브러리-추가하기"><a href="#라이브러리-추가하기" class="headerlink" title="라이브러리 추가하기"></a>라이브러리 추가하기</h4><ul>
<li>  <strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt; <strong>라이브러리 매니저</strong> 에서 “DHT11” 검색</li>
<li>  DHT sensor library by Adafruit 설치</li>
</ul>
<br>

<h4 id="sketch-2"><a href="#sketch-2" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;LiquidCrystal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;DHT.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">LiquidCrystal <span class="title">lcd</span><span class="params">(<span class="number">12</span>, <span class="number">11</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>)</span></span>;    <span class="comment">// RS, E, D4, D5, D6, D7</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DHTPIN 10</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DHTTYPE DHT11</span></span><br><span class="line"><span class="function">DHT <span class="title">dht</span><span class="params">(DHTPIN, DHTTYPE)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  dht.begin();</span><br><span class="line">  lcd.begin(<span class="number">16</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">float</span> t = dht.readTemperature();       <span class="comment">// read temperature</span></span><br><span class="line">  <span class="keyword">float</span> h = dht.readHumidity();          <span class="comment">// read humidity</span></span><br><span class="line"></span><br><span class="line">  lcd.clear();</span><br><span class="line">  lcd.setCursor(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  lcd.print(<span class="string">&quot;Temp.: &quot;</span>);                  <span class="comment">// write temperature </span></span><br><span class="line">  lcd.print(t);</span><br><span class="line">  lcd.print(<span class="string">&quot; C&quot;</span>);</span><br><span class="line">  lcd.setCursor(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">  lcd.print(<span class="string">&quot;Humi.: &quot;</span>);                  <span class="comment">// write humidity</span></span><br><span class="line">  lcd.print(h);</span><br><span class="line">  lcd.print(<span class="string">&quot;%&quot;</span>);</span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="과제"><a href="#과제" class="headerlink" title="과제"></a>과제</h3><p>입력버튼을 만들과, 각 버튼을 누를때마다 A → B → C → D 등 출력하기</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-10-01T02:21:00.000Z" title="2018. 10. 1. 오전 10:21:00">2018-10-01</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-11-17T03:36:14.715Z" title="2021. 11. 17. 오전 11:36:14">2021-11-17</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/arduino/">arduino</a></span><span class="level-item">18분안에 읽기 (약 2720 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/10/01/7-Segment-FND-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/">7 Segment (FND) 사용하기</a></h1><div class="content"><h2 id="FND의-종류"><a href="#FND의-종류" class="headerlink" title="FND의 종류"></a>FND의 종류</h2><ul>
<li><p>FND는 Anode형과 Cathode형으로 분류되며, 이 중 Anode형이 주로 사용되고 있는데요. Anode형은 중앙핀이 VCC이며, Cathode형은 GND입니다. 우리가 사용하는 것은 5611BH로 Common Anode형입니다.</p>
</li>
<li><p>7 Segment (FND)는 숫자나 문자를 표현하는 7개의 LED와 소수점을 표현하는 1개의 LED가 포함되어 있는 부품을 의미합니다. FND는 16X2 LCD와 비교할 때 표현할 수 있는 문자의 개수가 제한되고, 각 문자의 표현을 위하여 총 8개의 LED를 하나씩 조절해주어야 하는 등 사용이 복잡하다는 단점이 있습니다. 그렇지만, 전력소모가 적고 크기가 큰 Segment를 선택하면 비교적 큰 문자도 표현할 수 있다는 장점이 있어 다양한 용도로 사용되고 있습니다.</p>
</li>
</ul>
<br>

<h2 id="숫자표시-방법"><a href="#숫자표시-방법" class="headerlink" title="숫자표시 방법"></a>숫자표시 방법</h2><img src="/image/7segment-01.jpg" style="zoom:50%;">
![](/image/7segment-02.jpg)

<br>

<table>
<thead>
<tr>
<th>Num</th>
<th>DP</th>
<th>G</th>
<th>F</th>
<th>E</th>
<th>D</th>
<th>C</th>
<th>B</th>
<th>A</th>
<th>2진수</th>
<th>16진수</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0b11000000</td>
<td>0xC0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0b11111001</td>
<td>0xF9</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0b10100100</td>
<td>0xA4</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0b10110000</td>
<td>0xB0</td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0b10011001</td>
<td>0x99</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0b10010010</td>
<td>0x92</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0b10000010</td>
<td>0x82</td>
</tr>
<tr>
<td>7</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0b11111000</td>
<td>0xF8</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0b10000000</td>
<td>0x80</td>
</tr>
<tr>
<td>9</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0b10010000</td>
<td>0x90</td>
</tr>
</tbody></table>
<blockquote>
<p>10진수 숫자와의 구분을 위해 2진수 앞에는 0b, 16진수 앞에는 0x를 표기하고<br>16진수 표현에 있어서, 각 숫자에 소수점을 포함시키는 경우에는 80을 빼주면 됩니다. 예를 들어,</p>
</blockquote>
<ul>
<li>0． → 0xC0 - 0x80 = 0x40</li>
<li>1． → 0xF9 - 0x80 = 0x79</li>
<li>2． → 0xA4 - 0x80 = 0x24</li>
<li>3． → 0xB0 - 0x80 = 0x30</li>
<li>4． → 0x99 - 0x80 = 0x19</li>
<li>5． → 0x92 - 0x80 = 0x12</li>
<li>6． → 0x82 - 0x80 = 0x12</li>
<li>7． → 0xF8 - 0x80 = 0x78</li>
<li>8． → 0x80 - 0x80 = 0x00</li>
<li>9． → 0x90 - 0x80 = 0x10</li>
</ul>
<br>

<h2 id="Pin-Map"><a href="#Pin-Map" class="headerlink" title="Pin Map"></a>Pin Map</h2><table>
<thead>
<tr>
<th>7 Segment</th>
<th>Arduino</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>2</td>
</tr>
<tr>
<td>B</td>
<td>3</td>
</tr>
<tr>
<td>C</td>
<td>4</td>
</tr>
<tr>
<td>D</td>
<td>5</td>
</tr>
<tr>
<td>E</td>
<td>6</td>
</tr>
<tr>
<td>F</td>
<td>7</td>
</tr>
<tr>
<td>G</td>
<td>8</td>
</tr>
<tr>
<td>DP</td>
<td>9</td>
</tr>
</tbody></table>
<br>

<h2 id="schematic"><a href="#schematic" class="headerlink" title="schematic"></a>schematic</h2><p>아래 회로에서는 330Ω 저항 1개를 VCC에 직접 연결하여 사용하였습니다. 상단부와 하단부 중앙핀은 서로 연결이 되어 있으므로, 둘 중 하나만 +5V에 연결하여 사용합니다.<br><img src="/image/7segment-03.jpg"></p>
<br>

<blockquote>
<p><strong>주의</strong> : 위 회로에서는 간단한 회로 구성을 위해 VCC에 저항을 직접 연결하여 사용하였으나, 이것이 좋은 방법은 아닙니다. FND의 각 LED가 직렬이 아닌 병렬로 연결되어 있는데, 이렇게 구성하는 경우 동일한 전류로 “1”를 표시할때는 2개의 Segment만 켜고, “8”을 표시할때는 7개의 Segment를 모두 키므로, 각 숫자마다 밝기의 차이가 생기길 수 있기 때문이죠. 실제 LED의 밝기에 미세한 변화가 생기는 것을 볼 수 있습니다.</p>
</blockquote>
<blockquote>
<p>이러한 문제를 해결하기 위해서는 각 LED마다 저항을 따로 사용하여야 합니다. 아래 그림과 같이 220~330Ω 저항 8개를 사용하는 것이 원칙이며, 이렇게 하면 밝기를 고르게 유지할 수 있습니다.</p>
</blockquote>
<p><img src="/image/7segment-04.jpg"></p>
<br>

<h2 id="sketch-0-9까지-차례대로-표시하기"><a href="#sketch-0-9까지-차례대로-표시하기" class="headerlink" title="sketch : 0~9까지 차례대로 표시하기"></a>sketch : 0~9까지 차례대로 표시하기</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> A = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> B = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> C = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> D = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> E = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> F = <span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> G = <span class="number">8</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> DP = <span class="number">9</span>;</span><br><span class="line"><span class="keyword">int</span> dt = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">pinMode(A, OUTPUT);</span><br><span class="line">pinMode(B, OUTPUT);</span><br><span class="line">pinMode(C, OUTPUT);</span><br><span class="line">pinMode(D, OUTPUT);</span><br><span class="line">pinMode(E, OUTPUT);</span><br><span class="line">pinMode(F, OUTPUT);</span><br><span class="line">pinMode(G, OUTPUT);</span><br><span class="line">pinMode(DP, OUTPUT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7 Segment Ready</span></span><br><span class="line">digitalWrite (A,HIGH);</span><br><span class="line">digitalWrite (B,HIGH);</span><br><span class="line">digitalWrite (C,HIGH);</span><br><span class="line">digitalWrite (D,HIGH);</span><br><span class="line">digitalWrite (E,HIGH);</span><br><span class="line">digitalWrite (F,HIGH);</span><br><span class="line">digitalWrite (G,HIGH);</span><br><span class="line">digitalWrite (DP,HIGH);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// digit 0</span></span><br><span class="line">digitalWrite (A,LOW);</span><br><span class="line">digitalWrite (B,LOW);</span><br><span class="line">digitalWrite (C,LOW);</span><br><span class="line">digitalWrite (D,LOW);</span><br><span class="line">digitalWrite (E,LOW);</span><br><span class="line">digitalWrite (F,LOW);</span><br><span class="line">digitalWrite (G,HIGH);</span><br><span class="line">digitalWrite (DP,HIGH);</span><br><span class="line">delay(dt);</span><br><span class="line"></span><br><span class="line"><span class="comment">// digit 1</span></span><br><span class="line">digitalWrite (A,HIGH);</span><br><span class="line">digitalWrite (B,LOW);</span><br><span class="line">digitalWrite (C,LOW);</span><br><span class="line">digitalWrite (D,HIGH);</span><br><span class="line">digitalWrite (E,HIGH);</span><br><span class="line">digitalWrite (F,HIGH);</span><br><span class="line">digitalWrite (G,HIGH);</span><br><span class="line">digitalWrite (DP,HIGH);</span><br><span class="line">delay(dt);</span><br><span class="line"></span><br><span class="line"><span class="comment">// digit 2</span></span><br><span class="line">digitalWrite (A,LOW);</span><br><span class="line">digitalWrite (B,LOW);</span><br><span class="line">digitalWrite (C,HIGH);</span><br><span class="line">digitalWrite (D,LOW);</span><br><span class="line">digitalWrite (E,LOW);</span><br><span class="line">digitalWrite (F,HIGH);</span><br><span class="line">digitalWrite (G,LOW);</span><br><span class="line">digitalWrite (DP,HIGH);</span><br><span class="line">delay(dt);</span><br><span class="line"></span><br><span class="line"><span class="comment">// digit 3</span></span><br><span class="line">digitalWrite (A,LOW);</span><br><span class="line">digitalWrite (B,LOW);</span><br><span class="line">digitalWrite (C,LOW);</span><br><span class="line">digitalWrite (D,LOW);</span><br><span class="line">digitalWrite (E,HIGH);</span><br><span class="line">digitalWrite (F,HIGH);</span><br><span class="line">digitalWrite (G,LOW);</span><br><span class="line">digitalWrite (DP,HIGH);</span><br><span class="line">delay(dt);</span><br><span class="line"></span><br><span class="line"><span class="comment">// digit 4</span></span><br><span class="line">digitalWrite (A,HIGH);</span><br><span class="line">digitalWrite (B,LOW);</span><br><span class="line">digitalWrite (C,LOW);</span><br><span class="line">digitalWrite (D,HIGH);</span><br><span class="line">digitalWrite (E,HIGH);</span><br><span class="line">digitalWrite (F,LOW);</span><br><span class="line">digitalWrite (G,LOW);</span><br><span class="line">digitalWrite (DP,HIGH);</span><br><span class="line">delay(dt);</span><br><span class="line"></span><br><span class="line"><span class="comment">// digit 5</span></span><br><span class="line">digitalWrite (A,LOW);</span><br><span class="line">digitalWrite (B,HIGH);</span><br><span class="line">digitalWrite (C,LOW);</span><br><span class="line">digitalWrite (D,LOW);</span><br><span class="line">digitalWrite (E,HIGH);</span><br><span class="line">digitalWrite (F,LOW);</span><br><span class="line">digitalWrite (G,LOW);</span><br><span class="line">digitalWrite (DP,HIGH);</span><br><span class="line">delay(dt);</span><br><span class="line"></span><br><span class="line"><span class="comment">// digit 6</span></span><br><span class="line">digitalWrite (A,LOW);</span><br><span class="line">digitalWrite (B,HIGH);</span><br><span class="line">digitalWrite (C,LOW);</span><br><span class="line">digitalWrite (D,LOW);</span><br><span class="line">digitalWrite (E,LOW);</span><br><span class="line">digitalWrite (F,LOW);</span><br><span class="line">digitalWrite (G,LOW);</span><br><span class="line">digitalWrite (DP,HIGH);</span><br><span class="line">delay(dt);</span><br><span class="line"></span><br><span class="line"><span class="comment">// digit 7</span></span><br><span class="line">digitalWrite (A,LOW);</span><br><span class="line">digitalWrite (B,LOW);</span><br><span class="line">digitalWrite (C,LOW);</span><br><span class="line">digitalWrite (D,HIGH);</span><br><span class="line">digitalWrite (E,HIGH);</span><br><span class="line">digitalWrite (F,HIGH);</span><br><span class="line">digitalWrite (G,HIGH);</span><br><span class="line">digitalWrite (DP,HIGH);</span><br><span class="line">delay(dt);</span><br><span class="line"></span><br><span class="line"><span class="comment">// digit 8</span></span><br><span class="line">digitalWrite (A,LOW);</span><br><span class="line">digitalWrite (B,LOW);</span><br><span class="line">digitalWrite (C,LOW);</span><br><span class="line">digitalWrite (D,LOW);</span><br><span class="line">digitalWrite (E,LOW);</span><br><span class="line">digitalWrite (F,LOW);</span><br><span class="line">digitalWrite (G,LOW);</span><br><span class="line">digitalWrite (DP,HIGH);</span><br><span class="line">delay(dt);</span><br><span class="line"></span><br><span class="line"><span class="comment">// digit 9</span></span><br><span class="line">digitalWrite (A,LOW);</span><br><span class="line">digitalWrite (B,LOW);</span><br><span class="line">digitalWrite (C,LOW);</span><br><span class="line">digitalWrite (D,LOW);</span><br><span class="line">digitalWrite (E,HIGH);</span><br><span class="line">digitalWrite (F,LOW);</span><br><span class="line">digitalWrite (G,LOW);</span><br><span class="line">digitalWrite (DP,HIGH);</span><br><span class="line">delay(dt);</span><br><span class="line"></span><br><span class="line"><span class="comment">// digit 0.</span></span><br><span class="line">digitalWrite (A,LOW);</span><br><span class="line">digitalWrite (B,LOW);</span><br><span class="line">digitalWrite (C,LOW);</span><br><span class="line">digitalWrite (D,LOW);</span><br><span class="line">digitalWrite (E,LOW);</span><br><span class="line">digitalWrite (F,LOW);</span><br><span class="line">digitalWrite (G,HIGH);</span><br><span class="line">digitalWrite (DP,LOW);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h2 id="sketch-배열을-사용하여-숫자-출력하기"><a href="#sketch-배열을-사용하여-숫자-출력하기" class="headerlink" title="sketch : 배열을 사용하여 숫자 출력하기"></a>sketch : 배열을 사용하여 숫자 출력하기</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> numArray[<span class="number">11</span>][<span class="number">8</span>] = &#123;</span><br><span class="line">  &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;, <span class="comment">// 0</span></span><br><span class="line">  &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;, <span class="comment">// 1</span></span><br><span class="line">  &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>&#125;, <span class="comment">// 2</span></span><br><span class="line">  &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>&#125;, <span class="comment">// 3</span></span><br><span class="line">  &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;, <span class="comment">// 4</span></span><br><span class="line">  &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;, <span class="comment">// 5</span></span><br><span class="line">  &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;, <span class="comment">// 6</span></span><br><span class="line">  &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;, <span class="comment">// 7</span></span><br><span class="line">  &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;, <span class="comment">// 8</span></span><br><span class="line">  &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;, <span class="comment">// 9</span></span><br><span class="line">  &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;  <span class="comment">// 0.</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> pins[] = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">0</span>; r &lt; <span class="number">8</span>; r++) &#123;</span><br><span class="line">    pinMode(pins[r], OUTPUT);</span><br><span class="line">    digitalWrite(pins[r], <span class="number">1</span>); <span class="comment">// 7 Segment Ready</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 8 출력</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">0</span>; r &lt; <span class="number">8</span>; r++) &#123;</span><br><span class="line">    digitalWrite(pins[r], numArray[<span class="number">8</span>][r]); <span class="comment">// numbers[8][r]이면 8을 출력</span></span><br><span class="line">  &#125;</span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> num = <span class="number">0</span>; num &lt; <span class="number">11</span>; num++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">0</span>; r &lt; <span class="number">8</span>; r++) &#123;</span><br><span class="line">      digitalWrite(pins[r], numbers[num][r]); <span class="comment">// num의 값을 출력</span></span><br><span class="line">    &#125;</span><br><span class="line">    delay(<span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h2 id="sketch-2진수나-16진수를-이용하여-표시하기"><a href="#sketch-2진수나-16진수를-이용하여-표시하기" class="headerlink" title="sketch : 2진수나 16진수를 이용하여 표시하기"></a>sketch : 2진수나 16진수를 이용하여 표시하기</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> numArray[<span class="number">10</span>] = &#123;</span><br><span class="line">  <span class="number">0b11000000</span>,   <span class="comment">// 0</span></span><br><span class="line">  <span class="number">0b11111001</span>,   <span class="comment">// 1</span></span><br><span class="line">  <span class="number">0b10100100</span>,   <span class="comment">// 2</span></span><br><span class="line">  <span class="number">0b10110000</span>,   <span class="comment">// 3</span></span><br><span class="line">  <span class="number">0b10011001</span>,   <span class="comment">// 4</span></span><br><span class="line">  <span class="number">0b10010010</span>,   <span class="comment">// 5</span></span><br><span class="line">  <span class="number">0b10000010</span>,   <span class="comment">// 6</span></span><br><span class="line">  <span class="number">0b11111000</span>,   <span class="comment">// 7</span></span><br><span class="line">  <span class="number">0b10000000</span>,   <span class="comment">// 8</span></span><br><span class="line">  <span class="number">0b10010000</span>    <span class="comment">// 9</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// int numArray[10] = &#123; 0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92, 0x82, 0xF8, 0x80, 0x90 &#125;;</span></span><br><span class="line"><span class="comment">// 16진수를 사용해도 됨</span></span><br><span class="line"><span class="comment">// 소수점 포함 int numArray[10] = &#123; 0x40, 0x79, 0x24, 0x30, 0x19, 0x12, 0x02, 0x78, 0x00, 0x10 &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> segPins[<span class="number">7</span>] = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> i, j;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;                </span><br><span class="line">  <span class="keyword">for</span> (i=<span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">    pinMode(segPins[i], OUTPUT);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (i=<span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">  &#123;</span><br><span class="line">    segLED(i);                         <span class="comment">// i=1이면 1을 출력</span></span><br><span class="line">    delay(<span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">segLED</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;                 <span class="comment">// num값을 넘겨받아</span></span><br><span class="line">  <span class="keyword">int</span> data = numArray[num];            <span class="comment">// num번째 배열값을 data로 지정</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">8</span>; j++)</span><br><span class="line">  &#123;                                    <span class="comment">// 2진수 배열 8비트를 &amp;연산자로 가장 오른쪽11 비트값부터 검사</span></span><br><span class="line">    <span class="keyword">if</span>(data &amp; <span class="number">0x01</span>) &#123;                  <span class="comment">// 1이면</span></span><br><span class="line">      digitalWrite(segPins[j], HIGH);  <span class="comment">// HIGH(끄고)</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      digitalWrite(segPins[j], LOW);   <span class="comment">// 1이 아니면(0이면)</span></span><br><span class="line">    &#125;                                  <span class="comment">// LOW(킨다)</span></span><br><span class="line">  data &gt;&gt;= <span class="number">1</span>;                          <span class="comment">// data값을 1비트씩 오른쪽으로 쉬프트한 후</span></span><br><span class="line">  &#125;                                    <span class="comment">// 7번 추가 실행 (총 8번 실행)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h2 id="sketch-시리얼모니터에서-값을-입력받아-출력하기"><a href="#sketch-시리얼모니터에서-값을-입력받아-출력하기" class="headerlink" title="sketch : 시리얼모니터에서 값을 입력받아 출력하기"></a>sketch : 시리얼모니터에서 값을 입력받아 출력하기</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> numArray[<span class="number">10</span>] = &#123; <span class="number">0xC0</span>, <span class="number">0xF9</span>, <span class="number">0xA4</span>, <span class="number">0xB0</span>, <span class="number">0x99</span>, <span class="number">0x92</span>, <span class="number">0x82</span>, <span class="number">0xF8</span>, <span class="number">0x80</span>, <span class="number">0x90</span> &#125;;</span><br><span class="line"><span class="comment">// 소수점 포함 int numArray[10] = &#123; 0x40, 0x79, 0x24, 0x30, 0x19, 0x12, 0x02, 0x78, 0x00, 0x10 &#125;;</span></span><br><span class="line"><span class="keyword">int</span> segPins[<span class="number">7</span>] = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> i, j;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123; </span><br><span class="line">  Serial.begin(<span class="number">9600</span>); </span><br><span class="line">  <span class="keyword">for</span> (i=<span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">    pinMode(segPins[i], OUTPUT);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial.println(<span class="string">&quot;Press any number!(0~9)&quot;</span>); </span><br><span class="line">  delay(<span class="number">1000</span>); </span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (Serial.available()) &#123;</span><br><span class="line">  <span class="keyword">int</span> number = Serial.read();</span><br><span class="line">    <span class="keyword">if</span>(number &lt; <span class="number">10</span>) &#123;</span><br><span class="line">	  Serial.println(number<span class="string">&quot;);  </span></span><br><span class="line"><span class="string">	  segLED(number);                  // i=1이면 1을 출력</span></span><br><span class="line"><span class="string">	  delay(1000);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    else &#123;</span></span><br><span class="line"><span class="string">      Serial.println(&quot;</span>Please input a lower number than <span class="number">10</span>!<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">void segLED(int num) &#123;                 // num값을 넘겨받아</span></span><br><span class="line"><span class="string">  int data = numArray[num];            // num번째 배열값을 data로 지정</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">  for (j = 0; j &lt; 8; j++)</span></span><br><span class="line"><span class="string">  &#123;                                    // 2진수 배열 8비트를 &amp;연산자로 가장 오른쪽11 비트값부터 검사</span></span><br><span class="line"><span class="string">    if(data &amp; 0x01) &#123;                  // 1이면</span></span><br><span class="line"><span class="string">      digitalWrite(segPins[j], HIGH);  // HIGH(끄고)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    else &#123;</span></span><br><span class="line"><span class="string">      digitalWrite(segPins[j], LOW);   // 1이 아니면(0이면)</span></span><br><span class="line"><span class="string">    &#125;                                  // LOW(킨다)</span></span><br><span class="line"><span class="string">  data &gt;&gt;= 1;                          // data값을 1비트씩 오른쪽으로 쉬프트한 후</span></span><br><span class="line"><span class="string">  &#125;                                    // 7번 추가 실행 (총 8번 실행)</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p><br><br></p>
<h1 id="2개의-7-Segment를-사용하여-2자리-숫자-나타내기"><a href="#2개의-7-Segment를-사용하여-2자리-숫자-나타내기" class="headerlink" title="2개의 7 Segment를 사용하여 2자리 숫자 나타내기"></a>2개의 7 Segment를 사용하여 2자리 숫자 나타내기</h1><p>1개의 7 Segment를 사용하는데 8개의 Digital Pin이 필요하므로, 2개 이상의 7 Segment를 사용하려면 16개의 Digital Pin이 필요합니다. 핀의 개수로만 보면 Arduino Uno로는 표현할 수 없겠지요. 그러므로 2개의 7 Segment를 전원부 제어를 통해 빠른 시간동안 on/off를 반복함으로써 우리 눈에 나타나는 잔상효과를 이용하는 방법으로 여러개의 FND를 사용하는 Dynamic 구동 방식을 사용합니다.</p>
<p>아래 회로를 예로들면 아두이노의 Digital 2~9번핀이 각각 두개의 FND로 병렬연결 되어 있고, 10번핀은 10의 자리를 나타내는 FND1에, 11번 핀은 1의 자리를 나타내는 FND2에 연결되어 있는 것을 볼 수 있습니다. 이 회로를 통해 10번핀을 LOW, 11번핀을 HIGH로 두면 FND1이 작동하고, 마찬가지로 10번핀을 HIGH, 11번핀을 LOW로 두면 FND2가 작동하게 되죠. 이러한 방식으로 2개의 FND를 10개의 핀으로 작동할 수 있게 되는 것입니다.</p>
<p><img src="/image/7segment-05.jpg"></p>
<br>

<h2 id="sketch"><a href="#sketch" class="headerlink" title="sketch"></a>sketch</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> numArray[<span class="number">10</span>] = &#123;</span><br><span class="line">  <span class="number">0b01000000</span>,   <span class="comment">// 0</span></span><br><span class="line">  <span class="number">0b01111001</span>,   <span class="comment">// 1</span></span><br><span class="line">  <span class="number">0b00100100</span>,   <span class="comment">// 2</span></span><br><span class="line">  <span class="number">0b00110000</span>,   <span class="comment">// 3</span></span><br><span class="line">  <span class="number">0b00011001</span>,   <span class="comment">// 4</span></span><br><span class="line">  <span class="number">0b00010010</span>,   <span class="comment">// 5</span></span><br><span class="line">  <span class="number">0b00000010</span>,   <span class="comment">// 6</span></span><br><span class="line">  <span class="number">0b01111000</span>,   <span class="comment">// 7</span></span><br><span class="line">  <span class="number">0b00000000</span>,   <span class="comment">// 8</span></span><br><span class="line">  <span class="number">0b00010000</span>    <span class="comment">// 9</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// int numArray[10] = &#123; 0x40, 0x79, 0x24, 0x30, 0x19, 0x12, 0x02, 0x78, 0x00, 0x10 &#125;;</span></span><br><span class="line"><span class="comment">// 16진수를 사용해도 됨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> segPins[] = &#123; <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> &#125;;  <span class="comment">// Segment핀 번호</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> segNum = <span class="number">2</span>;                              <span class="comment">// Segment 개수 (숫자 자리수)</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> vccPins[segNum] = &#123; <span class="number">10</span>, <span class="number">11</span> &#125;;            <span class="comment">// 10, 11번 핀을 통해 seg#1, seg#2의 전원 인가</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">    pinMode(segPins[i], OUTPUT);                   <span class="comment">// Segment핀 설정</span></span><br><span class="line">  &#125; </span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; segNum; i++) &#123;</span><br><span class="line">    pinMode(vccPins[i], OUTPUT);                   <span class="comment">// seg#0, seg#1의 전원인가 핀 설정</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;                  <span class="comment">// 0~99까지 숫자를 표시</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> n = <span class="number">0</span>; n &lt; <span class="number">10</span>; n++) &#123;                 <span class="comment">// 빠르게 카운트할 경우 모든 LED가 켜져 있는 것처럼 보여 </span></span><br><span class="line">      showNumber(i);                               <span class="comment">// 숫자를 구분할 수 없으므로, 빠르게 10번씩 점멸시키면서 표시</span></span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;                                  </span><br><span class="line">&#125;                                    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showNumber</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (number == <span class="number">0</span>) &#123;</span><br><span class="line">    showDigit(number, <span class="number">0</span>);                         <span class="comment">// 0의 경우 (1의 자리수) Segment에만 0을 출력</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; segNum; j++) &#123;            <span class="comment">// 10의 자리, 1의 자리 출력을 위해 2번 실행</span></span><br><span class="line">      <span class="keyword">if</span> (number &gt; <span class="number">0</span>) &#123;                           <span class="comment">// 출력값이 0보다 큰 경우에만 실행</span></span><br><span class="line">        showDigit(number % <span class="number">10</span>, j);                <span class="comment">// 1의 자리 숫자(%10)를 seg#0(j=0)에 출력 (if 10의 자리 숫자 = (number % 100) / 10))</span></span><br><span class="line">        number = number / <span class="number">10</span>;                     <span class="comment">// ※ 숫자를 10으로 나눠 10의 자리 숫자를 1의 자리 숫자로 만듦</span></span><br><span class="line">      &#125;                                           <span class="comment">// if 처음에 주어진 숫자가 한 자리 수였으면,</span></span><br><span class="line">      delay(<span class="number">5</span>);                                   <span class="comment">//    → 10으로 나눈 후에는 1의 자리값이 0이 되어, 0보다 큰 값이 안되므로 10의 자리 출력하지 않음</span></span><br><span class="line">    &#125;                                             <span class="comment">// if 처음에 주어진 숫자가 두 자리 수였으면</span></span><br><span class="line">  &#125;                                               <span class="comment">//    → 10으로 나눈 후 10의 자리 숫자가 1의 자리 수가 되므로, 10이 자리수를 seg#1(j=1)에 출력 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showDigit</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> digit)</span> </span>&#123;              <span class="comment">// num값과 digit(0→1의 자리수에 표시, 1→10의 자리수에 표시)을 넘겨받아</span></span><br><span class="line">  <span class="keyword">int</span> data = numArray[num];                       <span class="comment">// num번째 배열값을 digit자리수에 표시할 data로 지정</span></span><br><span class="line"></span><br><span class="line">  digitalWrite(vccPins[<span class="number">0</span>], HIGH);                 <span class="comment">// vcc핀에 전원 인가</span></span><br><span class="line">  digitalWrite(vccPins[<span class="number">1</span>], HIGH);                 <span class="comment">// [0] = Arduino Pin10, [1] = Arduino Pin11</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> segLED = <span class="number">0</span>; segLED &lt; <span class="number">7</span>; segLED++)      <span class="comment">// 숫자 2진수의 7세그먼트 ON, OFF</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (data &amp; <span class="number">0x01</span>) &#123;                            <span class="comment">// 1이면</span></span><br><span class="line">      digitalWrite(segPins[segLED], HIGH);        <span class="comment">// HIGH(끄고)                  </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;                                        <span class="comment">// 1이 아니면(0이면)</span></span><br><span class="line">      digitalWrite(segPins[segLED], LOW);         <span class="comment">// LOW(끈다)               </span></span><br><span class="line">    &#125;</span><br><span class="line">    data &gt;&gt;= <span class="number">1</span>;                                   <span class="comment">// data값을 1비트씩 오른쪽으로 쉬프트한 후</span></span><br><span class="line">  &#125;</span><br><span class="line">  digitalWrite(vccPins[digit], LOW);              <span class="comment">// 숫자 LED 한 자리 ON</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><br><br></p>
<h1 id="4-FND"><a href="#4-FND" class="headerlink" title="4 FND"></a>4 FND</h1><p>4개의 FND를 Dynamic 방식으로 구동하기 위해서는 8개의 데이터 핀과 4개의 전원부 핀이 필요합니다.<br><img src="/image/7segment-06.jpg" style="zoom: 67%;"></p>
<br>

<h2 id="schematic-1"><a href="#schematic-1" class="headerlink" title="schematic"></a>schematic</h2><p><img src="/image/7segment-07.jpg"></p>
<br>

<h2 id="Pin-Map-1"><a href="#Pin-Map-1" class="headerlink" title="Pin Map"></a>Pin Map</h2><table>
<thead>
<tr>
<th>FND</th>
<th>Arduino</th>
<th>Segment</th>
<th>자리수</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>6</td>
<td>E</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>5</td>
<td>D</td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>13</td>
<td>DP</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>4</td>
<td>C</td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>8</td>
<td>G</td>
<td></td>
</tr>
<tr>
<td>6</td>
<td>9</td>
<td>S1</td>
<td>1의 자리 수</td>
</tr>
<tr>
<td>7</td>
<td>3</td>
<td>B</td>
<td></td>
</tr>
<tr>
<td>8</td>
<td>10</td>
<td>S2</td>
<td>10의 자리 수</td>
</tr>
<tr>
<td>9</td>
<td>11</td>
<td>S3</td>
<td>100의 자리 수</td>
</tr>
<tr>
<td>10</td>
<td>7</td>
<td>F</td>
<td></td>
</tr>
<tr>
<td>11</td>
<td>2</td>
<td>A</td>
<td></td>
</tr>
<tr>
<td>12</td>
<td>12</td>
<td>S4</td>
<td>1000의 자리 수</td>
</tr>
</tbody></table>
<br>

<h2 id="sketch-1"><a href="#sketch-1" class="headerlink" title="sketch"></a>sketch</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Segment_X - Arduino Pin // FND Pin</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SEG_A 2 <span class="comment">// 11</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SEG_B 3 <span class="comment">// 7</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SEG_C 4 <span class="comment">// 4</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SEG_D 5 <span class="comment">// 2</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SEG_E 6 <span class="comment">// 1</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SEG_F 7 <span class="comment">// 10</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SEG_G 8 <span class="comment">// 5</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// FND_num - Arduino Pin // FND Pin</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FND1 9  <span class="comment">// 6</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FND2 10 <span class="comment">// 8</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FND3 11 <span class="comment">// 9</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FND4 12 <span class="comment">// 12</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">seglight</span><span class="params">(byte number)</span></span>;</span><br><span class="line">byte numbers[] = &#123;</span><br><span class="line">  B0111111,  <span class="comment">// MSB   --  LSB</span></span><br><span class="line">  B0000110,</span><br><span class="line">  B1011011,</span><br><span class="line">  B1001111,</span><br><span class="line">  B1100110,</span><br><span class="line">  B1101101,</span><br><span class="line">  B1111101,</span><br><span class="line">  B0000111,</span><br><span class="line">  B1111111,</span><br><span class="line">  B1101111</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> FND[] = &#123;SEG_A, SEG_B, SEG_C, SEG_D, SEG_E, SEG_F, SEG_G &#125;;</span><br><span class="line"><span class="keyword">int</span> FND_NO[] = &#123;FND1, FND2, FND3, FND4&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">    pinMode(FND[i], OUTPUT);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    pinMode(FND_NO[i], OUTPUT);</span><br><span class="line">    digitalWrite(FND_NO[i], HIGH);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ON = OUTPUT;</span><br><span class="line"><span class="keyword">int</span> intCnt = <span class="number">0</span> ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(intCnt &lt; <span class="number">10000</span>) &#123;</span><br><span class="line">    intCnt++;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    intCnt = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">long</span> start = millis();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">long</span> j = <span class="number">0</span> ; j &lt; <span class="number">10</span> ; j = millis() - start) &#123; <span class="comment">// 600 밀리초 마다 실행</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Dynamic 구동</span></span><br><span class="line">    digitalWrite(FND1, LOW);                 <span class="comment">// 1의 자리 켜기</span></span><br><span class="line">    seglight(numbers[intCnt % <span class="number">10</span>]);</span><br><span class="line">    delay(<span class="number">5</span>);                                <span class="comment">// 5ms 유지 후</span></span><br><span class="line">    digitalWrite(FND1, HIGH);                <span class="comment">// 끄기</span></span><br><span class="line">    </span><br><span class="line">    digitalWrite(FND2, LOW);                 <span class="comment">// 10의 자리 켜기</span></span><br><span class="line">    seglight(numbers[(intCnt / <span class="number">10</span>) % <span class="number">10</span>]);</span><br><span class="line">    delay(<span class="number">5</span>);                                <span class="comment">// 5ms 유지 후</span></span><br><span class="line">    digitalWrite(FND2, HIGH);                <span class="comment">// 끄기</span></span><br><span class="line"> </span><br><span class="line">    digitalWrite(FND3, LOW);                 <span class="comment">// 100의 자리 켜기</span></span><br><span class="line">    seglight(numbers[(intCnt / <span class="number">100</span>) % <span class="number">10</span>]);</span><br><span class="line">    delay(<span class="number">5</span>);                                <span class="comment">// 5ms 유지 후 </span></span><br><span class="line">    digitalWrite(FND3, HIGH);                <span class="comment">// 끄기</span></span><br><span class="line"></span><br><span class="line">    digitalWrite(FND4, LOW);                 <span class="comment">// 1000의 자리 켜기</span></span><br><span class="line">    seglight(numbers[(intCnt / <span class="number">1000</span>) % <span class="number">10</span>]);</span><br><span class="line">    delay(<span class="number">5</span>);                                <span class="comment">// 5ms 유지 후</span></span><br><span class="line">    digitalWrite(FND4, HIGH);                <span class="comment">// 끄기</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Bit값으로 FND 각 LED 점등</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">seglight</span><span class="params">(byte number)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">7</span> ; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> bit = bitRead(number, i) ;</span><br><span class="line">    digitalWrite(FND[i], bit);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-09-08T09:27:53.000Z" title="2018. 9. 8. 오후 5:27:53">2018-09-08</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-11-17T03:36:50.229Z" title="2021. 11. 17. 오전 11:36:50">2021-11-17</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/arduino/">arduino</a></span><span class="level-item">3분안에 읽기 (약 442 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/09/08/Arduino-%EC%8A%A4%ED%85%9D%EB%AA%A8%ED%84%B0/">Arduino, 스텝모터</a></h1><div class="content"><h3 id="스텝모터-Step-Motor"><a href="#스텝모터-Step-Motor" class="headerlink" title="스텝모터 (Step Motor)"></a>스텝모터 (Step Motor)</h3><ul>
<li>펄스 모양의 전압에 의해 일정 각도(스텝 수) 만큼 회전하는 모터.</li>
<li>회전 각도는 입력 펄스 신호의 수에 비례하고, 회전 속도는 입력 펄스 신호의 주파수에 비례한다.</li>
</ul>
<br>

<h4 id="스텝모터-28BYJ-48"><a href="#스텝모터-28BYJ-48" class="headerlink" title="스텝모터 28BYJ-48"></a>스텝모터 28BYJ-48</h4><p><img src="/image/s/Step-Motor-02.png"></p>
<ul>
<li><p>정격전압: 5VDC</p>
</li>
<li><p>기어비: 1/64<br>$$<br>\frac {32}{9} \times \frac {22}{11} \times \frac {26}{9} \times \frac {31}{10} = 63.68395 \fallingdotseq 64<br>$$</p>
</li>
</ul>
<img src="/image/s/Step-Motor-01.png" style="zoom:80%;">

<ul>
<li>스트라이드 각도<ul>
<li><strong>스펙상 5.625º / 64</strong> = 0.087890625<ul>
<li>그러므로,  360º / 0.087890625 = 4096 스텝</li>
</ul>
</li>
<li><strong>실제로는 11.25º / 64</strong> = 0.17578125<ul>
<li>그러므로,  360º / 0.17578125 = <strong>2048 스텝으로 1회전</strong> (이 값이 중요함!)</li>
</ul>
</li>
</ul>
</li>
<li>Frequency: 100Hz</li>
<li>토크: 34.3mN,m</li>
</ul>
<br>

<h4 id="모터드라이브-ULN2003"><a href="#모터드라이브-ULN2003" class="headerlink" title="모터드라이브 ULN2003"></a>모터드라이브 ULN2003</h4><img src="/image/s/Step-Motor-03.png" style="zoom:67%;">

<br>

<h4 id="schematic"><a href="#schematic" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/s/UNO-step-01.png"></p>
<h4 id="Pin-Map"><a href="#Pin-Map" class="headerlink" title="Pin Map"></a>Pin Map</h4><table>
<thead>
<tr>
<th>모터드라이브</th>
<th>아두이노</th>
</tr>
</thead>
<tbody><tr>
<td>INT1</td>
<td>11</td>
</tr>
<tr>
<td>INT2</td>
<td>10</td>
</tr>
<tr>
<td>INT3</td>
<td>9</td>
</tr>
<tr>
<td>INT4</td>
<td>8</td>
</tr>
<tr>
<td>GND</td>
<td>GND</td>
</tr>
<tr>
<td>VCC</td>
<td>5V</td>
</tr>
</tbody></table>
<br>

<h4 id="sketch-예제1"><a href="#sketch-예제1" class="headerlink" title="sketch: 예제1"></a>sketch: 예제1</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Stepper.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2048:한바퀴(360도), 1024:반바퀴(180도)...</span></span><br><span class="line"><span class="comment">// datasheet를 통해 스트라이드 각도를 계산한 값을 사용</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> stepsPerRevolution = <span class="number">2048</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 모터 드라이브에 연결된 핀 IN1, IN3, IN2, IN4</span></span><br><span class="line"><span class="function">Stepper <span class="title">myStepper</span><span class="params">(stepsPerRevolution, <span class="number">11</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">8</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  myStepper.<span class="built_in">setSpeed</span>(<span class="number">14</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 시계 반대 방향으로 한바퀴 회전</span></span><br><span class="line">  myStepper.<span class="built_in">step</span>(stepsPerRevolution);</span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 시계 방향으로 한바퀴 회전</span></span><br><span class="line">  myStepper.<span class="built_in">step</span>(-stepsPerRevolution);</span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Stepper myStepper(stepsPerRevolution, 11, 9, 10, 8);<ul>
<li>모터 드라이브에 연결되는 순서에 유의한다! (<strong>IN1, IN3, IN2, IN4</strong> 순서임!)</li>
</ul>
</li>
<li>myStepper.setSpeed(14);<ul>
<li>아두이노 보드의 5V 전원 사용시 16이 최대값.</li>
<li>16 이상은 안정적으로 회전이 안되며, 17을 넣으면 한바퀴 돌고 정지. 18을 넣으면 돌지 않음</li>
</ul>
</li>
</ul>
<br>

<h4 id="sketch-예제2"><a href="#sketch-예제2" class="headerlink" title="sketch: 예제2"></a>sketch: 예제2</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Stepper.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2048:한바퀴(360도), 1024:반바퀴(180도), 64:11.25도</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> stepsPerRevolution = <span class="number">64</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 모터 드라이브에 연결된 핀 IN1, IN3, IN2, IN4</span></span><br><span class="line"><span class="function">Stepper <span class="title">myStepper</span><span class="params">(stepsPerRevolution, <span class="number">11</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">8</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  myStepper.<span class="built_in">setSpeed</span>(<span class="number">16</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 시계 반대 방향으로 한바퀴 회전</span></span><br><span class="line">  <span class="comment">// 64 * 32 = 2048 한바퀴 =&gt; 11.25도씩 32번 회전 (360도)</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">32</span>; i++) &#123;  </span><br><span class="line">    myStepper.<span class="built_in">step</span>(stepsPerRevolution);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 시계 방향으로 한바퀴 회전</span></span><br><span class="line">  <span class="comment">// -64 * 32 = 2048 한바퀴 =&gt; -11.25도씩 32번 회전 (-360도)</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">32</span>; i++) &#123;</span><br><span class="line">    myStepper.<span class="built_in">step</span>(-stepsPerRevolution);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-09-08T08:57:00.000Z" title="2018. 9. 8. 오후 4:57:00">2018-09-08</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-11-17T03:29:58.457Z" title="2021. 11. 17. 오전 11:29:58">2021-11-17</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/arduino/">arduino</a></span><span class="level-item">14분안에 읽기 (약 2039 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/09/08/Arduino-%EC%84%9C%EB%B3%B4%EB%AA%A8%ED%84%B0/">Arduino, 서보모터</a></h1><div class="content"><h3 id="서보모터-SG-90"><a href="#서보모터-SG-90" class="headerlink" title="서보모터 SG-90"></a>서보모터 SG-90</h3><img src="/image/servo-01.png" style="zoom:67%;">

<ul>
<li>  모터드라이버, 회전센서, 모터, 제어회로가 내장된 기어 박스를 포함하고 있는 형태의 모터로, 스텝모터보다 힘이 강함</li>
<li>  보통 선이 3가닥이며, 회전수와 각도 등의 움직임 제어가 가능</li>
<li>  아두이노에서 많이 다루는 SG90 제품의 경우 0~180˚ 제어가 가능</li>
<li>  아두이노UNO의 USB 전류량이 500mA 정도가 한계이므로 별도의 전원을 사용하지 않으면 1~2개의 서보모터만 사용 가능</li>
</ul>
<br>

<h4 id="라이브러리-추가하기"><a href="#라이브러리-추가하기" class="headerlink" title="라이브러리 추가하기"></a>라이브러리 추가하기</h4><p>서보모터를 사용하기 위한 Servo 라이브러리는 아두이노 IDE에 기본으로 포함되어 있다.</p>
<ul>
<li>  스케치&gt; 라이브러리 포함하기&gt; Servo 를 선택하면,</li>
<li>  #include &lt;servo.h&gt; 라이브러리가 스케치에 추가 된다.</li>
</ul>
<br>

<h4 id="schematic"><a href="#schematic" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/servo-02.jpg"></p>
<table>
<thead>
<tr>
<th>SG90</th>
<th>Brown</th>
<th>Red</th>
<th>Orange</th>
</tr>
</thead>
<tbody><tr>
<td>Arduino</td>
<td>GND</td>
<td>5V</td>
<td>10</td>
</tr>
</tbody></table>
<br>

<h4 id="sketch-서보모터-180º-회전-왕복하기"><a href="#sketch-서보모터-180º-회전-왕복하기" class="headerlink" title="sketch : 서보모터 180º 회전 왕복하기"></a>sketch : 서보모터 180º 회전 왕복하기</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Servo.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">Servo servomotor;                                <span class="comment">// servomotor 선언</span></span><br><span class="line"><span class="keyword">int</span> position = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  servomotor.attach(<span class="number">10</span>);                         <span class="comment">// servomotor 핀 설정</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(position = <span class="number">0</span>; position &lt; <span class="number">180</span>; position++)</span><br><span class="line">  &#123;</span><br><span class="line">    servomotor.write(position);                  <span class="comment">// pos값의 위치로 이동</span></span><br><span class="line">    delay(<span class="number">15</span>);                       </span><br><span class="line">  &#125;                                 </span><br><span class="line">  <span class="keyword">for</span>(position = <span class="number">180</span>; position &gt; <span class="number">0</span>; position--)  <span class="comment">// 같은 방법으로 역회전</span></span><br><span class="line">  &#123;</span><br><span class="line">    servomotor.write(position);</span><br><span class="line">    delay(<span class="number">15</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  servomotor.write(숫자)를 사용할때, 숫자는 현재 위치에서의 ‘회전각’을 의미하는 것이 아니다!</li>
<li>초기 위치를 0º로 기준삼아, 표시된 숫자의 각도 위치로 이동하라는 의미이다. 예를들어서 servomotor.write(90)와 servomotor.write(30)을 연속으로 실행하면,<ul>
<li>  90도를 회전한 뒤, 추가로 30도를 회전하여 120도 위치에 있다 → ×</li>
<li>  90도의 위치로 회전한 뒤, 역회전하여 (처음위치를 기준으로) 30도의 위치로 이동한다. → ○</li>
</ul>
</li>
</ul>
<ul>
<li>단, servo.h 라이브러리를 사용하면, 스케치 내에서 analogWrite를 사용할 수 없다는 단점도 있다.</li>
</ul>
<br>

<h4 id="sketch-시리얼모니터에서-각도값을-입력받아-회전시키기"><a href="#sketch-시리얼모니터에서-각도값을-입력받아-회전시키기" class="headerlink" title="sketch: 시리얼모니터에서 각도값을 입력받아 회전시키기"></a>sketch: 시리얼모니터에서 각도값을 입력받아 회전시키기</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Servo.h&gt;</span></span></span><br><span class="line">Servo servomotor;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  servomotor.attach(<span class="number">10</span>);</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);                  <span class="comment">// Serial 통신을 설정</span></span><br><span class="line">  <span class="keyword">while</span>(!Serial);</span><br><span class="line">  Serial.println(<span class="string">&quot;Servor Mortor&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(Serial.available())&#123;              <span class="comment">// Serial 모니터창에 어떤 값이 들어오면 실행</span></span><br><span class="line">    a = Serial.parseInt();             <span class="comment">// Serial 모니터창에서 받은 값을 a에 넘겨줌</span></span><br><span class="line">    <span class="keyword">if</span>(a&gt;=<span class="number">0</span> &amp;&amp; a&lt;=<span class="number">180</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      Serial.print(<span class="string">&quot;angle : &quot;</span>);</span><br><span class="line">      Serial.println(a);</span><br><span class="line">      servomotor.write(a);             <span class="comment">// a값에 해당하는 각도의 위치로 이동</span></span><br><span class="line">      delay(<span class="number">15</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="서보모터-SG-90-라이브러리-없이-사용하기"><a href="#서보모터-SG-90-라이브러리-없이-사용하기" class="headerlink" title="서보모터 SG-90: 라이브러리 없이 사용하기"></a>서보모터 SG-90: 라이브러리 없이 사용하기</h3><h4 id="for-SG90-with-Arduino"><a href="#for-SG90-with-Arduino" class="headerlink" title="for SG90 with Arduino"></a>for SG90 with Arduino</h4><ul>
<li>Frequency of that signal should be 50hz.</li>
<li>Its range is 544-2450 micro seconds for 0-180 degree angle.</li>
<li>Again its a little complex.</li>
<li>For example 0 degree signal will be something like 5 volts for 544 micro seconds and 0 volt for 19465.</li>
<li>highDelay<ul>
<li>the time in which we want to keep voltage high on pin 10 and this unit is in micro seconds.</li>
</ul>
</li>
<li>lowDelay<ul>
<li>the time in which want to keep voltage zero across pin 10 again this unit is going to be in micro seconds</li>
</ul>
</li>
<li>only HIGH part of signal wont operate servo. we have to send complete HIGH and LOW signal to make servo work.</li>
<li>deg_factor<ul>
<li>signal range (2450 - 544) for SG90 divided by 180 which is equal to 10.6 something that we make 11 as an integer.</li>
</ul>
</li>
<li>Loop = 20000;<ul>
<li>20000 micro seconds or 20 milli seconds is signal cycle or u can say total signal should be equal to 20 milli seconds including HIGH and LOW input. (50Hz)</li>
</ul>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> servoPin = <span class="number">10</span>;        <span class="comment">// servo is connected to pin 10.</span></span><br><span class="line"><span class="keyword">int</span> initialDelay = <span class="number">544</span>;</span><br><span class="line"><span class="keyword">int</span> highDelay, lowDelay;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> deg;</span><br><span class="line"><span class="keyword">int</span> deg_factor = <span class="number">10</span>;      </span><br><span class="line"><span class="keyword">int</span> Loop = <span class="number">20000</span>;         </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  pinMode (servoPin, OUTPUT);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (deg = <span class="number">0</span>;deg &lt;= <span class="number">180</span>; deg++) &#123;</span><br><span class="line">    servoWrite(servoPin, deg);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (deg = <span class="number">180</span>;deg &gt;= <span class="number">0</span>; deg--) &#123;</span><br><span class="line">    servoWrite(servoPin, deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">servoWrite</span><span class="params">(<span class="keyword">int</span> servo, <span class="keyword">int</span> duty)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  highDelay = initialDelay + (duty * deg_factor); <span class="comment">// setting angle</span></span><br><span class="line"></span><br><span class="line">  digitalWrite(servo, HIGH);</span><br><span class="line">  delayMicroseconds(highDelay);</span><br><span class="line">  </span><br><span class="line">  lowDelay = Loop - highDelay;</span><br><span class="line">  digitalWrite(servo, LOW);</span><br><span class="line">  delayMicroseconds(lowDelay);</span><br><span class="line"></span><br><span class="line">  delay(<span class="number">500</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="시리얼-모니터에-입력한-문자로-서보모터-회전시키기"><a href="#시리얼-모니터에-입력한-문자로-서보모터-회전시키기" class="headerlink" title="시리얼 모니터에 입력한 문자로 서보모터 회전시키기"></a>시리얼 모니터에 입력한 문자로 서보모터 회전시키기</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> servoPin = <span class="number">10</span>;        <span class="comment">// servo is connected to pin 10.</span></span><br><span class="line"><span class="keyword">int</span> initialDelay = <span class="number">544</span>;</span><br><span class="line"><span class="keyword">int</span> highDelay, lowDelay;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> deg = <span class="number">90</span>;             <span class="comment">// servo initial degree</span></span><br><span class="line"><span class="keyword">int</span> deg_factor = <span class="number">10</span>;      </span><br><span class="line"><span class="keyword">int</span> Loop = <span class="number">20000</span>;         </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);</span><br><span class="line">  pinMode (servoPin, OUTPUT);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  servoWrite(servoPin, deg);  </span><br><span class="line">    </span><br><span class="line">  <span class="keyword">while</span>(Serial.available() &gt; <span class="number">0</span>) </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">char</span> flag=Serial.read();</span><br><span class="line">    delay(<span class="number">2</span>);</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">if</span>(flag==<span class="string">&#x27;l&#x27;</span>) &#123;</span><br><span class="line">        deg = deg - <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">if</span>(deg &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            deg = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(flag==<span class="string">&#x27;r&#x27;</span>) &#123;</span><br><span class="line">        deg = deg + <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">if</span>(deg &gt; <span class="number">180</span>) &#123;</span><br><span class="line">            deg = <span class="number">180</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;      </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">servoWrite</span><span class="params">(<span class="keyword">int</span> servo, <span class="keyword">int</span> duty)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  highDelay = initialDelay + (duty * deg_factor); <span class="comment">// setting angle</span></span><br><span class="line"></span><br><span class="line">  digitalWrite(servo, HIGH);</span><br><span class="line">  delayMicroseconds(highDelay);</span><br><span class="line">  </span><br><span class="line">  lowDelay = Loop - highDelay;</span><br><span class="line">  digitalWrite(servo, LOW);</span><br><span class="line">  delayMicroseconds(lowDelay);</span><br><span class="line"></span><br><span class="line">  delay(<span class="number">500</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>l 을 입력하면, 5도 좌회전하며, ll을 입력하면 10도 좌회전한다.</li>
<li>r 을 입력하면, 5도 우회전하며, rr을 입력하면 10도 우회전한다.</li>
</ul>
<br>

<br>

<h3 id="서보모터와-인터럽트-동시에-사용하기"><a href="#서보모터와-인터럽트-동시에-사용하기" class="headerlink" title="서보모터와 인터럽트 동시에 사용하기"></a>서보모터와 인터럽트 동시에 사용하기</h3><p>서보모터가 180도 회전하는 동안, 스위치를 누르면 13번 LED가 토글되도록 만들어보자.</p>
<br>

<h4 id="schematic-1"><a href="#schematic-1" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/SG90_Interrupt01.png"></p>
<br>

<h4 id="sketch"><a href="#sketch" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> servoPin = <span class="number">10</span>;        <span class="comment">// servo is connected to pin 10.</span></span><br><span class="line"><span class="keyword">int</span> initialDelay = <span class="number">544</span>;   </span><br><span class="line"><span class="keyword">int</span> highDelay, lowDelay;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> deg;</span><br><span class="line"><span class="keyword">int</span> deg_factor = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> Loop = <span class="number">20000</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> swPin 2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ledPin 13</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debounceTime 500 <span class="comment">// Set debounce Time (unit ms) 버튼을 누른 후 0.5sec 이내에는 버튼 체크하지 않음</span></span></span><br><span class="line"></span><br><span class="line">boolean state = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  pinMode(servoPin, OUTPUT);</span><br><span class="line">  pinMode(swPin, INPUT_PULLUP);</span><br><span class="line">  pinMode(ledPin, OUTPUT);</span><br><span class="line">  attachInterrupt(digitalPinToInterrupt(swPin), swInterrupt, FALLING);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (deg = <span class="number">0</span>;deg &lt;= <span class="number">180</span>; deg++) &#123;</span><br><span class="line">    servoWrite(servoPin, deg);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (deg = <span class="number">180</span>;deg &gt;= <span class="number">0</span>; deg--) &#123;</span><br><span class="line">    servoWrite(servoPin, deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">servoWrite</span><span class="params">(<span class="keyword">int</span> servo, <span class="keyword">int</span> duty)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  highDelay = initialDelay + (duty * deg_factor); <span class="comment">// setting angle</span></span><br><span class="line"></span><br><span class="line">  digitalWrite(servo, HIGH);</span><br><span class="line">  delayMicroseconds(highDelay);</span><br><span class="line">  </span><br><span class="line">  lowDelay = Loop - highDelay;</span><br><span class="line">  digitalWrite(servo, LOW);</span><br><span class="line">  delayMicroseconds(lowDelay);</span><br><span class="line"></span><br><span class="line">  delay (<span class="number">15</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swInterrupt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> lastTime = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">long</span> now = millis();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>((now-lastTime) &gt; debounceTime) &#123;</span><br><span class="line">    state=!state;</span><br><span class="line">  &#125;</span><br><span class="line">  lastTime = now;</span><br><span class="line">  </span><br><span class="line">  digitalWrite(ledPin, state);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>스위치를 눌렀다 뗄 때, 물리적 요인에 의해 다시 스위치가 눌리는 효과가 나타나기도 함 (chattering)</li>
<li>Chattering 효과를 방지하기 위해, 하드웨어적으로 콘덴서를 붙이거나, 소프트웨어적으로 debounce 시간을 만들어 해결해야 한다.</li>
</ul>
<br>

<br>

<h3 id="레이저-모듈-추가-서보모터-날개에-부착"><a href="#레이저-모듈-추가-서보모터-날개에-부착" class="headerlink" title="레이저 모듈 추가: 서보모터 날개에 부착"></a>레이저 모듈 추가: 서보모터 날개에 부착</h3><h4 id="schematic-2"><a href="#schematic-2" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/SG90_Interrupt02.png"></p>
<br>

<h4 id="sketch-1"><a href="#sketch-1" class="headerlink" title="sketch"></a>sketch</h4><p>13번 핀에 레이저모듈을 연결하므로 위 스케치를 그대로 이용</p>
<br>

<br>

<h3 id="조도센서-추가"><a href="#조도센서-추가" class="headerlink" title="조도센서 추가"></a>조도센서 추가</h3><p>반대편에 조도센서를 놓고, 레이저 모듈이 움직이는 동안 버튼을 눌러 조도센서를 정확하게 맞추면 점수가 올라가는 게임을 만들어보자.</p>
<br>

<br>

<h3 id="Keypad에서-값을-입력받아-회전시키기"><a href="#Keypad에서-값을-입력받아-회전시키기" class="headerlink" title="Keypad에서 값을 입력받아 회전시키기"></a>Keypad에서 값을 입력받아 회전시키기</h3><h4 id="schematic-3"><a href="#schematic-3" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/servo-03.jpg"></p>
<br>

<h4 id="sketch-2"><a href="#sketch-2" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Servo.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Keypad.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">Servo servomotor;</span><br><span class="line"><span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> byte ROWS = <span class="number">4</span>;                          <span class="comment">// 키패드 배열 선언</span></span><br><span class="line"><span class="keyword">const</span> byte COLS = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> keys[ROWS][COLS] = &#123;                     <span class="comment">// 키패드 정의</span></span><br><span class="line">  &#123;<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;A&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;B&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;C&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;*&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;D&#x27;</span>&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">byte rowPins[ROWS] = &#123;<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>&#125;;            <span class="comment">// 키패드 연결 핀 설정</span></span><br><span class="line">byte colPins[COLS] = &#123;<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>&#125;;</span><br><span class="line"></span><br><span class="line">Keypad keypad = Keypad( makeKeymap(keys), rowPins, colPins, ROWS, COLS );</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  servomotor.attach(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">char</span> keyValue = keypad.getKey();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(keyValue) &#123;</span><br><span class="line">     <span class="keyword">switch</span>(keyValue) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;0&#x27;</span> :                    <span class="comment">// 시리얼 모니터에 0을 입력하면</span></span><br><span class="line">        servomotor.write(<span class="number">0</span>);       <span class="comment">// 0도 위치로 이동</span></span><br><span class="line">        delay(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;1&#x27;</span> :                    <span class="comment">// 시리얼 모니터에 1을 입력하면</span></span><br><span class="line">        servomotor.write(<span class="number">15</span>);       <span class="comment">// 15도 위치로 이동</span></span><br><span class="line">        delay(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;2&#x27;</span> :</span><br><span class="line">        servomotor.write(<span class="number">30</span>);       <span class="comment">// 30도 위치로 이동</span></span><br><span class="line">        delay(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;3&#x27;</span> :</span><br><span class="line">        servomotor.write(<span class="number">45</span>);       <span class="comment">// 45도 위치로 이동</span></span><br><span class="line">        delay(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;4&#x27;</span> :</span><br><span class="line">        servomotor.write(<span class="number">60</span>);       <span class="comment">// 60도 위치로 이동</span></span><br><span class="line">        delay(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;5&#x27;</span> :</span><br><span class="line">        servomotor.write(<span class="number">75</span>);       <span class="comment">// 75도 위치로 이동</span></span><br><span class="line">        delay(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;6&#x27;</span> :</span><br><span class="line">        servomotor.write(<span class="number">90</span>);       <span class="comment">// 90도 위치로 이동</span></span><br><span class="line">        delay(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;7&#x27;</span> :</span><br><span class="line">        servomotor.write(<span class="number">120</span>);       <span class="comment">// 120도 위치로 이동</span></span><br><span class="line">        delay(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;8&#x27;</span> :</span><br><span class="line">        servomotor.write(<span class="number">150</span>);       <span class="comment">// 150도 위치로 이동</span></span><br><span class="line">        delay(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;9&#x27;</span> :</span><br><span class="line">        servomotor.write(<span class="number">180</span>);       <span class="comment">// 180도 위치로 이동</span></span><br><span class="line">        delay(<span class="number">15</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span> :</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  delay(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="비밀번호-확인하여-서보모터-회전시키기"><a href="#비밀번호-확인하여-서보모터-회전시키기" class="headerlink" title="비밀번호 확인하여 서보모터 회전시키기"></a>비밀번호 확인하여 서보모터 회전시키기</h3><p>서보모터의 날개를 금고의 개폐장치로 사용하여, 비밀번호 금고를 만들어 보자.</p>
<br>

<h4 id="sketch-3"><a href="#sketch-3" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Keypad.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Servo.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tru=<span class="number">0</span>;                        <span class="comment">// 비밀번호가 맞는지 확인</span></span><br><span class="line"><span class="keyword">int</span> count=<span class="number">0</span>;                      <span class="comment">// 4자리수 카운트</span></span><br><span class="line"><span class="keyword">char</span> PW[<span class="number">4</span>]=&#123;<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;A&#x27;</span>&#125;;     <span class="comment">//비밀번호</span></span><br><span class="line"></span><br><span class="line">Servo servomotor;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 키패드 설정 시작</span></span><br><span class="line"><span class="keyword">const</span> byte ROWS = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">const</span> byte COLS = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">byte rowPins[ROWS] = &#123;<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>&#125;;</span><br><span class="line">byte colPins[COLS] = &#123;<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> keys[ROWS][COLS] = &#123;</span><br><span class="line">  &#123;<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;A&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;B&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;C&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;*&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;D&#x27;</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Keypad keypad = Keypad( makeKeymap(keys), rowPins, colPins, ROWS, COLS );</span><br><span class="line"><span class="comment">// 키패드 설정 끝</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);</span><br><span class="line">  servomotor.attach(<span class="number">10</span>);          <span class="comment">// 서보모터 핀 설정</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">char</span> key = keypad.getKey();     <span class="comment">// 키패드 입력 변수</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (key) &#123;</span><br><span class="line">    Serial.println(key);</span><br><span class="line">    <span class="keyword">if</span>(key==PW[count]) &#123;          <span class="comment">// 입력번호와 비밀번호가 맞으면</span></span><br><span class="line">        count++;                  <span class="comment">// 자리수 카운트 1증가</span></span><br><span class="line">        tru++;                    <span class="comment">// 맞은수 값 1증가</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">else</span> <span class="keyword">if</span>(key!=PW[count]) &#123;    <span class="comment">// 입력번호와 비밀번호가 틀리면</span></span><br><span class="line">        count++;                  <span class="comment">// 자리수 카운트 값만 1증가</span></span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span>(key==<span class="string">&#x27;#&#x27;</span>)                 <span class="comment">// #을 누르면</span></span><br><span class="line">        re();                     <span class="comment">// 초기화</span></span><br><span class="line">     <span class="keyword">if</span>(count==<span class="number">4</span>) &#123;               <span class="comment">// 4자리 입력받은 값이</span></span><br><span class="line">        <span class="keyword">if</span>(tru==<span class="number">4</span>)                <span class="comment">// 모두 맞으면</span></span><br><span class="line">          Su();                   <span class="comment">// 성공</span></span><br><span class="line">        <span class="keyword">else</span>                      <span class="comment">// 그렇지 않으면(4자리는 입력했는데, 모두 맞지는 않았으면)</span></span><br><span class="line">          Fa();                   <span class="comment">// 실패</span></span><br><span class="line">        tru=<span class="number">0</span>;                    <span class="comment">// tru, count값 초기화</span></span><br><span class="line">        count=<span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Su</span><span class="params">()</span> </span>&#123;                          <span class="comment">// 성공했을 때 실행</span></span><br><span class="line">  servomotor.write(<span class="number">90</span>);              <span class="comment">// 90도 돌려서 도어락 열림</span></span><br><span class="line">  Serial.println(<span class="string">&quot;open the door&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fa</span><span class="params">()</span> </span>&#123;                        <span class="comment">// 실패한 경우는 도어락 잠금 유지</span></span><br><span class="line">  servomotor.write(<span class="number">0</span>);</span><br><span class="line">  Serial.println(<span class="string">&quot;close the door&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">re</span><span class="params">()</span> </span>&#123;                        <span class="comment">// 비밀번호 입력중 #을 입력하면 초기화하고 도어락 잠금 유지</span></span><br><span class="line">  tru=<span class="number">0</span>;</span><br><span class="line">  count=<span class="number">0</span>;</span><br><span class="line">  servomotor.write(<span class="number">0</span>);</span><br><span class="line">  Serial.println(<span class="string">&quot;password reset&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="Joystick을-사용하여-2개의-서보모터-제어하기"><a href="#Joystick을-사용하여-2개의-서보모터-제어하기" class="headerlink" title="Joystick을 사용하여 2개의 서보모터 제어하기"></a>Joystick을 사용하여 2개의 서보모터 제어하기</h3><h4 id="schematic-4"><a href="#schematic-4" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/SG90_Joystick01.png"></p>
<br>

<h4 id="sketch-4"><a href="#sketch-4" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> JSTICKPIN A0      <span class="comment">// joystick is connected to pin 11</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> servoPin = <span class="number">10</span>;        <span class="comment">// servo is connected to pin 10</span></span><br><span class="line"><span class="keyword">int</span> initialDelay = <span class="number">544</span>;</span><br><span class="line"><span class="keyword">int</span> highDelay, lowDelay;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> deg, Jstick, duty;</span><br><span class="line"><span class="keyword">int</span> deg_factor = <span class="number">10</span>;      </span><br><span class="line"><span class="keyword">int</span> Loop = <span class="number">20000</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  pinMode (servoPin, OUTPUT);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  PrintValue();</span><br><span class="line">    </span><br><span class="line">  Jstick = analogRead(JSTICKPIN);          </span><br><span class="line">  deg = <span class="built_in">map</span>(Jstick, <span class="number">0</span>, <span class="number">1023</span>, <span class="number">0</span>, <span class="number">180</span>);     </span><br><span class="line">  servoWrite(servoPin, deg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">servoWrite</span><span class="params">(<span class="keyword">int</span> servo, <span class="keyword">int</span> duty)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  highDelay = initialDelay + (duty * deg_factor); <span class="comment">// setting angle</span></span><br><span class="line"></span><br><span class="line">  digitalWrite(servo, HIGH);</span><br><span class="line">  delayMicroseconds(highDelay);</span><br><span class="line"></span><br><span class="line">  lowDelay = Loop - highDelay;</span><br><span class="line">  digitalWrite(servo, LOW);</span><br><span class="line">  delayMicroseconds(lowDelay);</span><br><span class="line"></span><br><span class="line">  delay (<span class="number">15</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Serial.print(analogRead(JSTICKPIN));</span><br><span class="line">    Serial.println (<span class="string">&quot; Joystick Value&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-09-07T08:23:00.000Z" title="2018. 9. 7. 오후 4:23:00">2018-09-07</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-11-26T16:00:16.423Z" title="2021. 11. 27. 오전 12:00:16">2021-11-27</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/arduino/">arduino</a></span><span class="level-item">16분안에 읽기 (약 2452 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/09/07/Arduino-Piezo-Buzzer/">Arduino, 피에조 부저</a></h1><div class="content"><h3 id="Buzzer의-종류"><a href="#Buzzer의-종류" class="headerlink" title="Buzzer의 종류"></a>Buzzer의 종류</h3><table>
<thead>
<tr>
<th align="center">Active Buzzer (능동형 부저)</th>
<th align="center">Passive Buzzer (수동형 부저)</th>
</tr>
</thead>
<tbody><tr>
<td align="center">有源蜂鸣器 (KY-012)</td>
<td align="center">无源蜂鸣器 (KY-006)</td>
</tr>
<tr>
<td align="center">회로가 내장되어 있어, 전원만 인가하면 소리가 나므로 프로그램 제어가 편리함</td>
<td align="center">내부에 진동원이 없어, 스케치에 주파수를 지정하여야만 소리를 냄</td>
</tr>
<tr>
<td align="center">원하는 주파수의 소리를 낼 수 없음</td>
<td align="center">원하는 주파수의 소리를 만들어낼 수 있음</td>
</tr>
<tr>
<td align="center">패시브 부저에 비해 비쌈 (모듈 1개 0.9위안)</td>
<td align="center">액티브 부저에 비해 저렴 (모듈 1개 0.8위안)</td>
</tr>
<tr>
<td align="center"><img src="/image/Buzzer-active.png" style="zoom:50%;"></td>
<td align="center"><img src="/image/Buzzer-passive.png" style="zoom:50%;"></td>
</tr>
<tr>
<td align="center"><img src="/image/Buzzer-active3.png" style="zoom:50%;"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><img src="/image/Buzzer-active1.png" style="zoom:50%;"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><img src="/image/Buzzer-active2.png" style="zoom:50%;"></td>
<td align="center"><img src="/image/Buzzer-passive2.png" style="zoom:50%;"></td>
</tr>
</tbody></table>
<ul>
<li>모듈로 판매하는 제품의 경우 겉모양으로는 구별이 어렵다. Active Buzzer의 경우 초기 판매시 스티커를 붙여서 판매하지만, 스티커가 떨어져 나간 상태라면 Passive Buzzer와 구별하기 어렵다. 또한 반드시 스티커가 붙은 형태로 판매하는 것도 아니다.</li>
<li>Active Buzzer의 경우 스티커로 사용전압을 표시하기도 한다. 빨간색은 3V, 파란색은 5V, 보라색은 12V용이다.</li>
<li>Active Buzzer 모듈의 경우 低电平触发(혹은 Low Level) / 高电平触发(혹은 High Level) 2가지 형태로 표기가 되어 있다. <strong>低电平触发은 DigitalWrite에서 HIGH</strong>일 때 소리가 나며, <strong>高电平触发은 LOW</strong>일 때 소리가 난다.</li>
<li>모듈 형태가 아닌 단일 부품의 형태라면 연결 핀이 나와 있는 아랫면을 보면 구별할 수 있다. 일반적으로 Active Buzzer는 검은색 실리콘으로 밀폐되어 있으며, Passive Buzzer는 핀의 접합부위가 그대로 노출되어 있다.</li>
<li>Active Buzzer와 Passive Buzzer를 구별하는 가장 좋은 방법은 사용전압에 해당하는 전압(낮은 전압의 건전지도 가능)의 건전지를 연결시켜보는 것이다. 소리가 나면 Active, 나지 않으면 Passive라고 생각하면 된다.</li>
</ul>
<br>

<br>

<h3 id="Active-Buzzer"><a href="#Active-Buzzer" class="headerlink" title="Active Buzzer"></a>Active Buzzer</h3><h4 id="schematic"><a href="#schematic" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/Buzzer01.png"></p>
<br>

<h4 id="sketch"><a href="#sketch" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  pinMode (<span class="number">11</span>, OUTPUT);        <span class="comment">// 11번 핀을 출력으로 설정</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  digitalWrite (<span class="number">11</span>, HIGH);     <span class="comment">// 11번 핀 부저 ON</span></span><br><span class="line">  delay (<span class="number">1000</span>);</span><br><span class="line">  digitalWrite (<span class="number">11</span>, LOW);      <span class="comment">// 11번 핀 부저 OFF</span></span><br><span class="line">  delay (<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="과제"><a href="#과제" class="headerlink" title="과제"></a>과제</h4><p>tact 스위치를 누르면 액티브 부저 소리 울리기</p>
<br>

<br>

<h3 id="Passive-Buzzer-사용"><a href="#Passive-Buzzer-사용" class="headerlink" title="Passive Buzzer 사용"></a>Passive Buzzer 사용</h3><h4 id="주파수"><a href="#주파수" class="headerlink" title="주파수"></a>주파수</h4><ul>
<li>0옥타브(C0<del>B0): 16</del>31(Hz) (초저주파)</li>
<li>1옥타브(C1<del>B1): 33</del>62(Hz)</li>
<li>2옥타브(C2<del>B2): 65</del>123(Hz)<ul>
<li>중저음</li>
</ul>
</li>
<li><strong>3옥타브(C3<del>B3): 131</del>247(Hz)</strong><ul>
<li>기본 음계에 해당하는 옥타브</li>
</ul>
</li>
<li>4옥타브(C4<del>B4): 262</del>494(Hz)<ul>
<li>일반적으로 고음이라고 불리는 영역</li>
<li>일반적인 남자의 경우 G4~B4음이 최고음</li>
<li>음악의 기준음인 **가온 라(A4)(440Hz)**가 속한 영역</li>
</ul>
</li>
<li>5옥타브(C5<del>B5): 523</del>988(Hz)<ul>
<li>일반적인 여성의 경우 D5의 음까지는 낼 수 있고, 고음을 잘 내는 경우 E5까지는 무난함</li>
</ul>
</li>
<li>6옥타브(C6<del>B6): 1047</del>1976(Hz)</li>
<li>7옥타브(C7<del>B7): 2093</del>3951(Hz)</li>
<li>8옥타브(C8<del>B8): 4186</del>7902(Hz)</li>
<li>9옥타브(C9<del>B9): 8372</del>15804(Hz)</li>
<li>10옥타브(C10<del>B10): 16744</del>31608(Hz) (초음파)</li>
</ul>
<br>

<ul>
<li><p>한 옥타브 내려가면 주파수가 1/2배, 올라가면 2배가 되고, 한 음계 올라가면 2^(1/12) 배가 된다.</p>
</li>
<li><p>0옥타브 중간쯤(20Hz)부터나, 10옥타브 중간쯤(20kHz)부터는 소리가 들리지 않는다. 사람의 가청 영역을 벗어나기 때문. 이를 각각 초저주파, 초음파라고 한다. 어릴 수록 고음이 잘 들리기 때문에, “선생님은 못 듣는 벨소리”같은 것을 만들수 있다.</p>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
</tr>
</thead>
<tbody><tr>
<td>C(도)</td>
<td>16</td>
<td>33</td>
<td>65</td>
<td>131</td>
<td>262</td>
<td>523</td>
<td>1046.5</td>
<td>2093</td>
<td>4186</td>
</tr>
<tr>
<td>C♯</td>
<td>17</td>
<td>35</td>
<td>69</td>
<td>139</td>
<td>277</td>
<td>554</td>
<td>1109</td>
<td>2217.5</td>
<td>4435</td>
</tr>
<tr>
<td>D(레)</td>
<td>18</td>
<td>37</td>
<td>73</td>
<td>147</td>
<td>294</td>
<td>587</td>
<td>1175</td>
<td>2349</td>
<td>4699</td>
</tr>
<tr>
<td>D♯</td>
<td>20</td>
<td>39</td>
<td>78</td>
<td>156</td>
<td>311</td>
<td>622</td>
<td>1244.5</td>
<td>2489</td>
<td>4978</td>
</tr>
<tr>
<td>E(미)</td>
<td>21</td>
<td>41</td>
<td>82</td>
<td>165</td>
<td>330</td>
<td>659</td>
<td>1318.5</td>
<td>2637</td>
<td>5274</td>
</tr>
<tr>
<td>F(파)</td>
<td>22</td>
<td>44</td>
<td>87</td>
<td>175</td>
<td>349</td>
<td>698.5</td>
<td>1397</td>
<td>2794</td>
<td>5588</td>
</tr>
<tr>
<td>F♯</td>
<td>23</td>
<td>46</td>
<td>92.5</td>
<td>185</td>
<td>370</td>
<td>740</td>
<td>1480</td>
<td>2960</td>
<td>5920</td>
</tr>
<tr>
<td>G(솔)</td>
<td>25</td>
<td>49</td>
<td>98</td>
<td>196</td>
<td>392</td>
<td>784</td>
<td>1568</td>
<td>3136</td>
<td>6272</td>
</tr>
<tr>
<td>G♯</td>
<td>26</td>
<td>52</td>
<td>104</td>
<td>208</td>
<td>415</td>
<td>831</td>
<td>1661</td>
<td>3322.5</td>
<td>6645</td>
</tr>
<tr>
<td>A(라)</td>
<td>28</td>
<td>55</td>
<td>110</td>
<td>220</td>
<td><strong>440</strong></td>
<td>880</td>
<td>1760</td>
<td>3520</td>
<td>7040</td>
</tr>
<tr>
<td>A♯</td>
<td>29</td>
<td>58</td>
<td>116.5</td>
<td>233</td>
<td>466</td>
<td>932</td>
<td>1865</td>
<td>3729</td>
<td>7459</td>
</tr>
<tr>
<td>B(시)</td>
<td>31</td>
<td>62</td>
<td>123.5</td>
<td>247</td>
<td>494</td>
<td>988</td>
<td>1975.5</td>
<td>3951</td>
<td>7902</td>
</tr>
</tbody></table>
<br>

<h4 id="Pin-Map"><a href="#Pin-Map" class="headerlink" title="Pin Map"></a>Pin Map</h4><table>
<thead>
<tr>
<th>Arduino</th>
<th>Active Buzzer</th>
<th>Passive Buzzer</th>
</tr>
</thead>
<tbody><tr>
<td>11</td>
<td>S</td>
<td>S</td>
</tr>
<tr>
<td>5V</td>
<td>표기없음</td>
<td>표기없음</td>
</tr>
<tr>
<td>GND</td>
<td>(-)</td>
<td>(-)</td>
</tr>
</tbody></table>
<br>

<h4 id="sketch-Passive-Buzzer"><a href="#sketch-Passive-Buzzer" class="headerlink" title="sketch : Passive Buzzer"></a>sketch : Passive Buzzer</h4><h5 id="tone-사용방법"><a href="#tone-사용방법" class="headerlink" title="tone() 사용방법"></a>tone() 사용방법</h5><ul>
<li><p>tone 함수는 3개의 매개변수(핀, 주파수, 음길이)를 사용하며, 마지막 매개변수(음길이)는 생략 가능하다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tone(<span class="number">11</span>, <span class="number">262</span>, <span class="number">500</span>);   <span class="comment">// 11번 핀에 연결된 부저에 C3음을 0.5초 연주</span></span><br></pre></td></tr></table></figure></li>
<li><p>마지막 매개변수를 사용하지 않고 tone을 연속으로 사용하는 경우 주의가 필요하다. 예를들어,</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tone(<span class="number">11</span>, <span class="number">262</span>);   <span class="comment">// 11번 핀에 연결된 부저에 C3음을 0.5초 연주</span></span><br><span class="line">tone(<span class="number">11</span>, <span class="number">294</span>);   <span class="comment">// 11번 핀에 연결된 부저에 D3음을 0.5초 연주</span></span><br></pre></td></tr></table></figure>

<p>이렇게 tone을 연속으로 사용하면 C3음을 소리낸 이후에, D4음을 내는 것이 아니라 C3음이 계속되므로, noTone함수를 사용하여 소리 출력을 멈추어야 한다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tone(<span class="number">11</span>, <span class="number">262</span>);   <span class="comment">// 11번 핀에 연결된 부저에 C3음을 0.5초 연주</span></span><br><span class="line">noTone(<span class="number">11</span>);</span><br><span class="line">tone(<span class="number">11</span>, <span class="number">294</span>);   <span class="comment">// 11번 핀에 연결된 부저에 D3음을 0.5초 연주</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>마지막 매개변수를 사용할 때, 중간에 음을 멈추는 구간을 만들려면, delay를 사용한다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tone(<span class="number">11</span>, <span class="number">262</span>, <span class="number">500</span>);   <span class="comment">// 11번 핀에 연결된 부저에 C3음을 0.5초 연주</span></span><br><span class="line">delay(<span class="number">600</span>);</span><br><span class="line">tone(<span class="number">11</span>, <span class="number">294</span>, <span class="number">500</span>);   <span class="comment">// 11번 핀에 연결된 부저에 D3음을 0.5초 연주</span></span><br></pre></td></tr></table></figure>

<p>C3음을 0.5초 소리낸 후 delay(600) 에 의해 0.6초를 쉬는 것이 아니라, delay(600) 의 시간 중, 0.5초는 C3음을 소리내는 데 사용하고, 나머지 0.1초를 쉰다.</p>
</li>
</ul>
<br>

<h4 id="예시"><a href="#예시" class="headerlink" title="예시"></a>예시</h4><h5 id="도레미파솔라시도"><a href="#도레미파솔라시도" class="headerlink" title="도레미파솔라시도"></a>도레미파솔라시도</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> BUZZER_PIN = <span class="number">11</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> C_4 = <span class="number">261</span>;   <span class="comment">// 도</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> D_4 = <span class="number">294</span>;   <span class="comment">// 레</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> E_4 = <span class="number">330</span>;   <span class="comment">// 미</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> F_4 = <span class="number">349</span>;   <span class="comment">// 파</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> G_4 = <span class="number">392</span>;   <span class="comment">// 솔</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> A_4 = <span class="number">440</span>;   <span class="comment">// 라</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> B_4 = <span class="number">494</span>;   <span class="comment">// 시</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  tone(BUZZER_PIN, C_4);</span><br><span class="line">  delay(<span class="number">500</span>);</span><br><span class="line"> </span><br><span class="line">  tone(BUZZER_PIN, D_4);</span><br><span class="line">  delay(<span class="number">500</span>);</span><br><span class="line"> </span><br><span class="line">  tone(BUZZER_PIN, E_4);</span><br><span class="line">  delay(<span class="number">500</span>);</span><br><span class="line"> </span><br><span class="line">  tone(BUZZER_PIN, F_4);</span><br><span class="line">  delay(<span class="number">500</span>);</span><br><span class="line"> </span><br><span class="line">  tone(BUZZER_PIN, G_4);</span><br><span class="line">  delay(<span class="number">500</span>);</span><br><span class="line"> </span><br><span class="line">  tone(BUZZER_PIN, A_4);</span><br><span class="line">  delay(<span class="number">500</span>);</span><br><span class="line"> </span><br><span class="line">  tone(BUZZER_PIN, B_4);</span><br><span class="line">  delay(<span class="number">500</span>);</span><br><span class="line"> </span><br><span class="line">  noTone(BUZZER_PIN);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h5 id="노래-연주-Super-Mario-Theme"><a href="#노래-연주-Super-Mario-Theme" class="headerlink" title="노래 연주: Super Mario Theme"></a>노래 연주: Super Mario Theme</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Arduino Mario Bros Tunes With Piezo Buzzer and PWM</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">             by : ARDUTECH</span></span><br><span class="line"><span class="comment">  Connect the positive side of the Buzzer to pin 11,</span></span><br><span class="line"><span class="comment">  then the negative side to a 1k ohm resistor. Connect</span></span><br><span class="line"><span class="comment">  the other side of the 1 k ohm resistor to</span></span><br><span class="line"><span class="comment">  ground(GND) pin on the Arduino.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_B0  31</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_C1  33</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_CS1 35</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D1  37</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DS1 39</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_E1  41</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_F1  44</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_FS1 46</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_G1  49</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_GS1 52</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_A1  55</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_AS1 58</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_B1  62</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_C2  65</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_CS2 69</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D2  73</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DS2 78</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_E2  82</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_F2  87</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_FS2 93</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_G2  98</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_GS2 104</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_A2  110</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_AS2 117</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_B2  123</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_C3  131</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_CS3 139</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D3  147</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DS3 156</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_E3  165</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_F3  175</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_FS3 185</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_G3  196</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_GS3 208</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_A3  220</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_AS3 233</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_B3  247</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_C4  262</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_CS4 277</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D4  294</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DS4 311</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_E4  330</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_F4  349</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_FS4 370</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_G4  392</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_GS4 415</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_A4  440</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_AS4 466</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_B4  494</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_C5  523</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_CS5 554</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D5  587</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DS5 622</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_E5  659</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_F5  698</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_FS5 740</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_G5  784</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_GS5 831</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_A5  880</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_AS5 932</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_B5  988</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_C6  1047</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_CS6 1109</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D6  1175</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DS6 1245</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_E6  1319</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_F6  1397</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_FS6 1480</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_G6  1568</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_GS6 1661</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_A6  1760</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_AS6 1865</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_B6  1976</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_C7  2093</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_CS7 2217</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D7  2349</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DS7 2489</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_E7  2637</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_F7  2794</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_FS7 2960</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_G7  3136</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_GS7 3322</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_A7  3520</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_AS7 3729</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_B7  3951</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_C8  4186</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_CS8 4435</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_D8  4699</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NOTE_DS8 4978</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> melodyPin 11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Mario main theme melody</span></span><br><span class="line"><span class="keyword">int</span> melody[] = &#123;</span><br><span class="line">  NOTE_E7, NOTE_E7, <span class="number">0</span>, NOTE_E7,</span><br><span class="line">  <span class="number">0</span>, NOTE_C7, NOTE_E7, <span class="number">0</span>,</span><br><span class="line">  NOTE_G7, <span class="number">0</span>, <span class="number">0</span>,  <span class="number">0</span>,</span><br><span class="line">  NOTE_G6, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  NOTE_C7, <span class="number">0</span>, <span class="number">0</span>, NOTE_G6,</span><br><span class="line">  <span class="number">0</span>, <span class="number">0</span>, NOTE_E6, <span class="number">0</span>,</span><br><span class="line">  <span class="number">0</span>, NOTE_A6, <span class="number">0</span>, NOTE_B6,</span><br><span class="line">  <span class="number">0</span>, NOTE_AS6, NOTE_A6, <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  NOTE_G6, NOTE_E7, NOTE_G7,</span><br><span class="line">  NOTE_A7, <span class="number">0</span>, NOTE_F7, NOTE_G7,</span><br><span class="line">  <span class="number">0</span>, NOTE_E7, <span class="number">0</span>, NOTE_C7,</span><br><span class="line">  NOTE_D7, NOTE_B6, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  NOTE_C7, <span class="number">0</span>, <span class="number">0</span>, NOTE_G6,</span><br><span class="line">  <span class="number">0</span>, <span class="number">0</span>, NOTE_E6, <span class="number">0</span>,</span><br><span class="line">  <span class="number">0</span>, NOTE_A6, <span class="number">0</span>, NOTE_B6,</span><br><span class="line">  <span class="number">0</span>, NOTE_AS6, NOTE_A6, <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">  NOTE_G6, NOTE_E7, NOTE_G7,</span><br><span class="line">  NOTE_A7, <span class="number">0</span>, NOTE_F7, NOTE_G7,</span><br><span class="line">  <span class="number">0</span>, NOTE_E7, <span class="number">0</span>, NOTE_C7,</span><br><span class="line">  NOTE_D7, NOTE_B6, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Mario main theme tempo</span></span><br><span class="line"><span class="keyword">int</span> tempo[] = &#123;</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line"></span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line"></span><br><span class="line">  <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line"></span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line"></span><br><span class="line">  <span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Underworld melody</span></span><br><span class="line"><span class="keyword">int</span> underworld_melody[] = &#123;</span><br><span class="line">  NOTE_C4, NOTE_C5, NOTE_A3, NOTE_A4,</span><br><span class="line">  NOTE_AS3, NOTE_AS4, <span class="number">0</span>,</span><br><span class="line">  <span class="number">0</span>,</span><br><span class="line">  NOTE_C4, NOTE_C5, NOTE_A3, NOTE_A4,</span><br><span class="line">  NOTE_AS3, NOTE_AS4, <span class="number">0</span>,</span><br><span class="line">  <span class="number">0</span>,</span><br><span class="line">  NOTE_F3, NOTE_F4, NOTE_D3, NOTE_D4,</span><br><span class="line">  NOTE_DS3, NOTE_DS4, <span class="number">0</span>,</span><br><span class="line">  <span class="number">0</span>,</span><br><span class="line">  NOTE_F3, NOTE_F4, NOTE_D3, NOTE_D4,</span><br><span class="line">  NOTE_DS3, NOTE_DS4, <span class="number">0</span>,</span><br><span class="line">  <span class="number">0</span>, NOTE_DS4, NOTE_CS4, NOTE_D4,</span><br><span class="line">  NOTE_CS4, NOTE_DS4,</span><br><span class="line">  NOTE_DS4, NOTE_GS3,</span><br><span class="line">  NOTE_G3, NOTE_CS4,</span><br><span class="line">  NOTE_C4, NOTE_FS4, NOTE_F4, NOTE_E3, NOTE_AS4, NOTE_A4,</span><br><span class="line">  NOTE_GS4, NOTE_DS4, NOTE_B3,</span><br><span class="line">  NOTE_AS3, NOTE_A3, NOTE_GS3,</span><br><span class="line">  <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Underwolrd tempo</span></span><br><span class="line"><span class="keyword">int</span> underworld_tempo[] = &#123;</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">6</span>,</span><br><span class="line">  <span class="number">3</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">6</span>,</span><br><span class="line">  <span class="number">3</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">6</span>,</span><br><span class="line">  <span class="number">3</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">12</span>,</span><br><span class="line">  <span class="number">12</span>, <span class="number">12</span>, <span class="number">6</span>,</span><br><span class="line">  <span class="number">6</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>,</span><br><span class="line">  <span class="number">6</span>, <span class="number">6</span>,</span><br><span class="line">  <span class="number">6</span>, <span class="number">6</span>,</span><br><span class="line">  <span class="number">6</span>, <span class="number">6</span>,</span><br><span class="line">  <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">18</span>,</span><br><span class="line">  <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>,</span><br><span class="line">  <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>,</span><br><span class="line">  <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  pinMode(melodyPin, OUTPUT);  <span class="comment">// buzzer</span></span><br><span class="line">  pinMode(<span class="number">13</span>, OUTPUT);         <span class="comment">// led indicator when singing a note</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">//sing the tunes</span></span><br><span class="line">  sing(<span class="number">1</span>);</span><br><span class="line">  sing(<span class="number">1</span>);</span><br><span class="line">  sing(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> song = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sing</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// iterate over the notes of the melody:</span></span><br><span class="line">  song = s;</span><br><span class="line">  <span class="keyword">if</span> (song == <span class="number">2</span>) &#123;</span><br><span class="line">    Serial.println(<span class="string">&quot; &#x27;Underworld Theme&#x27;&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> size = <span class="keyword">sizeof</span>(underworld_melody) / <span class="keyword">sizeof</span>(<span class="keyword">int</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> thisNote = <span class="number">0</span>; thisNote &lt; size; thisNote++) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// to calculate the note duration, take one second</span></span><br><span class="line">      <span class="comment">// divided by the note type.</span></span><br><span class="line">      <span class="comment">//e.g. quarter note = 1000 / 4, eighth note = 1000/8, etc.</span></span><br><span class="line">      <span class="keyword">int</span> noteDuration = <span class="number">1000</span> / underworld_tempo[thisNote];</span><br><span class="line"></span><br><span class="line">      buzz(melodyPin, underworld_melody[thisNote], noteDuration);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// to distinguish the notes, set a minimum time between them.</span></span><br><span class="line">      <span class="comment">// the note&#x27;s duration + 30% seems to work well:</span></span><br><span class="line">      <span class="keyword">int</span> pauseBetweenNotes = noteDuration * <span class="number">1.30</span>;</span><br><span class="line">      delay(pauseBetweenNotes);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// stop the tone playing:</span></span><br><span class="line">      buzz(melodyPin, <span class="number">0</span>, noteDuration);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">    Serial.println(<span class="string">&quot; &#x27;Mario Theme&#x27;&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> size = <span class="keyword">sizeof</span>(melody) / <span class="keyword">sizeof</span>(<span class="keyword">int</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> thisNote = <span class="number">0</span>; thisNote &lt; size; thisNote++) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// to calculate the note duration, take one second</span></span><br><span class="line">      <span class="comment">// divided by the note type.</span></span><br><span class="line">      <span class="comment">//e.g. quarter note = 1000 / 4, eighth note = 1000/8, etc.</span></span><br><span class="line">      <span class="keyword">int</span> noteDuration = <span class="number">1000</span> / tempo[thisNote];</span><br><span class="line"></span><br><span class="line">      buzz(melodyPin, melody[thisNote], noteDuration);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// to distinguish the notes, set a minimum time between them.</span></span><br><span class="line">      <span class="comment">// the note&#x27;s duration + 30% seems to work well:</span></span><br><span class="line">      <span class="keyword">int</span> pauseBetweenNotes = noteDuration * <span class="number">1.30</span>;</span><br><span class="line">      delay(pauseBetweenNotes);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// stop the tone playing:</span></span><br><span class="line">      buzz(melodyPin, <span class="number">0</span>, noteDuration);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">buzz</span><span class="params">(<span class="keyword">int</span> targetPin, <span class="keyword">long</span> frequency, <span class="keyword">long</span> length)</span> </span>&#123;</span><br><span class="line">  digitalWrite(<span class="number">13</span>, HIGH);</span><br><span class="line">  <span class="keyword">long</span> delayValue = <span class="number">1000000</span> / frequency / <span class="number">2</span>; <span class="comment">// calculate the delay value between transitions</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">//// 1 second&#x27;s worth of microseconds, divided by the frequency, then split in half since</span></span><br><span class="line">  <span class="comment">//// there are two phases to each cycle</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">long</span> numCycles = frequency * length / <span class="number">1000</span>; <span class="comment">// calculate the number of cycles for proper timing</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">//// multiply frequency, which is really cycles per second, by the number of seconds to</span></span><br><span class="line">  <span class="comment">//// get the total number of cycles to produce</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">long</span> i = <span class="number">0</span>; i &lt; numCycles; i++) &#123; <span class="comment">// for the calculated length of time...</span></span><br><span class="line">    digitalWrite(targetPin, HIGH); <span class="comment">// write the buzzer pin high to push out the diaphram</span></span><br><span class="line">    delayMicroseconds(delayValue); <span class="comment">// wait for the calculated delay value</span></span><br><span class="line">    digitalWrite(targetPin, LOW); <span class="comment">// write the buzzer pin low to pull back the diaphram</span></span><br><span class="line">    delayMicroseconds(delayValue); <span class="comment">// wait again or the calculated delay value</span></span><br><span class="line">  &#125;</span><br><span class="line">  digitalWrite(<span class="number">13</span>, LOW);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h5 id="노래-연주-학교종이-땡땡땡"><a href="#노래-연주-학교종이-땡땡땡" class="headerlink" title="노래 연주: 학교종이 땡땡땡"></a>노래 연주: 학교종이 땡땡땡</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> BUZZER_PIN = <span class="number">11</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> C_4 = <span class="number">261</span>;   <span class="comment">// 도</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> D_4 = <span class="number">294</span>;   <span class="comment">// 레</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> E_4 = <span class="number">330</span>;   <span class="comment">// 미</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> F_4 = <span class="number">349</span>;   <span class="comment">// 파</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> G_4 = <span class="number">392</span>;   <span class="comment">// 솔</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> A_4 = <span class="number">440</span>;   <span class="comment">// 라</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> B_4 = <span class="number">494</span>;   <span class="comment">// 시</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>  &#123;</span> </span><br><span class="line">  <span class="keyword">int</span> tone;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">long</span> delay;</span><br><span class="line">&#125; TAD;<span class="comment">//Tone And Delay</span></span><br><span class="line"> </span><br><span class="line">TAD music[] =</span><br><span class="line">  &#123;</span><br><span class="line">    &#123;G_4, <span class="number">100</span>&#125;, &#123;G_4, <span class="number">100</span>&#125;, &#123;A_4, <span class="number">100</span>&#125;, &#123;A_4, <span class="number">100</span>&#125;, &#123;G_4, <span class="number">100</span>&#125;, &#123;G_4, <span class="number">100</span>&#125;, &#123;E_4, <span class="number">200</span>&#125;,</span><br><span class="line">    &#123;G_4, <span class="number">100</span>&#125;, &#123;G_4, <span class="number">100</span>&#125;, &#123;E_4, <span class="number">100</span>&#125;, &#123;E_4, <span class="number">100</span>&#125;, &#123;D_4, <span class="number">200</span>&#125;, &#123;G_4, <span class="number">100</span>&#125;, &#123;G_4, <span class="number">100</span>&#125;,</span><br><span class="line">    &#123;A_4, <span class="number">100</span>&#125;, &#123;A_4, <span class="number">100</span>&#125;, &#123;G_4, <span class="number">100</span>&#125;, &#123;G_4, <span class="number">100</span>&#125;, &#123;E_4, <span class="number">200</span>&#125;, &#123;G_4, <span class="number">100</span>&#125;, &#123;E_4, <span class="number">100</span>&#125;,</span><br><span class="line">    &#123;D_4, <span class="number">100</span>&#125;, &#123;E_4, <span class="number">100</span>&#125;, &#123;C_4, <span class="number">200</span>&#125;</span><br><span class="line">  &#125;;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> musicLen;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  musicLen = <span class="keyword">sizeof</span>(music) / <span class="keyword">sizeof</span>(TAD);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; musicLen; i++) &#123;</span><br><span class="line">    tone(BUZZER_PIN, music[i].tone);</span><br><span class="line">    delay(music[i].delay * <span class="number">5</span>);</span><br><span class="line"> </span><br><span class="line">    noTone(BUZZER_PIN);</span><br><span class="line">    delay(<span class="number">30</span>);</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  noTone(BUZZER_PIN);</span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="과제-1"><a href="#과제-1" class="headerlink" title="과제"></a>과제</h4><ul>
<li>크리스마스 캐롤 만들어보기</li>
<li>크리스마스 캐롤 연주시에, 음이 바뀔때마다 신호등 LED점멸 바꿔보기</li>
</ul>
<br>

<br>

<h3 id="미니-피아노-만들기"><a href="#미니-피아노-만들기" class="headerlink" title="미니 피아노 만들기"></a>미니 피아노 만들기</h3><p>패시브 부저와 스위치를 사용하여 미니 피아노를 만들어보자.</p>
<br>

<h4 id="schematic-1"><a href="#schematic-1" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/switch11.png"></p>
<br>

<h4 id="sketch-1"><a href="#sketch-1" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> BUZZER_PIN = <span class="number">11</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//                       도   레   미    파   솔   라   시</span></span><br><span class="line"><span class="comment">//                       C4   D4   E4   F4   G4   A4   B4</span></span><br><span class="line"><span class="keyword">int</span> octave_4[<span class="number">9</span>] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">261</span>, <span class="number">294</span>, <span class="number">330</span>, <span class="number">349</span>, <span class="number">392</span>, <span class="number">440</span>, <span class="number">494</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// tact switch pin 2~8 for Keyboard</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=<span class="number">8</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">pinMode</span>(i, INPUT_PULLUP);</span><br><span class="line">  &#125;</span><br><span class="line">  Serial.<span class="built_in">begin</span>(<span class="number">9600</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=<span class="number">8</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">digitalRead</span>(i) == HIGH) &#123;</span><br><span class="line">      <span class="built_in">tone</span>(BUZZER_PIN, octave_4[i]);</span><br><span class="line">      <span class="built_in">delay</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;  </span><br><span class="line">  <span class="built_in">noTone</span>(BUZZER_PIN);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="과제-2"><a href="#과제-2" class="headerlink" title="과제"></a>과제</h4><p>2<del>3명의 학생이 모여 2</del>3 옥타브를 사용하는 피아노 연주곡 만들어보기</p>
<br>

<br>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-09-07T04:23:00.000Z" title="2018. 9. 7. 오후 12:23:00">2018-09-07</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-11-17T03:41:47.224Z" title="2021. 11. 17. 오전 11:41:47">2021-11-17</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/arduino/">arduino</a></span><span class="level-item">2분안에 읽기 (약 373 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/09/07/Arduino-%ED%82%A4%ED%8C%A8%EB%93%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/">Arduino, 키패드 사용하기</a></h1><div class="content"><h3 id="4×4-매트릭스-키보드"><a href="#4×4-매트릭스-키보드" class="headerlink" title="4×4 매트릭스 키보드"></a>4×4 매트릭스 키보드</h3><p>키패드 입력값을 시리얼 모니터로 출력해보자.</p>
<br>

<h4 id="schematic"><a href="#schematic" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/keypad-01.jpg"></p>
<br>

<h4 id="Pin-Map"><a href="#Pin-Map" class="headerlink" title="Pin Map"></a>Pin Map</h4><table>
<thead>
<tr>
<th>Arduino</th>
<th>Keypad</th>
<th>일부 Keypad의 경우</th>
</tr>
</thead>
<tbody><tr>
<td>2</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>7</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>6</td>
</tr>
<tr>
<td>5</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>6</td>
<td>5</td>
<td>4</td>
</tr>
<tr>
<td>7</td>
<td>6</td>
<td>3</td>
</tr>
<tr>
<td>8</td>
<td>7</td>
<td>2</td>
</tr>
<tr>
<td>9</td>
<td>8</td>
<td>1</td>
</tr>
</tbody></table>
<blockquote>
<p>주의 : Keypad 제조회사에 따라 통상적인 배선 순서와는 반대로 해야하는 경우도 있다. 키패드의 단자에 단자번호가 적혀있지 않으므로, 일단 통상적인 배선순서에 따라 연결해보고 시리얼 모니터를 통해 출력되는 값을 보고 확인해야 한다.</p>
</blockquote>
<br>

<br>


<h3 id="라이브러리-추가하기"><a href="#라이브러리-추가하기" class="headerlink" title="라이브러리 추가하기"></a>라이브러리 추가하기</h3><p>Keypad 라이브러리는 아두이노 IDE에 기본으로 포함되어 있지 않으므로, 컴파일 전에 라이브러리를 추가한다.</p>
<p>1. <strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt; <strong>라이브러리 매니저</strong></p>
<ul>
<li>  검색창에서 keypad 검색</li>
<li>  Keypad by Mark Stanley, Alexander Brevig 라이브러리 설치</li>
</ul>
<p>2. <strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong> 에서 Keypad를 선택하면</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Keypad.h&gt;</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>  라이브러리가 스케치에 추가된다.</li>
</ul>
<br>

<br>

<h3 id="sketch"><a href="#sketch" class="headerlink" title="sketch"></a>sketch</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Keypad.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> byte ROWS = <span class="number">4</span>;      <span class="comment">//배열</span></span><br><span class="line"><span class="keyword">const</span> byte COLS = <span class="number">4</span>;      <span class="comment">//배열</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> keys[ROWS][COLS] = &#123; <span class="comment">//배열</span></span><br><span class="line">  &#123;<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;A&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;B&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;C&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;*&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="string">&#x27;D&#x27;</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line">byte rowPins[ROWS] = &#123;<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>&#125;; <span class="comment">//핀 지정</span></span><br><span class="line">byte colPins[COLS] = &#123;<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>&#125;; <span class="comment">//핀 지정</span></span><br><span class="line"></span><br><span class="line">Keypad keypad = Keypad( makeKeymap(keys), rowPins, colPins, ROWS, COLS );</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span></span>&#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);  <span class="comment">//시리얼 통신 9600</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">char</span> key = keypad.getKey();  <span class="comment">//읽어온 값을 key에 저장</span></span><br><span class="line">  <span class="keyword">if</span> (key)&#123;</span><br><span class="line">    Serial.println(key);  <span class="comment">//key값을 시리얼 모니터에 출력한다</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<p><strong>툴</strong>&gt; <strong>시리얼 모니터</strong>(혹은 Ctrl-Shift-M) 에서 확인한다.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-09-06T02:12:00.000Z" title="2018. 9. 6. 오전 10:12:00">2018-09-06</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-11-10T12:50:37.437Z" title="2021. 11. 10. 오후 8:50:37">2021-11-10</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/arduino/">arduino</a></span><span class="level-item">15분안에 읽기 (약 2198 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/09/06/Arduino-IR-%EB%A6%AC%EB%AA%A8%EC%BB%A8/">Arduino, IR 리모컨</a></h1><div class="content"><p>생활속에서 가장 밀접하게 쓰이는 IR(Infra Red, 적외선) 리모컨의 사용에 대해서 알아본다. 리모컨 작동을 위해서는 기본적으로 IR 신호를 내보내는 리모컨본체와 이 본체에서 내보내는 신호를 받아들이는 IR 리시버가 필요하다.</p>
<br>

<h3 id="기본-사용법"><a href="#기본-사용법" class="headerlink" title="기본 사용법"></a>기본 사용법</h3><h4 id="schematic"><a href="#schematic" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/remote.png" style="zoom:80%;">       <img src="/image/remote-controller.png" style="zoom: 67%;"></p>
<p>위 그림에서 IR 리시버에 있는 핀은, IR모듈이 아닌 단일 부품형태의 리시버 일때 핀의 순서이다.</p>
<br>

<h5 id="IR-리시버-모듈을-사용하는-경우"><a href="#IR-리시버-모듈을-사용하는-경우" class="headerlink" title="IR 리시버 모듈을 사용하는 경우"></a>IR 리시버 모듈을 사용하는 경우</h5><p>아두이노 학습용으로 판매하는 IR 리시버는 브레드보드에 바로 붙일 수 있도록 조그만 PCB가 달린 모듈의 형태로 판매되는 경우가 많으며, 이 경우에는 PCB보드에 써있는 글씨를 보고 각 핀에 맞게 아두이노에 연결해야한다. 문제는 PCB에 어느 핀인지를 나타내는 글자가 잘 안보인다는 것!</p>
<ul>
<li>Signal : PCB에 S라고 표기되어 있는 쪽</li>
<li>VCC : 대부분 가운데에 있는 경우가 많았음</li>
<li>GND : S라고 표기된 부분의 반대쪽이라고 생각하면 된다. (-) 마이너스 표기가 작게 되어 있음</li>
</ul>
<br>

<h4 id="Pin-Map"><a href="#Pin-Map" class="headerlink" title="Pin Map"></a>Pin Map</h4><table>
<thead>
<tr>
<th>Arduino</th>
<th>IR Reciever 모듈 사용시</th>
<th>IR Reciever 단일부품</th>
</tr>
</thead>
<tbody><tr>
<td>2</td>
<td>S (Signal)</td>
<td>(둥근 모양을 마주보고) 왼쪽</td>
</tr>
<tr>
<td>5V</td>
<td>표기 되어 있지 않음</td>
<td>(둥근 모양을 마주보고) 오른쪽</td>
</tr>
<tr>
<td>GND</td>
<td>-</td>
<td>(둥근 모양을 마주보고) 가운데</td>
</tr>
</tbody></table>
<br>

<h4 id="라이브러리-준비하기"><a href="#라이브러리-준비하기" class="headerlink" title="라이브러리 준비하기"></a>라이브러리 준비하기</h4><ul>
<li><p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt; <strong>라이브러리 매니저</strong></p>
<ul>
<li><p>  검색어 irremote 입력</p>
</li>
<li><p>  “IRremote by Armin Joachimsmeyer” 라이브러리 설치/업데이트</p>
</li>
</ul>
</li>
</ul>
<p><img src="/image/remote-library.png"></p>
<ul>
<li><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>IRremote</strong> 를 선택하면, IR remote 기능을 사용하는데 필요한 라이브러리가 스케치에 include 된다.</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;IRremote.h&gt;</span></span></span><br></pre></td></tr></table></figure>

<br>

<h4 id="리모컨-버튼의-고유값-알아내기"><a href="#리모컨-버튼의-고유값-알아내기" class="headerlink" title="리모컨 버튼의 고유값 알아내기"></a>리모컨 버튼의 고유값 알아내기</h4><ul>
<li>old MSB-first 32bit IR data code</li>
<li>new LSB-first 32bit IR data code</li>
</ul>
<p>리모컨 코드값은 위의 2가지 형태로 구분된다. 여기서는 기본적으로 MSB-first 방식을 사용하도록 한다. 아래 스케치를 이용하면 간단하게 MSB-first code 값만 출력된다. (시리얼 모니터 Baudrate 115200)</p>
<br>

<h5 id="sketch"><a href="#sketch" class="headerlink" title="sketch"></a>sketch</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;IRremote.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> RECV_PIN  = <span class="number">2</span>;                       <span class="comment">// IR 리시버 핀 설정</span></span><br><span class="line"><span class="function">IRrecv <span class="title">irrecv</span><span class="params">(RECV_PIN)</span></span>;                 <span class="comment">// IR 리시버 선언</span></span><br><span class="line">decode_results results;                  <span class="comment">// 수신결과 저장</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial.begin(<span class="number">115200</span>);</span><br><span class="line">  irrecv.enableIRIn();                   <span class="comment">// IR 리시버 시작</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(irrecv.decode(&amp;results)) &#123;          <span class="comment">// 리시버가 받은 값이 있으면</span></span><br><span class="line">    Serial.print(<span class="string">&quot;0x&quot;</span>);</span><br><span class="line">    Serial.println(results.value, HEX);  <span class="comment">// 버튼 HEX값을 콘솔에 출력</span></span><br><span class="line">    delay(<span class="number">500</span>);</span><br><span class="line"></span><br><span class="line">    irrecv.resume();                     <span class="comment">// 다음 값을 받기 위해 준비</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h5 id="serial-monitor"><a href="#serial-monitor" class="headerlink" title="serial monitor"></a>serial monitor</h5><p><img src="/image/remote-hex2.png"></p>
<p>출력값 중에서 앞부분의 <strong>0x</strong>를 제외한 6자리의 값(아래 그림에서 <strong>FFA25D</strong>)이 방금 누른 버튼의 고유 값이다.</p>
<br>

<h5 id="리모컨-고유값"><a href="#리모컨-고유값" class="headerlink" title="리모컨 고유값"></a>리모컨 고유값</h5><p>보유하고 있는 리모컨(XA5-14) 제품의 경우, 리모컨 타입은 NEC타입이며 각 버튼별 HEX값은 아래와 같다.</p>
<table>
<thead>
<tr>
<th>Remote Button</th>
<th>unsigned int data</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>0xFFA25D</td>
</tr>
<tr>
<td>2</td>
<td>0XFF629D</td>
</tr>
<tr>
<td>3</td>
<td>0XFFE21D</td>
</tr>
<tr>
<td>4</td>
<td>0XFF22DD</td>
</tr>
<tr>
<td>5</td>
<td>0XFF02FD</td>
</tr>
<tr>
<td>6</td>
<td>0XFFC23D</td>
</tr>
<tr>
<td>7</td>
<td>0XFFE01F</td>
</tr>
<tr>
<td>8</td>
<td>0XFFA857</td>
</tr>
<tr>
<td>9</td>
<td>0XFF906F</td>
</tr>
<tr>
<td>0</td>
<td>0XFF9867</td>
</tr>
<tr>
<td>*</td>
<td>0XFF6897</td>
</tr>
<tr>
<td>#</td>
<td>0XFFB04F</td>
</tr>
<tr>
<td>▲</td>
<td>0XFF18E7</td>
</tr>
<tr>
<td>▼</td>
<td>0XFFA4B5</td>
</tr>
<tr>
<td>◀</td>
<td>0XFF10EF</td>
</tr>
<tr>
<td>▶</td>
<td>0XFF5AA5</td>
</tr>
<tr>
<td>OK</td>
<td>0XFF38C7</td>
</tr>
</tbody></table>
<br>

<br>

<h3 id="리모컨-버튼값-시리얼모니터에-출력하기"><a href="#리모컨-버튼값-시리얼모니터에-출력하기" class="headerlink" title="리모컨 버튼값 시리얼모니터에 출력하기"></a>리모컨 버튼값 시리얼모니터에 출력하기</h3><h4 id="스케치에서-리모컨-버튼-정의하기"><a href="#스케치에서-리모컨-버튼-정의하기" class="headerlink" title="스케치에서 리모컨 버튼 정의하기"></a>스케치에서 리모컨 버튼 정의하기</h4><p>각 버튼의 Code값을 알아냈으면 스케치에서 리모컨의 버튼을 정의한다. 예를 들어, 리모컨 버튼 중에서 “1”을 눌렀을 때, 출력되는 HEX값이 “0xFFA25D” 였다면,</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_1 0xFFA25D</span></span><br></pre></td></tr></table></figure>

<p>리모컨에 있는 모든 버튼을 위와 같은 방법으로 정의한다. 버튼이 보통 10~20개 정도 되므로 상당히 귀찮은 작업이지만 사용하려는 버튼은 모두 정의를 해야한다. 배열을 통해 정의할 수도 있다. 또한 별도의 리모컨이 없으면 집에서 사용하는 리모컨을 사용해도 된다.</p>
<br>

<h4 id="sketch-1"><a href="#sketch-1" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;IRremote.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ir_Lego_PF_BitStreamEncoder.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_CH_M       0xFF6897  <span class="comment">// CH- Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_CH         0xFFB04F  <span class="comment">// CH Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_CH_P       0xFF18E7  <span class="comment">// CH+ Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_PREV       0xFF4AB5  <span class="comment">// PREV Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_NEXT       0xFF10EF  <span class="comment">// NEXT Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_PLAY_PAUSE 0xFF5AA5  <span class="comment">// PLAY PAUSE Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_M          0xFF38C7  <span class="comment">// - (VOL-) Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_P          0xFF38C8  <span class="comment">// + (VOL+) Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_EQ         0xFF38C9  <span class="comment">// EQ Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_100P       0xFF38CA  <span class="comment">// 100+ Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_200P       0xFF38CB  <span class="comment">// 100- Button</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_0 0xFF9867</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_1 0xFFA25D</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_2 0xFF629D</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_3 0xFFE21D</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_4 0xFF22DD</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_5 0xFF02FD</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_6 0xFFC23D</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_7 0xFFE01F</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_8 0xFFA857</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_9 0xFF906F</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> recvPin = <span class="number">2</span>;</span><br><span class="line"><span class="function">IRrecv <span class="title">irrecv</span><span class="params">(recvPin)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial.<span class="built_in">begin</span>(<span class="number">9600</span>);</span><br><span class="line">  irrecv.<span class="built_in">enableIRIn</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  decode_results results;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(irrecv.<span class="built_in">decode</span>(&amp;results)) &#123;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span>(results.value) &#123;</span><br><span class="line">      <span class="keyword">case</span> BTN_CH_M :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;CH-&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_CH :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;CH&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_CH_P :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;CH+&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_PREV :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;PREV&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_NEXT :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;NEXT&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_PLAY_PAUSE :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;PLAY/PAUSE&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_M :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">case</span> BTN_P :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_EQ :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;EQ&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_100P :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;100+&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_200P :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;200+&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">case</span> BTN_0 :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_1 :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_2 :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_3 :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">case</span> BTN_4 :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_5 :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_6 :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;6&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_7 :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;7&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">case</span> BTN_8 :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;8&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_9 :</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;9&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">delay</span>(<span class="number">500</span>);</span><br><span class="line">    irrecv.<span class="built_in">resume</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="과제-리모컨-계산기-만들기"><a href="#과제-리모컨-계산기-만들기" class="headerlink" title="과제: 리모컨 계산기 만들기"></a>과제: 리모컨 계산기 만들기</h4><br>

<br>

<h3 id="리모컨으로-서보모터-회전시키기"><a href="#리모컨으로-서보모터-회전시키기" class="headerlink" title="리모컨으로 서보모터 회전시키기"></a>리모컨으로 서보모터 회전시키기</h3><p>3개의 리모컨 버튼을 정의하여 각 버튼을 통해 서버모터를 회전시켜 본다.</p>
<ul>
<li>  초기 위치 90도</li>
<li>  Left 버튼을 누르면 5도 감소</li>
<li>  Right 버튼을 누르면 5도 증가</li>
<li>  OK 버튼을 누르면 90도 위치로 이동</li>
</ul>
<br>

<h4 id="schematic-1"><a href="#schematic-1" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/remote-servo.png"></p>
<br>

<h4 id="sketch-2"><a href="#sketch-2" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Servo.h&gt;</span></span></span><br><span class="line">Servo servomotor;</span><br><span class="line"><span class="keyword">int</span> servomotorPin = <span class="number">9</span>;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;IRremote.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ir_Lego_PF_BitStreamEncoder.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_1 0xFFA25D</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_2 0xFF629D</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_3 0xFFE21D</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_4 0xFF22DD</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_5 0xFF02FD</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_6 0xFFC23D</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_7 0xFFE01F</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_8 0xFFA857</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_9 0xFF906F</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_0 0xFF9867</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_A 0xFF6897  <span class="comment">// * Asterisk Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_P 0xFFB04F  <span class="comment">// # Pound Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_U 0xFF18E7  <span class="comment">// Up Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_D 0xFF4AB5  <span class="comment">// Down Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_L 0xFF10EF  <span class="comment">// Left Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_R 0xFF5AA5  <span class="comment">// Right Button</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BTN_O 0xFF38C7  <span class="comment">// OK Button</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> recvPin = <span class="number">2</span>;       <span class="comment">// IR signal 핀</span></span><br><span class="line"><span class="function">IRrecv <span class="title">irrecv</span><span class="params">(recvPin)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  servomotor.attach(servomotorPin);</span><br><span class="line">  irrecv.enableIRIn();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  decode_results results;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(irrecv.decode(&amp;results)) &#123;</span><br><span class="line">    <span class="keyword">switch</span>(results.value) &#123;</span><br><span class="line">      <span class="keyword">case</span> BTN_O :       <span class="comment">// OK버튼을 누르면 90도 위치로</span></span><br><span class="line">        a = <span class="number">90</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_L :</span><br><span class="line">        <span class="keyword">if</span>(a &gt; <span class="number">5</span>) &#123;</span><br><span class="line">          a = a - <span class="number">5</span>;     <span class="comment">// L버튼을 누르면 서버모터 5도씩 감소</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">          a = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> BTN_R :</span><br><span class="line">        <span class="keyword">if</span>(a &lt; <span class="number">175</span>) &#123;</span><br><span class="line">          a = a + <span class="number">5</span>;     <span class="comment">// R버튼을 누르면 서버모터 5도씩 증가</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">          a = <span class="number">180</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    servomotor.write(a);</span><br><span class="line">    delay(<span class="number">500</span>);</span><br><span class="line">    irrecv.resume();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="LSB-first-32bit-IR-data-code를-사용하려면"><a href="#LSB-first-32bit-IR-data-code를-사용하려면" class="headerlink" title="LSB-first 32bit IR data code를 사용하려면"></a>LSB-first 32bit IR data code를 사용하려면</h3><p>LSB-first 형태의 디코더 데이터를 사용해야하는 경우에는 라이브러리에서 제공하는 설명서(<a target="_blank" rel="external nofollow noopener noreferrer" href="https://arduino-irremote.github.io/Arduino-IRremote/index.html">IRremote: IRremote Arduino Library</a>)를 우선 숙지하여 사용토록한다. 여기서는 간단한 사용방법만 덧붙인다.</p>
<ol>
<li>예제&gt; IRremote&gt; SimpleReceiver를 선택하여 파일을 불러온다.<ul>
<li>SimpleReceiver.ino의 앞부분에, 사용하려는 리모컨의 프로토콜 타입을 선택할 수 있는 부분이 있다.</li>
<li>아두이노 실습용으로 판매되는 리모컨은 대부분 NEC타입이므로 <strong>변경할 필요가 없다.</strong></li>
<li>삼성이나 LG 등 집에서 사용하는 리모컨의 HEX값을 알아내려면, 사용하려는 제품의 제조사에 따라 주석처리되는 부분을 적절히 수정한다.</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><figcaption><span>SimpleReceiver.ino</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//#define DECODE_DENON        // Includes Sharp</span><br><span class="line">//#define DECODE_JVC</span><br><span class="line">//#define DECODE_KASEIKYO</span><br><span class="line">//#define DECODE_PANASONIC    // the same as DECODE_KASEIKYO</span><br><span class="line">//#define DECODE_LG</span><br><span class="line">#define DECODE_NEC          // Includes Apple and Onkyo</span><br><span class="line">//#define DECODE_SAMSUNG</span><br><span class="line">//#define DECODE_SONY</span><br><span class="line">//#define DECODE_RC5</span><br><span class="line">//#define DECODE_RC6</span><br><span class="line"></span><br><span class="line">//#define DECODE_BOSEWAVE</span><br><span class="line">//#define DECODE_LEGO_PF</span><br><span class="line">//#define DECODE_MAGIQUEST</span><br><span class="line">//#define DECODE_WHYNTER</span><br><span class="line"></span><br><span class="line">//#define DECODE_DISTANCE     // universal decoder for pulse width or pulse distance protocols</span><br><span class="line">//#define DECODE_HASH         // special decoder for all protocols</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>SimpleReceiver을 열면 PinDefinitionsAndMore.h가 동시에 열린다.<ul>
<li>이 파일은 사용하는 보드에 따라 Signal핀을 연결하는 핀 번호를 정의하고 있다.</li>
<li>아두이노 UNO의 경우 DEFAULT/AVR 플랫폼으로 정의되어 있으므로 IR Input핀은 2번을 사용한다. (아래 3번과정 참고: 시리얼 모니터를 열면, 연결된 보드에 따라 몇번 핀에 연결해야하는지 출력이 되므로, 이 과정에서 Signal을 어디에 연결해야하는지 확인할 필요는 없다.)</li>
<li>ESP32의 경우 IR Input이 GPIO 15번으로 지정되어 있다.</li>
</ul>
</li>
</ol>
<p><img src="/image/remote-pindefinitionandmore.png"></p>
<ol start="3">
<li>스케치를 업로드 한 후, 시리얼 모니터를 열고 Baud rate를 115200으로 설정한다. (Signal이 연결된 핀의 번호가 맞는지 확인)</li>
</ol>
<p><img src="/image/remote-serialmonitor.png"></p>
<ol start="4">
<li>리모컨의 버튼을 IR수신부를 향하여 누르면, 3줄이 출력됨<ul>
<li>첫번째 라인에 출력되는 Raw-Data 부분에서 앞부분의 <strong>0x</strong>를 제외한 8자리의 값(아래 그림에서 <strong>BA45FF00</strong>)이 방금 누른 버튼의 고유 값이다.</li>
<li>각 버튼을 차례대로 누르면서 버튼의 고유값을 기록한다. <a href="/attach/ir-remote-hex.pdf">다운로드</a></li>
</ul>
</li>
</ol>
<p><img src="/image/remote-hex.png"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-09-02T15:42:00.000Z" title="2018. 9. 2. 오후 11:42:00">2018-09-03</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-11-17T03:37:33.910Z" title="2021. 11. 17. 오전 11:37:33">2021-11-17</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/arduino/">arduino</a></span><span class="level-item">4분안에 읽기 (약 548 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/09/02/Arduino-1602-LCD-I2C/">Arduino, 1602 LCD (I2C)</a></h1><div class="content"><h3 id="1602-LCD-I2C"><a href="#1602-LCD-I2C" class="headerlink" title="1602 LCD (I2C)"></a>1602 LCD (I2C)</h3><h4 id="schematic"><a href="#schematic" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/1602lcd.png"></p>
<br>

<table>
<thead>
<tr>
<th>1602 LCD</th>
<th>SDA</th>
<th>SCL</th>
<th>VCC</th>
<th>GND</th>
</tr>
</thead>
<tbody><tr>
<td>Arduino</td>
<td>A4</td>
<td>A5</td>
<td>5V</td>
<td>GND</td>
</tr>
</tbody></table>
<br>

<h4 id="라이브러리-설치하기"><a href="#라이브러리-설치하기" class="headerlink" title="라이브러리 설치하기"></a>라이브러리 설치하기</h4><p><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong></p>
<ul>
<li>  Wire : 기본 내장 라이브러리</li>
<li>  LiquidCrystal I2C (by Frank de Brabander) 검색하여 설치</li>
</ul>
<br>

<h4 id="sketch"><a href="#sketch" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// I2C 1602 LCD (연결핀을 바꿀 수 없음)</span></span><br><span class="line"><span class="comment">// VCC-5V / GND-GND / SDA-A4 / SCL-A5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Wire.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;LiquidCrystal_I2C.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// i2c address 는 칩에 따라 0x20~0x27 혹은 0x3F값을 가짐</span></span><br><span class="line"><span class="function">LiquidCrystal_I2C <span class="title">lcd</span><span class="params">(<span class="number">0x27</span>, <span class="number">16</span>, <span class="number">2</span>)</span></span>;  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  lcd.init();               <span class="comment">// lcd 초기화</span></span><br><span class="line">  lcd.backlight();</span><br><span class="line"></span><br><span class="line">  lcd.print(<span class="string">&quot;I Love Steam!!&quot;</span>);   <span class="comment">// LCD창에 메시지 출력</span></span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 문자열의 길이 13개를 왼쪽으로 스크롤</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> pCount = <span class="number">0</span>; pCount &lt; <span class="number">13</span>; pCount++) &#123;  </span><br><span class="line">    lcd.scrollDisplayLeft();         <span class="comment">// 왼쪽으로 스크롤</span></span><br><span class="line">    delay(<span class="number">700</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 문자열 길이 13열 + 기본 16열 = 29개 위치를 오른쪽으로 스크롤</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> pCount = <span class="number">0</span>; pCount &lt; <span class="number">29</span>; pCount++) &#123; </span><br><span class="line">    lcd.scrollDisplayRight();       <span class="comment">// 오른쪽으로 스크롤</span></span><br><span class="line">    delay(<span class="number">700</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 왼쪽으로 16개 위치 스크롤하여 처음 위치로 이동</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> pCount = <span class="number">0</span>; pCount &lt; <span class="number">16</span>; pCount++) &#123;</span><br><span class="line">    lcd.scrollDisplayLeft();         <span class="comment">// 왼쪽으로 스크롤</span></span><br><span class="line">    delay(<span class="number">700</span>);</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  delay(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h4 id="주의사항"><a href="#주의사항" class="headerlink" title="주의사항"></a>주의사항</h4><ul>
<li>I2C 모듈에 점퍼선을 뺏다가 다시 끼우는 경우, 정상적인 상황에서도 LCD가 작동하지 않는 경우가 있음 (주로 첫번째라인에 ■■■■■■■■■■■■■■■■ 형태로 출력되는 오류가 발생됨)</li>
<li>이런 경우에는 배선을 모두 완료한 상태에서 스케치 업로드를 다시 하면 대부분 해결됨</li>
</ul>
<br>

<br>

<h4 id="여러-가지-문자열-출력해보기"><a href="#여러-가지-문자열-출력해보기" class="headerlink" title="여러 가지 문자열 출력해보기"></a>여러 가지 문자열 출력해보기</h4><ul>
<li>  첫 번째 행에 I Love Steam!!</li>
<li>  두 번째 행에 본인의 영문이름을 써서 스크롤 해보기</li>
<li>  두 번째 행에 출력하는 방법 : lcd.setCursor(0,1);</li>
</ul>
<br>

<br>

<h3 id="1602-LCD에-DS18b20-온도센서-값-출력하기"><a href="#1602-LCD에-DS18b20-온도센서-값-출력하기" class="headerlink" title="1602 LCD에 DS18b20 온도센서 값 출력하기"></a>1602 LCD에 DS18b20 온도센서 값 출력하기</h3><h4 id="schematic-1"><a href="#schematic-1" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/1602lcd-ds18b20.png"></p>
<br>

<h4 id="sketch-1"><a href="#sketch-1" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DS18b20 Temperature Sensor</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;OneWire.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;DallasTemperature.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TEMP_PIN 2</span></span><br><span class="line"></span><br><span class="line"><span class="function">OneWire <span class="title">oneWire</span><span class="params">(TEMP_PIN)</span></span>;</span><br><span class="line"><span class="function">DallasTemperature <span class="title">sensors</span><span class="params">(&amp;oneWire)</span></span>;</span><br><span class="line"><span class="keyword">float</span> celciusTemperature;</span><br><span class="line"></span><br><span class="line"><span class="comment">// I2C 1602 LCD (연결핀을 바꿀 수 없음)</span></span><br><span class="line"><span class="comment">// VCC-5V / GND-GND / SDA-A4 / SCL-A5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Wire.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;LiquidCrystal_I2C.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// i2c address 는 칩에 따라 0x27, 0x3F값을 가짐</span></span><br><span class="line"><span class="function">LiquidCrystal_I2C <span class="title">lcd</span><span class="params">(<span class="number">0x27</span>, <span class="number">16</span>, <span class="number">2</span>)</span></span>;  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);  </span><br><span class="line">  Serial.println(<span class="string">&quot;DallasTemperature IC Control&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Start up the Temperature Sensor library</span></span><br><span class="line">  sensors.begin();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// lcd 초기화</span></span><br><span class="line">  lcd.init();    </span><br><span class="line">  lcd.backlight();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  sensors.requestTemperatures();</span><br><span class="line">  celciusTemperature = sensors.getTempCByIndex(<span class="number">0</span>);</span><br><span class="line">  Serial.print(<span class="string">&quot;Temperature is: &quot;</span>);</span><br><span class="line">  Serial.println(celciusTemperature);</span><br><span class="line"></span><br><span class="line">  lcd.setCursor(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  lcd.print(<span class="string">&quot;Temperature : &quot;</span>);</span><br><span class="line">  lcd.setCursor(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">  lcd.print(celciusTemperature);</span><br><span class="line">  lcd.print(<span class="string">&quot;*C&quot;</span>);</span><br><span class="line">  delay(<span class="number">2000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-09-02T11:04:00.000Z" title="2018. 9. 2. 오후 7:04:00">2018-09-02</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-11-17T03:36:39.361Z" title="2021. 11. 17. 오전 11:36:39">2021-11-17</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/arduino/">arduino</a></span><span class="level-item">15분안에 읽기 (약 2210 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/09/02/Arduino-TM1637-%EB%AA%A8%EB%93%88-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/">Arduino, TM1637 모듈 사용하기</a></h1><div class="content"><h3 id="TM1637"><a href="#TM1637" class="headerlink" title="TM1637"></a>TM1637</h3><br>

<h4 id="schematic"><a href="#schematic" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/tm1637-01.png"></p>
<table>
<thead>
<tr>
<th>TM1637</th>
<th>CLK</th>
<th>DIO</th>
<th>VCC</th>
<th>GND</th>
</tr>
</thead>
<tbody><tr>
<td>Arduino</td>
<td>4</td>
<td>7</td>
<td>5V</td>
<td>GND</td>
</tr>
</tbody></table>
<br>

<h4 id="라이브러리-추가하기"><a href="#라이브러리-추가하기" class="headerlink" title="라이브러리 추가하기"></a>라이브러리 추가하기</h4><ol>
<li>파일&gt; 새파일&gt;</li>
<li><strong>스케치</strong>&gt; <strong>라이브러리 포함하기</strong>&gt; <strong>라이브러리 관리</strong>&gt;</li>
</ol>
<p><img src="/image/tm1637-02.png"></p>
<br>

<ol start="3">
<li>라이브러리 매니저 창이 뜨면, 검색란에 “tm1637”를 적어 넣음. tm1637관련 라이브러리가 5~6개정도 검색됨. TM1637 by Avishay Orpaz 라이브러리를 선택하여 설치</li>
</ol>
<p><img src="/image/tm1637-03.png"></p>
<p><br><br></p>
<h3 id="TM1637-숫자-표기-방법"><a href="#TM1637-숫자-표기-방법" class="headerlink" title="TM1637 숫자 표기 방법"></a>TM1637 숫자 표기 방법</h3><pre><code>for TM1637 by Avishay Orpaz library 
   *  A  *
   F     B
   *  G  *
   E     C
   *  D  *  DP
</code></pre>
<br>

<h4 id="sketch"><a href="#sketch" class="headerlink" title="sketch"></a>sketch</h4><p>“8.8.8.8.” → “ “ → “0123” → “dOnE”</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;TM1637Display.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Module connection pins (Digital Pins)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CLK 4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DIO 7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The amount of time (in milliseconds) between tests</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TEST_DELAY   2000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">uint8_t</span> SEG_DONE[] = &#123;</span><br><span class="line">  SEG_B | SEG_C | SEG_D | SEG_E | SEG_G,               <span class="comment">// d</span></span><br><span class="line">  SEG_A | SEG_B | SEG_C | SEG_D | SEG_E | SEG_F,       <span class="comment">// O</span></span><br><span class="line">  SEG_C | SEG_E | SEG_G,                               <span class="comment">// n</span></span><br><span class="line">  SEG_A | SEG_D | SEG_E | SEG_F | SEG_G                <span class="comment">// E</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">TM1637Display <span class="title">display</span><span class="params">(CLK, DIO)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">uint8_t</span> data[] = &#123; <span class="number">0xff</span>, <span class="number">0xff</span>, <span class="number">0xff</span>, <span class="number">0xff</span> &#125;;</span><br><span class="line">  <span class="keyword">uint8_t</span> blank[] = &#123; <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span> &#125;;</span><br><span class="line"></span><br><span class="line">  display.setBrightness(<span class="number">15</span>); <span class="comment">// 0 ~ 15 (15가 가장 밝음)</span></span><br><span class="line">  <span class="comment">// display.setBrightness(0x0f);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// All segments on</span></span><br><span class="line">  display.setSegments(data);            <span class="comment">// &quot;8.8.8.8.&quot;   </span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Selectively set different digits   // &quot;0123&quot;</span></span><br><span class="line">  data[<span class="number">0</span>] = display.encodeDigit(<span class="number">0</span>);</span><br><span class="line">  data[<span class="number">1</span>] = display.encodeDigit(<span class="number">1</span>);</span><br><span class="line">  data[<span class="number">2</span>] = display.encodeDigit(<span class="number">2</span>);</span><br><span class="line">  data[<span class="number">3</span>] = display.encodeDigit(<span class="number">3</span>);</span><br><span class="line">  display.setSegments(data);</span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Done!</span></span><br><span class="line">  display.setSegments(SEG_DONE);        <span class="comment">// &quot;dOnE&quot;</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>


<h3 id="0000-9999까지-나타내기"><a href="#0000-9999까지-나타내기" class="headerlink" title="0000~9999까지 나타내기"></a>0000~9999까지 나타내기</h3><br>

<h4 id="for-문을-이용하는-방법"><a href="#for-문을-이용하는-방법" class="headerlink" title="for() 문을 이용하는 방법"></a>for() 문을 이용하는 방법</h4><p>먼저 가장 간단하게 for문을 사용하여 0~9999까지의 숫자를 표시해보겠습니다.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;TM1637Display.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Module connection pins (Digital Pins)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CLK 4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DIO 7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">uint8_t</span> data[] = &#123; <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span> &#125;;  <span class="comment">// 초기 출력값 0000 </span></span><br><span class="line"><span class="keyword">int</span> seg3, seg2, seg1, seg0;</span><br><span class="line"></span><br><span class="line"><span class="function">TM1637Display <span class="title">display</span><span class="params">(CLK, DIO)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  display.setBrightness(<span class="number">15</span>);                  <span class="comment">// 0 ~ 15 (15가 가장 밝음)</span></span><br><span class="line">  <span class="comment">// display.setBrightness(0x0f);</span></span><br><span class="line"></span><br><span class="line">  Serial.begin(<span class="number">9600</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> digitValue = <span class="number">0</span>; digitValue &lt;= <span class="number">9999</span>; digitValue++) &#123;     <span class="comment">// 0~9999까지 1씩 증가시킴</span></span><br><span class="line">    seg0 = (digitValue / <span class="number">1000</span>) % <span class="number">10</span>; <span class="comment">// 4자리에서 1000의 자리 숫자 저장</span></span><br><span class="line">    seg1 = (digitValue / <span class="number">100</span>) % <span class="number">10</span>;  <span class="comment">// 4자리에서 100의 자리 숫자 저장</span></span><br><span class="line">    seg2 = (digitValue / <span class="number">10</span>) % <span class="number">10</span>;   <span class="comment">// 4자리에서 10의 자리 숫자 저장</span></span><br><span class="line">    seg3 = digitValue % <span class="number">10</span>;          <span class="comment">// 4자리에서 1의 자리 숫자 저장</span></span><br><span class="line"></span><br><span class="line">    data[<span class="number">0</span>]=display.encodeDigit(seg0);  <span class="comment">// 첫번째 FND에 1000의 자리 숫자배열</span></span><br><span class="line">    data[<span class="number">1</span>]=display.encodeDigit(seg1);  <span class="comment">// 두번째 FND에 100의 자리 숫자 배열</span></span><br><span class="line">    data[<span class="number">2</span>]=display.encodeDigit(seg2);  <span class="comment">// 세번째 FND에 10의 자리 숫자 배열</span></span><br><span class="line">    data[<span class="number">3</span>]=display.encodeDigit(seg3);  <span class="comment">// 네번째 FND에 1의 자리 숫자 배열</span></span><br><span class="line"></span><br><span class="line">    display.setSegments(data);</span><br><span class="line">    Serial.println(digitValue);</span><br><span class="line">    delay(<span class="number">10</span>);                       <span class="comment">// 10ms 마다 카운트</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>


<h4 id="millis-함수를-이용하는-방법"><a href="#millis-함수를-이용하는-방법" class="headerlink" title="millis() 함수를 이용하는 방법"></a>millis() 함수를 이용하는 방법</h4><p>millis() 함수를 이용하여 시간카운트를 통해 0~9999까지 카운트 해보는 방법도 있습니다.</p>
<p><strong>※ 주의: seg0, seg1, seg2, seg3 등의 변수값이 10<del>15사이의 값을 갖게되면 16진수(A</del>F)로 표현되므로, 각 변수는 10보다 작은 값을 갖도록 해야한다.</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> timer0_millis;   <span class="comment">// millis() 리셋을 위한 변수</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;TM1637Display.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Module connection pins (Digital Pins)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CLK 4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DIO 7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> previousTime, currentTime;      <span class="comment">// 현재시간, 현재시간(ms)</span></span><br><span class="line"><span class="keyword">int</span> timeValue;</span><br><span class="line"><span class="keyword">uint8_t</span> data[] = &#123; <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span> &#125;;  <span class="comment">// 초기 출력값 0000 </span></span><br><span class="line"><span class="keyword">int</span> seg3, seg2, seg1, seg0;</span><br><span class="line"></span><br><span class="line"><span class="function">TM1637Display <span class="title">display</span><span class="params">(CLK, DIO)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  display.setBrightness(<span class="number">15</span>);                  <span class="comment">// 0 ~ 15 (15가 가장 밝음)</span></span><br><span class="line">  <span class="comment">// display.setBrightness(0x0f);</span></span><br><span class="line"></span><br><span class="line">  Serial.begin(<span class="number">9600</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  currentTime = millis();                    <span class="comment">// 현재 시간값을 측정</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  if(currentTime - previousTime &gt;= 1000) &#123;   // 현재 시간값을 1s마다 1000씩 증가시킴</span></span><br><span class="line"><span class="comment">    previousTime = currentTime;</span></span><br><span class="line"><span class="comment">    timeValue = currentTime / 1000;          // 1s 마다 1000씩 증가된 숫자를 1000으로 나누어 줌.</span></span><br><span class="line"><span class="comment">                                             // (결과적으로 1s마다 1씩 증가된 숫자가 timeValue에 저장됨)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">  <span class="keyword">if</span>(currentTime - previousTime &gt;= <span class="number">100</span>) &#123;    <span class="comment">// 현재 시간값을 0.1s마다 100씩 증가시킴</span></span><br><span class="line">    previousTime = currentTime;</span><br><span class="line">    timeValue = currentTime / <span class="number">100</span>;           <span class="comment">// 0.1s 마다 100씩 증가된 숫자를 100으로 나누어 줌.</span></span><br><span class="line">                                             <span class="comment">// (결과적으로 0.1s마다 1씩 증가된 숫자가 timeValue에 저장됨)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  if(currentTime - previousTime &gt;= 10) &#123;     // 현재 시간값을 0.01s마다 10씩 증가시킴</span></span><br><span class="line"><span class="comment">    previousTime = currentTime;</span></span><br><span class="line"><span class="comment">    timeValue = currentTime / 10;            // 0.01s 마다 10씩 증가된 숫자를 10으로 나누어 줌.</span></span><br><span class="line"><span class="comment">                                                (결과적으로 0.01s마다 1씩 증가된 숫자가 timeValue에 저장됨)  </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line">    seg0 = (timeValue / <span class="number">1000</span>) % <span class="number">10</span>;          <span class="comment">// 현재 시간값 4자리에서 1000의 자리 숫자 저장</span></span><br><span class="line">    seg1 = (timeValue / <span class="number">100</span>) % <span class="number">10</span>;           <span class="comment">// 현재 시간값 4자리에서 100의 자리 숫자 저장</span></span><br><span class="line">    seg2 = (timeValue / <span class="number">10</span>) % <span class="number">10</span>;            <span class="comment">// 현재 시간값 4자리에서 10의 자리 숫자 저장</span></span><br><span class="line">	seg3 = timeValue % <span class="number">10</span>;                   <span class="comment">// 현재 시간값 4자리에서 1의 자리 숫자 저장</span></span><br><span class="line"></span><br><span class="line">    data[<span class="number">0</span>]=display.encodeDigit(seg0);       <span class="comment">// 첫번째 Segment에 1000의 자리 숫자 배열</span></span><br><span class="line">    data[<span class="number">1</span>]=display.encodeDigit(seg1);       <span class="comment">// 두번째 Segment에 100의 자리 숫자 배열</span></span><br><span class="line">    data[<span class="number">2</span>]=display.encodeDigit(seg2);       <span class="comment">// 세번째 Segment에 10의 자리 숫자 배열</span></span><br><span class="line">    data[<span class="number">3</span>]=display.encodeDigit(seg3);       <span class="comment">// 네번째 Segment에 1의 자리 숫자 배열</span></span><br><span class="line"></span><br><span class="line">    display.setSegments(data);</span><br><span class="line">    Serial.println(timeValue);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(currentTime&gt;=<span class="number">1000000</span>) &#123;                  <span class="comment">// 1,000,000ms(1000초) 후 millis() 리셋</span></span><br><span class="line">    timer0_millis = <span class="number">0</span>;</span><br><span class="line">    previousTime = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="millis-함수를-이용하여-분-초-시계-만들기"><a href="#millis-함수를-이용하여-분-초-시계-만들기" class="headerlink" title="millis() 함수를 이용하여 (분:초) 시계 만들기"></a>millis() 함수를 이용하여 (분:초) 시계 만들기</h3><p><strong>※ 주의: seg0, seg1, seg2, seg3 등의 변수값이 10<del>15사이의 값을 갖게되면 16진수(A</del>F)로 표현되므로, 각 변수는 10보다 작은 값을 갖도록 해야한다.</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> timer0_millis;   <span class="comment">// millis() 리셋을 위한 변수</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;TM1637Display.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Module connection pins (Digital Pins)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CLK 4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DIO 7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> previousTime, currentTime;      <span class="comment">// 현재시간, 현재시간(ms)</span></span><br><span class="line"><span class="keyword">int</span> timeValue;</span><br><span class="line"><span class="keyword">uint8_t</span> data[] = &#123; <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span> &#125;;  <span class="comment">// 초기 출력값 0000</span></span><br><span class="line"><span class="keyword">uint8_t</span> segto;</span><br><span class="line"><span class="keyword">int</span> seg3, seg2, seg1, seg0;</span><br><span class="line"><span class="keyword">int</span> initTime = <span class="number">5948</span>;                          <span class="comment">// 초기 시간 59분 48초</span></span><br><span class="line"></span><br><span class="line"><span class="function">TM1637Display <span class="title">display</span><span class="params">(CLK, DIO)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  display.setBrightness(<span class="number">7</span>);                   <span class="comment">// 0 ~ 15 (15가 가장 밝음)</span></span><br><span class="line">  <span class="comment">// display.setBrightness(0x0f);</span></span><br><span class="line"></span><br><span class="line">  seg0 = (initTime / <span class="number">1000</span>) % <span class="number">10</span>;              <span class="comment">// 초기 시간값 4자리에서 1000의 자리 숫자 저장</span></span><br><span class="line">  seg1 = (initTime / <span class="number">100</span>) % <span class="number">10</span>;               <span class="comment">// 초기 시간값 4자리에서 100의 자리 숫자 저장</span></span><br><span class="line">  seg2 = (initTime / <span class="number">10</span>) % <span class="number">10</span>;                <span class="comment">// 초기 시간값 4자리에서 10의 자리 숫자 저장</span></span><br><span class="line">  seg3 = initTime % <span class="number">10</span>;                       <span class="comment">// 초기 시간값 4자리에서 1의 자리 숫자 저장</span></span><br><span class="line"></span><br><span class="line">  Serial.begin(<span class="number">9600</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  currentTime = millis();                     <span class="comment">// 현재 시간값을 측정</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(currentTime - previousTime &gt;= <span class="number">1000</span>) &#123;    <span class="comment">// 현재 시간값을 0.1s마다 100씩 증가시킴</span></span><br><span class="line">    previousTime = currentTime;</span><br><span class="line">    timeValue = currentTime / <span class="number">1000</span>;           <span class="comment">// 0.1s 마다 100씩 증가된 숫자를 100으로 나누어 줌.</span></span><br><span class="line">                                              <span class="comment">// (결과적으로 0.1s마다 1씩 증가된 숫자가 timeValue에 저장됨)  </span></span><br><span class="line">    seg3++;</span><br><span class="line">    <span class="keyword">if</span>(seg3 == <span class="number">10</span>) &#123;</span><br><span class="line">      seg3 = <span class="number">0</span>;</span><br><span class="line">      seg2++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(seg2 == <span class="number">6</span> &amp;&amp; seg3 == <span class="number">0</span>) &#123;</span><br><span class="line">      seg2 = <span class="number">0</span>;</span><br><span class="line">      seg1++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(seg1 == <span class="number">10</span>) &#123;</span><br><span class="line">      seg1 = <span class="number">0</span>;</span><br><span class="line">      seg0++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(seg0 == <span class="number">6</span> &amp;&amp; seg1 == <span class="number">0</span>) &#123;</span><br><span class="line">      seg0 = <span class="number">0</span>;</span><br><span class="line">      seg1 = <span class="number">0</span>;</span><br><span class="line">      seg2 = <span class="number">0</span>;</span><br><span class="line">      seg3 = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    data[<span class="number">0</span>]=display.encodeDigit(seg0);         <span class="comment">// 첫번째 Segment에 1000의 자리 숫자 배열</span></span><br><span class="line">    data[<span class="number">1</span>]=display.encodeDigit(seg1);         <span class="comment">// 두번째 Segment에 100의 자리 숫자 배열</span></span><br><span class="line">    data[<span class="number">2</span>]=display.encodeDigit(seg2);         <span class="comment">// 세번째 Segment에 10의 자리 숫자 배열</span></span><br><span class="line">    data[<span class="number">3</span>]=display.encodeDigit(seg3);         <span class="comment">// 네번째 Segment에 1의 자리 숫자 배열</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 0.5초마다 콜론 깜박이기</span></span><br><span class="line">    segto = <span class="number">0x80</span> | display.encodeDigit(seg1);  <span class="comment">// 분과 초사이의 콜론(:) 표시</span></span><br><span class="line">    display.setSegments(&amp;segto,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">    delay(<span class="number">500</span>);                                <span class="comment">// 깜박임 딜레이</span></span><br><span class="line">    display.setSegments(data);</span><br><span class="line">    delay(<span class="number">500</span>);                                <span class="comment">// 깜박임 딜레이</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(currentTime&gt;=<span class="number">86400000</span>) &#123;                  <span class="comment">// 86,400,000ms(86,400초 = 24시간*60분/시간*60분/초) 후 millis() 리셋</span></span><br><span class="line">    timer0_millis = <span class="number">0</span>;</span><br><span class="line">    previousTime = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="다양한-표현방법-익히기"><a href="#다양한-표현방법-익히기" class="headerlink" title="다양한 표현방법 익히기"></a>다양한 표현방법 익히기</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;TM1637Display.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Module connection pins (Digital Pins)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CLK 4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DIO 7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The amount of time (in milliseconds) between tests</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TEST_DELAY   2000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">uint8_t</span> SEG_DONE[] = &#123;</span><br><span class="line">  SEG_B | SEG_C | SEG_D | SEG_E | SEG_G,               <span class="comment">// d</span></span><br><span class="line">  SEG_A | SEG_B | SEG_C | SEG_D | SEG_E | SEG_F,      <span class="comment">// O</span></span><br><span class="line">  SEG_C | SEG_E | SEG_G,                                <span class="comment">// n</span></span><br><span class="line">  SEG_A | SEG_D | SEG_E | SEG_F | SEG_G                <span class="comment">// E</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">TM1637Display <span class="title">display</span><span class="params">(CLK, DIO)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> k;</span><br><span class="line">  <span class="keyword">uint8_t</span> data[] = &#123; <span class="number">0xff</span>, <span class="number">0xff</span>, <span class="number">0xff</span>, <span class="number">0xff</span> &#125;;</span><br><span class="line">  <span class="keyword">uint8_t</span> blank[] = &#123; <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span> &#125;;</span><br><span class="line"></span><br><span class="line">  display.setBrightness(<span class="number">15</span>); <span class="comment">// 0 ~ 15 (15가 가장 밝음)</span></span><br><span class="line">  <span class="comment">// display.setBrightness(0x0f);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// All segments on</span></span><br><span class="line">  display.setSegments(data);</span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Selectively set different digits</span></span><br><span class="line">  data[<span class="number">0</span>] = display.encodeDigit(<span class="number">0</span>);</span><br><span class="line">  data[<span class="number">1</span>] = display.encodeDigit(<span class="number">1</span>);</span><br><span class="line">  data[<span class="number">2</span>] = display.encodeDigit(<span class="number">2</span>);</span><br><span class="line">  data[<span class="number">3</span>] = display.encodeDigit(<span class="number">3</span>);</span><br><span class="line">  display.setSegments(data);</span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  for(k = 3; k &gt;= 0; k--) &#123;</span></span><br><span class="line"><span class="comment">  display.setSegments(data, 1, k);</span></span><br><span class="line"><span class="comment">  delay(TEST_DELAY);</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">  display.clear();</span><br><span class="line">  display.setSegments(data+<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">  <span class="comment">// __23 -&gt; data+2: data배열 0123에서 앞에 두 자리 건너 띄운 후,</span></span><br><span class="line">  <span class="comment">// 2: 남은 숫자 중 2자리를 잘라서, 2: 앞의 2칸을 띄운 후 출력 </span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  display.clear();</span><br><span class="line">  display.setSegments(data+<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="comment">// _23_ -&gt; data+2: data배열 0123에서 앞에 두 자리 건너 띄운 후,</span></span><br><span class="line">  <span class="comment">// 2: 남은 숫자 중 2자리를 잘라서, 1: 앞의 1칸을 띄운 후 출력</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  display.clear();</span><br><span class="line">  display.setSegments(data+<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="comment">// _123 -&gt; data+1: data배열 0123에서 앞에 한자리 건너 띄운 후,</span></span><br><span class="line">  <span class="comment">// 3: 남은 숫자 중 3자리를 잘라서, 1: 앞의 1칸을 띄운 후 출력</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  display.clear();</span><br><span class="line">  display.setSegments(data+<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">  <span class="comment">// __3_ -&gt; data+2: data배열 0123에서 앞에 두 자리 건너 띄운 후,</span></span><br><span class="line">  <span class="comment">// 1: 남은 숫자 중 1자리를 잘라서, 2: 앞의 2칸을 띄운 후 출력 </span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  display.clear();</span><br><span class="line">  display.setSegments(data+<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="comment">// _3__ -&gt; data+2: data배열 0123에서 앞에 두 자리 건너 띄운 후,</span></span><br><span class="line">  <span class="comment">// 2: 남은 숫자 중 2자리를 잘라서(3이 마지막 자리이므로 1자리만 자름)</span></span><br><span class="line">  <span class="comment">// 2: 앞의 2칸을 띄운 후 출력 </span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Show decimal numbers with/without leading zeros</span></span><br><span class="line">  display.showNumberDec(<span class="number">0</span>, <span class="literal">false</span>); <span class="comment">// Expect: ___0</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.showNumberDec(<span class="number">0</span>, <span class="literal">true</span>);  <span class="comment">// Expect: 0000</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.showNumberDec(<span class="number">1</span>, <span class="literal">false</span>); <span class="comment">// Expect: ___1</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.showNumberDec(<span class="number">1</span>, <span class="literal">true</span>);  <span class="comment">// Expect: 0001</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.showNumberDec(<span class="number">301</span>, <span class="literal">false</span>); <span class="comment">// Expect: _301</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.showNumberDec(<span class="number">301</span>, <span class="literal">true</span>); <span class="comment">// Expect: 0301</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.clear();</span><br><span class="line">  display.showNumberDec(<span class="number">14</span>, <span class="literal">false</span>, <span class="number">2</span>, <span class="number">1</span>); <span class="comment">// Expect: _14_</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.clear();</span><br><span class="line">  display.showNumberDec(<span class="number">4</span>, <span class="literal">true</span>, <span class="number">2</span>, <span class="number">2</span>);  <span class="comment">// Expect: __04</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.showNumberDec(<span class="number">-1</span>, <span class="literal">false</span>);  <span class="comment">// Expect: __-1</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.showNumberDec(<span class="number">-12</span>);        <span class="comment">// Expect: _-12</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.showNumberDec(<span class="number">-999</span>);       <span class="comment">// Expect: -999</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.clear();</span><br><span class="line">  display.showNumberDec(<span class="number">-5</span>, <span class="literal">false</span>, <span class="number">3</span>, <span class="number">0</span>); <span class="comment">// Expect: _-5_</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.showNumberHexEx(<span class="number">0xf1af</span>);        <span class="comment">// Expect: f1Af</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.showNumberHexEx(<span class="number">0x2c</span>);          <span class="comment">// Expect: __2C</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.showNumberHexEx(<span class="number">0xd1</span>, <span class="number">0</span>, <span class="literal">true</span>); <span class="comment">// Expect: 00d1</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  display.clear();</span><br><span class="line">  display.showNumberHexEx(<span class="number">0xd1</span>, <span class="number">0</span>, <span class="literal">true</span>, <span class="number">2</span>); <span class="comment">// Expect: d1__</span></span><br><span class="line">  delay(TEST_DELAY);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Run through all the dots</span></span><br><span class="line">  <span class="keyword">for</span>(k=<span class="number">0</span>; k &lt;= <span class="number">4</span>; k++) &#123;</span><br><span class="line">    display.showNumberDecEx(<span class="number">0</span>, (<span class="number">0x80</span> &gt;&gt; k), <span class="literal">true</span>);</span><br><span class="line">    delay(TEST_DELAY);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  display.showNumberDecEx(<span class="number">3141</span>, (<span class="number">0x80</span> &gt;&gt; <span class="number">0</span>), <span class="literal">true</span>);</span><br><span class="line">  <span class="comment">// 3.141 -&gt; 0x80: dot출력, 0x40: 콜론출력, &gt;&gt;0: 첫번째 도트출력,</span></span><br><span class="line">  <span class="comment">// true: 빈자리 0으로 채우기</span></span><br><span class="line">     delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  display.showNumberDecEx(<span class="number">243</span>, (<span class="number">0x80</span> &gt;&gt; <span class="number">1</span>), <span class="literal">false</span>);</span><br><span class="line">  <span class="comment">// _2.43 -&gt; 0x80: dot출력, 0x40: 콜론출력, &gt;&gt;1: 두번째 도트출력,</span></span><br><span class="line">  <span class="comment">// true: 빈자리 0으로 채우기</span></span><br><span class="line">    delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  display.showNumberDecEx(<span class="number">314</span>, (<span class="number">0x80</span> &gt;&gt; <span class="number">2</span>), <span class="literal">false</span>);</span><br><span class="line">  <span class="comment">// _31.4 -&gt; 0x80: dot출력, 0x40: 콜론출력, &gt;&gt;2: 세번째 도트출력,</span></span><br><span class="line">  <span class="comment">// false: 빈자리 채우지 않기</span></span><br><span class="line">    delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  display.showNumberDecEx(<span class="number">52</span>, (<span class="number">0x80</span> &gt;&gt; <span class="number">3</span>), <span class="literal">false</span>);</span><br><span class="line">  <span class="comment">// __52. -&gt; 0x80: dot출력, 0x40: 콜론출력, &gt;&gt;3: 네번째 도트출력,</span></span><br><span class="line">  <span class="comment">// false: 빈자리 채우지 않기</span></span><br><span class="line">    delay(TEST_DELAY);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Brightness Test</span></span><br><span class="line">  <span class="keyword">for</span>(k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++)</span><br><span class="line">      data[k] = <span class="number">0xff</span>;           <span class="comment">// 모두 segment를 키는 data배열 선언</span></span><br><span class="line">  <span class="keyword">for</span>(k = <span class="number">0</span>; k &lt; <span class="number">7</span>; k++) &#123;</span><br><span class="line">    display.setBrightness(k);  <span class="comment">// 밝기를 7단계에 걸쳐 점점 밝게 출력 </span></span><br><span class="line">    display.setSegments(data);</span><br><span class="line">    delay(TEST_DELAY);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// On/Off test</span></span><br><span class="line">  <span class="keyword">for</span>(k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) &#123;</span><br><span class="line">    display.setBrightness(<span class="number">7</span>, <span class="literal">false</span>);  <span class="comment">// Turn off</span></span><br><span class="line">    display.setSegments(data);</span><br><span class="line">    delay(TEST_DELAY);</span><br><span class="line">    display.setBrightness(<span class="number">7</span>, <span class="literal">true</span>); <span class="comment">// Turn on</span></span><br><span class="line">    display.setSegments(data);</span><br><span class="line">    delay(TEST_DELAY);  </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Done!</span></span><br><span class="line">  display.setSegments(SEG_DONE);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// while(1);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2018-09-01T16:41:00.000Z" title="2018. 9. 2. 오전 12:41:00">2018-09-02</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-11-17T03:41:36.251Z" title="2021. 11. 17. 오전 11:41:36">2021-11-17</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/arduino/">arduino</a></span><span class="level-item">4분안에 읽기 (약 537 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/09/02/Arduino-%EC%98%A8%EC%8A%B5%EB%8F%84%EC%B8%A1%EC%A0%95-DHT22/">Arduino, 온도 및 습도 측정 (DHT22)</a></h1><div class="content"><h3 id="온습도-센서-DHT22"><a href="#온습도-센서-DHT22" class="headerlink" title="온습도 센서 DHT22"></a>온습도 센서 DHT22</h3><p>DHT22 센서를 이용하여 온도와 습도를 측정한다. </p>
<table>
<thead>
<tr>
<th>센서</th>
<th>DHT11</th>
<th>DHT22 (AM2302)</th>
</tr>
</thead>
<tbody><tr>
<td>사진</td>
<td><img src="/image/dht22-02.png" alt="DHT11"></td>
<td><img src="/image/dht22-01.png" alt="DHT22" style="zoom:50%;"></td>
</tr>
<tr>
<td>온도</td>
<td>0 ~ 50℃ (오차범위 ±2℃)</td>
<td>-40 ~ 100℃ (오차범위 ±0.5℃) (해상도 0.1℃)</td>
</tr>
<tr>
<td>습도</td>
<td>20 ~ 90% (오차범위 ±5%)</td>
<td>0 ~ 100% (오차범위 ±2~5%) (해상도 0.1%)</td>
</tr>
</tbody></table>
<br>

<h4 id="Pinout"><a href="#Pinout" class="headerlink" title="Pinout"></a>Pinout</h4><table>
<thead>
<tr>
<th>DHT22</th>
<th>DAT</th>
<th>VCC</th>
<th>GND</th>
</tr>
</thead>
<tbody><tr>
<td>Arduino</td>
<td>8</td>
<td>5V</td>
<td>GND</td>
</tr>
</tbody></table>
<br>

<h4 id="schematic"><a href="#schematic" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/dht22-05.png"></p>
<br>

<br>

<h4 id="라이브러리-준비하기"><a href="#라이브러리-준비하기" class="headerlink" title="라이브러리 준비하기"></a>라이브러리 준비하기</h4><h5 id="Case1-위-사진과-같은-형태의-DHT22-모듈을-사용하는-경우"><a href="#Case1-위-사진과-같은-형태의-DHT22-모듈을-사용하는-경우" class="headerlink" title="Case1: 위 사진과 같은 형태의 DHT22 모듈을 사용하는 경우"></a>Case1: 위 사진과 같은 형태의 DHT22 모듈을 사용하는 경우</h5><ul>
<li>라이브러리 매니저검색창에 검색어로 ‘AM2302’를 입력<ul>
<li><p>Groove Temperature And Humidity Sensor (by Seeed Studio) 설치</p>
<p><img src="/image/dht22-07.png"></p>
</li>
</ul>
</li>
</ul>
<br>

<h5 id="Case2-위-라이브러리로-동작하지-않는-경우"><a href="#Case2-위-라이브러리로-동작하지-않는-경우" class="headerlink" title="Case2: 위 라이브러리로 동작하지 않는 경우"></a>Case2: 위 라이브러리로 동작하지 않는 경우</h5><p>2개의 라이브러리가 필요합니다. </p>
<ul>
<li><p>먼저 DHT sensor library (by Adafruit)를 검색하여 설치를 클릭합니다.</p>
<p><img src="/image/dht22-03.png"></p>
</li>
</ul>
<ul>
<li><p>그러면 Dependencies for library DHT sensor library 창이 나타나는데, 이때 Install all을 클릭하면 2개의 라이브러리가 동시에 설치됩니다.</p>
<p><img src="/image/dht22-04.png"></p>
</li>
</ul>
<p>두 개의 라이브러리를 설치하기만 하면 되기때문에, 순서가 바뀌어도 관계없습니다.</p>
<br>

<br>

<h4 id="sketch"><a href="#sketch" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;DHT.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DHTPIN    8          <span class="comment">// data pin</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DHTTYPE   DHT22      <span class="comment">// change to DHT11 if you&#x27;re using the DHT11</span></span></span><br><span class="line">                             <span class="comment">// AM2301(DHT21) -&gt; DHT21, AM2302(DHT22) -&gt; DHT22</span></span><br><span class="line"><span class="function">DHT <span class="title">dht</span><span class="params">(DHTPIN, DHTTYPE)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);</span><br><span class="line">  dht.begin();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  delay(<span class="number">2000</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// float temperature = dht.readTemperature();</span></span><br><span class="line">  <span class="comment">// float humidity = dht.readHumidity();</span></span><br><span class="line">  <span class="keyword">float</span> temp_hum_val[<span class="number">2</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(!dht.readTempAndHumidity(temp_hum_val))&#123;</span><br><span class="line">    Serial.print(<span class="string">&quot;Temperature: &quot;</span>);</span><br><span class="line">    Serial.print(temp_hum_val[<span class="number">1</span>]);</span><br><span class="line">    Serial.print(<span class="string">&quot; *C\t,\t&quot;</span>);</span><br><span class="line">    Serial.print(<span class="string">&quot;Humidity: &quot;</span>);</span><br><span class="line">    Serial.print(temp_hum_val[<span class="number">0</span>]);</span><br><span class="line">    Serial.println(<span class="string">&quot; %&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span>&#123;</span><br><span class="line">    Serial.println(<span class="string">&quot;Failed to get temprature and humidity value.&quot;</span>);  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<br>

<h3 id="1602-LCD에-온도-습도-출력하기"><a href="#1602-LCD에-온도-습도-출력하기" class="headerlink" title="1602 LCD에 온도, 습도 출력하기"></a>1602 LCD에 온도, 습도 출력하기</h3><h4 id="schematic-1"><a href="#schematic-1" class="headerlink" title="schematic"></a>schematic</h4><p><img src="/image/dht22-06.png"></p>
<br>

<h4 id="sketch-1"><a href="#sketch-1" class="headerlink" title="sketch"></a>sketch</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;DHT.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DHTPIN    8          <span class="comment">// data pin</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DHTTYPE   DHT22      <span class="comment">// change to DHT11 if you&#x27;re using the DHT11</span></span></span><br><span class="line">                             <span class="comment">// AM2301(DHT21) -&gt; DHT21, AM2302(DHT22) -&gt; DHT22</span></span><br><span class="line"><span class="function">DHT <span class="title">dht</span><span class="params">(DHTPIN, DHTTYPE)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// I2C 1602 LCD (연결핀을 바꿀 수 없음)</span></span><br><span class="line"><span class="comment">// VCC-5V / GND-GND / SDA-A4 / SCL-A5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Wire.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;LiquidCrystal_I2C.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// i2c address 는 칩에 따라 0x27, 0x3F값을 가짐</span></span><br><span class="line"><span class="function">LiquidCrystal_I2C <span class="title">lcd</span><span class="params">(<span class="number">0x27</span>, <span class="number">16</span>, <span class="number">2</span>)</span></span>;  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Serial.begin(<span class="number">9600</span>);</span><br><span class="line">  dht.begin();</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// lcd 초기화</span></span><br><span class="line">  lcd.init();    </span><br><span class="line">  lcd.backlight();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  delay(<span class="number">2000</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// float temperature = dht.readTemperature();</span></span><br><span class="line">  <span class="comment">// float humidity = dht.readHumidity();</span></span><br><span class="line">  <span class="keyword">float</span> temp_hum_val[<span class="number">2</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(!dht.readTempAndHumidity(temp_hum_val))&#123;</span><br><span class="line">    Serial.print(<span class="string">&quot;Temperature: &quot;</span>);</span><br><span class="line">    Serial.print(temp_hum_val[<span class="number">1</span>]);</span><br><span class="line">    Serial.print(<span class="string">&quot; *C\t,\t&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    lcd.setCursor(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lcd.print(<span class="string">&quot;Temp. : &quot;</span>);</span><br><span class="line">    lcd.print(temp_hum_val[<span class="number">1</span>]);</span><br><span class="line">    lcd.print(<span class="string">&quot;*C&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Serial.print(<span class="string">&quot;Humidity: &quot;</span>);</span><br><span class="line">    Serial.print(temp_hum_val[<span class="number">0</span>]);</span><br><span class="line">    Serial.println(<span class="string">&quot; %&quot;</span>);</span><br><span class="line">      </span><br><span class="line">    lcd.setCursor(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    lcd.print(<span class="string">&quot;Humi. : &quot;</span>);</span><br><span class="line">    lcd.print(temp_hum_val[<span class="number">0</span>]);</span><br><span class="line">    lcd.print(<span class="string">&quot; %&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span>&#123;</span><br><span class="line">    Serial.println(<span class="string">&quot;Failed to get temprature and humidity value.&quot;</span>);  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/default-index/page/3/">이전</a></div><div class="pagination-next"><a href="/default-index/page/5/">다음</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/default-index/">1</a></li><li><a class="pagination-link" href="/default-index/page/2/">2</a></li><li><a class="pagination-link" href="/default-index/page/3/">3</a></li><li><a class="pagination-link is-current" href="/default-index/page/4/">4</a></li><li><a class="pagination-link" href="/default-index/page/5/">5</a></li></ul></nav></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-60x60 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="stemwith"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">stemwith</p><p class="is-size-6 is-block">de la Cruz a la fecha</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">48</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">3</p></a></div></div></nav><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/esp32/"><span class="level-start"><span class="level-item">ESP32</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/science/"><span class="level-start"><span class="level-item">Science</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/arduino/"><span class="level-start"><span class="level-item">arduino</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/categories/diy/"><span class="level-start"><span class="level-item">diy</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/drone/"><span class="level-start"><span class="level-item">drone</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/esp32/"><span class="level-start"><span class="level-item">esp32</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/office/"><span class="level-start"><span class="level-item">office</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/science/"><span class="level-start"><span class="level-item">science</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2021-12-02T09:27:53.000Z">2021-12-02</time></p><p class="title"><a href="/2021/12/02/ESP32-RC%EC%B9%B4/">ESP32, RC카</a></p><p class="categories"><a href="/categories/esp32/">ESP32</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-11-15T08:57:00.000Z">2021-11-15</time></p><p class="title"><a href="/2021/11/15/STEM-%EC%95%8C%EC%BD%94%EC%98%AC-%EB%9E%A8%ED%94%84-%EB%B0%9B%EC%B9%A8%EB%8C%80/">알코올 램프 안전 손잡이 받침대 3D프린팅</a></p><p class="categories"><a href="/categories/science/">Science</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-11-02T08:57:00.000Z">2021-11-02</time></p><p class="title"><a href="/2021/11/02/STEM-%EC%A0%84%EC%9E%90%EA%B8%B0%ED%8C%8C-%EA%B2%80%EC%B6%9C%EA%B8%B0/">전자기파 검출기 만들기</a></p><p class="categories"><a href="/categories/science/">Science</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-11-01T09:27:53.000Z">2021-11-01</time></p><p class="title"><a href="/2021/11/01/ESP32-DC%EB%AA%A8%ED%84%B0/">ESP32, DC모터, TB6612FNG</a></p><p class="categories"><a href="/categories/esp32/">ESP32</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2021-10-10T09:27:53.000Z">2021-10-10</time></p><p class="title"><a href="/2021/10/10/ESP32-nRF24L01/">ESP32, nRF24L01 무선통신</a></p><p class="categories"><a href="/categories/esp32/">ESP32</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">아카이브</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">12월 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">11월 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">10월 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">9월 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">11월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">10월 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">8월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">11월 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">10월 2019</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/09/"><span class="level-start"><span class="level-item">9월 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">11월 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">10월 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">9월 2018</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">6월 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">1월 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/11/"><span class="level-start"><span class="level-item">11월 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2012/10/"><span class="level-start"><span class="level-item">10월 2012</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">태그</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/3d/"><span class="tag">3D</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iot/"><span class="tag">iot</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rc/"><span class="tag">rc</span><span class="tag">5</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Welcome to &quot;stemwith&quot;" height="28"></a><p class="is-size-7"><span>&copy; 2021 chemidot</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>